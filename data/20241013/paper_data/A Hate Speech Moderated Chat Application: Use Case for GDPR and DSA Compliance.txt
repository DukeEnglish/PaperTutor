A Hate Speech Moderated Chat Application: Use Case
for GDPR and DSA Compliance
JanFilliesa,b,*,TheodorosMitsikasa,c,RalphSchäfermeierd andAdrianPaschkea,b,e
aInstitutfürAngewandteInformatik,Leipzig,Germany
bFreieUniversitätBerlin,Berlin,Germany
cNationalTechnicalUniversityofAthens,Zografou,Greece
dLeipzigUniversity,Leipzig,Germany
eFraunhofer-InstitutfürOffeneKommunikationssysteme,Berlin,Germany
ORCID(JanFillies): https://orcid.org/0000-0002-2997-4656,ORCID(TheodorosMitsikas):
https://orcid.org/0000-0002-7570-3603,ORCID(RalphSchäfermeier): https://orcid.org/0000-0002-4349-6726,
ORCID(AdrianPaschke): https://orcid.org/0000-0003-3156-9040
Abstract. Thedetectionofhatespeechortoxiccontentonlineisa define a comprehensive framework to counteract the dissemination
complexandsensitiveissue.Whiletheidentificationitselfishighly ofillegalandproblematiccontent.Itproposesalayeredframework
dependentonthecontextofthesituation,sensitivepersonalattributes thatdefinesdifferentrulesfordifferentscopes.Foradetailedview,
suchasage,language,andnationalityarerarelyavailableduetopri- refertoHusovecandRocheLaguna[10].Oneofthekeyproblems
vacyconcerns.Additionally,platformsstrugglewithawiderangeof oftheDSAisthatitdoesnotharmonizewhatcontentorbehavioris
localjurisdictionsregardingonlinehatespeechandtheevaluationof consideredillegal;thisremainsunderthesovereigntyofthemember
contentbasedontheirinternalethicalnorms.Thisresearchpresents states[10].
a novel approach that demonstrates a GDPR-compliant application Husovec and Roche Laguna [10] further states that a crucial as-
capable of implementing legal and ethical reasoning into the con- pectoftheDSAisthatonlineplatformsaccessibletominorsmust
tent moderation process. The application increases the explainabil- implementmeasurestoensureahighlevelofprivacy,safety,andse-
ity of moderation decisions by utilizing user information. Two use curity. Additionally, they note that hosting providers must conduct
cases fundamental to online communication are presented and im- faircontentmoderation.Uploadersareentitledtoanexplanationfor
plementedusingtechnologiessuchasGPT-3.5,SolidPods,andthe theproviders’actions,whethertheactionisbasedonlegalviolations
rulelanguageProva.Thefirstusecasedemonstratesthescenarioofa or terms of use violations. These aspects are not applicable to all
platformaimingtoprotectadolescentsfrompotentiallyharmfulcon- platformsanddonotexhaustivelycovereverythingthatneedstobe
tentbylimitingtheabilitytopostcertaincontentwhenminorsare fulfilled,buttheyarekeyaspectsofthenewregulation.
present.Thesecondusecaseaimstoidentifyandcounterproblem- TheDSAActlaysthegroundworkforanymoderationsystemand
aticstatementsonlinebyprovidingcounterhatespeech.Thecounter significantlyinfluencesthefutureofonlinecommunication.
hate speech is generated using personal attributes to appeal to the Another important legislation is the European GDPR (General
user.ThisresearchlaysthegroundworkforfutureDSAcompliance Data Protection Regulation) which was introduced in 2016 to set
ofonlineplatforms.Theworkproposesanovelapproachtoreason guidelines for personal data protection. These guidelines cover all
withindifferentlegalandethicaldefinitionsofhatespeechandplan majorareasoflife,settingstandardsandrulesforhandlingpersonal
thefittingcounterhatespeech.Overall,theplatformprovidesafit- data.AkeyaspectofGDPRistheabilitytoconsenttoandrevoke
tedprotectiontousersandamoreexplainableandindividualizedre- consentfordataprocessing.Inthecaseofdataprocessingthrougha
sponse.Thehatespeechdetectionservice,thechatplatform,andthe datacontroller,itisnecessaryfortheuser(datasubject)tobeable
reasoninginProvaarediscussed,andthepotentialbenefitsforcon- toconsenttoorrejecttheprocessing(EuropeanCommission,2016,
tentmoderationandalgorithmichatespeechdetectionareoutlined. Article6).Furthermore,theusermustalsohavetherighttoaccess
AselectionofimportantaspectsforDSAcomplianceisoutlined. allcollectedpersonaldatainamachine-readableformatandbeable
totransferittoadifferentdatacontroller(righttodataportability)
(EuropeanCommission,2016,Article20).
1 Introduction
Inthesensitivefieldofonlinecontentmoderation,dataprivacyis
highlyimportant.Ontheonehand,havingaccesstocertainpersonal
“Content moderation is the organized practice of screening user-
informationofstakeholdersinanonlineconversationcanenablean
generated content” [25]. It is a highly sensitive issue that directly
unbiasedandreliablesystemtobemorepreciseandfairinperform-
influencesaperson’sonlinesafety.
ing automated moderation, as well as providing effective counter-
TheDigitalServicesAct(DSA)wasadoptedinOctober2022and
measuresagainsthatespeech.Ontheotherhand,thispersonalinfor-
hasbeenapplicablesinceFebruary2024.ThegoaloftheDSAisto
mationcanbeverysensitive,necessitatingstrictguidelinesonhow
∗CorrespondingAuthor.Email:fillies@infai.org to handle it and in what context. Managing and moderating online
4202
tcO
01
]AM.sc[
1v31770.0142:viXrawrittencontentrequiresrobustproceduresthatadheretoGDPRreg- modeling,andHayashiandSatoh[8]presentedaplanningmethod
ulations,ensuringthatuserdataisprotectedwhilemaintainingasafe forlegalandethicalnorms.
environment.Onlineplatformsarebalancingbetweeninternalcom- Twomainworksinthefieldcouldbeestablished.Firstly,Schäfer-
munityguidelines,andthejurisdictionscoveringtheusersandorga- meieretal.[28]proposedadistributeddatawalletusecasethatis
nizations,thesearedriversofthecomplexityoftheproblem. GDPR-compliant,comparingtwodifferentapproachesbyapplying
Ifamoderationsystemneedstousepersonaldataoronlinecom- AspectOWLandProvaforthemodelingandimplementation.Aspec-
municationingeneral,itmustcomplywiththeseregulations.There- tOWLisamonotoniccontextualizedontologylanguagethatfocuses
fore,itshouldbeabletoimplementdifferentlevelsofpoliciesand ontherepresentationofdynamicstatetransitionsandknowledgere-
handletherangeofcomplexitiesoccurringwithinthesystem.This tentionbywrappingpartsoftheontologyinisolatedcontexts.Incon-
starts with the simple execution of ground rules and extends to in- trast,Provahandlesstatetransitionsatruntimeusingnon-monotonic
stanceswhererulesareoverridden,establishingahierarchythatpri- statetransitionsemantics.Theyanalyzedtwousecases:oneprovid-
oritizessomerulesoverothersdependingonthesituation. ingapersonalizedsearchandtheotheroutliningtheprocessofshar-
This research establishes a system for GDPR-compliant content ing pictures via a wallet-enabled sharing app. Both use cases were
monitoringcapableofrepresentingnon-monotonicstatesandfulfill- implementedandevaluatedonaspectssuchashumanandmachine-
ingthementionedkeyaspectsoftheDSA.Tothisend,wepresent readability,manageability,andtheuseofopenstandardtechnology.
twodifferentusecases(UC)forhatespeechdetectioninonlinecha- OneofthefindingswasthatAspectOWLissuitableforspecifying
troomsmodeledusingtherulelanguageProva,SolidPods,GPT-3.5 the ontological domain model, while Prova is a more practical ap-
based hate speech detection and personalized counter hate speech proachforreal-worldapplications,includingtheinteractionbetween
generation.Theusecasesincludetypicalstakeholderssuchasusers, involvedparties.
theplatform,anddatacontrollers.Accesscontrolandmoderationare ThesecondresearchbyMitsikasetal.[19]presentsamedicaldata
realizedusingconceptssuchasuserconsent,thepurposeofaccess, accessusecasecompliantwithGDPRlegalrules,alsoimplemented
and the role of the party requesting access. Prova and Solid have using Prova. It demonstrates a scenario of a patient consenting to
been used in various domains and similar contexts, demonstrating medical data sharing. The data is used for a specific purpose, and
their versatility and effectiveness in applications requiring compli- caseswereconsideredwherethetypicalrulesareoverridden,thereby
ancewithdataprotectionregulations.Thesystemiscombinedand adjustingtheaccessrights.
demonstrated in a prototype implementing GDPR-compliant data Thiscurrentresearchusesmodernalgorithmsforhatespeechde-
sharingforcontentmonitoring,usingpersonalattributesduringmod- tection and builds upon the works by Schäfermeier et al. [28] and
erationandautomaticcounterhatespeechgeneration.Theprototype Mitsikasetal.[19],butalsoothers,asHayashietal.[9].Itfollows
isavailablefortesting.1 existingresearchintodesigningaGDPR-compliantapplication,also
Theresearchestablishedthefollowingmainresearchobjectives: choosingProvafordevelopmentduetoitspracticalityandscalabil-
ity.Thisresearchadvancesthefieldwithtwonewhighlyimportant
1. Alegalandethicalreasoningsystemforcontentmoderation. usecasesandincorporateskeyaspectsoftheDSAlegislation.
2. Counterhatespeechgenerationbasedonpersonalattributes.
3. AchatplatformforGDPRandDSAcompliantcontentmodera-
3 TechnicalPreliminaries
tion.
3.1 Prova
The paper is organized as follows: Sections 2 presents related
work.Section3detailsthetechnicalpreliminariessuchasProvaand Provaisbotha(Semantic)Webrulelanguageandadistributed(Se-
Solid.FollowedbySection4outliningbothusecases.Section5de- mantic)Webruleengine.Itsupportsreactionrulebasedworkflows,
scribestheimplementationoftheprototype.InSection6thework eventprocessing,andreactiveagentprogramming.ItintegratesJava
andethicalconsiderationsarediscussed.Followedlastlybethecon- scriptingwithderivationandreactionrules,andmessageexchange
clusionandfutureworkinSection7. withvariouscommunicationframeworks[14,12,21].
Syntactically, Prova builds upon the ISO Prolog syntax and ex-
tendsit,notablywiththeintegrationofJavaobjects,typedvariables,
2 RelatedWork
F-Logic-style slots, and SPARQL and SQL queries. Slotted terms
inProvaareimplementedusingthearrowexpressionsyntax‘->’as
Inthefieldofhatespeechdetection,historically,transformer-based
in RIF and RuleML, and can be used as sole arguments of predi-
architectures[20]andfine-tuningoftransformer-basedmodels[5],
cates.TheycorrespondtoaJavaHashMap,withthekeyslimitedto
specificallyBERT[2],haveyieldedbetterperformancecomparedto
Stings[13].
traditionalmachinelearningmodels[16,1,18].Inrecentyears,pre-
Semantically, Prova provides the expressiveness of serial Horn
trained large language models have gained traction [11, 15] due to
logicwithalinearresolutionforextendedlogicprograms(SLEreso-
theirperformanceandsimplesetup.LLMshavealsoprovenefficient lution)[22],extendingthelinearSLDNFresolutionwithgoalmem-
inthefieldofcounterhatespeechgeneration[29],withthecapability oizationandloopprevention.Negationasfailuresupportintherule
toeffectivelygeneratepersonalizedcounterhatespeech[3]. bodycanbeaddedtoarulebasebyimplementingitusingthecut-fail
In the area of compliance checking, many different works have testasfollows:
beenestablishedinrecentyears[27,7,9].Satohetal.[27]proposed
not(A) :- derive(A), !, fail().
a legal reasoning system for decision-making by judges under in- not(_).
complete information. Hayashi et al. [9] established a compliance
mechanismforAIagentplanninginamulti-agentsetting.Goossens Prova implements an inference extension called literal guards,
et al. [6] showed the possibilities of using GPT-3 in decision logic specified using brackets. By using guards, we can ensure that dur-
ing unification, even if the target rule matches the source literal,
1http://81.169.159.230:7000/ further evaluation is delayed unless a guard condition evaluates toFigure1. Sequencediagramoftheinitialaccountcreationstepseveryuser
true. Guards can include arbitrary lists of Prova literals including
hastodoinbothusecases. Figure2. Sequencediagramofthestepsdonetojoinachatroom.Every
Java calls, arithmetic expressions, relations, and even the cut oper-
userhastodothesestepsinbothusecases.
ator.Provaguardsplayevenamoreimportantroleinmessageand
eventprocessing,astheyallowthereceivedmessagestobeexamined
beforetheyareirrevocablyaccepted.Theguardsaretestedrightafter
patternmatchingbutbeforeamessageisfullyaccepted,sothatthe
neteffectoftheguardistoserveasanextensionofpatternmatching
forliterals[13,23].
3.2 Solid
TheSolidplatform,firstintroducedbySambraetal.[26],isadecen-
tralizedplatformusingW3Cstandardstocreatesocialapplications
basedonlinkeddataapproaches.Linkeddataisaformofdatain-
terlinked with each other and accessible via semantic queries [24].
AsdescribedbyMansouretal.[17],followingtheconceptofSolid,
thedataofeachuserisstoredindependentlyofthesourcesthatcre- Figure3. Sequencediagramofleavingachatroom.Stepseveryuserhasto
atedit,thedatabroker,andtheenddataconsumer.Eachuserowns doinbothusecases.
andmanagestheirownpersonalonlinedatastore(Pod)whereallper-
sonaldataisstored.AuserisnotlimitedtoonePodoronehosting
provider,astheycanself-hosttheirPodsorchoosebetweendifferent
hostingproviders.
Applicationsthatwanttoworkwithandaccessthedatauseproto-
colsbasedonW3Cstandards.Mansouretal.[17]furtherstatesthata
decentralizedauthenticationandaccesscontrolmechanismlaysthe
groundworkforstrongprivacyprotection.Thedecentralizedarchi-
tectureallowsapplicationstoaccesstheuserdataindependentofthe
hostingoption,whileusershavefullcontroloverandaccesstotheir
dataatanypoint,withthepossibilitytoswitchprovidersorwithdraw
consentforsharingdata.
4 UseCases
Two data wallet use cases are described in terms of interaction se-
quences and data exchange between the different parties involved.
Theusecasesinvolvedatawalletownerssharingpersonaldataus-
ingrelayingpartiesthatprovidespecializedapplications,suchasan
Age-basedContentModerationapplicationandaHateSpeechClas- withtheSolidFpilgautrfoer4m..TSehqeuesnoclieddpialgartafmormoftrheepUreCse1n.tsthedatacon-
sificationcombinedwithaContextualizedSemanticCounterNarra- trollerinthissetting,storingthepersonaldataandmanagingitsac-
tiveGeneration. cess.Figure2depictstheprocessofauserloginintothechatroom,
providingconsentforaccessingpersonaldatatothesolidinstance,
4.1 GeneralSteps andfinallyjoiningaspecificchatroom.Lastly,Figure3istheprocess
ofleavingthechatroom,withdrawingtheconsenttouserthepersonal
Certainstepsapplytobothusescases.Figure1referstotheinitial data.Inallfigures,therequestsarerepresentedbysolidarrowsand
steps a user and the platform has to perform to create and register theresponsesbydottedarrows.4.2 UseCase1:Age-basedContentModeration
The following use case outlines the scenario in which a platform
needstoadjustthevisibilityofcertaincontent(e.g.,highlyoffensive
content)assoonasadolescentsentertheircommunicationplatform.
Theuserandplatformbothneedtobeloggedintothedatacontroller,
andconsentmustbegranted.
TheUseCase:Aminor(age14)joinsachatroom.InGermany,at
theageof14andyounger,anindividualisconsideredachild.The
platformmadetheinternaldecisiontoprotectthechildbylimiting
allhighlytoxicstatements(e.g.,Holocaustdenial)postedtothechat
duringthepresenceofaminor.
4.2.1 Interactionsequencesanddataexchange:
SeeFigure4forthesequencediagramwithoutthelogin,logout,or
4.3.1 Interactionsequencesanddataexchange:
Figure5. SequencediagramoftheUC2.
accountcreation.
SeeFigure5forthesequencediagramwithoutthelogin,logout,or
– Theuserlogsintothechatplatformandprovidesconsentfortheir accountcreation.
datatobeaccessedandjoinsachatroom.
– A harmful user posts a statement denying the existence of the
– Thechatplatformrequeststhedatacontrollertoprovideinforma-
Holocaust.
tioniftheuserisaminorbasedonthecountryoforiginandthe
– Theplatformrequestsinformationfromthedataprovidertode-
personalageoftheuser.
termineifthestatementviolatestheirguidelinesorlocallawsreg-
– Wheneveramessageissent,aslongastheuserispresentinthe
ulatesuchstatements.
chatroom,theplatformcanlimitthepostedcontent.
– Basedontheinput,theplatformprovidesfeedbackthatthestate-
– Whentheuserleavesthechatroom,withdrawingtheirconsentfor
mentisproblematicnotonlybasedoninternalguidelinesbutalso
thedatatobeaccessed,thechatisopenedupforcontentsuitable
duetolocaljurisdiction.
foradults.
– Theplatformrequeststhefirstlanguageandculturalbackground
oftheuserfromthedatacontroller.
4.3 UseCase2:ContextualizedSemanticHate – With this information, the platform delivers understandable
SpeechClassificationCombinedwithCounter counterhatespeechandprovidescontextastowhythepostwas
NarrativeGeneration problematic.
Thisusecasefocusesonthemomentanadultuserofanonlineplat-
formwritesaproblematicstatement,suchasdenyingtheHolocaust,
5 Implementation
tootheradults.Inthissetting,theplatformneedstomakemultiple
decisions.Firstly,isthemessagelegalforthepersontopublishhere? 5.1 Architecture
Secondly, is the statement against its internal guidelines? Thirdly,
AsdepictedinFigure6,theprototypeintegratesthechatplatform,
howtobestaddressthestatement.
the data controller (Solid), a hate speech detection service, and a
AfterthemessageisclassifiedasdenyingtheHolocaust,tomake
Compliance Check implemented with Prova. All services are nec-
afittinglegaldecision,personalinformationsuchasthelocationof
essarytoensuresafeandGDPR-compliantcommunication.
theuserisneeded.Thisinformationisobtainedfromthedatacon-
Thechatplatformservesastheinterfacefortheuser,supporting
troller.Nowthestatementcanbeevaluatedagainstlegalandethical
real-timemessaging,andisdesignedtohandleconcurrentusers.If
guidelinesusingacompliancecheck.Lastly,basedonthepersonal
theusersendsamessagetotheplatform(1.inFigure6),theplatform
information,acontextualizedcounterhatespeechcanbegenerated.
canrequestpersonaldatafromtheuserviathedatacontroller,imple-
TheUseCase:Onachatplatform,aUScitizenfromCalifornia
mentedasaSolidapplication(2.).Afterthecontrollerprovidesthe
postsastatementdenyingtheHolocaust.Theplatformcanevaluate
information(3.),theplatformcanforwardthepersonalinformation
it based on the personal data of the user. In the US, this statement
andtheoriginalmessagetothehatespeechAPI(4.),whichevaluates
iscoveredunderfreedomofspeech,makingitlegalforhimtopost.
thecontentforhatespeech,suchasHolocaustdenial,andgenerates
However,duetotheirinternalguidelines,theplatformstilldecides
personalizedcounterhatespeech(5.).Basedontheclassificationre-
against the publication of the content. This reasoning is integrated
sult,theplatformcanthenrequesttheComplianceCheck(6.)tode-
intothecreatedcounterhatespeechinEnglish,explainingthereason
termineifthemessageviolateslegalorethicalstandards(7.).Based
for the message to be classified as problematic within the cultural
onallresponses,theplatformcanactaccordinglyandinteractwith
contextofAmerica.
theoriginalmessage(8.).
Inthesamesession,aGreekuserfromDelphipublishesastate-
ment also denying the Holocaust. The platform again evaluates it
based on the personal data of the user. In Greece, it is not legal to 5.2 Solid
denytheHolocaust.Theplatformthereforeblocksthecontentfrom
ThechatapplicationhasbeenimplementedasaReact2 application.
beingpostedandintegratesthisintothecreatedcounterhatespeech
FortheauthenticationandcommunicationwiththeSolidplatform,
in Greek, explaining the reason for the message to be classified as
problematicwithintheculturalcontextofGreece. 2https://react.devFigure7. Screenshotofthechatapplicationdisplayingawarningmessage
inGermanthatauser’spostcontainshatespeechviolatingcommunityguide-
linesandnationallawaswellasapersonalizedcounterhatespeechmessage
Inrupt’sJavaSF cig riu pr te C6 l. ienF tir Lst ibro rau rg ih esar ac nh dite tc ht eur Re eo ave cr tv Sie Dw K. 3wereused.
e5x.p4lainiHngathteedSepciesieocnh. Detection
User data relevant to the use of the chat are stored in the user’s
profile(whichisastandardSoliddatasetandcanbeassumedtoexist As shown by Kumarage et al. [15], OpenAI’s LLMs are able to
for every Solid user). The user’s name, age and location of origin achievestellarresultsinthetasksofhatespeechdetection.Tobuilda
arestoredasRDFtriplesusingthevCard4andFOAF5vocabularies, simplebuteffectiveclassifier,thisresearchutilizestheOpenAIAPI
respectively.UserdataretrievedfromtheSolidPodisretainedinthe withtheGPT-3.5-turbomodelasthefoundationforhatespeechde-
chatapplicationforthedurationofachatsessiononly.Nopersonal tection.Duetoitsrelativelyrecentrelease,size,economicconsider-
dataispermanentlystoredoutsideoftheuser’sSolidPod. ations,andperformanceonacademicbenchmarks[15].
Ekin[4]suggestsdifferentapproachestopromptengineering.In
his work, basic and advanced strategies are outlined. Due to hate
speechdetectionnotbeingthemainfocusofthiswork,onlybasic
5.3 Chat
methodsareused,applyingtemplatesanditerativetestingandrefine-
ment. The advanced strategies would involve utilizing temperature
Thechatapplicationhasbeenimplementedusingcomponentsfrom andtokencontrol,promptchaining,andadaptingprompts.Forthis
theChatUIKit6.Thepublicdemonstratorinstancecomespreconfig-
approach,templatesweredesignedandtheniterativelytestedandre-
uredwithfourchatrooms,eachofthemcontainingonevirtualchat fineduntiltheresultsweresatisfactorytothegroupofresearchers.
partnerwithdifferentageandlocationoforigin. Exampleprompt:“Analyzethefollowingtextforhatespeechand
Assoonasanewchatmessageissenttoanyofthechatrooms,the respond with ‘hate’ or ‘no-hate’. Provide a level of hate from 1-5,
text of the message is forwarded to the hate speech detection end- andindicateifHolocaustdenialispresent.”
pointwhereitisbeinganalyzedforhatefulcontent(seealsoSection In the field of counter hate speech generation, Wang et al. [29]
5.4).Thehatespeechdetectionendpointreturnsinformationabout showsthestrongcapabilitiesofautomaticcounterhatespeechgen-
whichkindofhatespeechwasdetected(ifany)and,ifapplicable,a erationutilizingGPT-3.5.Theyhighlightedthesecapabilitieswhile
numericalscorerangingover1-5indicatingtheseverityofthehate alsoraisingconcernsaboutthehighneedforwell-designedprompts.
speech. Dog˘ançandMarkov[3]demonstratethepossibilityofcreatinghigh-
If the outcome is positive, a request containing the hate speech qualitycounterhatespeechstatementsbyincludingpersonalizedas-
analysisresult,ageandlocationofthehatefulcomment’soriginator, pects.Basedonthesefindings,thisresearchagainutilizedtemplates
aswellasinformationaboutwhetherminorsarepresentinthechat- and iterative testing and refinement to design the counter-narrative
roomaresenttothelegalandethicalcompliancechecker.Thelatter generation.
onedecideswhetherthegiveninstanceofhatespeechconstitutesa Example prompt: “Generate a counter speech for the following
violationagainstethicalnorms(suchasthechatservice’scommunity text. You are an observer. The response should be between 50-100
guidelines)orlegalnorms(consideringtheuser’slocation)orboth. words, contextualizing the problematic statements for someone of
SeeSection5.5fordetailsonthecompliancecheckingprocess. {national_origin} origin and providing the counter speech in {lan-
In case of the presence of hate speech with ethical but without guage}.”
legalrelevance,thehatespeechmitigationendpointisrequestedto Thehatespeechdetectionandcounterhatespeechgenerationser-
generateappropriatecounterspeech. viceisprovidedviaaSwagger-basedAPIinterface.Theunderlying
Depending on the outcome, the chat application suppresses the codeisPython.ThecostpercalltotheOpenAIAPIis$0.50per1M
messageandpresentstheharmfullyactinguserwithawarningmes- tokens7.
sagecontainingdetailsaboutthereasonfortheinterventionandthe
counterspeechmessage.Figure7showsascreenshotoftheapplica-
5.5 ComplianceCheckingwithProva
tiondisplayingawarningmessageabouttheviolationofethicaland
legalrulesbyoneoftheusers’posts. Thecompliancecheckingmechanism,implementedinProva,evalu-
atespossibleviolationsoflegalandethicalstandards.Itfunctionsas
3https://docs.inrupt.com/developer-tools/ aserviceimplementedinProvaandJava,thatacceptsHTTPrequests
4https://www.w3.org/TR/vcard-rdf/ ofthefollowingsetofparameters:user_location,user_age,
5http://xmlns.com/foaf/spec/
6https://chatscope.io 7https://openai.com/api/pricing/chat_context,hate_speech_score,andhol.Theparam- ThefinalresponseisprovidedinJSONform,forexample
eterholcharacterizestheusermessageaboutthepresence(orab-
{
sence) of Holocaust denial, while the parameter chat_context
"response":{
denotes the general context of the chat, for example, if it is a chat
"legal_violation":{
whereminorsareparticipating.Whilenotallparametersareusedfor
"reason":"Holocaust Denial"
thisusecase,theyareincluded,aimingatfutureexpansion.
},
The parameters (and their values) are converted to Prova slots
"ethical_violation":{
(pairsofkeyandvalue),andarepassedasmessagestothetworule-
"reason":"Holocaust Denial",
basesthatperform,inturn,thelegalandtheethicalcheck.
"score":5
First,thelegalcheckerisinvoked,usingasubsetoftheslots,to
}
checkforpotentiallegalviolationsoftheusermessage.Thisdepends
}
onthemessagecontent,aswellastheuserlocation.Thecountries
}
whereHolocaustdenialisalegalviolationisprovidedthroughthe
illCountrypredicate.Inthiscase,threerulevariantsexist:1.if
the user message denies the Holocaust and the user location is in
6 DiscussionandEthicalConsideration
a country where Holocaust denial is illegal, 2. if the user message
deniestheHolocaustandtheuserlocationisnotinacountrywhere
The created platform establishes the primary requirements of the
Holocaustdenialisillegal,3.iftheusermessagedoesnotdenythe
GDPR(seeSection1)byseparatingtheindividualcomponentsinto
Holocaust
datasubjects,datacontrollers,dataprocessors,andanindependent
identificationservice.Itprovidesuserswithaclearoptiontonotonly
legalChecker() :-
consenttotheirdatasharingbutalsorevokeaccessatanytime.Ad-
rcvMult(X,P,F,executionRequest,
ditionally,bystoringtheshareddataintheirindividualSolidPods,
(cid:44)→{hol->hol_denial,user_location->L})
whichareprovider-independent,usershavefullcontroloverthetype
(cid:44)→[illCountry(L)],
ofdatasharedandallcurrentaccessrights.Whiletherearemoreas-
spawn(X,$Service,result,
pectstotheGDPR,thisresearchcoversthemainpartsandadoptsa
(cid:44)→["legal_violation",
similarapproachtootherGDPR-compliantapplications,suchasin
(cid:44)→"Holocaust Denial"]),
[28].
spawn(X,$Service,resume,[]).
Regarding the DSA, three key aspects were introduced in Sec-
tion1.Firstly,theDSAdoesnotharmonizewhatconstitutesillegal
legalChecker() :-
content.Theintroducedcompliancecheckercanincludedifferentle-
rcvMult(X,P,F,executionRequest,
galandethicaldefinitionsofhatespeech.Itisimportantthatpersonal
(cid:44)→{hol->hol_denial,user_location->L})
(cid:44)→[not(illCountry(L))], informationneededtomakethesedecisionscanbesharedsecurely
andlegallywithinthissystem,addressingamajoropenproblemof
spawn(X,$Service,resume,[]).
the DSA. While the focus of this application was not on modeling
all legislation regarding illegal content or ethical understanding of
legalChecker() :-
hate speech, the use cases were designed with a clear, small scope
rcvMult(X,P,F,executionRequest,{hol->H})
toshowthatthearchitectureandapplicationcanhandlesuchacom-
(cid:44)→[not_equal(H,hol_denial)],
plexsettingandcannowbeextrapolatedandgeneralizedtoabroader
spawn(X,$Service,resume,[]).
spectrum.
As shown above, the legal checker rulebase first selects the Secondly,basedontheDSA,onlineplatformsthatinvolveminors
relevant messages through pattern matching over the slots musttakemeasurestoensureahighlevelofprivacy,safety,andse-
(e.g., user_location->L), and then irrevocably ac- curity.Theproposedplatformdemonstratesthisinthefirstusecase,
cepts them if the guard (e.g., [not(illCountry(L))]) showingthatthesystemcanaccountforthepresenceofminorsand
is satisfied, proceeding with calling outside Java meth- adaptitsbehavioraccordingly.Ahighlevelofdatasecurityisuni-
ods that update the service’s answer. In particular, versallyfulfilledwiththeproposedSolidinfrastructureandGDPR-
spawn(X,$Service,result,["...", "..."]) compliant structuring. Similar to the second point, the application
calls the Java method result(String, String), doesnotintroduceacompleteandabsolutesolutiononhowtohan-
which updates the answer with a kind of violation dleminorswithinasocialplatformbutrathershowsawaytogener-
(legal_violation, or ethical_violation), while allyprovideprivacy,safety,andsecurity.Thisconceptmustnowbe
spawn(X,$Service,resume,[]) invokes the method adaptedandfittedtomoreadvancedfeatures.
resume() that invokes a notifyAll() Java call. The latter is Thirdly,hostingprovidersmustconductfaircontentmoderation.
implemented for performance reasons, resuming the execution of Users must be informed about moderation decisions, for example,
themainJavathread(asProvarunsondifferentthreads)assoonas whether the action is based on legal violations or violations of the
Provaupdatestheanswer.Thethirdruleexistsfortheperformance termsofuse.Thiskeyaspectiscoveredasshowninusecasetwo.
reasonsmentionedabove. Here, the user is not only informed if their content was removed
Afterthelegalcheckandthepotentialupdateoftheresponse,the basedonlegalorethicalconcernsbutalsoreceivesapersonalizedre-
ethicalcheckeriscalled,tofinalizetheresponse.Itcontainsanalo- sponseintheirnativelanguageandwithconsiderationoftheirsocial
gousrulesfortheethicalchecking,wherethelocationoftheuseris context,providedinnaturallanguage.Furthermore,itisimportantto
notchecked(Holocaustdenialisunethicalregardlessoftheuserlo- mentionthatpersonalinformationisusedintheethicalcompliance
cation),aswellasacheckforotherethicalviolationsdenotedbythe checkertoidentifyiflocallawwasbroken,makingitacontext-based
parameterhate_speech_score. hatespeechdetectionsystem.Contentmoderationisalwaysafinelinebetweenprotectingpeo- compliancechecker,extendingontheonetrialimplementation.Fur-
ple from online harm and limiting the ability to express oneself thermore,oneofthestrongsuitsthatneedtobeexploredisthepos-
freely.Thisresearchdevelopedatoolthatsupportscontentmoder- sibilityofusingpersonalinformationdirectlyintheLLMtoidentify
ation, emphasizing that the researchers advocate for human-in-the- context-based hate speech. The architecture could be expanded to
loopmoderationapproaches.ItispossiblethattheLLMwillmake alsoincludeahuman-in-the-loopaspectforbettersafetyandquality
classificationmistakes,thiscanonlybeultimatelysolvedbyahuman control.Theproposedsystemneedstobefurtherevaluatedregard-
intheloop.Sincebotharepronetoerror,amixedapproachseems ingitsusabilitybutalsoscalabilityandperformanceaspects.Lastly,
thebestsolution.Thisresearchisnotintendedtobeviewedasafully theapplicationcouldbeexpandeduponinthesenseofotherDSA
automaticsolution.Furthermore,theproposedsolutioncaninclude aspects.
contextual personal information to make more informed legal and
ethical decisions, distinguishing it from existing solutions that can
Acknowledgements
handleeitheramixtureorjustonetypeofinformation.
UsingLargeLanguageModels(LLMs)togeneratecounterspeech
ThisworkhasbeenpartiallyfundedbytheDeutscheForschungsge-
based on personal attributes is a very young research discipline.
meinschaft(DFG,GermanResearchFoundation)projectRECOMP
While initial studies show that it is possible, no large-scale testing
(DFG–GZ:PA1820/5-1)andbytheGermanFederalMinistryof
onthereliabilityorethicalaspectshasbeenconducted.Inthiswork,
EducationandResearch,project“TerminologyandOntology-Based
onlylanguageandcountryoforiginareusedforthegenerationpro-
Phenotyping(TOP)”(grantnumber:01ZZ2018).
cess,bothwithexplicit,alwaysrevocableconsent.The“language”
attributeisnecessarytoaddressthepersoninaformattheyunder-
standbest.Theattribute“countryoforigin”couldbemoreproblem- References
atic,asitmayresultinunfittingcounterhatespeech.However,this
[1] T. Caselli, V. Basile, J. Mitrovic´, and M. Granitzer. HateBERT:
riskisminimalconsideringthattheLLMsusedhavesafeguardsin
Retraining BERT for abusive language detection in English. In
placetopreventdiscriminationandhateintheirresponses. A.MostafazadehDavani,D.Kiela,M.Lambert,B.Vidgen,V.Prab-
Byintroducingalegalandethicalcompliancecheck,thisresearch hakaran,andZ.Waseem,editors,Proceedingsofthe5thWorkshopon
Online Abuse and Harms (WOAH 2021), pages 17–25, Online, Aug.
ensuresacleardistinctionbetweenlegalandethicalconsiderations,
2021. Association for Computational Linguistics. doi: 10.18653/v1/
whilealsoprotectinglegalandethicalstatements.Thisworkisinthe 2021.woah-1.3.URLhttps://aclanthology.org/2021.woah-1.3.
publicinterest,focusingprimarilyonlegislationsuchastheGDPR [2] J. Devlin, M.-W. Chang, K. Lee, and K. Toutanova. BERT: Pre-
andDSA.Theriskofsharingsensitivepersonaldataismoreman- training of deep bidirectional transformers for language understand-
ing. InJ.Burstein,C.Doran,andT.Solorio,editors,Proceedingsof
ageableduetothefullknowledge,control,andconsentoftheperson
the 2019 Conference of the North American Chapter of the Associ-
sharingthedata,incontrasttootherstandarddata-sharingpractices. ationforComputationalLinguistics:HumanLanguageTechnologies,
Volume 1 (Long and Short Papers), pages 4171–4186, Minneapolis,
Minnesota,June2019.AssociationforComputationalLinguistics.doi:
7 ConclusionandFutureWork 10.18653/v1/N19-1423.URLhttps://aclanthology.org/N19-1423.
[3] M.Dog˘ançandI.Markov. Fromgenerictopersonalized:Investigat-
TheresearchoutlinesaGDPR-compliantapplicationinthefieldof ing strategies for generating targeted counter narratives against hate
speech. InY.-L.Chung,H.Bonaldi,G.Abercrombie,andM.Guerini,
hate speech moderation. It lays the groundwork for key aspects of
editors, Proceedings of the 1st Workshop on CounterSpeech for On-
futureDSAcompliance.Twonewusecasesareintroducedandim- lineAbuse(CS4OA),pages1–12,Prague,Czechia,Sept.2023.Asso-
plementedusingPython,Prova,andJava.Thefirstusecasecoversa ciationforComputationalLinguistics. URLhttps://aclanthology.org/
2023.cs4oa-1.1.
keyrequirementregardingtheprotectionofminorsonlineintroduced
[4] S.Ekin. Promptengineeringforchatgpt:Aquickguidetotechniques,
by the DSA. The second one shows the possibility of fair content tips,andbestpractices,052023.
moderation. [5] J. Fillies, M. Hoffmann, and A. Paschke. Multilingual hate speech
The architecture consists of four components: a platform that detection: Comparison of transfer learning methods to classify ger-
man,italian,andspanishposts. In2023IEEEInternationalConfer-
servesastheinterfacetotheuserandmanagescommunicationwith
ence on Big Data (BigData), pages 5503–5511, Los Alamitos, CA,
theothertools,aSolidinstanceforaccess,permission,andstorageof USA,dec2023.IEEEComputerSociety. doi:10.1109/BigData59044.
personalizeduserdata,andidentificationoftheusers,anAPIthatde- 2023.10386244. URL https://doi.ieeecomputersociety.org/10.1109/
BigData59044.2023.10386244.
tectshatespeechandHolocaustdenialintextandgeneratescounter
[6] A.Goossens,S.Vandevelde,J.Vanthienen,andJ.Vennekens. GPT-
hatespeechbasedonpersonalattributes,andtheLegalandEthical 3fordecisionlogicmodeling. Proceedingsofthe17thInternational
ComplianceCheckerthatevaluatesspecificinstancesbasedonProva RuleChallengeand7thDoctoralConsortium@RuleML+RR2023co-
implementationfordifferentlegalandethicalscenarios.Thecompli- locatedwith19thReasoningWebSummerSchool(RW2023)and15th
DecisionCAMP2023aspartofDeclarativeAI2023,3485:1–14,2023.
ancecheckerisabletocontainformalizedlegislativerulesand,based
[7] G.Governatori,F.Olivieri,S.Scannapieco,andM.Cristani.Designing
onthecountryoforigin,identifyifthegivenstatementisconsidered forcompliance:Normsandgoals. InInternationalWorkshoponRules
illegal in a certain country (demonstrated in the case of Holocaust and Rule Markup Languages for the Semantic Web, pages 282–297.
Springer,2011.
denialinEurope).
[8] H.HayashiandK.Satoh. Onlinehtnplanningfordatatransferand
Thearchitectureisclearlysplitintothedifferentstakeholdersre- utilizationconsideringlegalandethicalnorms:Casestudy.InICAART
quiredbytheGDPR,andtherequiredrightstoconsentandwithdraw (1),pages154–164,2023.
consenttodatasharingarefulfilled. [9] H. Hayashi, T. Mitsikas, Y. Taheri, K. Tsushima, R. Schäfermeier,
G. Bourgne, J.-G. Ganascia, A. Paschke, and K. Satoh. Multi-agent
Ingeneral,theapplicationisthefirstknownprototypetoaddress
online planning architecture for real-time compliance. In Proceed-
thesechallengesarisingwiththeDSAandGDPRinthecontextof ingsofthe17thInternationalRuleChallengeand7thDoctoralCon-
contentmoderation.Itprovidesaworkingdemonstratorthatshows sortium RuleML+RR2023,volume3485.CEUR,2023. URLhttps:
theapplicabilityandfunctionalityoftheproposedarchitectureand //ceur-ws.org/Vol-3485/.
[10] M.HusovecandI.RocheLaguna. Digitalservicesact:Ashortprimer.
solutions.
MartinHusovecandIreneRocheLaguna,PrinciplesoftheDigitalSer-
In the future, more legal definitions need to be included in the vicesAct(OxfordUniversityPress,Forthcoming2023),2022.[11] Y.Kim,S.Park,Y.Namgoong,andY.-S.Han.ConPrompt:Pre-training EvaluatingGPT-3generatedexplanationsforhatefulcontentmodera-
alanguagemodelwithmachine-generateddataforimplicithatespeech tion,2023.
detection. InH.Bouamor,J.Pino,andK.Bali,editors,Findingsof
the Association for Computational Linguistics: EMNLP 2023, pages
10964–10980, Singapore, Dec. 2023. Association for Computational
Linguistics.URLhttps://aclanthology.org/2023.findings-emnlp.731.
[12] G.Kober,L.Robaldo,andA.Paschke. ModelingMedicalGuidelines
byProvaandSHACLAccessingFHIR/RDF.UseCase:TheMedical
ABCDEApproach.IndHealth2022,pages59–66.IOSPress,2022.
[13] A.Kozlenkov. ProvaRuleLanguageversion3.0User’sGuide,2010.
URLhttps://github.com/prova/prova/tree/master/doc.
[14] A. Kozlenkov, R. Penaloza, V. Nigam, L. Royer, G. Dawelbait, and
M.Schroeder. Prova:Rule-BasedJavaScriptingforDistributedWeb
Applications:ACaseStudyinBioinformatics.InT.Grust,H.Höpfner,
A.Illarramendi,S.Jablonski,M.Mesiti,S.Müller,P.-L.Patranjan,K.-
U.Sattler,M.Spiliopoulou,andJ.Wijsen,editors,CurrentTrendsin
Database Technology – EDBT 2006, pages 899–908, Berlin, Heidel-
berg,2006.Springer.ISBN978-3-540-46790-8.
[15] T.Kumarage,A.Bhattacharjee,andJ.Garland. Harnessingartificial
intelligencetocombatonlinehate:Exploringthechallengesandoppor-
tunitiesoflargelanguagemodelsinhatespeechdetection,2024.
[16] P. Liu, W. Li, and L. Zou. NULI at SemEval-2019 task 6: Trans-
ferlearningforoffensivelanguagedetectionusingbidirectionaltrans-
formers. InJ.May,E.Shutova,A.Herbelot,X.Zhu,M.Apidianaki,
andS.M.Mohammad,editors,Proceedingsofthe13thInternational
Workshop on Semantic Evaluation, pages 87–91, Minneapolis, Min-
nesota, USA, June 2019. Association for Computational Linguistics.
doi:10.18653/v1/S19-2011.URLhttps://aclanthology.org/S19-2011.
[17] E. Mansour, A. V. Sambra, S. Hawke, M. Zereba, S. Capadisli,
A.Ghanem,A.Aboulnaga,andT.Berners-Lee.Ademonstrationofthe
solidplatformforsocialwebapplications.InProceedingsofthe25thin-
ternationalconferencecompaniononworldwideweb,pages223–226,
2016.
[18] B. Mathew, P. Saha, S. M. Yimam, C. Biemann, P. Goyal, and
A.Mukherjee. Hatexplain:Abenchmarkdatasetforexplainablehate
speechdetection.ProceedingsoftheAAAIConferenceonArtificialIn-
telligence,35(17):14867–14875,May2021. doi:10.1609/aaai.v35i17.
17745.URLhttps://ojs.aaai.org/index.php/AAAI/article/view/17745.
[19] T.Mitsikas,R.Schäfermeier,andA.Paschke. Modelingmedicaldata
accesswithProva. NewFrontiersinArtificialIntelligence,page35,
2024.
[20] M.Mozafari,R.Farahbakhsh,andN.Crespi. Hatespeechdetection
andracialbiasmitigationinsocialmediabasedonbertmodel. PLOS
ONE,15(8):1–26,082020. doi:10.1371/journal.pone.0237861. URL
https://doi.org/10.1371/journal.pone.0237861.
[21] A.Paschke. RulesandLogicProgrammingfortheWeb,pages326–
381.Springer,BerlinHeidelberg,2011.ISBN978-3-642-23032-5.doi:
10.1007/978-3-642-23032-5_6.
[22] A. Paschke and M. Bichler. Knowledge representation concepts for
automatedSLAmanagement. DecisionSupportSystems,46(1):187–
205,2008.ISSN0167-9236.doi:10.1016/j.dss.2008.06.008.
[23] A.PaschkeandH.Boley. ReactionRuleML1.0forDistributedRule-
BasedAgentsinRuleResponder. InProceedingsoftheRuleML2014
ChallengeandtheRuleML2014DoctoralConsortium,hostedbythe
8th International Web Rule Symposium (RuleML 2014). CEUR.org,
2014.
[24] M.Ramachandran,N.Chowdhury,A.Third,J.Domingue,K.Quick,
and M. Bachler. Towards complete decentralised verification of
data with confidentiality: Different ways to connect solid pods and
blockchain. InCompanionproceedingsofthewebconference2020,
pages645–649,2020.
[25] S. T. Roberts. Content Moderation, pages 1–4. Springer In-
ternational Publishing, Cham, 2017. ISBN 978-3-319-32001-4.
doi:10.1007/978-3-319-32001-4_44-1. URLhttps://doi.org/10.1007/
978-3-319-32001-4_44-1.
[26] A.V.Sambra,E.Mansour,S.Hawke,M.Zereba,N.Greco,A.Ghanem,
D.Zagidulin,A.Aboulnaga,andT.Berners-Lee. Solid:aplatformfor
decentralizedsocialapplicationsbasedonlinkeddata. MITCSAIL&
QatarComputingResearchInstitute,Tech.Rep.,2016.
[27] K.Satoh,K.Asai,T.Kogawa,M.Kubota,M.Nakamura,Y.Nishigai,
K.Shirakawa,andC.Takano.PROLEG:animplementationofthepre-
supposedultimatefacttheoryofJapanesecivilcodebyprologtechnol-
ogy. InJSAIinternationalsymposiumonartificialintelligence,pages
153–164.Springer,2010.
[28] R.Schäfermeier,T.Mitsikas,andA.Paschke.ModelingaGDPRcom-
pliantdatawalletapplicationinProvaandAspectOWL. InRuleML+
RR(Companion),2022.
[29] H.Wang,M.S.Hee,M.R.Awal,K.T.W.Choo,andR.K.-W.Lee.