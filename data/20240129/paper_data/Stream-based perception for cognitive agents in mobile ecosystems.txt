AICommunications32(2019)271–286 271
IOSPress
TheVersionofRecordofthismanuscript
hasbeenpublishedandisavailablein
AICommunications,vol.32,no.4,pp.271-286(2019)
https://doi.org/10.3233/AIC-190614
Stream-based perception for cognitive agents
in mobile ecosystems
JeremiasDötterla,∗,RalfBrunsa,JürgenDunkela andSaschaOssowskib
aComputerScienceDepartment,HannoverUniversityofAppliedSciencesandArts,Germany
E-mails:jeremias.doetterl@hs-hannover.de,ralf.bruns@hs-hannover.de,juergen.dunkel@hs-hannover.de
bCentreforIntelligentInformationTechnologies(CETINIA),UniversidadReyJuanCarlos,Madrid,Spain
E-mail:sascha.ossowski@urjc.es
Abstract.Cognitiveagentabstractionscanhelptoengineerintelligentsystemsacrossmobiledevices.Onsmartphones,thedata
obtainedfromonboardsensorscangivevaluableinsightsintotheuser’scurrentsituation.Unfortunately,today’scognitiveagent
frameworkscannotcopewellwiththechallengingcharacteristicsofsensordata.Sensordataislocatedonalowabstractionlevel
andtheindividualdataelementsarenotmeaningfulwhenobservedinisolation.Incontrast,cognitiveagentsoperateonhigh-
levelperceptsandlackthemeanstoeffectivelydetectcomplexspatio-temporalpatternsinsequencesofmultiplepercepts.Inthis
paper,wepresentastream-basedperceptionapproachthatenablestheagentstoperceivemeaningfulsituationsinlow-levelsensor
datastreams.Wepresentacrowdshippingcasestudywhereautonomous,self-interestedagentscollaboratetodeliverparcelsto
theirdestinations.Weshowhowsituationsderivedfromsmartphonesensordatacantriggerandguideauctions,whichtheagents
usetoreachagreements.Experimentswithrealsmartphonedatademonstratethebenefitsofstream-basedagentperception.
Keywords:Multi-agentsystems,Datastreamprocessing,Mobilecomputing,Agentperception
1. Introduction compositionofproblemsintoautonomousagentsthat
performhigh-levelinteractions[25,26].
Agent-basedabstractionscanhelptobuildcomplex
In recent years, mobile devices have become ma- systems accross mobile devices [38]. Mobile systems
turecomputingplatformsthataretakingoveranever- canbedesignedanddevelopedonanelevatedabstrac-
increasing number of complex tasks. Mobile devices tion level by making use of high-level agent concepts
arepersonalizedcomputingplatformsthatallowusers likebeliefs,plans,andgoals.Unfortunately,cognitive
toaccessuser-centricservicesanywhereandanytime. agent frameworks [7, 9, 10] lack satisfactory support
Their pervasive nature carries high potential for com- for the processing of sensor data. Today’s mobile de-
plex distributed systems across many devices, where vicesareequippedwitharichsetofsensorsthatcanbe
multipleusersarecoordinatedtoachievesomegoal. exploitedtoachievesystembehaviorthatadaptsitself
ThesesettingscannaturallybemodelledwithMulti- tothecurrentsituationofthemobileuser.However,the
Agent Systems (MAS) [44]. MAS support the engi- processing of sensor data streams is not an explicitly
addressedconcerninagent-basedsystems.
neeringofcomplexdistributedsystemsthroughthede-
The major problem is the existing abstraction gap
between data streams and agent percepts [12, 18, 34,
*Corresponding author. Hannover University of Applied Sci-
47].Agentsusetheirperceptiontoobtaininformation
enceandArts,ComputerScienceDepartment,RicklingerStadtweg
fromtheenvironment.Theagentsexpecttoreceivethe
120, 30459 Hannover, Germany. E-mail: jeremias.doetterl@hs-
hannover.de. informationinformofhigh-levelpercepts,i.e.theper-
0921-7126/19/$35.00©2019–IOSPressandtheauthors.Allrightsreserved
4202
naJ
42
]IA.sc[
1v40631.1042:viXra272 J.Dötterletal./Stream-basedperceptionforcognitiveagentsinmobileecosystems
cepts resemble actionable knowledge that the agents plicabilityandbenefitsofourproposal.Theproof-of-
can understand and react to directly. However, sensor conceptinsection5givesfurtherinsightsintohowour
dataislocatedonalowerlevelofabstraction:Thein- proposalcanbeappliedandreportsourexperienceof
dividual data elements of the stream carry little infor- integratingthenewperceptionapproachintotheJason
mativevaluewhenobservedinisolationandcannotbe framework. Section 6 evaluates our work with smart-
actedupondirectly.Toshiftthelow-leveldatastream phonesensordata.Finally,section7terminatesthepa-
to a higher-level percept stream, meaningful percept perwithconclusionsandfinalremarks.
patternshavetobedetectedandencodedintomeaning-
fulsituations.Forexample,asingleGPSvalueinisola-
tionmerelyallowsconclusionsaboutthelocationofan 2. Relatedwork
agent.Onlybyanalyzingthepatternsofmultipledata
elements, higher-level knowledge can be extracted: Is
There exist different frameworks and middleware
theagentmoving?Isitacceleratingorslowingdown?
foragent-orientedprogrammingonmobiledevices[8,
Isitmovingfasterorslowerthanotheragents? With-
38]. In the past, several agent-based systems have
out a dedicated stream processing component, agents
beenproposedthatoperateonmobiledevices:Theap-
cannotinfersituationalknowledgefromcomplexdata
proacheseitherpresentanagent-basedmobilesystem
sequences. To achieve advanced situation awareness,
for a specific application domain (e.g., e-health [13])
agentshavetoanalyzetherelationshipsandpatternsof
or aim to bring agent abstractions to mobile comput-
multipledataelementsandtheirrelationsintime.
ing platforms [1, 33, 39]. However, none of these ap-
Inapreliminaryversionofthispaper[20],wepro-
proachesusesadvanceddataprocessingtodetectcom-
posed an extension of the BDI architecture called en-
plexrelationshipsbetweenobservedpercepts.
hanced perception. This new perception approach in-
Today’s agent frameworks focus primarily on be-
cludes two new abstractions for the design and de-
liefs,goals,andplans,whicharethecoreabstractions
velopment of cognitive agents in mobile ecosystems,
of agent-based programming. The processing of per-
namely expectations and interpretations. Through en-
cepts,however,iskeptsimple,whichmaybesufficient
hancedperception,mobileagents1canperceivehigher-
for many use cases but is limiting in sensor environ-
levelknowledgeinlow-levelstreamingdata.
mentswheredataislow-levelandhasstrongtemporal
Inthispaper,wepresentarevisedversionofouren-
relationships.
hanced perception approach, which better reflects the
There are different logic-based proposals that con-
roleandinfluenceofbeliefsontheagent’sperception.
sidertemporalaspects.Allenetal.[4]describeatem-
Furthermore, we apply our proposal to a new prob-
poral logic that gives special consideration to events
lem scenario, which highlights the benefits of our ap-
andactions.Actionsareexecutedbyagentsandresult
proach for agreements between agents: We present a
in events. Events are patterns of change that are con-
crowdshipping case study where auctions are used as
sidered useful and relevant by some agent. This tem-
anagreementmechanismtotransferdeliverytasksbe-
poral logic is based on explicit relationships between
tweenagents.Thederivedhigher-levelsituationsdeter-
time periods, such as before, meets, overlaps, during,
minewhenauctionsareopened,whoiseligibleforpar-
etc. Broda et al. [11] present SAGE, an environment
ticipation,andwhoisappointedthewinner.Moreover,
monitoringsystembasedonlogicalagents.SAGEuses
wehavetwoimplementationstotestourproposal:We
forwardchainingtodetecthigher-levelevents,suchas
haveimplementedanextensionforJasonthatputsdata
movements,fromsensordata.
streamprocessingintoBDIagents,aswellasaproto-
Dynamic environments are challenging, which has
type of our case study. We evaluate our approach via
motivateddifferentworksonadvancedeventprocess-
the crowdshipping case study and by running our im-
ing in agents. Agüero et al. [2] present an event pro-
plementationonrealsmartphonesensordata.
cessingapproachforagentsindynamicenvironments.
The rest of the paper is structured as follows. Sec-
Different event processing strategies are discussed,
tion 2 discusses related work. Section 3 introduces
whichresultindifferentagentbehaviors.
our stream-based perception approach. In section 4,
In current frameworks, plans are usually triggered
we perform a case study, which demonstrates the ap-
bytheoccurrenceofasingleevent.Bufordetal.[12]
1Weusethetermmobileagenttorefertoanagentthatrunsona extend the BDI agent architecture with event correla-
mobiledevice. tion to allow plans to be triggered by a (potentiallyJ.Dötterletal./Stream-basedperceptionforcognitiveagentsinmobileecosystems 273
complex)patternofmultipleeventsratherthanonlyby agents run on top of an existing context management
asingle,isolatedevent. system,whichservesastheproviderofcontextinfor-
Ziafatietal.[47]addadvancedeventprocessingto mation.Wearenotawareofanycontext-awaremulti-
BDI agents in the context of autonomous robot pro- agent approach where data stream processing is inte-
gramming. The robot’s sensory information is pro- grated into a cognitive agent architecture to analyze
cessed in order to extract relevant knowledge that the mobilesensordata.
robot’scontrolcomponentcanusetomakeandexecute
appropriateplans.
Dennisetal.[18]presentadedicatedabstractionen-
3. Agentswithenhancedperception
gine that enables BDI agents to observe and manage
satellite control systems. This abstraction layer trans-
latesfromthecontinuoussensordataproducedbythe In this section, we present our approach for cogni-
controlsystemtothediscreteandabstractinformation tiveagentsoperatinginmobileecosystems.
neededbytheBDIagent.
There are two approaches related to our work that
3.1. Sensingtheenvironment
makeuseofComplexEventProcessing(CEP)[30]and
theJason[10]agentframework:Ranathungaetal.[35]
use CEP within a global event processing component Modern smartphones have a wide range of data
tointerfaceJasonwiththevirtualSecondLifeplatform. sources available through which they can capture the
RanathungaandCranefield[34]integrateCEPwithJa- immediateenvironment[41]:
sonagentstoidentifycomplexsituationsintheagent’s
environment.InbothapproachestheCEPengineisan • Internalsensors:On-boardsensorstomeasureac-
externalcomponentoutsideoftheBDIagent. celeration,airpressure,GPS,humidity,tempera-
Therearesomeworkswithparticularfocusonagent ture,rotation,etc.
perception. Cranefield et al. [15] propose the concept • External sensors: Body sensors like bracelets or
of a percept buffer for BDI agents that processes per- chest harness that are connected to the smart-
cepts according to customizable policies. The poli- phonetomeasurebloodpressureorheartrate.
cies determine how percepts in the buffer should be • Otherapps:Anyotherapponthedevice.Forin-
replaced, merged, or summarized before being made stance, the calendar app that informs about up-
available to the agent’s deliberation. Percept buffers comingappointments.
canbeusedtoprotecttheBDIagents’relativelyslow • Operatingsystem:Informationaboutsystemevents
deliberationfromtheloadofhigh-speeddatastreams. likelowbatterystateormissedcalls.
Johanssonetal.[27]proposeperceptionmanagement, • Communicationinterfaces:Wirelesscommunica-
which bundles a set of perception-related functionali- tion,e.g.viaWIFI,enablestheaccessofwebser-
tiesandtasksthatgobeyondmeresensormanagement. vicesorotherdatasourcesonline.
Weynsetal.[43]presentaformalmodelforactiveper-
LikeSantietal.[38],weconsiderthesedatasources
ception, which allows agents to direct their attention
artifacts of the environment, where the agent is situ-
to the most relevant occurrences in the environment.
ated and which the agent can sense to obtain data. In
Active perception assumes that percepts are given on
the A&A (agents & artifacts) meta-model [32], arti-
theknowledgelevelandnarrowstheagent’sview.Our
enhancedperceptionapproachacknowledgesthatper- facts are the passive components of the MAS that are
ceptscanappearonalowabstractionlevelandwidens intendedtobeusedbytheagents.Whileagentsconsti-
therangeofsituationstheagentcanperceive. tutethepro-activeandautonomouscomponentsofthe
Further related work can be found in the area of system, artifacts can be understood as tools that pro-
context-awaresystems.YılmazandErdur[46]present vide functionality to the agents. Each artifact exposes
a context-aware MAS where mobile client agents can ausageinterfacetotheagents,whichcanconsistofar-
requestcontextinformationfromaserver-sidecontext bitrary operations. Artifacts are a generic mechanism
agent.Toinferthecontext,thecontextagentperforms toprovideresourcestotheagentsortoprovideanin-
rule-based reasoning on a context ontology. Alfonso- terfaceforperformingactionsontheenvironment.
Cendón et al. [3] let agents perform context-aware Inourapproach,wedistinguishbetweentwogroups
workflows in the ambient intelligence domain. The ofartifacts.274 J.Dötterletal./Stream-basedperceptionforcognitiveagentsinmobileecosystems
(1) Device artifacts provide access to the different Enhancedperception addressesthechallengesintro-
sensorsandservicesofthesmartphone.Viathese duced by data streams, which allows the agent
artifacts,theagentcanobtainsensordata,check to detect complex spatio-temporal data patterns
sensoravailability,activateordeactivatesensors, and protects the agent’s deliberation from low-
orchangesensorconfigurations. quality and low-level percepts. (First steps to-
(2) Domainartifactsprovideaccesstodataandfunc- wards such an enhanced perception approach
tionality that the agent needs to act in the given weremadein[19,20]).
problemdomain.
3.2.2. Exploitingdatastreamconcepts
The artifacts provide the data in form of data
streams. Streaming data has various properties that As shown in Fig. 1, the agent acquires streaming
prevent its direct use in conventional agent architec- data from device and domain artifacts. We consider
tures. each percept a structure with the following informa-
tion:
• Low-quality [28]: Data streams can be of low
quality due to imperfect sensing; data can be (type,timestamp,key =value ,...,key =value )
0 0 n n
missingorinaccurate.
• Low-level [45]: Due to the existing abstraction Each percept adheres to a type, which gives the
gap,itisoftennotpossibletoreacttosingleiso- percept a semantic and constrains its admissible key-
lateddataelementsastheirmeaningisnotinher- valuepairs.ExamplesforpercepttypesareGPSread-
entlyclear. ings, acceleration events, or some significant occur-
rence in the application domain. Furthermore, each
Otheragentscanalsoserveasdatasources:Mobile
perceptholdsthetimestampofitscreation,whichen-
agentscanestablishdynamicconnectionswithnearby
ables time-based pattern matching over percept se-
agents to engage in flexible interaction and data ex-
quences.
change.Theagentscommunicateviamessages.
Intheconventionalagentarchitecture,theagentper-
3.2. Processingtheperceptstream ceptionprocessesoneperceptatatimeandneglectsthe
historyofrecentlyobservedpercepts.Toallowagents
3.2.1. Agentarchitecture toperceivecomplexpatternsinperceptsequences,we
WeproposeAEPArchitecture(AgentswithEnhanced extend the agent’s perception by the following infor-
Perception) for agents on mobile devices, as shown mationflowconcepts[16]:
in Fig. 1. The AEP architecture consists of three ma-
• Selectionofparticularperceptsthatmatchcertain
jorcomponents:Thebeliefbaseanddeliberationcom-
conditionsregardingpercepttypeorattributeval-
ponent originate in large parts from the conventional
ues.
agent architecture [10, 21, 36]. Enhanced perception
• Windowsthatallowanalysisof(i)thelastNper-
constitutestheproposedextension.
ceptoccurrencesor(ii)theperceptoccurrencesof
Beliefbase: Thebeliefbaseholdstheagent’sbeliefs, thelastTtimeunits.
whicharepiecesofinformationabouttheworld • Aggregatestocombinemultipleperceptsandthe
that the agent believes to be true. Beliefs can datatheycarrytonewinformation.
change through external events in the environ-
ment(indicatedbypercepts),theagent’sinternal Therefore, we process the percept stream with the
deliberation, or messages received from other followinginformationflowoperators[16,30]:
agents.
Deliberation: Theagentdeliberatesovertheworldto p1andp2 Conjunction
decidewhichactionstoperform.Theagent’sde- p1->p2 Sequence(followedby)
liberation process is controlled by plans and is .window:time(t) Timewindow
aimedattheachievementoftheagent’sgoals. avg(x),max(x),min(x),sum(x) Aggregation
In mobile environments, these two components are
insufficient as the incoming percepts are mostly lo- InAEP,theagentholdsexpectationsandinterpreta-
cated on a low abstraction level, which prevents a di- tions,whichmakeuseoftheseoperatorstotransform
rectunderstandingandreactionbytheagent. theperceptstream.J.Dötterletal./Stream-basedperceptionforcognitiveagentsinmobileecosystems 275
Environment Agent with Enhanced Perception
Device artifacts Data Enhanced perception
streams Situations
GPS sensor
Percept processing
Belief base
Gyroscope Expectations Interpretations
Beliefs
WIFI Manager
Beliefs
... Deliberation
Goal-driven deliberation
Domain artifacts
Goals Plans trigger plans
< Domain artifact >
...
perform actions communicate
Other agents
Fig.1.AEPArchitecture:AgentswithEnhancedPerception
3.2.3. Expectations
Definition 1 (Expectations). An agent’s expectations // "Forward plausible GPS data"
CONDITION:
characterize the agent’s subjective attitude towards
(gps1=GPS -> gps2=GPS).window:time(2 seconds)
percepts.Expectationsposerequirementsforthedata where BB.contains("isCycling")
and Geo.distance(gps1, gps2) < 20 meters
andinformationcarriedbythestreamofobservedper-
ACTION: forward gps2
cepts.
This rule implements the given example. Event types
Expectations limit the percept stream to those per- startwithanuppercaseletter(e.g.,GPS).Namesstart-
ceptsthatfulfilltheagent’sexpectations.Perceptsand ingwithalowercaseletterarealiases,whichareused
perceptsequencesthatviolatetheagent’sexpectations torefertoaspecificeventinstance(e.g.,gps1).When-
are purposefully ignored or corrected. This reduces everaGPSeventgps1isfollowedbyaGPSeventgps2
theagent’scomputationalload,preventsimperfectdata within two seconds, the rule checks whether an isCy-
manifesting itself in beliefs, and lets the agent gain cling belief exists in the agent’s belief base (BB). If
controlovertheincomingdata. thisbeliefexistsandtheGPSeventsarewithin20me-
tersofeachother,GPSeventgps2isplausibleandfor-
Example 1 (Expectation). When the user is riding a warded to be used in subsequent rules. BB.contains()
bike,theagentexpectstwoconsequentGPSreadings, isamethodinvocationthataccessestheagent’sbelief
whicharemeasuredwithintwosecondstoeachother, base.Geo.distance()isaservicecalltoahelperfunc-
tobeatmost20metersapart,whichcorrespondstoa tion that returns the distance between two GPS loca-
speedof36km/h.Ifthedistanceislargerthan20me- tions.
ters, the agent considers one of the data points to be Expectations enable stream-based and belief-based
filtering.
erroneousanddropsatleastoneofthemforbeingin-
consistent with the agent’s expectations regarding the • Stream-basedfiltering:InconventionalBDIagents
accuracyofthedata. filtering is usually performed by checking each
perceptinisolation.Operatingonsensorstreams,
We follow a rule-based approach, where the detec- filteringhastogobeyondthissimplestrategyand
tion of a certain pattern in the percept stream triggers perform data cleaning by considering multiple
the forwarding of the percept instances that fulfill the data elements and their temporal relationships.
expectations. Based on data stream operations, expectations276 J.Dötterletal./Stream-basedperceptionforcognitiveagentsinmobileecosystems
allow implementing advanced cleaning methods Wegiveasimpleexamplethatderivescontextfrom
thathavebeenproposedintheliteratureonsensor rawsensordata.
data streams: to smooth, merge, arbitrate, or vir-
tualize[23,24].Thiscanyieldmorereliableinput Example2(Interpretation). WhenthetwolatestGPS
fortheagent’sinterpretations. readings are at least one meter apart, the user has
• Belief-basedfiltering:Anagent’sbeliefscanpro- moved.
vide crucial context for appropriate filtering. In
the example rule above, the agent holds a belief Like expectations, interpretations can be expressed
abouttheuser’scurrentmodeoftransportation(is withpatternrules.
cycling).Thishelpstheagenttoestimatewhether
the observed GPS measurements are plausible.
// "Detect movement"
The agent canquery the belief base (BB) forthe CONDITION: gps1=GPS -> gps2=GPS
existenceofabelieforforconcretevalues. where Geo.distance(gps1, gps2) > 1 meter
ACTION: create HasMoved
BB.contains(expression) where expression may
containplaceholders(indicatedbyanunder-
This rule implements the given example. When a
score), e.g.: BB.contains(’temperature(_)’)
GPSreadinggps1isfollowedbyaGPSreadinggps2
returnstrueiftheagentholdsabeliefabout
and they are more than one meter apart, a HasMoved
sometemperature(withanarbitrarytemper-
context event is created and injected into the data
aturevalue).
stream.
BB.get(expression) whereexpressioncontainsone
Interpretationrulesenableastream-basedandbelief-
unbound variable and arbitrary placehold-
baseddetectionofsituations.
ers,e.g.:BB.get(’temperature(Var)’)returns
20ifthebeliefbasecontainsthebelieftem- • Stream-baseddetection:Asmentionedearlier,in-
perature(20). terpretationsusedatastreamconcepts(timewin-
dows,aggregation,etc.)todetecthigher-levelin-
3.2.4. Interpretations
formation.
Definition 2 (Interpretations). An agent’s interpreta-
• Belief-baseddetection:Likeexpectationrules,in-
tions form the agent’s rapid recognition capabilities.
terpretation rules can access the belief base. An
Interpretations detect higher-level knowledge in low-
agent’s belief base can contain important knowl-
levelperceptstreamsconsideringtherelationshipsbe-
edge about the environment, other agents, or the
tweenmultipleperceptoccurrences.
smartphone user. For example, an interpretation
can only estimate the arrival time at a certain
Interpretationsaggregateandcorrelatemultipleper-
pointofinterest(anotheruserorsomelandmark)
cept occurrences to derive higher-level information.
if its location can be obtained from the belief
Thishigher-levelinformationcaneitherbeintermedi-
base. Interpretation rules use the same interface
atecontextoritcanbeasituation.
as expectation rules, consisting of the methods
• Context isinformationthatisgeneratedbyinter- BB.containsandBB.get.
pretationsandthatservesasinputforotherinter-
Interpretation rules can perform two different ac-
pretations.Itisnotcontainedintheincomingdata
tions.Whenapatternmatchoccurs,theycaneither(i)
streamdirectly, buthas tobeinferred. Whilebe-
create context or a situation and inject it into the data
ing more abstract than raw sensor data, in some
streamforfurtherprocessingor(ii)theycanaddasit-
casesitisstilltoolow-levelandtoofrequenttobe
uationasabelieftothebeliefbase.
processedbytheagent’sdeliberation.
• Situations are a product of interpretations. They 3.2.5. Changingbeliefs
aredetectedbyfusionofcontextinformationand When a new situation is added to the belief base,
domain events. They are located on a higher ab- this new belief might contradict previously held be-
straction level than context and typically are ob- liefs. Therefore, some beliefs might have to be re-
served less frequently than context information. movedorupdated.Dependingontheconcretecharac-
Situations are meaningful occurrences that are teristicsoftheapplicationdomain,atruthmaintenance
madeavailabletotheagent’sdeliberationinform system might be warranted that keeps the belief base
ofbeliefs. consistent.Inourarchitecture,wefollowtheapproachJ.Dötterletal./Stream-basedperceptionforcognitiveagentsinmobileecosystems 277
used in the Jason framework were the beliefs about ery infrastructure,industry and academia areworking
theworldaremaintainedbyplansorbeliefannotations towardsnewandinnovativeshippingstrategies.
that indicate when a belief should expire [10, p. 38]. Crowdshippingseemsapromisingsolutionapproach
Therefore,weconsideritprimarilyaresponsibilityof for the last mile delivery problem [31]. Crowdship-
the belief base and/or deliberation, which we do not ping is based on the observation that private citizens
wanttofocusoninthispaper. in their daily lives walk, ride and drive on the same
roadsandroutesthattheparcelshavetotaketobede-
3.3. Takingaction liveredtotherecipients’homes.Thedeliverycapacity
couldbesubstantiallyincreasedifprivatecitizenscar-
Theadditionanddeletionofabeliefcantriggerthe riedparcelstowardstheirdestinationswithlittleorno
executionofplansinthedeliberationcomponentofthe detoursinexchangeformonetarycompensation.
AEParchitecture.Triggeredplanscantheninitiateac- Recent publications on crowdshipping investigate
tions,e.g.,callinganoperationprovidedbyanartifact assignmentproceduresthatmatchtheavailablecrowd-
orsendingamessagetoanotheragent. workerswithdeliverytasksorperformrouteplanning
In sensor environments, the detected situations are tominimizethelengthoftheworkers’shippingroutes
theessentialunitsthattriggeragreementprocessesand [5,6,14,17,42].Untilnow,onlyfewproposalshave
underpin the finding of agreements. Fig. 2 illustrates beenmadethatusethemulti-agentparadigmandthat
the role of enhanced perception for reaching agree- explicitly enable or encourage the transfer of parcels
ments in distributed mobile systems. The users’ mo- betweenworkers[22,37].Inthesubsequentsections,
biledevicessensethephysicalworldandgeneratesen- wepresentamulti-agentcrowdshippingsystemwhere
sor data that can be observed by the agents. Via en- the workers have the autonomy to hand over parcels
hanced perception, the abstraction level of the sensor to other workers who then continue the delivery. This
dataisraisedbyencapsulatingmeaningfulperceptse- way,deliverychainscanformthatcarryparcelstotheir
quencesintosituations.Thesituationsdrivetheagents’ destinations. In contrast to other works, we employ
deliberationandhelpagentstoreachagreements.Auc- datastreamprocessingontheworkers’smartphonesto
tionsareonepossiblemechanismhowagreementscan incorporateknowledgeaboutthecurrentsituationinto
be reached. In the upcoming sections, we describe a thecrowdshippingsystem.
casestudyweresituationsareusedtotriggerauctions;
agentsareinvitedtobidiftheysatisfycertainsituation
4.2. DynamiccrowdshippingwithAEP
requirementsthatjustifytheirparticipation.
We describe a multi-agent crowdshipping system
4. Casestudy thatbenefitsfromtheenhancedperceptionapproachof
theprevioussection.
Wepresentacasestudytodemonstratetheapplica-
General approach. The crowdshipping MAS con-
bilityofourproposalandtoillustratetheroleofsitua-
sistsofthefollowingentities:
tionsintheproposedmulti-agentsetting.
Parcels are packages that have to be delivered to (or
4.1. Crowdshippingforthelastmiledeliveryproblem towards) a certain destination. Each parcel has
a pre-determined payout value that is rewarded
Nowadays, a large number of customers orders to the user who delivers the parcel to its final
productsonline,whichrequiresshippingcompaniesto destination.
deliver parcels right up to the customers’ doorsteps. Users are private citizens that have agreed to partic-
Whereasformerlyalotofproductscouldbedelivered ipate as shippers in exchange for financial re-
collectively to shops and sold there, these days many wards.Userscandecidewhethertodeliverapar-
consumers expect their products delivered directly to celtoitsdestinationandreceivethefullreward
theirindividualhomeaddresses.Thislargeincreasein or to cover only a part of the delivery distance
shipping destinations is sometimes referred to as the andselltheparceltoanotheruserwhoperforms
lastmiledeliveryproblem[29].Toovercomethisnew the rest of the delivery (or sells it to another
challengingdemandontheshippingcompanies’deliv- user).278 J.Dötterletal./Stream-basedperceptionforcognitiveagentsinmobileecosystems
Auction Auction
Situation Situation
triggers auction Situation justifies participation
Situation
Situation Situation Situation Situation
Mobile
Mobile Agent
Agent
Multi-agent Communication
layer
Communication
Sensor
Sensor data Sensor
data Sensor data
data
Physical
world
Legend: Enhanced perception
Fig.2.Mobileecosystemwithsensor-drivenmobileagentsandauction-basedagreements
Useragents(UAs) supportusersintheirdecisionmak- agents that have detected a particular user situa-
ing. The UAs run on the users’ personal smart- tion.Situation:Theusercanarrivetopickupthe
phones and monitor the environment to per- parcel within five minutes. (Whether a user can
form situation-aware actions, including obtain- arrive within a certain time window depends on
ingtasksandsellingtaskswhileconsideringthe the user’s physical distance, mode of transporta-
user’ssituationandfinancialinterests. tion,andmovementbehavioroftherecentpast.)
• Determiningwinners:WhentheUAhasreceived
To sell and buy tasks, the MAS uses an auction
all bids, it applies a situation-dependent strategy
mechanismwithsituation-dependentparameters.Auc-
to determine the winner of the auction. For ex-
tions are an important agreement concept to allocate
ample, the UA might not necessarily declare the
resources (goods, tasks, etc.) to self-interested agents
highestbidthewinnerifanotheragentexiststhat
inamulti-agentsetting[40].Oneagentactsastheauc-
hasbidasimilaramountbutcanarrivetopickup
tioneer and collects the bids from interested buyers.
theparcelthreeminutesfaster.2
Theauctioneerthenassignstheresourcesaccordingto
some clearance rule and collects the payments of the Example. Fig.3showsanexemplaryscenario,which
bidders according to some payment rule. In this case consists of four agents a to a , whereby one of the
0 4
study, we do not focus on optimal winner determina- agents (a ) is currently holding a parcel. The agents
0
tion or payment rules. We rather try to highlight how compute their local situations and adapt their beliefs
situations derived from data streams can control and and goals accordingly. Thereby, they rely on their en-
influenceagentinteractiontocometoagreements. hancedperceptioncomponent.Usingitsinterpretation
capabilities, agent a has detected that its user has
• Opening auctions: The UA opens an auction 0
not made any delivery progress recently and there-
wheneverauserisholdingaparcelandtheuseris
foreadoptsthegoal!sellParcel.Thistriggerstheauc-
inasituationwheretransferringtheparceltoan-
tionmechanism.Theagentsa ,a ,anda getnotified
1 2 3
other user is preferable. Situation: The user has
aboutthenearbyauctionandcheckwhethertheyfulfill
notbeenmakinganydeliveryprogressinthelast
the participation requirement. Agent a has not been
2
5minutes.
moving in the recent past (the user might be busy or
• Selecting participants: When the UA opens an
resting)andhence doesnotparticipateintheauction.
auction to receive bids from other UAs, it an-
nounces the auction to a selected set of partici- 2Agentswouldhavetobepenalizediftheyreportsituationsinac-
pants. A call for bids is explicitly addressed to curatelyormaliciously.J.Dötterletal./Stream-basedperceptionforcognitiveagentsinmobileecosystems 279
Auction τ:
Auctioneer: a 0
Goals Participants: {a 1,a 3}
!obtainParcel.
Beliefs Temporal distance to parcel:
a
nearbyAuction(τ). 1 1 minute ► a
0 Goals
a
2 ∞ !sellParcel.
Goals Beliefs
!obtainParcel. Goals a 3 slowDelivery
Beliefs 4 minutes ► Progress.
!obtainParcel.
...
Beliefs
nearbyAuction(τ).
Fig.3.Multi-agentcrowdshippingscenario
Agentsa anda bothestimateapossiblearrivaltime etc.Beliefsareusedinexpectations,interpreta-
1 3
atagenta inbelow5minutesandthereforeconsider tions, and plans; they influence the agent’s per-
0
participation.Usingtheirbeliefsandplans,theycheck ceptprocessinganddeliberation.
whethertheparcel’sdestinationisinaccordancewith Goals express the agent’s current attitude towards
the user’s movement direction. As this is the case for parcelsandtheagent’sambitionsintheauction
a anda ,theybothdecidetosubmitabidtoa .Agent process. The goals include: sell parcel, obtain
1 3 0
a collectsthebidsanddeterminesthewinner.Having parcel,andparticipateinauction.
0
Plans get triggered when beliefs change or goals get
bid more, the parcel is assigned to agent a who not
1
adopted.Mostimportantly,theagentholdsplans
onlyiswillingtoperformthetaskforlessrevenue(the
that allow it to open auctions and to partic-
revenueistheparcelrewardminusthebidmadeinthis
ipate in auctions that other agents announce.
auction),butalsocanarrivefastertopickuptheparcel.
These plans implement the agent’s winner de-
Application of concepts. The conceptual building termination strategy as an auctioneer and the
blocksofAEPcanbeappliedasfollowstoimplement agent’s bidding strategy as a participant in an-
thecrowdshippingcasestudy. TheagentobtainsGPS otheragent’sauction.
data from the GPS sensor artifact, which is processed
The case study shows that the crowdshipping sce-
bytheenhancedperceptioncomponent.
nariocanbenaturallyexpressedusingMAS:eachuser
Expectations cleantheGPSsensordatabyremoving ofthecrowdisrepresentedbyaself-interestedagent;
implausibleGPSreadings.Therefore,theycon- thedecisionmakingisdistributedovertheusers’mo-
sultthebeliefbasetobetteranticipatethechar- biledevices.Usingenhancedperception,theagentin-
acteristics of correct GPS readings: when the teraction (in form of auctions) is driven by higher-
userisridingabikeoracar,GPSeventsmaylie levelsituationsthatarederivedfromlower-levelsensor
data.Interpretationsallowagentstoperceivecomplex
fartherapartthanwhentheuseriswalking.
spatio-temporal patterns across a stream of low-level
Interpretations detectthehigher-levelsituationsthat
percepts,e.g.,slowdeliveryprogressinaGPSstream.
drive the auction mechanism. Among others,
they detect slow delivery progress and estimate
arrival times at nearby auctions/parcels. These
5. Proofofconcept
aremeaningfuloccurrencesthatarenotinherent
in a single individual GPS event but can be de- Inthissection,weshowsomeofthemostimportant
rivedfromsequencesofGPSevents. interpretation rules that are needed to implement the
Beliefs represent an agent’s current knowledge about multi-agent crowdshipping system as outlined in the
the crowdshipping system, including the user’s previous section. We also describe our technical inte-
state (has parcel / has no parcel), the user’s fi- gration of enhanced perception into the Jason frame-
nancial profile and walking preferences (do not work and discuss the most important benefits of our
accepttaskswithrewardsbelow2.00EURO,do extensioncomparedtoJasonagentswithoutenhanced
not accept tasks farther away than 500 meters), perception.280 J.Dötterletal./Stream-basedperceptionforcognitiveagentsinmobileecosystems
5.1. Interpretationrulesforthemulti-agent
Situations
crowdshippingsystem
SlowDeliveryProgress
Context Domain events Messages
Wehavealookatthefollowinginterpretationrules
EstimatedArrival ParcelAccepted AuctionOpened
(R.1andR.2).
Speed ParcelSold BidReceived
R.1 (Agent with parcel): When user holds parcel and
HasMoved ParcelDelivered AuctionOutcome
makesslowdeliveryprogress,trytosellthepar-
Source: domain artifact Source: other agents
celbyopeninganauctiontonearbyagents.
Sensor data
R.2 (Agent without parcel): When an auction was
GPS
openednearby,checkwhethertheauctioneercan
Acceleration
bearrivedwithintherequiredtimelimit.Ifthis
isthecase,considerparticipatingintheauction ScreenOn
bysendingabid.
Source: sensor artifacts
In the interpretation rules we make use of the event
Fig.4.Eventsinthemulti-agentcrowdshippingsystem
types shown in Fig. 4. There are three categories of
eventtypesthatcanbeobservedbytheagent. 5.1.1. Openingtheauction(RuleR.1)
Theagentopensanauctionwhenitismakinglittle
Sensordata isaccessedfromthesmartphonesensors
or no progress in delivering the parcel to its destina-
via the sensor artifacts. Event types of this cat- tion.Todetectthishigher-levelsituation,twointerpre-
egory are GPS readings, acceleration data, or tationrulesareused.Thefirstrule(R.1a)continuously
whetherthesmartphone’sscreenisactive.Here computestheuser’sdistancetotheparceldestination.
wefocusonGPSdata. Thesecondrule(R.1b)thenusesthisdistancetodetect
Domainevents stemfromthedomainartifactandin- whenthedistancedoesnotbecomesmallerovertime.
dicatesignificantoccurrencesinthecrowdship-
ping domain. Here, an agent receives explicit
// R.1a: "Compute distance to destination"
notification when a parcel was accepted (either SELECT Geo.distance(
move.lat,
received from the shipping company or bought move.lon,
fromanotheragent). BB.get("hasParcel(" + parcel.id + ", Lat, _)"),
BB.get("hasParcel(" + parcel.id + ", _, Lon)")
Messages are announcements made by other agents. ) as distanceToDestination
FROM pattern[
In our setting, agents use messages to inform
(every parcel=ParcelAccepted)
nearbyagentsaboutnewauctions,bids,andauc- -> (every move=HasMoved)
]
tionoutcomes.
WHERE
BB.contains("hasParcel(" + parcel.id + ", _, _)")
Whiletheeventtypesofthecategoryofdomainevents ACTION:
new DistanceToDestination(distanceToDestination)
havetobetailoredtothespecificproblemdomain,the
event types of the category sensor data are more gen-
Theruleconsistsoftwoparts:Thefirstpartdescribes
eralandreusableforawiderangeofproblemdomains.
a percept pattern using the SQL-inspired SELECT-
Contextthatcanbederivedistheuser’smovement,
FROM-WHERE structure. The second part specifies
speed, and estimated arrival time at nearby auctions.
theactionthatisexecutedwhenapatternmatchoccurs.
Based on context, domain events, and the content of
RuleR.1amatcheseverytimeaParcelAcceptedevent
messages, situations such as slow delivery progress
is followed by a HasMoved event and the belief base
canbedetected. containsthebeliefthattheagentisstillinpossessionof
Toexpresstheinterpretationrules,weuseadeclar- thisparcel.(Iftheuserhadsoldordeliveredtheparcel
ativeEventProcessingLanguage(EPL).Therearedif- inthemeantime,thebeliefwouldhavebeenremoved
ferent families of EPL. Here, we use a syntax that is accordingly.)Wheneverthisisthecase,thedistanceof
inspired by SQL and close to the syntax used by the theuser’scurrentposition(move.lat,move.lon)tothe
Esperengine. parcel’s destination (retrieved from the belief base) isJ.Dötterletal./Stream-basedperceptionforcognitiveagentsinmobileecosystems 281
computedandencodedintoanewevent.Theresulting Weaccomplishthisintwosteps:Estimatingthear-
DistanceToDestinationeventispushedintothepercept rival time at the parcel (R.2a) and comparing it with
stream. theannouncedpickupdeadline(R.2b).
1 // R.1b: "Detect slow delivery progress" // R.2a: "Estimate arrival time at auction"
2 SELECT parcel SELECT auction.id as AID,
3 FROM pattern [ Geo.distance(auction.location,
4 every parcel=ParcelAccepted loc.location) as distance,
5 -> speed.value as speed
6 ( FROM pattern [
7 (timer:interval(5 minutes) and not HasMoved) every auction=AuctionOpened
8 or and loc=UserLocation
9 (d1=DistanceToDestination(parcelId=parcel.id) and speed=Speed
10 -> and speed.value > 0
11 d2=DistanceToDestination(parcelId=parcel.id, ]
12 timestamp > d1.timestamp + 5 minutes) ACTION: new EstimatedArrival(AID, distance/speed)
13 )
14 )
15 ]
Thearrivaltimeisestimatedasfollows:Wheneverthe
16 WHERE
17 BB.contains("hasParcel(" + parcel.id + ", _, _)") agentisnotifiedthatanauctionwasopened,itgathers
18 and d2.value > d1.value - 20 meters
19 ACTION: itsmostrecentdataabouttheuser’slocationandspeed.
20 BB.add("SlowDeliveryProgress(" + parcel + ")") Ifthespeedislargerthan0,thedistancetotheparcel
locationiscomputedanddividedbythespeedvalue.
When the user accepts a parcel (line 4) and as long
as the user is still carrying this parcel (indicated by a
// R.2b: "Consider bidding if auction can be
correspondingbelief;line17),thefollowingtwocases
// reached in time"
arechecked: SELECT auction
FROM pattern [
• Line7:Eithertheuserhasnotbeenmovingfor5 every auction=AuctionOpened
->
minutes. arrival=EstimatedArrival
• Lines 9-12 and 18: Or, comparing to distance .window:time(auction.biddingInterval)
and arrival.auctionId=auction.id
eventsthatappearatleast5minutesapart,theuser and arrival.estimatedArrivalTime
hasreducedthedistancetothedestinationbyless < auction.pickupDeadline
]
than20meters. ACTION:
BB.add("nearbyAuction(" + auction + ")")
Ineitherofthetwocases,theUAdetectsthatthedeliv-
eryprogressisinsufficientandinsertsacorresponding
beliefintothebeliefbase. When an auction was opened and an arrival time
The UA has a plan that describes the action that is was estimated within the announced bidding interval,
tobetakeninthissituation.Inthisplan,theUAbroad- the rule checks whether the estimated arrival time is
caststonearbyagentsthatithasopenedanauctionto smallerthanthepickupdeadline.Ifthisisthecase,the
sellthegivenparcel.Thisinvitationtotheauctionin- agent adds the new belief nearbyAuction to its belief
cludesadescriptionoftheparcel,adescriptionwhich base.
agents are eligible to participate in the auction (e.g., Inacorrespondingplanthatreactstothisbeliefad-
alluserswhocanpickuptheparcelwithin5minutes), dition,theagentcheckswhetherthelocationanddes-
thecurrentlocationoftheparcel,andabiddinginter- tination of the parcel lie on the user’s route. Assum-
valthatdenoteshowmuchtimetheagentshavetoan- ing that this is the case, the agent has decide on the
nouncetheirbids. exact value it wants to bid. This decision depends on
5.1.2. Decidingwhethertoparticipate(RuleR.2) the user’s monetary profile and the detour that has to
Next,thenearbyagentsreceivetheinvitationtothe bemadeforparticipationintheshippingoftheparcel.
auction and have to decide whether they participate. Having decided on a value, the agent sends its bid to
Therefore, the agents check whether they fulfill the theauctioneer.Theauctioneergathersallbidsandde-
participationrequirement,i.e.whethertheuser’srecent termines the winner. The auctioneer then notifies the
movement behavior indicates that the parcel could be participants about the auction outcome and waits for
reachedwithin5minutes. thewinnertocomebyandpickuptheparcel.282 J.Dötterletal./Stream-basedperceptionforcognitiveagentsinmobileecosystems
Agent (Jason) BeliefBase 5.3. ImplementingthecasestudywithAEP
selectEvent(events: get(expression): Belief
Queue<Event>) contains(expression): Boolean
We implemented the multi-agent crowdshipping
case study with our framework. We developed a user
AEPAgent agentthatconsistsoftheperceptionrulespresentedin
section5.1.TheuseragentobtainsaGPSdatastream
from a GPS artifact. The GPS data arrives in form of
uses perceptsthattheagentprocesseswithitsenhancedper-
EnhancedPerception Engine ceptionmodule.
* Rule Theagent’splansaredevelopedinAgentSpeak.The
perceive(...) pushEvent(...)
plansaretriggeredbybeliefchangesandsituationsthat
areproducedbytheenhancedperceptionmodule.
EsperEngine
Usingourapproach,weobservethefollowingben-
efits.
EPServiceProvider
5.3.1. Complexspatio-temporalpatternmatching
(Esper)
By integrating data stream processing into BDI
Fig.5.Technicalintegration agents,anagentcanperformpatternmatchingonper-
ceptsequences.InconventionalBDIagents,plansare
5.2. IntegratingenhancedperceptionintoJason triggeredbysingleevents.AEPontheotherhanden-
ables the triggering of plans by multiple events that
can be in complex temporal relationships. This capa-
To test our approach, we integrated the enhanced
bility is necessary when the individual data elements
perceptioncomponentintotheJasonagentframework.
arenotmeaningfulinisolation,butexposetheirmean-
We rely on Jason’s deliberation and belief base and
ing if perceived together. In our case study, a single
extend it by our customized perception. Our tech-
GPS event does not carry enough meaning to trigger
nical solution is shown in Fig. 5: We developed a
new agent class AEPAgent, which is a subclass of theauctionplans.Onlythesituationsderivedfromthe
the Jason Agent class. We override the selectEvent GPSstreamgiveenoughinsightswhethertoinvokethe
plans.
method such that in each processing cycle all per-
Advanced pattern matching over percept streams
cepts are removed from the agent’s event queue and
cannotbeeasilyimplementedwithAgentSpeak.AgentS-
passed to the enhanced perception component. The
EnhancedPerceptionclassconvertstheJasonlit- peak is well suited to express plans for intelligent be-
havior on the domain level. However, not all prob-
erals into the event format expected by the event pro-
cessing engine and pushes the event into the engine. lems present themselves at this abstraction level di-
TheclassEsperEngineisawrapperaroundtheEs- rectly: on smartphones, sensors provide data on a
per CEP engine 3; the class EPServiceProvider lower level of abstraction where the individual data
istheentrypointintotheEsperAPI.Eachengineholds elements in isolation have little meaning. If we had
an arbitrary number of rules, which perform the per- to implement the percept processing with plans, we
ceptprocessingandhaveaccesstotheBeliefBase hadtoattemptthiswithoutmanyessentialdatastream
class. The belief base class provides read and write concepts, most importantly temporal windows, non-
access to the Jason belief base (via the Jason Agent appearanceofevents,andaggregationsoverwindows.
class).Wheneveraruleinfersasituation,thesituation As an example, rule R.1b (section 5.1.1) triggers
isencodedintoaJasonliteralandinsertedintotheJa- when after the acceptance of a parcel 5 minutes pass
sonbeliefbase.Thebeliefisthenavailablewithinthe without the occurrence of a HasMoved event. This
agentcode,whichiswritteninAgentSpeakandstored is impossible to implement solely with AgentSpeak
in *.asl files (not shown in the figure). The belief in- plans, as in Jason plans are triggered when certain
sertioncantriggerplans,whichcanperformactionsor eventsdoappear.However,thereisnomechanismthat
sendmessagestootheragents. causes plans to be triggered by events that do not ap-
pear.Inourapproachsuchsituationscanindeedbede-
3https://www.espertech.com/esper/(Accessed:2019-01-15) tectedbytheagent,asillustratedbyruleR.1b.J.Dötterletal./Stream-basedperceptionforcognitiveagentsinmobileecosystems 283
5.3.2. Reduceddeliberationefforts Table1
Eventsthatweresensed,generated,andinferredduringatimespan
In sensor environments, a conventional BDI agent
of25minutes
isconfrontedwithmanyperceptsthatithastoreason
about. The environment appears dynamic and many Event Category Source Count
plansgettriggeredthatalterbeliefsandgoals.InAEP
Gps Sensordata GPSsensor 1568
architecture, the agent’s expectations and interpreta-
tions face this dynamic and pass only filtered, aggre- ParcelAccepted Domainevent Synthetic 2
gated, and meaningful situations to the deliberation ParcelDelivered Domainevent Synthetic 1
component. To the deliberation component, the envi-
HasMoved Context Interpretation 1269
ronment manifests itself less dynamic. This fits well
Speed Context Interpretation 51
the metaphor of the BDI model which is inspired by
DistanceToDestination Context Interpretation 668
thehumanmind:thehumanperceptionpaysattention
to only some of the expressions it gathers and detects SlowDeliveryProgress Situation Interpretation 1
meaningfulpatterns.Thisisnotaconsciouseffortthat
isperformedbydeliberatingovertheindividualstim- argument that the environment appears less dynamic
uli. for the agent’s deliberation: the deliberation only re-
ceivestheslowdeliverynotification.Dependingonthe
interpretations, a large number of intermediate con-
6. Experimentalevaluation text events might be generated that even exceeds the
number of sensor events. However, this is mostly not
The runtime behavior of our proposal can best be a problem as long as the load keeps reasonably low -
demonstrated by confronting it with real smartphone modern event processing engines are quite efficient -
sensordata. andaslongasthesecontexteventsarenotpushedinto
thebeliefbase.
GPSdataset. WeobtainedaGPSdatastreamonan
A visualization of the events over time (see Fig. 7)
AndroiddeviceusingAndroid’sLocationManagerAPI
confirms the correct behavior of our interpretation
forfine-grainedlocationtracking(seeFig.6a).During
rules.Eacheventisrepresentedbyacircle;whenthey
25minutes,theuserperformedashorttripusingabike
occur in small intervals they appear to be a straight
(seeFig.6b).Thedatasetcontainsthreebreakswhere
line. Having a look at the HasMoved events, we can
the user stopped the bike and one phase of increased
clearlyobservethethreebreaksthatarealsoapparent
speedwheretheuserreachedmorethan7m/s.Fig.6c
inFig.6c.TheSpeedeventsappearina30secondin-
showstheuser’sspeedduringthe25-minuteperiod.In
terval; this is due to the use of a batch window of 30
total,1568GPSeventswerecaptured.
seconds4. If we have a look at the DistanceToDesti-
Procedure. We expose our agent to a replay of the nation events, two observations can be made: Firstly,
captured GPS stream. Additionally, we inject three these events are only generated between the accep-
synthetic domains into the stream: two events indi- tanceofaparcel(ParcelAcceptedevent)andthedeliv-
cating that a parcel was accepted (ParcelAccepted) ery(ParcelDeliveredevent)orsellingofaparcel.Sec-
and one that indicates that the parcel was delivered ondly,thedistanceisonlyre-computedwhentheuser
(ParcelDelivered).Welogtheintermediatecontextand hasmoved.Bothobservationscorrespondwiththede-
high-level situations generated by the enhanced per- sired behavior. Finally, one slow delivery event is de-
ceptioncomponent. tected.
Results. The results are listed in Table 1 and visual-
izedinFig.7.
7. Conclusion
Discussion. Table1liststheobservedevents,grouped
bytheirrespectivecategory.Intotal,theagentacquires Inthispaper,wehaveputforwardanenhancedper-
1571 data elements from the environment (1568 GPS ceptionapproachtoputadvanceddatastreamprocess-
events and 3 domain events). From this raw data, the ing into cognitive agents in mobile ecosystems. En-
agent infers (1269+51+668=) 1988 intermediate con- hancedperceptionisdrivenbytheagent’sexpectations
text events. In the analyzed setting, a single slow de-
liverysituationwasdetected.Thenumberssupportour 4Thecorrespondinginterpretationruleisomittedinthispaper.284 J.Dötterletal./Stream-basedperceptionforcognitiveagentsinmobileecosystems
9
Speed
8
7
6
5
4
3
2
1
0
0 200 400 600 800 1000 1200 1400
Time in seconds
(a)UnprocessedGPSevents (b)Routetakenbythecyclist (c)Speedofthecyclist
Fig.6.GPSdataset
Fig.7.Eventseriesofsensorevents(GPS),syntheticdomainevents(ParcelAccepted,ParcelDelivered),context(HasMoved,Speed,Distance-
ToDestination),andderivedhigher-levelsituations(SlowDeliveryProgress)
and interpretations, which integrate information flow Our conceptual work is backed by two implemen-
conceptsintotheagent’sperceive-deliberate-thinkcy- tations. We integrated the Esper CEP engine into the
cle.Expectationsandinterpretationshaveaccesstothe Jason agent framework, which enriches Jason agents
agent’sbeliefbase,whichenablesthedetectionofsitu- withdatastreamprocessingcapabilities.Wethenused
ationsbyfusionof(i)low-level,fast-pacedsensordata thisextensiontoimplementpartsofthecrowdshipping
and(ii)high-level,semi-staticbeliefs. casestudy.
Finally,weconfrontedourimplementationwithreal
Wehaveevaluatedourapproachbydifferentmeans.
smartphone sensor data. Using enhanced perception,
We applied AEP architecture to a scenario in the
theagentaccuratelyencodestheGPSdataintomean-
crowdshippingdomain,wheremultipleself-interested
ingful context and situations and effectively reduces
agentsobtain,sell,anddeliverparcelstogainfinancial
the number of events affecting the deliberation com-
rewards. This case study demonstrates the applicabil-
ponent.Thedeliberationcomponentoperatesonarea-
ity of our proposal and illustrates the role of derived
sonable number of meaningful beliefs rather than a
situations for agreements between agents: the crowd-
high load of low-level, individually meaningless data
shippingsystemusesauctionsthatareinitiatedandin-
streamelements.
fluencedbythesituationsproducedbytheagents’in-
Future work could investigate how multiple agents
terpretations.
can cooperate to detect complex composite situations
We have shown and discussed concrete interpre- thatasingleagentcannotdetectonitsownduetomiss-
tation rules and the benefits they bring to the con- ingdataorinterpretations.Inthiscaseitcouldbehelp-
ventionalBDI-basedagentsystems:Mostimportantly, ful to perform parts of the data processing tasks out-
theyenablecomplexspatio-temporalpatternmatching sideoftheagentsperceptioninadedicateddatastream
overperceptsandrelievetheagents’deliberationindy- processingartifactthatallcollaboratingagentscanac-
namicsensorenvironments. cess.Furthermore,perceptionrulesdonotnecessarily
s/m
ni
deepSJ.Dötterletal./Stream-basedperceptionforcognitiveagentsinmobileecosystems 285
havetobeexplicitlyprogrammedbyanagentdesigner [13] V.Chan,P.RayandN.Parameswaran,Mobilee-Healthmon-
withdomain knowledge.Future workcouldincludea itoring: an agent-based approach, IET Communications 2(2)
learning approach that derives perception rules from (2008),223–230.
[14] W. Chen, M. Mes and M. Schutten, Multi-hop driver-parcel
previouslyobservedperceptstreamsandsituations.
matchingproblemwithtimewindows,FlexibleServicesand
ManufacturingJournal30(3)(2018),517–553.
[15] S.CranefieldandS.Ranathunga,HandlingAgentPerception
References in Heterogeneous Distributed Systems: A Policy-Based Ap-
proach,in:CoordinationModelsandLanguages,T.Holvoet
andM.Viroli,eds,SpringerInternationalPublishing,Cham,
[1] J. Agüero, M. Rebollo, C. Carrascosa and V. Julián, Does
2015,pp.169–185.
Android Dream with Intelligent Agents?, in: International
Symposium on Distributed Computing and Artificial Intelli- [16] G.CugolaandA.Margara,ProcessingFlowsofInformation:
gence, DCAI 2008, J.M. Corchado, S. Rodríguez, J. Llinas FromDataStreamtoComplexEventProcessing,ACMCom-
andJ.M.Molina,eds,AdvancesinSoftComputing,Vol.50, put.Surv.44(3)(2012),15:1–15:62.
Springer,2008,pp.194–204. [17] I.DayarianandM.Savelsbergh,Crowdshippingandsame-day
[2] J.Agüero,M.Rebollo,C.CarrascosaandV.Julián,Agentre- delivery:Employingin-storecustomerstodeliveronlineorders
activecapabilitiesindynamicenvironments,Neurocomputing (2017).
163(2015),69–75. [18] L.A. Dennis, M. Fisher, N.K. Lincoln, A. Lisitsa and
[3] J. Alfonso-Cendón, J.M. Fernández-de-Alba, R. Fuentes- S.M.Veres,DeclarativeAbstractionsforAgentBasedHybrid
Fernández and J. Pavón, Implementation of context-aware ControlSystems,in:DeclarativeAgentLanguagesandTech-
workflows with multi-agent systems, Neurocomputing 176 nologiesVIII,A.Omicini,S.SardinaandW.Vasconcelos,eds,
(2016),91–97. Springer,Berlin,Heidelberg,2011,pp.96–111.
[4] J.F. Allen and G. Ferguson, Actions and Events in Inter- [19] J. Dötterl, R. Bruns, J. Dunkel and S. Ossowski, Event-
valTemporalLogic,JournalofLogicandComputation4(5) Driven Agents: Enhanced Perception for Multi-Agent Sys-
(1994),531–579. temsUsingComplexEventProcessing,in:Multi-AgentSys-
[5] C.Archetti,M.SavelsberghandM.G.Speranza,TheVehicle tems and Agreement Technologies - 15th European Confer-
RoutingProblemwithOccasionalDrivers,EuropeanJournal ence, EUMAS 2017, and 5th International Conference, AT
ofOperationalResearch254(2)(2016),472–480. 2017,Évry,France,December14-15,2017,RevisedSelected
[6] A.M. Arslan, N. Agatz, L. Kroon and R. Zuidwijk, Crowd- Papers,F.BelardinelliandE.Argente,eds,LectureNotesin
sourcedDelivery—ADynamicPickupandDeliveryProblem ComputerScience,Vol.10767,Springer,2017,pp.463–475.
with Ad Hoc Drivers, Transportation Science 53(1) (2019), [20] J.Dötterl,R.Bruns,J.DunkelandS.Ossowski,Stream-Based
222–235. PerceptionforAgentsonMobileDevices,in:AgreementTech-
[7] M. Aschermann, P. Kraus and J.P. Müller, LightJason - A nologies - 6th International Conference, AT 2018, Bergen,
BDI Framework Inspired by Jason, in: Multi-Agent Systems
Norway,December6-7,2018,RevisedSelectedPapers,M.Lu-
andAgreementTechnologies-14thEuropeanConference,EU-
jak, ed., Lecture Notes in Computer Science, Vol. 11327,
MAS 2016, and 4th International Conference, AT 2016, Va-
Springer,2018,pp.73–87.
lencia, Spain, December 15-16, 2016, Revised Selected Pa-
[21] M.P.GeorgeffandA.L.Lansky,ReactiveReasoningandPlan-
pers,N.C.Pacheco,C.Carrascosa,N.OsmanandV.J.Inglada,
ning,in:ProceedingsoftheSixthNationalConferenceonAr-
eds,LectureNotesinComputerScience,Vol.10207,Springer,
tificialIntelligence-Volume2,AAAI’87,AAAIPress,1987,
2016,pp.58–66.
pp.677–682.
[8] F.Bergenti,G.CaireandD.Gotta,AgentsontheMove:JADE
[22] A.Giret,C.Carrascosa,V.Julian,M.RebolloandV.Botti,A
for Android Devices, in: Proceedings of the XV Workshop
CrowdsourcingApproachforSustainableLastMileDelivery,
"DagliOggettiagliAgenti",Catania,Italy,Sept.25-26,2014.,
Sustainability10(12)(2018).
C.SantoroandF.Bergenti,eds,CEURWorkshopProceedings,
[23] S.R.Jeffery,G.Alonso,M.J.Franklin,W.HongandJ.Widom,
Vol.1260,CEUR-WS.org,2014.
DeclarativeSupportforSensorDataCleaning,in:Pervasive
[9] O.Boissier,R.H.Bordini,J.F.Hübner,A.RicciandA.Santi,
Computing,4thInternationalConference,PERVASIVE2006,
Multi-agent oriented programming with JaCaMo, Science of
Dublin,Ireland,May7-10,2006,Proceedings,K.P.Fishkin,
ComputerProgramming78(6)(2013),747–761.
B.Schiele,P.NixonandA.J.Quigley,eds,LectureNotesin
[10] R.H.Bordini,J.F.HübnerandM.Wooldridge,Programming
multi-agentsystemsinAgentSpeakusingJason,Vol.8,John ComputerScience,Vol.3968,Springer,2006a,pp.83–100.
Wiley&Sons,2007. [24] S.R.Jeffery,G.Alonso,M.J.Franklin,W.HongandJ.Widom,
[11] K.Broda,K.Clark,R.MillerandA.Russo,SAGE:ALog- APipelinedFrameworkforOnlineCleaningofSensorData
icalAgent-BasedEnvironmentMonitoringandControlSys- Streams,in:Proceedingsofthe22ndInternationalConference
tem, in: Ambient Intelligence, M. Tscheligi, B. de Ruyter, onDataEngineering,ICDE2006,3-8April2006,Atlanta,GA,
P.Markopoulus,R.Wichert,T.Mirlacher,A.Meschterjakov USA,L.Liu,A.Reuter,K.WhangandJ.Zhang,eds,IEEE
and W. Reitberger, eds, Springer, Berlin, Heidelberg, 2009, ComputerSociety,2006b,p.140.
pp.112–117. [25] N.R.Jennings,Onagent-basedsoftwareengineering,Artificial
[12] J.Buford,G.JakobsonandL.Lewis,ExtendingBDIMulti- Intelligence117(2)(2000),277–296.
Agent Systems with Situation Management, in: 9th Interna- [26] N.R.Jennings,AnAgent-basedApproachforBuildingCom-
tionalConferenceonInformationFusion,2006. plexSoftwareSystems,Commun.ACM44(4)(2001),35–41.286 J.Dötterletal./Stream-basedperceptionforcognitiveagentsinmobileecosystems
[27] L.R.M.JohanssonandN.Xiong,Perceptionmanagement:an pers, M. Lujak, ed., Lecture Notes in Computer Science,
emergingconceptforinformationfusion,InformationFusion Vol.11327,Springer,2018,pp.190–198.
4(3)(2003),231–234. [38] A. Santi, M. Guidi and A. Ricci, JaCa-Android: An Agent-
[28] B.Khaleghi,A.Khamis,F.O.KarrayandS.N.Razavi,Mul- BasedPlatformforBuildingSmartMobileApplications,in:
tisensordatafusion:Areviewofthestate-of-the-art,Informa- Languages,Methodologies,andDevelopmentToolsforMulti-
tionFusion14(1)(2013),28–44. AgentSystems,M.Dastani,A.ElFallahSeghrouchni,J.Hüb-
[29] H.L.LeeandS.Whang,Winningthelastmileofe-commerce, ner and J. Leite, eds, Springer, Berlin, Heidelberg, 2011,
MITSloanManagementReview42(4)(2001),54–62. pp.95–114.
[30] D.C. Luckham, The Power of Events: An Introduction to [39] F. Sartori, L. Manenti and L. Grazioli, A Conceptual and
ComplexEventProcessinginDistributedEnterpriseSystems, Computational Model for Knowledge-based Agents in AN-
Addison-WesleyLongmanPublishingCo.,Inc.,Boston,MA, DROID,in:Proceedingsofthe14thWorkshop"FromObjects
USA,2001. to Agents" co-located with the 13th Conference of the Ital-
[31] E.Marcucci,M.L.Pira,C.S.Carrocci,V.GattaandE.Pier- ianAssociationforArtificialIntelligence(AI*IA2013),Torino,
alice,Connectedsharedmobilityforpassengersandfreight: Italy,December2-3,2013.,2013,pp.41–46.
Investigating the potential of crowdshipping in urban areas, [40] Y. Shoham and K. Leyton-Brown, Multiagent Systems - Al-
in: 2017 5th IEEE International Conference on Models and gorithmic, Game-Theoretic, and Logical Foundations, Cam-
TechnologiesforIntelligentTransportationSystems(MT-ITS),
bridgeUniversityPress,2009.
2017,pp.839–843.
[41] S. Stipkovic, R. Bruns and J. Dunkel, Pervasive Computing
[32] A.Omicini,A.RicciandM.Viroli,ArtifactsintheA&Ameta-
by Mobile Complex Event Processing, in: 2013 IEEE 10th
modelformulti-agentsystems,AutonomousAgentsandMulti-
International Conference on e-Business Engineering, 2013,
AgentSystems17(3)(2008),432–456.
pp.318–323.
[33] T.Rahwan,T.Rahwan,I.RahwanandR.Ashri,Agent-Based
[42] Y.Wang,D.Zhang,Q.Liu,F.ShenandL.H.Lee,Towards
Support for Mobile Users Using AgentSpeak(L), in: Agent-
enhancingthelast-miledelivery:Aneffectivecrowd-tasking
Oriented Information Systems, P. Giorgini, B. Henderson-
modelwithscalablesolutions,TransportationResearchPart
Sellers and M. Winikoff, eds, Springer, Berlin, Heidelberg,
E:LogisticsandTransportationReview93(2016),279–293.
2004,pp.45–60.
[43] D.Weyns,E.SteegmansandT.Holvoet,Towardsactiveper-
[34] S.RanathungaandS.Cranefield,ImprovingSituationAware-
ceptioninsituatedmulti-agentsystems,AppliedArtificialIn-
nessinIntelligentVirtualAgents,in:CognitiveAgentsforVir-
tualEnvironments,F.Dignum,C.Brom,K.Hindriks,M.Beer
telligence18(9–10)(2004),867–883.
and D. Richards, eds, Springer, Berlin, Heidelberg, 2013, [44] M.Wooldridge,AnIntroductiontoMultiAgentSystems,2nd
pp.134–148. edn,WileyPublishing,2009.
[35] S.Ranathunga,S.CranefieldandM.Purvis,InterfacingaCog- [45] J. Ye, S. Dobson and S. McKeever, Situation identification
nitiveAgentPlatformwithSecondLife,in:AgentsforEduca- techniquesinpervasivecomputing:Areview,Pervasiveand
tionalGamesandSimulations,M.Beer,C.Brom,F.Dignum MobileComputing8(1)(2012),36–66.
andV.-W.Soo,eds,Springer,Berlin,Heidelberg,2012,pp.1– [46] Ö.YılmazandR.C.Erdur,iConAwa–Anintelligentcontext-
21. awaresystem,ExpertSystemswithApplications39(3)(2012),
[36] A.S.Rao,BDIagents:Fromtheorytopractice,in:Proc.1st 2907–2918.
International Conference of Multiagent Systems, July 1995, [47] P.Ziafati,M.Dastani,J.-J.MeyerandL.vanderTorre,Event-
1995. processinginAutonomousRobotProgramming,in:Proceed-
[37] M.Á.Rodríguez-García,A.FernándezandH.Billhardt,Dy- ings of the 2013 International Conference on Autonomous
namicDeliveryPlanAdaptationinOpenSystems,in:Agree- AgentsandMulti-agentSystems,InternationalFoundationfor
ment Technologies - 6th International Conference, AT 2018, AutonomousAgentsandMultiagentSystems,Richland,SC,
Bergen, Norway, December 6-7, 2018, Revised Selected Pa- 2013,pp.95–102.