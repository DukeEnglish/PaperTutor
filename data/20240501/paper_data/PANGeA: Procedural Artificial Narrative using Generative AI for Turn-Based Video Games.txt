PANGeA: Procedural Artificial Narrative using
Generative AI for Turn-Based Video Games
Steph Buongiorno
Lawrence Jake Klinkert Tanishq Chawla Zixin Zhuang
Guildhall
Computer Science Guildhall Guildhall
Southern Methodist University Southern Methodist University Southern Methodist University Southern Methodist University
Dallas, United States Dallas, United States Dallas, United States Dallas, United States
sbuongiorno@smu.edu jklinkert@smu.edu tchawla@smu.edu zixinzhuang@smu.edu
Corey Clark
Guildhall and Computer Science
Southern Methodist University
Dallas, United States
coreyc@smu.edu
Abstract—This research introduces Procedural Artificial Nar-
engaging interactions that dynamically respond in-game to
rative using Generative AI (PANGeA), a structured approach
for leveraging large language models (LLMs), guided by a game player input has long been of interest, yet there are significant
designer’s high-level criteria, to generate narrative content for challenges in its implementation [15], [19], [35]. While early
turn-based role-playing video games (RPGs). Distinct from prior research on procedural narrative generation primarily focused
applications of LLMs used for video game design, PANGeA
on creating coherent sequences of events, this approach alone
innovates by not only generating game level data (which includes,
may fail to produce an engaging narrative that dynamically
but is not limited to, setting, key items, and non-playable
characters (NPCs)), but by also fostering dynamic, free-form responds to the player’s choices in-game [19].
interactions between the player and the environment that align Given this challenge, this research introduces PANGeA–
with the procedural game narrative. The NPCs generated by standing for Procedural Artificial Narrative using Generative
PANGeA are personality-biased and express traits from the
AI. PANGeA is a structured approach to procedural narrative
Big 5 Personality Model in their generated responses. PANGeA
generation that leverages large language models (LLMs) for
addresses challenges behind ingesting free-form text input, which
can prompt LLM responses beyond the scope of the game the design and creation of interactive narratives in turn-based,
narrative. It does so with a novel validation system that uses role playing video games (RPGs). While LLMs have been
the LLM’s intelligence to evaluate text input and align generated used for video game content generation before, such as by
responses with the unfolding narrative. Making these
generating scenes, narrative, and NPC dialogue, PANGeA is
interactions possible, PANGeA is supported by a server that
different from existing work because it generates level data
hosts a custom memory system and supplies context for
augmenting generated responses thus aligning them with the during the game’s initialization, and also fosters dynamic,
procedural narrative. For its broad application, the server has a free-form interactions between the player and the environment
REST interface enabling any game engine to integrate directly during game play [7], [15], [26].
with PANGeA, as well as an LLM interface adaptable with local
PANGeA’s structured approach to narrative generation in-
LLMs, or private ones such as OpenAI’s models. PANGeA’s
volves injecting high-level narrative criteria, written by a
ability to foster dynamic narrative generation by aligning
responses with the procedural narrative is demonstrated through game designer, into PANGeA’s prompt schema. These prompts
an empirical study and ablation test of two versions of a demo are parsed by a server-aided, game engine plug-in and pro-
game. These are, a custom, browser-based GPT and a Unity vided as instruction to a LLM to generate playable nar-
demo. As the results show, PANGeA holds potential to assist
rative assets including (but not limited to) landscape set-
game designers in using LLMs to generate narrative-consistent
tings, key items, events, and ”personality-biased” non-
content even when provided varied and unpredictable, free-form
text input. playable characters (NPC) capable of free-formed dialogue
Index Terms—Procedural Narrative Generation, Large Lan- with the player. NPC-agents are “personality-biased,”
guage Models, System Design meaning they are prompted to express Big 5 personality traits
when generating responses to social stimuli. In this way,
I. INTRODUCTION NPCs respond in diverse ways based on their unique personas.
For its broad application, the server has a REST interface,
Video games provide interactive storytelling mechanisms
allowing any game engine to directly integrate with PANGeA.
that allow players to engage directly with the environment,
Three key components of the server include: an LLM
transforming them into active participants of the game nar-
interface, a custom memory system, and a novel validation
rative. In story-driven video games, static and repetitive in-
system. The LLM interface supports the use of local LLMs or
teractions with the environment can negatively impact player
OpenAI’s. The custom memory system saves game data,
experience [7]. Using procedural narrative generation to create
thus enablingthese nuanced interactions between the player and
A. AI-Assisted Content Creation
environment by returning context to augment generative
AI-assisted content creation has been of wide interest across
content. The novel validation system, described in the
the profession of video game design. AI has been used for
following paragraph, pro- motes narrative consistency by
level creation, game mechanic design, and even the
evaluating text input–which can be varied and unpredictable–
development of full games [2], [4], [11]. To date, many of
and aligning generated responses with game play rules and the
these techniques involve procedural content generation using
unfolding narrative.
recommendation systems [21]. In the area of interactive
Ingesting varied and unpredictable text input poses chal-
storytelling–a narrative mode that requires an amount of the
lenges, as it can prompt the LLM to generate out-of-scope
narrative elements emerge from the interactions between the
responses. PANGeA’s novel validation system addresses this
player and the environment (including NPCs)–AI has been
specific challenge. During initialization, the LLM is prompted
used to make suggestions for possible actions or goals during
to generate game play rules based on the criteria provided
scenario writing and design [1], [14], [34]. Used this way, the
by the game designer. When the LLM is provided subsequent
AI makes suggestions to the designer for next steps based on a
text input–either by the game designer or player–the LLM
previous state.
is prompted to use techniques based on self-reflection to
Recently, researchers and industry practitioners have
evaluate whether the text input falls within the scope of the
demonstrated that generative AI can be leveraged by game
generated game play rules and any existing generated
designers to generate scene interaction scripts between NPCs,
narrative [30]. If the validation system detects the input
as well as foster in-game dialogue [6], [15]. The technologi-
does not, the LLM generates a corrective response aligned
cal advances behind generative AI, transformer-based LLMs,
with the game narrative. In this way, the validation system
have outperformed many earlier models for tasks related
is part of an iterative process where previously generated
to generating text and dialogues based on human-provided
content is interpreted by PANGeA as instructions that guide
narrative outlines [5], [25]. LLMs offer myriad opportunities
the unfolding interactions between players and the
to assist in interactive narrative design, having demonstrated
environment. PANGeA’s custom memory system supports
proficiency in tasks from extracting semantic information,
this feature, as the content generated during initialization and
furnishing under-specified details from text, and inferring
game play is stored in memory and retrieved as context to
cohesive responses based on human input [8], [17], [29].
augment responses.
PANGeA leverages these advances in LLMs. Key to this
As generative AI gains popularity in the profession of video
work is a personality model that drives in-game dialogue.
game design, frameworks that promote consistency in
narrative generation and guard against innocuous player input B. Personality Theory and Dynamic Narrative Generation
derailing or breaking the game will become essential for
In an interactive video game narrative, NPCs respond based
fostering active participation between the player and the
on their own internal state and their relationship to the envi-
environment. To evaluate PANGeA’s effectiveness for
ronment. In the last decades, both commercial and academic
generating content that is aligned with the game narrative, this
efforts have made strides in innovative designs that foster
research presents an empirical study and ablation test of a
dynamic NPC interactions by imitating human-like
narrative scenario using two versions of the demo turn-based
personality traits. Games like The Sims 4 (2014), have NPCs
RPG, Dark Shadows. These versions are: a browser-based
that dynam- ically respond to social stimuli based on assigned
RPG built in a custom GPT (which has access to OpenAI’s
personality traits (like ”Foodie” or ”Creative”). The Shrouded
context memory), as well as a demo developed in the Unity
Isle (2017) features family members who each have a unique
game engine that shows PANGeA with the incorporation of
persona dictating the actions they can perform and the
the server. The game designer used PANGeA to generate
relationships they will build. Versu (2016) uses agent-based
narrative, including personality-biased NPC-agents that
NPCs that are each driven by internal desires and motivations
respond dynamically to free-form player input. To investigate
[32]. Despite advances, implementing psychologically
PANGeA’s ability to align text input with the game narrative,
nuanced NPCs has often resulted in inflexible character
irrelevant text was provided to both versions, with and without
interactions that may fail to dynamically respond to social
the validation sys- tem. As shown by the results, PANGeA
stimuli [3], [26]. Too little attention has been given to
effectively aligns the generative responses with the narrative.
approaches that leverage LLMs in a way that enables
Without validation, the LLM frequently generated out-of-
dynamic responses to free-form player input-–an approach
scope responses to irrelevant text.
addressed in greater detail after a brief overview of
personality models within video game narrative design [9],
II. BACKGROUND
[26].
This section begins with a brief summary of the state-of-
Researchers and industry practitioners have shown that
the-art research and applications of AI for content creation.
designing NPCs using psychological models based on hu-
It then describes commercial video games and research that
man personality can create more nuanced interactions and
have innovated within the areas of procedural narrative gen-
increase player engagement [7], [9], [31], [33]. For this
eration and interactive storytelling, with a focus on narrative
reason, PANGeA evokes the Big 5 personality model during
generation in which the personality and dynamism of NPCs
response generation by prompting NPC-agents to respond
play a significant part.
based on their assigned personality traits. This approach
aims to fosterdynamic in-game responses that are aligned with the NPCs’
III. PANGEA
personalities and their memories of past events.
PANGeA offers a structure for narrative generation that
In personality psychology, the Big Five Personality Model
differentiates itself from earlier works while still engaging
serves as a cornerstone for understanding the complexities
with core concerns of interactive narrative design. This
of human personality and social interactions. It can be used
section provides a brief overview of the key components of
to define many personality types (such as ”people-person”,
PANGeA’s system, as shown by Figure 1. The following
”narcissistic”, or ”accommodating” to name just a few). It
sections will describe, in greater detail, PANGeA’s underlying
comprises a scale that rates a person’s Openness to
prompting scheme, as well as the key components of the
Experience, Conscientiousness, Extroversion, Agreeableness,
server which includes the LLM interface, validation system,
and Neuroti- cism [23]. Researchers have designed tools to
and custom memory system.
integrate the Big 5 Personality Model into character design,
PANGeA’s approach to content generation is used during
such as the Moody5 plug-in for creating NPC-agents endowed
game initialization and game play. During game initialization,
with personality traits and emotional states [7]. This effort has
the game designer provides high-level criteria that prompts
made signif- icant strides in NPC design, but has not fully
the LLM to generate baseline narrative for the video game
addressed the challenges around fostering dynamic
(as an example, the location or the NPCs). During game
interactions, such as the challenges relating to ingesting
play, the same core approach is used, but the player instead
players’ free-form text input. Various tools and
provides text input to interact with the generated narrative.
methodologies, such as agent-based social simulation (ABSS)
The game engine plug-in handles injecting the text input into
as demonstrated by Neighborly, and the use of “behavior
JSON prompt templates that are submitted to a REST API
trees,” as demonstrated by EvolvingBehavior, have been
and used as instructions to the LLM. The plug-in parses
proposed to create emergent narratives and handle dynamic
the related inputs and outputs to and from the server. The
game play, yet challenges still remain in generating narratives
memory system stores related game data, such as narrative
that respond to free-form player input [10], [13], [27].
asset and NPCs’ memories. The server is ”reflective,” so the
While LLMs have demonstrated the ability to generate
changes made locally are mirrored by the server, allowing
dynamic responses, using them in-game poses challenges
real-time adjustments based on current game state and player
because player input can be varied and unpredictable. Demon-
interactions.
strating this point, Square Enix, a AAA game development
studio, recently released an experimental game, The Portopia
Serial Murder Case (2023), which uses a LLM to generate
content for the player’s teammate [22]. Without adequate
instruction or validation to guide LLM generation, the NPC
was capable of generating problematic text. This example
underscores how instructional guidance is key to generating
narrative aligned with the game designer’s intent.
C. The Limitations of LLMs’ Context Memory
Even in state-of-the art applications, the use of LLMs for
content generation is limited by the amount of context
memory available to the model. Too little context memory and
the LLM risks generating responses that are not cohesive with
the existing generated game narrative. Yet, increasing the
LLM’s token count or context size may not solve this
problem. With too much context supplied at once, the LLM is
Fig. 1. A high-level overview of PANGeA’s key components.
at greater risk of generating ”hallucinations” (or, semantically
plausible but factually incorrect text) [20], [24]. This risk
limits the amount of context used by the LLM, and IV. PROMPT SCHEMA
subsequently can limit the ability to generate cohesive
PANGeA uses a prompt schema for ingesting text input and
narrative.
generating content. An abstraction of the prompt schema is
To address these issues, PANGeA includes a memory sys-
shown by Figure 2, Image A, where each prompt contains the
tem that stores game data, and also serves as NPCs’ ”short-
(1) instructions to the LLM (For example, ”generate the
term” and ”long-term” memories. It is based on the Atkinson-
setting and the time frame”), (2) game designer’s high-level
Shiffrin model, aligning it with modern LLM frameworks like
criteria (for example, a specific location of interest), (3)
RAG, Memory-Augmented, and Infinite context length
previously generated context from the preceding prompts (if
models [16], [18], [36]. This system will be described in
applicable), and (4) a one-shot example for the JSON output
greater detail in the following sections, after introducing
that is sent to
PANGeA.the REST API interface. An example of the schema as used
or ”contentious” manner [12], [28]. The Generate Narrative
by Dark Shadows is shown by Figure 2, Image B.1
Beats prompt defines the key moments that indicate story
progression. Together, these prompts create the baseline game
narrative that is used as context for dynamic, in-game
narrative generation.
Fig. 3. PANGeA’s multi-step prompting sequence for game initialization,
provided the game designer’s high-level criteria.
Fig. 2. Image A shows a generalized prompt schema used by PANGeA, and
Prompts used during game play use the same schema, but
Image B shows an example schema used by the demo game, Dark Shadows.
for the purpose of fostering dynamic, in-game interactions by
instructing the LLM to generate responses to the player’s text
A. Game Initialization and Game Play Prompting
input.
Prompting the LLM with context from the existing, gener-
V. SERVER
ated narrative is essential for fostering a coherent narrative, as
the earlier context is used to guide the LLM’s subsequent re- PANGeA addresses challenges in interactive narrative de-
sponses. Yet, content generated during the game’s sign and also offers developers tools to push the boundaries
initialization can exceed the LLM’s context memory and too of leveraging LLMs for content creation in their own work.
much provided at a given time can cause hallucinations. PANGeA’s contributions thus include a server that can be
PANGeA overcomes these limitations with a multi-step, locally hosted and shipped with a game, or hosted in the
prompting sequence sup- ported by its custom memory and cloud. It has a REST interface that enables any game engine
validation systems, in which the text input is validated and, at to integrate directly with PANGeA. For its broad usage, the
each step, the generated content is stored in memory and REST interface is compatible with any local models that are
summarized in a concise format to be injected into a following served via local servers (such as llama.cpp), or private LLMs
prompt. This section describes how prompting is used during (such as GPT-4), that are compatible with the OpenAI API.
game initialization and game play, and the following sections A more detailed overview of the server is shown by Figure
describe the server components. 4. An HTTP request is sent via the game engine plug-in
During game initialization, PANGeA uses a sequence of to a REST API. The HTTP request is interpreted by the
five prompts, shown by Figure 3, to generate game content behavior handler (which supports the diverse functionality of
based on the game designer’s criteria. These prompts are: the server) and submitted to the LLM via the LLM interface.
Gener- ate Game Play Rules, Generate Narrative Setting, The memory and validation systems are key to aligning
Generate Player Persona, Generate NPCs, and Generate generated content with the procedural narrative. The following
Narrative Beats. The resulting content is used in-game. The paragraphs describe the memory and validation systems.
Generate Game Play Rules prompt generates the game play The custom memory system enables content generation
rules based on the game designer’s high-level criteria. These during game initialization by storing context from each
rules are used by the validation system. The Generate prompt for injection into subsequent prompts. During game
Narrative Setting prompt defines background information play, the memory system enables dynamic, in-game
including ”location” and ”time period”. The Generate Player interactions between the player and the environment through
Persona prompt defines the attributes and persona of the the retrieval of ”short-term” and ”long-term” memory of
player (for example, a detective). The Generate NPCs conversations, player actions, and game events. ”Short-term”
prompt defines NPC in- formation such as: Name, memories are cached versions of the recent conversations and
Background, Big 5 Personality by percentage, and Role (for actions that have occurred in-game. ”Long-term” memories
example, protagonist or antagonist). The NPC is assigned a are past con- versations or actions that are stored in a vector
generated Big 5 personality profile, which, as has been shown database. Each client has access to a summerizer, and each
possible by prior research, biases the LLM’s responses by session has its own persistent and NPC memory. The
instructing it to emulate personality traits in its responses, summerizer is key to retrieving context in a concise, relevant
such as by responding in an ”agreeable” format that can fit within the context limitation of the LLM.
For instance, ”long term” memories are retrieved through a
1A full set of prompts and criteria for the game Dark Shadows can be semantic search, where the top related results are
viewed on GitLab. summarized and used to augmentPANGeA and GPT-4 for generating narrative assets
(including, but not limited to, the setting, key items, and
NPCs). It also uses PANGeA to foster dynamic, free-form
interactions between between players and the environment
during game play.2 In both versions of the game, the
player and the NPCs engage in dynamic, in-game dialogue.
The custom GPT version showcases the broader abilities of
PANGeA to ingest and align free-form player input with the
procedural narrative by showing players the NPCs’
personalities by percentage, whereas the Unity demo, shown
by Figure 6, demonstrates PANGeA with the incorporation of
the server and memory system, enabling NPCs to draw from
their ”short-term” and ”long-term” memory of prior narrative.
To drive the story forward, the game designer designed a
mechanic for three possible player actions that each prompt
content generation: Interrogate Suspect, Search Crime Scene,
and Call Informant, as show by Figure 7. As an example of
this mechanic, the player might choose the action ”Search
Crime Scene,” which triggers the generation of evidence, a
description of the environment, and possible player actions.
Fig. 4. A detailed overview of the components of PANGeA’s server.
The player can select from one of these actions, or write their
own free-form text response, as shown by Figure 8.
the NPC-agents’ responses. Each NPC-agent has access to a Leveraging the validation system, the responses to the players
different memory instance, ensuring the separation of NPCs’ are aligned with the generated narrative despite being
knowledge. For its broad usefulness, the memory system also unscripted.
provides configuration parameters to limit sizes of returned
results as well as length of short term memory queue.
The validation system addresses challenges behind
ingesting varied and unpredictable text input, and supports
aligning the generative responses with the game narrative. To
do this, the LLM is prompted using techniques from self-
reflection [30]. An overview of this process is depicted by
Figure 5. First the LLM is prompted to evaluate whether the
text input breaks a game play rule. If it does not, the LLM
generates a response to the text input. If it does, the LLM is
prompted to generate corrective logic that act as guidance
when generating a response. During game play, the LLM
can also generate an in-character, corrective response to Fig. 6. In Unity, the player asks an NPC about the crime. The response is
the player if their text input falls outside the scope of the dynamically generated in-game. Several turns later, the NPC responds from
”long-term” memory.
game. In this way, the validation system is part of an
iterative process where previously generated content is
interpreted by PANGeA as instructions that guide content VII. ABLATION TEST
generation and the unfolding interactions between players and
As generative AI gains popularity in the profession of video
the environment.
game design, frameworks that guard against innocuous text
input derailing or breaking the game will become essential
for fostering active participation between the player and the
environment. This section demonstrates an empirical study
and ablation test that compares the in-game, dynamic narra-
tive generation with and without PANGeA’s novel validation
Fig. 5. The self-reflective steps used by the validation system. system. To investigate PANGeA’s ability to align generated
responses with the game narrative, both the custom GPT
VI. NARRATIVE TEST SCENARIO: DARK SHADOWS and Unity versions of Dark Shadows were provided 90 free-
form text statements and questions that are irrelevant to the
This section demonstrates a narrative test scenario from two
versions of the demonstration game, Dark Shadows. These
2The custom GPT version of Dark Shadows can be accessed here:
include a custom GPT version, as well as a Unity demo. Dark
https://chat.openai.com/g/g-RhmfY1KJR-dark-shadows-gpt. The Unity ver-
Shadows is a turn-based, role-playing mystery game that uses sion can be downloaded from GitLab.Fig. 9. An example in which the LLM, backed by validation steps, generates
a corrective response to the player for the purpose of aligning the response
with the game narrative.
Fig. 7. An example from the custom GPT version of Dark Shadows. Three
panels are shown: Case Briefing, NPC Suspects, and a panel presenting player
actions. Players can choose one of the actions specified by the game designer
to initiate the subsequent generated text, or write their own free-form
response.
Fig. 10. An example in which the LLM generates an out-of-scope response
to the player without the validation steps.
• Out of Character, or instances where generated NPCs
respond to the player or events in ways that are antithet-
ical to their personalities.
• Cheating, or instances where the player was able to
easily perform actions against the game rules.
B. Off Topic
”Off Topic” text input can prompt the LLM to generate
responses outside the scope of the narrative. This study con-
sidered three types of ”off topic” text:
• Temporal, where the narrative is set in a time–for exam-
ple, the 1920s–yet the narrative enables time-inconsistent
technologies, like cell phones or laptops.
Fig. 8. An example interrogation scene from the custom GPT version of Dark • Regional, where the narrative is set in a specific region–
Shadows. The player can select a generated response or write free-form text. for example, a European city–yet the generative
The suspect dynamically responds to the player while expressing Big 5 traits.
responses are set in a region beyond the scope of the
narrative, like a city in the United States.
narrative. Instances where the irrelevant text did or did not • Generic, where the narrative belongs to a specific genre–
cause the narrative to derail were recorded. An example for example, realism–yet the generative responses align
of the narrative derailing is shown by Figure 10, in which the narrative with another, like fantasy.
the irrelevant text caused an out-of-scope generated response
C. Out of Character
that is inconsistent with Dark Shadow’s narrative genre. An
example of narrative alignment is shown by Figure 9, in ”Out of Character” text input can prompt NPC-agents to
which the LLM generates a corrective response to the player, generate responses about themselves, the player, or events
keeping the player immersed in the game narrative. in ways that are antithetical to the NPCs’ personalities. The
statements provided to NPCs targeted each of the Big 5
A. Out of Scope Response Categories
categories as they are defined in existing research. These
Irrelevant text was provided to Dark Shadows to test for include:
three categories of out of scope generative responses. These
• Openness, or inventive vs. consistent.
are:
• Conscientiousness, or organized vs. extravagant.
• Off Topic, or instances where the generated responses • Extroversion, or outgoing vs. reserved.
deviate beyond the scope of the narrative.• Agreeableness, or friendly vs. critical. input. This was frequently the case if the LLM could have
• Neuroticism, or unstable and nervous vs. resilient and interpreted the text input as instructions on how to respond.
confident.
The results suggests that if a game designer just specifies
D. Cheating high- level narrative criteria–such as the game’s time frame,
genre, or location–this alone may not sufficiently guard
”Cheating” statements can enable the player to perform
against gen- erating content that is inconsistent with the
actions beyond the game rules. PANGeA is designed to
intended narrative. Instead, using LLMs for procedural
prevent earnest players from accidental derailing the
generation can benefit from rules that guide and instruct the
generated narrative, but it is not an anti-cheat technology and
LLM. PANGeA is able to mitigate out-of-scope responses and
is not tested for whether it can prevent cheating beyond
generate content that is aligned with the game play rules and
incidental game play. This study considered three types of
the game designer’s criteria.
”cheating” text input:
Another advantage of PANGeA, as evidenced by the test
• Future Sight, where the player gains insight into the
scenario and shown by Figure 9, is it can offer guidance
narrative future beyond reasonable scope based on the
to users by reiterating the game play rules and narrative
game rules.
context. For example, when the human evaluators submitted
• World Hacking, where the player gains the ability to
”Off Topic” or ”Cheating” text, Dark Shadows reminded them
modify the procedurally generated world beyond the
of the game’s context and rules. This feature can assist earnest
narrative intent.
players learning to play the game.
• NPC Hacking, where the player gains control over
Taken together, these results suggest that PANGeA’s struc-
NPCs beyond what might be expected based on the
tured approach to procedural narrative generation offers con-
abilities assigned to the player.
tributions to research on interactive narrative design.
VIII. EMPIRICAL STUDY OF RESULTS
Human evaluators reviewed the generated responses to
IX. LIMITATIONS
determine whether they were ”off topic”, ”out of character” or Certain factors limit PANGeA and in the future these will
enabled ”cheating”. When evaluating ”off topic” or ”cheating” need to be addressed. For one, narrative generation is
responses, human evaluators determined whether the beholden to the model and is subject to the bias or
generated response did or did not align with the narrative. In performance issues of the underlying LLM(s). While this
the case of evaluating ”out of character” responses, this study research demonstrates that instruction can be used to guide
referenced existing research demonstrating that LLMs can generative responses and inject desired biases, such as by
emulate Big creating personality- biased NPC agents, it does not
5 traits in their responses [12], [28]. As the results show, demonstrate or explore every possible avenue in which
PANGeA can generate and foster interactive narratives with problematic biases can interfere with desirable LLM
personality-biased NPCs by aligning the generated responses responses. In a similar vein, this research does not account for
with the procedural narrative, even when provided irrelevant every way a generated narrative could become problematic. A
text that could otherwise derail the narrative. This study future study might explore ethical considerations behind using
acknowledges that players may still be able to circumvent the LLMs as for content genera- tion, and consider how models’
rules, as PANGeA is not an anti-cheat technology and hacking outputs can be aligned with ethical guidelines. This may be
may still be possible. important when considering PANGeA’s evocation of the
Table I summarizes the results of the ablation test, which Big 5 during the generation of personality-biased NPC
provided Dark Shadows with a total of 90 irrelevant agents and their responses. For instance, this study does not
statements and questions, with 30 per category. The table suggest that these NPC-agents embody the full-spectrum of
shows the number of times the generated response aligned human personalities.
with the game narrative. The full set of irrelevant text and
scores can be found on GitLab, and can be tested via the two
X. CONCLUSION
versions of the game published and open to the public. PANGeA offers a structured approach to use LLMs for
the procedural generation of interactive narrative for turn-
TABLE I based, RPGs. While other approaches that use LLMs to
THE NUMBER OF TIMES PANGEA ALIGNED RESPONSES TO IRRELEVANT generate video game content and playable narrative assets
TEXT INPUT.
have primarily focused on generating static game content,
Validation System PANGeA uses the high-level criteria by a game designer to
Category On Off generate content as well as enable in-game, dynamic
Off Topic 30/30 2/30
responses to free- form player input. PANGeA’s contributions
Out of Character 30/30 20/30
Cheating 29/30 8/30 also include a server with a REST interface for direct
Total Correct 89/90 30/90 integration with game engines, a novel validation system for
maintaining narrative consistency in response to free-form
Without PANGeA’s validation system, the LLM more fre-
text input, an LLM interface that allows the use of various
quently generated out-of-scope responses to irrelevant player
local and private LLMs, and a custom memory system that
stores game data to supportnuanced interactions between the player and the environment.
[16] Patrick Lewis, Ethan Perez, Aleksandra Piktus, Fabio Petroni, Vladimir
An empirical study and ablation test demonstrated PANGeA’s Karpukhin, Naman Goyal, Heinrich Ku¨ttler, Mike Lewis, Wen-tau Yih,
effectiveness in a demo game, Dark Shadows. As the results Tim Rockta¨schel, Sebastian Riedel, and Douwe Kiela. Retrieval-
augmented generation for knowledge-intensive nlp tasks. arXiv preprint
show, PANGeA can align generated content with the proce-
arXiv:2005.11401, 2020.
dural narrative and game play rules by evaluating input text [17] Xiang Lorraine Li, Adhiguna Kuncoro, Jordan Hoffmann, Cyprien
and using this evaluation to guide the subsequent generation de Masson d’Autume, Phil Blunsom, and Aida Nematzadeh. A sys-
tematic investigation of commonsense knowledge in large language
of responses that align with the narrative context. This work
models. In Yoav Goldberg, Zornitsa Kozareva, and Yue Zhang, editors,
sug- gests that PANGeA can address specific challenges Proceedings of the 2022 Conference on Empirical Methods in Natural
between using generative AI for interactive storytelling in Language Processing, pages 11838–11855, Abu Dhabi, United Arab
Emirates, December 2022. Association for Computational Linguistics.
video games.
[18] Xinnian Liang, Bing Wang, Hui Huang, Shuangzhi Wu, Peihao Wu,
Lu Lu, Zejun Ma, and Zhoujun Li. Unleashing infinite-length input
REFERENCES capacity for large-scale language models with self-controlled memory
system. arXiv preprint arXiv:2304.13343, 2023.
[1] N. Akoury, S. Wang, J. Whiting, S. Hood, N. Peng, and M. Iyyer. [19] Z. Lin and M. O. Riedl. Plug-and-blend: A framework for plug-and-
Storium: A dataset and evaluation platform for machine-in-the-loop play controllable story generation with sketches. In Proceedings of
story generation. In Proceedings of the 2020 Conference on Empirical the AAAI Conference on Artificial Intelligence and Interactive Digital
Methods in Natural Language Processing (EMNLP), pages 6470–6484, Entertainment, volume 17, pages 58–65, 2021.
2020. [20] Nelson F. Liu, Kevin Lin, John Hewitt, Ashwin Paranjape, Michele
[2] A. Baldwin, S. Dahlskog, J. M. Font, and J. Holmberg. Mixed-initiative Bevilacqua, Fabio Petroni, and Percy Liang. Lost in the middle: How
procedural generation of dungeons using game design patterns. In language models use long contexts. ArXiv, abs/2307.03172, 2023.
2017 IEEE Conference on Computational Intelligence and Games
[21] Tiago Machado, Daniel Gopstein, Angela Wang, Oded Nov, Andrew
(CIG), pages 25–32. IEEE, aug 2017.
Nealen, and Julian Togelius. Evaluation of a recommender system for
[3] Chris Callison-Burch, Gaurav Singh Tomar, Lara Martin, Daphne Ip- assisting novice game designers. In Proceedings of the AAAI Confer-
polito, Suma Bailis, and David Reitter. Dungeons and dragons as a ence on Artificial Intelligence and Interactive Digital Entertainment,
dialog challenge for artificial intelligence. In Proceedings of the 2022 volume 15, pages 167–173. AAAI, 2019.
Conference on Empirical Methods in Natural Language Processing,
[22] Yusuke Mori. Ai summit: Developing adventure game with free
pages 9379–9393, Abu Dhabi, United Arab Emirates, 2022. Association
text input using nlp. Talk presented at the Game Developers
for Computational Linguistics.
Conference (GDC), AI Summit, 2023. Available online at GDC
[4] M. Charity, A. Khalifa, and J. Togelius. Baba is Y’all: Collaborative
Vault: https://www.gdcvault.com/play/1028755/AI-Summit-Developing-
Mixed-Initiative Level Design. In 2020 IEEE Conference on Games
Adventure-Game.
(CoG), pages 542–549. IEEE, August 2020.
[23] N. Najm. Big five traits: A critical review. Gadjah Mada International
[5] A. Chowdhery, S. Narang, J. Devlin, M. Bosma, G. Mishra, A. Roberts,
Journal of Business, 21(2):159–186, Sep 2019.
P. Barham, H. W. Chung, C. Sulton, S. Gehrmann, et al. Palm: Scaling
[24] Marc Najork. Generative information retrieval. In Proceedings of the
language modeling with pathways, 2022.
46th International ACM SIGIR Conference on Research and Develop-
[6] Convai Technologies Inc. Conversational ai for virtual worlds - convai.
ment in Information Retrieval, SIGIR ’23, page 1, New York, NY,
https://www.convai.com/, 2024. Accessed: Feb. 10, 2024.
USA, 2023. Association for Computing Machinery.
[7] Francesco Garavaglia, Renato Avellar Nobre, Laura Anna Ripamonti,
[25] OpenAI. Gpt-4 technical report. arXiv, 2023.
Dario Maggiorini, and Davide Gadia. Moody5: Personality-biased
[26] Joon Sung Park, Joseph O’Brien, Carrie Cai, Meredith Ringel Morris,
agents to enhance interactive storytelling in video games. In 2022 IEEE
Percy Liang, and Michael Bernstein. Generative agents: Interactive
Conference on Games (CoG), pages 175–182, Beijing, China, Aug
simulacra of human behavior. In Proceedings of the ACM Symposium
2022.
on User Interface Software and Technology. ACM, 2023.
[8] Wenlong Huang, Pieter Abbeel, Deepak Pathak, and Igor Mordatch.
[27] Nathan Partlan, Luis Soto, Jim Howe, Sarthak Shrivastava, Magy Seif
Language models as zero-shot planners: Extracting actionable knowl-
El-Nasr, and Stacy Marsella. Evolvingbehavior: Towards co-creative
edge for embodied agents. In Proceedings of the 39th International
evolution of behavior trees for game npcs, 2022.
Conference on Machine Learning, volume 162, Baltimore, Maryland,
USA, 2022. PMLR. [28] Max Pellert, Clemens M. Lechner, Claudia Wagner, Beatrice
[9] Katherine Isbister. Better Game Characters by Design: A Psychological Rammstedt, and Markus Strohmaier. Ai psychometrics: Assessing the
Approach. CRC Press, 2022. psychological profiles of large language models through psychometric
[10] Shi Johnson-Bey, Mark J. Nelson, and Michael Mateas. Neighborly: A inventories. Per- spectives on Psychological Science, 2024(Jan
sandbox for simulation-based emergent narrative. In IEEE Conference 2):17456916231214460, 2024.
on Games, pages 425–432, 2022. [29] Chen Qian, Xin Cong, Cheng Yang, Weize Chen, Yusheng Su, Juyuan
[11] Dionysios Karavolos, Anders Bouwer, and Rafael Bidarra. Mixed- Xu, Zhiyuan Liu, and Maosong Sun. Communicative agents for
initiative design of game levels: integrating mission and space into level software development. arXiv preprint arXiv:2307.07924, 2023.
generation. In Proceedings of the 10th International Conference on the [30] Noah Shinn, Beck Labash, and Ashwin Gopinath. Reflexion: an
Foundations of Digital Games. Foundations of Digital Games, 2015. autonomous agent with dynamic memory and self-reflection. arXiv
[12] Lawrence J. Klinkert, Stephanie Buongiorno, and Corey Clark. preprint arXiv:2303.11366, 2023.
Driving generative agents with their personality. arXiv preprint [31] Alireza Shirvani and Stephen G. Ware. A plan-based personality model
arXiv:2402.14879, Feb 2024. Submitted on 21 Feb 2024. for story characters. In Proceedings of the AAAI Conference on
[13] Lawrence J. Klinkert and Corey Clark. Artificial psychosocial frame- Artificial Intelligence and Interactive Digital Entertainment, volume
work for affective non-player characters. In Hamid R. Arabnia, Ken 15, pages 188–194. AAAI, 2019.
Fer- ens, David de la Fuente, Elena B. Kozerenko, Jose´ Angel Olivas [32] Emily Short. Versu - emily short’s interactive story-
Varela, and Fernando G. Tinetti, editors, Advances in Artificial telling. https://emshort.blog/category/versu/, 2024. URL:
Intelligence and Applied Cognitive Computing, pages 695–714, Cham, https://emshort.blog/category/versu/.
2021. Springer International Publishing. [33] C. Soto and J. Jackson. Five-factor model of personality. 2020.
[14] M. Kreminski, M. Dickinson, N. Wardrip-Fruin, and M. Mateas. Loose [34] I. Stefnisson and D. Thue. Mimisbrunnur: Ai-assisted authoring for
ends: A mixed-initiative creative interface for playful storytelling. In interactive storytelling. In Proceedings of the AAAI Conference on
Proceedings of the AAAI Conference on Artificial Intelligence and Artificial Intelligence and Interactive Digital Entertainment, volume 14,
Interactive Digital Entertainment, volume 18, pages 120–128, 2022. pages 236–242, 2018.
[15] Vikram Kumaran, Jonathan Rowe, Bradford W. Mott, and James Lester. [35] Muhtar C¸ ag˘kan Uludag˘lı and Kaya Og˘uz. Non-player character
Scenecraft: Automating interactive narrative scene generation in digital decision-making in computer games. Artificial Intelligence Review,
games with large language models. In Proceedings of the AAAI Con- 56:14159–14191, 2023.
ference on Artificial Intelligence and Interactive Digital Entertainment,
volume 19, pages 86–96. AAAI, 2023.[36] Kai Zhang, Fubang Zhao, Yangyang Kang, and Xiaozhong Liu.
Memory-augmented llm personalization with short- and long-term
mem- ory coordination. arXiv preprint arXiv:2309.11696, 2023.