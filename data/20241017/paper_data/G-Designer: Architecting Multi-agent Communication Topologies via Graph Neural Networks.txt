G-Designer: Architecting Multi-agent Communication
Topologies via Graph Neural Networks
GuibinZhang1,2‚àó,YanweiYue2‚àó,XiangguoSun3‚Ä†,GuanchengWan4,
MiaoYu5,JunfengFang5,KunWang5‚Ä†,DaweiCheng1,2
1ShanghaiAILaboratory2TongjiUniversity3CUHK4EmoryUniversity5USTC
‚àóEqualContribution‚Ä†CorrespondingAuthor
Primarycontact:guibinz@outlook.com
Abstract
CHAIN TREE DYNAMIC
Recentadvancementsinlargelanguagemodel(LLM)-basedagents
have demonstrated that collective intelligence can significantly
surpassthecapabilitiesofindividualagents,primarilyduetowell-
craftedinter-agentcommunicationtopologies.Despitethediverse
andhigh-performingdesignsavailable,practitionersoftenfacecon- DyLAN
Chain Star Tree
fusionwhenselectingthemosteffectivepipelinefortheirspecific
GRAPH
t sa as rk y: cW omhi mch unto ip cao tlo iog ny ti os kt eh neb oves et rhch eao dice wf ho ir lem ey nst uas rk in, gav ho ii gd hin -qg uu an lin tyec se os --
iteration
lution?Inresponsetothisdilemma,weintroduceG-Designer,an
adaptive,efficient,androbustsolutionformulti-agentdeployment,
whichdynamicallydesignstask-aware,customizedcommunica- Complete Graph Layered Graph Random Graph GPTSwarm
tiontopologies.Specifically,G-Designermodelsthemulti-agent
Figure1:ExisitingpracticesforLLM-basedmulti-agentcommunica-
systemasamulti-agentnetwork,leveragingavariationalgraph
tiontopologydesign.
auto-encodertoencodeboththenodes(agents)andatask-specific
virtualnode,anddecodesatask-adaptiveandhigh-performingcom-
municationtopology.Extensiveexperimentsonsixbenchmarks 1 Introduction
showcasethatG-Designeris:(1)high-performing,achieving Webdata,asanaturallyoccurringdatastructure,prevailsinsocial
superiorresultsonMMLUwithaccuracyat84.50%andonHu- networks[22,63],tradenetworks[16,21,58],transportationsys-
manEvalwithpass@1at89.90%;(2)task-adaptive,architecting tems[1,18],andrecommendationplatforms[17,68],etc.Webdata
communicationprotocolstailoredtotaskdifficulty,reducingto- caninherentlyberepresentedasgraphs,wherenodesandedges
kenconsumptionbyupto95.33%onHumanEval;and(3)adver- capturethetopologicalrelationshipsbetweennumerousinstances.
sariallyrobust,defendingagainstagentadversarialattackswith Recently,therehasbeenasurgeofinterestintheacademiccom-
merely0.3%accuracydrop.Thecodeisanonymouslyavailableat munitytowardoptimizingthetopologydesignforLargeLanguage
https://anonymous.4open.science/r/GDesigner-3063. Model-basedmulti-agent(LLM-MA)systems,essentially,howto
weavethewebofagents[11].
Keywords AnLLM-basedagent,whichintegratesthelanguagegeneration
capabilitiesofLLMswithdecision-makingandaction-execution
Multi-agentnetwork,Graphmachinelearning,LLM-basedagent
functionalities[45,53,54],hasexhibitedimpressiveperformance
acrossawiderangeoftasks,fromreasoning[77]andcodegenera-
ACMReferenceFormat:
GuibinZhang1,2‚àó,YanweiYue2‚àó,XiangguoSun3‚Ä†,GuanchengWan4,,Miao tion[59]toevenmorecomplexapplicationslikevideogaming[65]
Yu5,JunfengFang5,KunWang5‚Ä†,DaweiCheng1,2.2018.G-Designer:Archi- andautonomousdriving[32].Evenmoreexciting,researchershave
tectingMulti-agentCommunicationTopologiesviaGraphNeuralNetworks. discoveredthatcombiningmultipleLLM-basedagents‚Äìwhetherim-
InProceedingsofMakesuretoenterthecorrectconferencetitlefromyour plicitlyorexplicitly‚Äìintoateamcanoutperformindividualagents
rightsconfirmationemai(Conferenceacronym‚ÄôXX).ACM,NewYork,NY, when tackling complex tasks [15, 31, 39, 59, 70, 73, 85], demon-
USA,12pages.https://doi.org/XXXXXXX.XXXXXXX stratingaformofcollaborativeintelligencereminiscentofhuman
teamworkinmulti-agentsystems[81].Thisemergenceofhuman-
esquecollectiveintelligenceisfundamentallydrivenbythedesign
Permissiontomakedigitalorhardcopiesofallorpartofthisworkforpersonalor oftheirtopology,i.e.,howmulti-agentsareconnected,andhowthey
classroomuseisgrantedwithoutfeeprovidedthatcopiesarenotmadeordistributed
forprofitorcommercialadvantageandthatcopiesbearthisnoticeandthefullcitation transmit,exchange,andassimilateinformationreciprocally.
onthefirstpage.Copyrightsforcomponentsofthisworkownedbyothersthanthe Inpractice,priorresearchhasextensivelyexploredhowmul-
author(s)mustbehonored.Abstractingwithcreditispermitted.Tocopyotherwise,or
tipleinstancesofLLMs,referredtoasagents[12,20,44,66,74],
republish,topostonserversortoredistributetolists,requirespriorspecificpermission
and/orafee.Requestpermissionsfrompermissions@acm.org. shouldbestructuredandorganizedtoconverse,collaborate,debate,
Conferenceacronym‚ÄôXX,June03‚Äì05,2018,Woodstock,NY or even compete. Various topological designs have been inves-
¬©2018Copyrightheldbytheowner/author(s).PublicationrightslicensedtoACM. tigated, such as chain [26, 71], tree [73, 76], star [73], complete
ACMISBN978-1-4503-XXXX-X/18/06
https://doi.org/XXXXXXX.XXXXXXX graphs[51],randomgraphs[51],optimizablegraphs[80,88],and
4202
tcO
51
]AM.sc[
1v28711.0142:viXraConferenceacronym‚ÄôXX,June03‚Äì05,2018,Woodstock,NY Trovatoetal.
GPTSwarm input-dependent paradigm allows G-Designer to design task-
GPTSwarm adaptive,high-performingcommunicationtopology,which
is,atthesametime,assuredofefficiencyandrobustnesswithspar-
Easy case sityregularization.UnlikepreviousLLM-basedmulti-agenttopol-
(Highschool Biology)
Chain Chain (CoH lla er gd e c Mas ae th) ogydesigns,whichrelyonastaticstructureforallqueries/tasks,
G-Designeradaptivelycraftscustomizedtopologiesfordifferent
domainsandtasks,servingasafullyautonomousandflexibleas-
sistantformulti-agentsystemestablishmentanddeployments.
Ourcontributioncanbesummarizedasfollows:
Accuracy (%); on MMLU (Highschool Biology) Accuracy (%); on MMLU (College Math)
Figure2:Thetokenconsumptionandaccuracyofdifferentmulti-
‚ù∂ ProtocolProposal.Weproposethefirstcommunicationprotocol
agentprotocolsontwosubsetsofMMLUdataset,‚ÄúHighschoolBiol- tailoredforLLM-poweredmulti-agentsystems,MACP,which
ogy‚Äùand‚ÄúCollegeMath‚Äù,testedwithfourgpt-4-basedagents. comprehensivelyregulatesmulti-agenttopologydesignacross
threedimensions:performance,adaptability,androbustness,and
LLM-basednetworks[23,42].Theseelaboratelydesignedcommuni-
incisivelyhighlightstheshortcomingsofexistingdesigns.
cationtopologieshavedemonstratedremarkableperformancewith
‚ù∑ PracticalSolution.WepresentG-Designer,aneffective,adap-
minimalhumansupervision,bridgingthegapbetweenindividual
tive,androbustdesignerofLLM-poweredmulti-agentcommuni-
intelligenceandcollectiveintelligence.Facedwithnumerousstruc-
cationgraphs.Byleveragingavariationalgraphauto-encoderto
turesavailable,aninquisitivepractitionermightask:howshouldI
constructandprocessthemulti-agentnetwork,G-Designerde-
selectordesignatopologythatbestsuitsmytaskathand?
codestask-adaptiveandhigh-performingagentcommunication,
Thequestionposedaboveisnon-trivialand,attimes,perplexing.
whichisalsoequippedwithstrongrobustnessagainstagent-
ApieceofexperimentalevidenceispresentedinFigure2,wherewe
rootedadversarialattacksviadynamictopologyadjustment.
evaluatedtheperformanceofdifferentmulti-agentstructureson
‚ù∏ Experimental Validation. Extensive experiments across six
theMMLUdataset[24],acollectionofmultiple-choicequestions
benchmarksshowthatG-Designeris:(1)high-performing,
acrossvarioussubjects.Theresultsrevealthatevenwithinthesame
achievingsuperiorresultsonMMLUwithaccuracyat84.50%and
dataset,thesuitabilityofdifferentcommunicationtopologiesvaries.
onHumanEvalwithpass@1at89.90%,surpassingstate-of-the-
‚ù∂SimplerCase:inthesimpler"HighSchoolBiology"subset,the
arttopologiesby0.20%‚àº4.10%;(2)task-adaptive,dynamically
chainstructureperformscomparablytothecomplexGPTSwarm,
adjustingtopologycomplexitywithtaskawareness,outperform-
whileconsumingsignificantlyfewertokens(0.5kversus7.8k).In
ingstate-of-the-artmethodsonMMLUwithacostofmerely
thiscase,thechainstructureisclearlyamoreeconomicalchoice.
1.5ùëí+5comparedtotheir2.6ùëí+6,reducingtokenconsumption
‚ù∑HarderCase:However,forthemorechallenging"CollegeMath-
byupto92.24%;and(3)adversariallyrobust,defendingagainst
ematics"subset,GPTSwarmoutperformsthechainstructureby
agentadversarialattackswithmerely0.3%accuracydrop.
8.75%‚Üë,primarilyattributedtoitsintricatetopologyandprompt
optimization.Insummary,practitionersoftenfinditchallenging
2 RelatedWorks
to effortlessly identify the most efficient and complexity-adaptive
multi-agenttopologyforagiventask. 2.1 LLM-agentCollaboration
In light of this dilemma, we propose the LLM-based (cid:58)M (cid:58)ulti- While the academic community has widely recognized the suc-
(cid:58)agentC (cid:58)ommunicationP (cid:58)rotocol(MACP),whichaimstoestab- cessofsingleLLM-basedagentsinreasoning[2,71,76]andplan-
lishstandardizedguidanceforfutureLLM-MAtopologydesign:
ning[29,57,62],collaborationamongmultipleLLM-basedagents
Multi-agent Communication Protocol (MACP): Given a hasswiftlyemergedasapowerfulapproachforintegratingthe
task/queryùëû,anoptimalLLM-MAcommunicationtopologyfor specializedcapabilitiesofdifferentagents,evenexceedingtheper-
ùëû shouldsatisfythefollowingprotocollogics:(1)Effectiveness: formanceofindividualLLMs[5,6,10,14,28,46].Abasicformof
Thecommunicationstructuremusteffectivelyproducethequalified collaborationismajorityvoting[8],whereagentsoperateindepen-
solutionfortaskùëû;(2)Complexity-adaptiveness:Thetopology dently.However,moreeffectivemulti-agentcollaborationshould
shoulddynamicallyadjusttothecomplexityofthetask,minimiz- construct an interconnected system and iterative topology that
ingcommunicationoverhead;(3)Adversarialrobustness:The encouragesinterdependentinteractionsanddeliberatedecision-
topologyshouldmaintainreliableunderadversarialattacks. making[8,49].Buildingonthisinsight,pioneeringresearchhas
TheformaldefinitionofMACPisprovidedinSection3.3.To exploredvariousmulti-agentcommunicationtopologies,including:
designacommunicationtopologythatideallyadherestotheMACP (1)Non-interactive,whereagentsoperateindependentlywithout
principles,weproposeaneffective,adaptive,androbustLLM-powered inter-agentcommunication,asemployedinsystemslikeLATM[82]
multi-agentcommunicationgraphdesigner,termedG-Designer. andLLM-Debate[15];(2)Chain,whereagentsarearrangedin
Technically,G-Designerfirstarchitectsamulti-agentgraph,where asequentialstructure,eachreceivingtheoutputfromitsprede-
each agent, along with its specific properties (e.g., profile [36], cessorandpassinginformationtoitssuccessor,utilizedbyChat-
external API tools [87], or knowledge base [7]), is represented Dev[50],MetaGPT[26],andL2MAC[25];(3)Star,whereacentral
asanode,andcommunicationbetweenagentsformstheedges. administrativeagent(oftenreferredtoasacommander,manager,
G-Designeremploysavariationalgraphauto-encodertoencode teacher,etc.)directssubordinateagents,seeninAutoGen[73],Se-
thenodes(agents)alongwithtask-specificinformation,andtode- curityBot[75],andMiniGrid[86];(4)Tree,wherearootorparent
code the resulting collaboration network between agents. This agenthierarchicallymanagesmultiplechildagents,asinSoA[30];
noitpmusnoC
nekoT
noitpmusnoC
nekoTG-Designer:ArchitectingMulti-agentCommunication
TopologiesviaGraphNeuralNetworks Conferenceacronym‚ÄôXX,June03‚Äì05,2018,Woodstock,NY
and(5)Graph,encompassingcompletegraphs[51,88],layered 3.2 CommunicationPipeline
graphs[23,42,51],andrandomgraphs[51],amongothers. Givenaquery/problemQ,themulti-agentsystemengagesinùêæ
roundsofinteractiveutterances,whichcollaborativelydrivethe
2.2 Multi-agentsasGraphs agentstowardproducingthefinalsolutionùëé(ùêæ) basedontheircu-
Graphs,asafundamentaldatastructurefororganizingandrepre- mulativedialogueexchanges.Atthebeginningoftheùë°-thdialogue
sentingrelationshipsbetweenentities[3,83],arewidelyadopted round,amappingfunctionùúô isappliedtodeterminetheexecution
inthepre-LLMeraasapowerfultooltofacilitateeffectivecommu- indexforeachagent:
nicationinmulti-agentreinforcementlearning(MARL)[27,41,48].
WiththeriseofLLMsandtheproliferationofLLM-basedagents[5,
ùúô :G‚Ü¶‚àí‚Üíùúé, ùúé = [ùë£ ùúé1,ùë£ ùúé2,¬∑¬∑¬∑,ùë£ ùúéùëÅ],
(3)
6,10,14,28,46],researchershavesimilarlyrecognizedthatinter- s.t.‚àÄùëñ > ùëó, ùë£ ùúéùëñ ‚àâNin(ùë£ ùúéùëó),
actionsamongmultipleagentscannaturallybemodeledfroma
graph-basedperspective[10,42,51,88].Earlyattemptsareimplicit,
whereùúé istheexecutionsequenceofagents,Nin(ùë£ ùúé(ùëó))denotes
thein-neighborhoodofùë£ ,andtheconstraintensuresthatan
whereChatEval[5]andAutoGen[73]employfixedgraphstofa- ùúé(ùëó)
agentùë£ canonlyexecuteafteranyagentùë£ fromwhichit
cilitateinformationexchangeamongagents.Subsequentworks, ùúé(ùëñ) ùúé(ùëó)
receivesinformation.Oncetheexecutionorderisdetermined,each
suchasSTOP[79]andDSPy[33],furtherexplorejointoptimiza-
agentproceedstoperforminput-outputoperationssequentially:
tionofpromptsandinferencestructures.Morerecentpractices
i Nn ec tlu [d 51in ],g hC ah va et eL xL pM lic[ i2 tl3 y], rD epy rL eA seN nt[ e4 d2] t, hG eP oT rgS aw na izr am tio[8 n8] o, fa mnd ulM tipa lc e- R ùëñ(ùë°) =ùë£ ùëñ(Ps( yùë° s),Pu( sùë° r) ), Pu( sùë° r) ={Q,‚à™ùë£ùëó‚ààNin(ùë£ùëñ)R ùëó(ùë°) } (4)
a ug tie lin zt es aas ma ug ltr ia lap yh e. rS pp ee rc ci efi pc ta il oly n, (b Mot Lh PC )-lh ikat eL lL aM yer[ e2 d3] ga rn apd hD ,wyL hA ilN eM[4 a2 c]
-
whereR ùëñ(ùë°) representstheoutputofagentùë£ ùëñ,whichcouldbea
rationale,ananswer,orapartialsolution,dependingonthespecific
Net[51]systematicallyevaluatesvariouspredefinedtopologies.
context.TheoutputR(ùë°) isgeneratedbasedonthesystemprompt
GPTSwarm[88]parameterizesandoptimizesthefully-connected ùëñ
graphdistribution.However,alltheseattempts,whetherprede- Ps( yùë° s) andthecontextprompt,consistingofthequeryQandmes-
finedstatictopologiesorthoseiterativelyoptimized,remaininput- sagesfromotheragents.Attheendofeachdialogueround,acertain
independent.Consequently,theyfailtobetask-awareandadaptively aggregationfunctionisadoptedtogeneratetheanswer/solution
designtopologiesthatsuitthecomplexityofthespecifictask. ùëé(ùë°) basedonthedialoguehistory:
3 Formalization
ùëé(ùë°) ‚ÜêAggregate(R 1(ùë°),R 2(ùë°),¬∑¬∑¬∑,R ùëÅ(ùë°) ). (5)
Thissectionestablishesthenotation,formalizeskeyconceptsin The implementation of the Aggregate function is flexible, with
multi-agent systems from a topology perspective, and formally possibleoptionsincludingmajorityvoting[8,37,88],aggregating
definesourproposedmulti-agentcommunicationprotocol. allagents‚Äôresponsesanddelegatingoneagenttoprovidethefinal
answer[31,42,73,80],orsimplyusingtheoutputofthelastagent
3.1 TopologyStructure Rùúé(ùë° ùëÅ) [51].Throughùêæ roundsofutterances,eitherpredefined[51]
Wemodelthemulti-agentsystemasadirectedgraphG=(V,E), ordeterminedbyanearly-stoppingmechanism[42],theoverall
whereV ={ùë£1,ùë£2,...,ùë£ ùëÅ}representsthesetofnodes(withùëÅ = systemGproducesthefinalanswerùëé(ùêæ) inresponsetoQ.
|V|)andEdenotesthesetofedges.Eachnodeùë£
ùëñ
‚ààVcorresponds
toanagent,whichcanbeformalizedas: 3.3 MACPProtocol
ùë£
ùëñ
={Baseùëñ,Roleùëñ,Stateùëñ,Pluginùëñ}, (1) WegivetheformaldefinitionofMACPProtocolasfollows:
whereeachagentùë£ ùëñ iscomposedoffourkeyelements:(1)Baseùëñ, Definition1(Multi-agentCommunicationProtocol). Given
thelanguagemodelinstancepoweringùë£ ùëñ;(2)Roleùëñ,theagent‚Äôspre- anLLM-basedmulti-agentsystemG=(V,E),weestablishthefol-
assignedroleorfunction;(3)Stateùëñ,representingtheagent‚Äôsaccu- lowingobjectiveasanoptimizationprincipleorprotocol:
m exu tela rt ne ad lk ton oo lw sl oe rd pg le ua gn ind sin avte ar ia lac bti lo en tohi ùë£s ùëñt ,o sr uy c; han ad s( w4) ebPl su eg ari cn hùëñ e,a rss [e 4t 3o ]f , minMACP ùõΩ(G) ‚âú (cid:104) ‚àíùë¢(cid:0)G(Q)(cid:1)+ùõΩ1¬∑||G||+ùõΩ2¬∑(cid:12) (cid:12)GÀÜ (QÀÜ )‚àíG(Q)(cid:12) (cid:12)(cid:105) , (6)
codecompilers[4,26,30,54,73],orfilereaders[54,88].EachLLM-
G‚ààG
basedagentùë£ ùëñ receivespromptPandgeneratesresponseRùëñ: whereGrepresentsthefeasibleparameterspaceofG,ùõΩ ={ùõΩ1,ùõΩ2},
Rùëñ =ùë£ ùëñ(P)=ùë£ ùëñ(Psys,Pusr), (2) ùë¢(¬∑) istheutilityevaluator,||G||measuresthec ÀÜomputa ÀÜtionaland
communicationoverheadoftheentiregraph,andQandGdenotethe
wherePsys = {Roleùëñ,Stateùëñ}representsthesystemprompten- querydescriptionandthemulti-agentsystemafteradversarialpertur-
compassingitsroleandstate,andPusrdenotestheuserprompt, bation,respectively.ThefirstterminEquation(6)correspondstohigh
which possibly includes the given tasks, responses/instructions
performance,aimingtomaximizetheutilityofthesystem‚Äôsoutput;
fromotheragentsandexternallyretrievedknowledge.
thesecondtermaddressestask-adaptiveness,seekingtominimize
The connectivity of G can also be characterized by a (non- systemcomplexitytoreducepowerconsumptionandeconomiccost;
symmetric)adjacencymatrixA‚àà{0,1}ùëÅ√óùëÅ,whereA[ùëñ,ùëó] =1if
andthethirdtermfocusesonrobustness,constrainingthedeviation
ùëí ùëñùëó = (ùë£ ùëñ,ùë£ ùëó) ‚àà E,otherwise0.Eachedgeùëí ùëñùëó ‚àà E representsthe ofsystemoutputunderadversarialattacks.
flowofinformationfromagentùë£ toagentùë£ .
ùëñ ùëóConferenceacronym‚ÄôXX,June03‚Äì05,2018,Woodstock,NY Trovatoetal.
Materials Construct Design Optimize
ü§î Query/Problem Profile Assignment Graph Auto-encoder Optimization Config
Encoder Number of dialogues:
An electric motor has a label on Math Analyst Programmer Phycist Chief Scientist Decoder Execution order:
it that reads: Input: 120V AC, 1.0 Communication Graph Workflow
Amps, 60 Hz - Efficiency - 75%. Input query ‚ñ∂ Construct graph ‚ñ∂
At what constant speed can the Encode & Decode ‚ñ∂ Iterative dialogue
motor lift up a 6 kg mass?
Node Encoder Sentence Bert; Anchor Regularize Sparse Regularzie A arl el cth oe r rc ea cl tc .Tul ha et i ko en ys L pre ot' bs l eb mre a sk te d po bw yn s tt eh pe :
ü§ñ Agent (node) set
MiniLM; ... r se ul ca hti o an ss th hi ep s
p
ou wse ed r, T cah le
c
uin lap tu edt p ao sw :er ùëÉùëñùëõ is
equation ,
0.93 are mathematically ...
solid.
0.28
Task-specific Agent representation
0.920.35
0.16 Iteration
Instantiated by gpt-4/Llama 3.1/...
Multi-agent Network
0.81
0.46
üé≠ Role/Profile pool 0.53
generated by gpt-4 Mathematician Physicist 0.81 ` ``python
Decode: i iv c = = 1 12 .0 0 F s Foo olr rv P Minh g ay tas hi n ec a mi ls y at, s t iip csr i;o av ni ,d pe l ea a p sero cb hl ee cm k-
... eff = 0.75 its correctness;
eff mass = 6 For Programmer, write Python
TeacherMath Analyst PhysicistEconomist task üßÆ üñ• üìÅ . `. ``. codes for verification
üß∞ Tool/Plugin set Ouput solution
üñ• Python complier üìÅ File reader Encode: BS ao sl eu dt oio nn t he dis ct uo s st ioa ns sk , the answer is a speed
ü¶ú Text-to-speech translator of approximately 1.53 m/s at which the motor
üñº Image question answerer Programmer Chief can lift 6 kg mass.
üßÆ Mathematical calculator Multi-agent Network:
... ... (other external tools) Anchor structure is either user-defined
or generated by LLMs as an anchor
Figure3:ThedesigningworkflowofourproposedG-Designer.
4 G-Designer intoafixed-lengthembeddingrepresentation:
Figure3illustrateshowG-Designeradaptivelydesignscommu-
nicationtopologiesforanygivenquery.Specifically,theprocess xùëñ ‚ÜêNodeEncoder(T(Baseùëñ),Roleùëñ,T(Pluginùëñ)), (7)
beginswithafew‚Äúrawmaterials‚Äù:theinputqueryQ,theagent where T(¬∑) extracts the textual description of the agent‚Äôs LLM
set V, the profile pool, and the toolset. In the Construct stage, backboneanditsassignedplugins,andNodeEncodercanbereal-
G-Designerleveragesanodeencodertoconstructamulti-agent izedusingsmallandlightweighttextembeddingmodelssuchas
networkalongwithatask-specificvirtualnode.IntheDesignstage, SentenceBERT[52]orMiniLM[67].Afterencodingtheindividual
agraphauto-encoderisemployedtodecodethecommunication agents,weaimtoensurethatthemulti-agentnetworkincorpo-
graphtopology Gùëêùëúùëö,whichisleveragedformulti-roundinter- ratesinformationrelatedtothequeryQ,asthisquery-dependent
agentcollaborationintheOptimizestage. approachenablesG-Designertobetask-awareandadaptive.To
thisend,weintroduceanadditionaltask-specificvirtualglobalnode
ùë£ ,whichisbidirectionallyconnectedtoallagentnodes,en-
ùë°ùëéùë†ùëò
ablingaglobal"storagesink"andfacilitatingsmootherinformation
4.1 Multi-agentNetworkConstruction flowamongagents[55,60,64].Thistasknodeisencodedbythe
GivenaninputqueryQandasetofLLM-agentsV,G-Designer NodeEncoderasfollows:xùë°ùëéùë†ùëò ‚ÜêNodeEncoder(Q).
aimstodesignatask-adaptiveandeffectivecommunicationtopol- AfterobtainingtheagentnodefeaturesXùëéùëîùëíùëõùë° = [x1,x2,...,xùëÅ]‚ä§
ogy Gùëêùëúùëö.Webeginbyassigningeachagentauniqueroleand andthetask-specificembeddingxùë°ùëéùë†ùëò,weprovideasimpleanchor
profile,aspreviousresearch[70]hasshownthatassigningdistinct topology Aùëéùëõùëê‚Ñéùëúùëü ‚àà {0,1}ùëÅ√óùëÅ,whichservesasastartingpoint
personasorrolestoLLM-basedagentscanenhancecognitivesyn- forG-Designer‚Äôstopologydesignprocess.Forinstance,givena
ergy.Basedontheseroles,differentexternaltoolsareallocatedto codegenerationtaskwiththreeagents:manager/programmer/code
theagents(e.g.,Mathematicaforamathanalyst,Pythoncompiler reviewer,theanchortopologycouldbeconfiguredasachainstruc-
foraprogrammer).Thus,wesuccessfullyinitializeeachagentùë£ ùëñ as ture, i.e., ‚Äúmanager ‚Üí programmer ‚Üí reviewer‚Äù, reflecting the
{Baseùëñ,Roleùëñ,Stateùëñ,Pluginùëñ},asdefinedinEquation(1). typical workflow of code completion. The anchor topology, be-
Weproceedtoconstructastructuredmulti-agentnetworkas ing either user-defined or automatically generated by LLMs, is
input to G-Designer, represented as G = (Xùëéùëîùëíùëõùë°,A), where oftensimpleandsub-optimal.However,itprovidesafoundational
Xùëéùëîùëíùëõùë° ‚ààRùëÅ√óùê∑ isthenode(agent)featurematrixandA‚ààRùëÅ√óùëÅ referenceandpriorknowledgeforG-Designer‚Äôssubsequentopti-
representstheconnectivitymatrix.ForthefeaturematrixXùëéùëîùëíùëõùë°, mizationprocess.Weincorporatethetask-specificvertexùë£
ùë°ùëéùë†ùëò
and
weemployanodeencodertotransformeachagent‚Äôsuniqueprofile itscorrespondingedgesandobtainAÀú ùëéùëõùëê‚Ñéùëúùëü ‚àà {0,1}(ùëÅ+1)√ó(ùëÅ+1).
edon
lautriV
07.0 26.0 0.69
dnuor
noitaretIG-Designer:ArchitectingMulti-agentCommunication
TopologiesviaGraphNeuralNetworks Conferenceacronym‚ÄôXX,June03‚Äì05,2018,Woodstock,NY
Consequently,weestablishatask-specificmulti-agentnetworkGÀú: andminimizingcosts,weapplyarefinementdecoderùëù ùëê(¬∑)tore-
(cid:20) (cid:21) finethesketchedSintoacompact,sparse,andhighlyinformative
GÀú = (cid:0) X xùëé ùë°‚ä§ùëî ùëéùëí ùë†ùëõ ùëòùë° ,AÀú ùëéùëõùëê‚Ñéùëúùëü(cid:1)=(VÀú,EÀú )
(8)
communicationgraph,instantiatedbyaregularizationobjective:
= (cid:0)V‚à™{ùë£ ùë°ùëéùë†ùëò},E‚à™{(ùë£ ùëñ,‚Üê ùë£‚Üí ùë°ùëéùë†ùëò)|ùë£ ùëñ ‚ààV)}(cid:1), ùëù ùëê : arg SÀú‚ààm Sax1/2||S‚àíZWZ‚ä§||2 ùêπ +ùúÅ||W||‚àó+ (14)
where (cid:104) X xùëé ùë°‚ä§ùëî ùëéùëí ùë†ùëõ ùëòùë°(cid:105) canalsobejointlydenotedasXÀú. 1/2||Aùëéùëõùëê‚Ñéùëúùëü ‚àíZWZ‚ä§||2 ùêπ, s.t. SÀú =ZWZ‚ä§,
whereZ‚ààRùëÅ√óùëü isthetop-ùëü columnsofleftsingularmatrixS,ùúÅ is
4.2 DesigningCommunicationTopology acoefficienthyperparameter,W‚ààRùëü√óùëü isanoptimizableweight
Buildinguponthetask-specificmulti-agentnetworkGÀú,G-Designer matrix,||¬∑||ùêπ denotestheFrobeniusnormand||W||‚àó=(cid:205) ùëñùúÜ ùëñwhere
seekstoestablishamorefine-grainedandprecisecommunication ùúÜ ùëñ istheùëñ-thsingularvalueofW.SÀú ‚ààRùëÅ√óùëÅ isthedesiredsparse
topologyGùëêùëúùëö.Drawinginspirationfromthevariationalgraph topology,whichisdecomposedasZWZ‚ä§.InEquation(14),the
auto-encoder(VGAE)framework[34,84],G-Designeremploysa firstandsecondtermsarejointlydenotedasanchorregularization,
VGAE-basedencoder-decoderùëì
ùë£
togeneratethemulti-agentinter- whichencouragethelearnedSÀú tomaintainsimilaritywithboth
actiontopology,whichisformulatedas: theoriginalSandtheanchortopology.Thethirdterm,denotedas
Gùëêùëúùëö =ùëì ùë£(GÀú;Œò ùë£)=ùëù(Gùëêùëúùëö |H)ùëû(H|XÀú,AÀú ùëéùëõùëê‚Ñéùëúùëü), (9) s np oa rr msit oy fr Weg ,u ela ssr eiz na tt ii ao ln ly,t sh po au rsg ih fiea sp Sp Àú,e sa ir ni cn eg |t |o
SÀú
|m |‚àói =nim ||Wize ||‚àóth he on ldu scl de ua er
whereùëì ùë£ istheencoder-decoderarchitecturewithparametersŒò ùë£, toZ‚ä§Z=I ùëü√óùëü.Therefore,Equation(14)achievestwokeygoals:
ùëû(¬∑)istheencodermodule,ùëù(¬∑)isthedecodermodule.Theencoder (1)producingasparse,refinedcommunicationtopology,and(2)
utilizesposteriorprobabilitiestoencodethenodeembeddingsinto constrainingthedesigntoremaingroundedinpracticalintuition.
low-dimensionallatentvectorrepresentationsHùëéùëîùëíùëõùë°,whichcan Theresultingcommunicationdesigncanberepresentedasfollows:
beformulatedas:
ùëÅ Gùëêùëúùëö =(V,Eùëêùëúùëö),Eùëêùëúùëö ={(ùëñ,ùëó) |SÀú ùëñùëó ‚â†0‚àß(ùëñ,ùëó) ‚ààE}). (15)
ùëû(Hùëéùëîùëíùëõùë° |XÀú,AÀú ùëéùëõùëê‚Ñéùëúùëü)=(cid:214) ùëû(hùëñ |XÀú,AÀú ùëéùëõùëê‚Ñéùëúùëü),
Atthisstage,wehavesuccessfullydistilledalightweightandinfor-
(10)
ùëñ=1 mativecollaborationnetworkGùëêùëúùëö fromtheroughlyconstructed
ùëû(hùëñ |XÀú,AÀú ùëéùëõùëê‚Ñéùëúùëü)=N(hùëñ |ùùÅùëñ,diag(ùùàùëñ2 )), task-specificmulti-agentnetworkGÀú,whichisnowreadytoguide
whereùúá = GNN ùúá(XÀú,AÀú ùëéùëõùëê‚Ñéùëúùëü;Œò ùúá) isthematrixofmeanvectors inter-agentmessagepassinginthefollowingprocess.
ùúá ùëñ;similarlylog(ùúé)=GNN ùúé(XÀú,AÀú ùëéùëõùëê‚Ñéùëúùëü;Œò ùúé).ThechoiceofGNN
4.3 OptimizingG-Designer
backbonecanbecustomizedasneeded;here,weutilizeasimple
two-layerGCN[35].hùëñ,ùùÅùëñ,andùùàùëñ denotetheùëñ-thcolumnofH, UponobtainingGùëêùëúùëö,themulti-agentutterancesanddialogues
ùùÅ,andùùà,respectively.Theencoderùëû(¬∑)isparameterizedbyŒò ùëí = canproceedasusualusingGùëêùëúùëö,asdetailedinSection3.2.Afterùêæ
{Œò ùúá,Œò ùúé}.Followingtheencodingphase,thedecoderemploysthe
roundsofinteraction,theagentsconvergetoafinalsolutionùëé(ùêæ)
=
latentrepresentationstogenerateacomprehensiveblueprintfor Gùëêùëúùëö(Q).Wethengivethefollowingoptimizationobjective:
multi-agentcommunication.Morespecifically,thedecoderùëû(¬∑)= (cid:104) (cid:105)
ùëû thùëê e‚ó¶ nùëû rùë† efifi nrs et dc io nn ts otr tu hc ets fina ap la mra um lte i-te ar gi ez ned t, cs ok met mch ue nd icg ar ta iop nh tS o, pw oh loic gh y:is
ar Œòg ùëí,m
Œò
ùëëinE
Œòùëí,Œò ùëë‚àºŒ©
ùë¢(cid:0)Gùëêùëúùëö(Q)(cid:1) , (16)
‚à´
whereŒò ùëíandŒò ùëëaretheparametersoftheencoderùëû(¬∑)anddecoder
ùëù(Gùëêùëúùëö |Hùëéùëîùëíùëõùë°)= ùëù ùëê(Gùëêùëúùëö |S)ùëù ùë†(S|Hùëéùëîùëíùëõùë°)ùëëS. (11) ùëù(¬∑),respectively,Œ©istheparameterspaceandE(¬∑)denotesthe
S mathematicalexpectation.Equation(16)aimstomaximizetheutil-
Atthefirststep,ùëù ùë†(¬∑)constructsthefully-connectedsketchedad- ityofthegeneratedsolution,butitisinherentlyintractableandnon-
jacencymatrixSfromthelatentrepresentationHùëéùëîùëíùëõùë°: differentiable,asùë¢(¬∑)oftendependsonexternalAPIcalls[24,38].
ùëÅ ùëÅ Toaddressthis,followingstandardapproachesinmulti-agentstruc-
ùëù ùë†(S|Hùëéùëîùëíùëõùë°)=(cid:214)(cid:214) ùëù ùë†(Sùëñùëó |hùëñ,hùëó,hùë°ùëéùë†ùëò;Œò ùëë), (12) turedesign[80,88],weapplypolicygradient[72]toapproximate
ùëñ=1 ùëó=1 andoptimizeEquation(16):
whosedetailedderivationisasfollows: ùëÄ
ùëù ùë†(Sùëñùëó =1|hùëñ,hùëó,hùë°ùëéùë†ùëò)=ùëî(hùëñ,hùëó,hùë°ùëéùë†ùëò),
(13)
‚àáŒòE Œò‚àºŒ©(cid:104) ùë¢(cid:0)Gùëêùëúùëö(Q)(cid:1)(cid:105) ‚âà ùëÄ1 ‚àëÔ∏Å ùë¢(ùëé ùëö(ùêæ) )‚àáŒò(ùëÉ(Gùëò)), (17)
=Sigmoid((log(ùúñ)‚àílog(1‚àíùúñ)+ùúõ ùëñùëó)/ùúè), ùëò=1
whereùúõ=FFN ùëë([hùëñ,hùëó,hùë°ùëéùë†ùëò])withFFN
ùëë
parameterizedbyŒò ùëë,
whereŒò={Œò ùëí,Œò ùëë},{Gùëò} ùëöùëÄ =1areindepentlysamplesfromGùëêùëúùëö,
ùúñ ‚àºUniform(0,1),andùúèdenotesthetemperaturecoefficient.When and {ùëé ùëö(ùêæ) } ùëöùëÄ
=1
are the corresponding output. ùëÉ(Gùëò) calculates
ùúèapproacheszero,Equation(13)essentiallyreturntheBernoulisam- theprobabilityofGùëò beingsampled,whichcanbeexpressedas
plingresultforSùëñùëó.TheresultingmatrixS‚àà [0,1]ùëÅ√óùëÅ representsa ùëÉ(Gùëò)=(cid:206) ùëñùëÅ =1(cid:206)ùëÅ ùëó=1SÀú ùëñùëó.Throughiterativeoptimizationguidedby
densely-connected,non-negativegraphdistribution,indicatingan Equations(14)and(16)overalimitedsetofqueriesasthe‚Äútraining
overlycomplexandresource-intensivepair-wisecommunication set‚Äù,G-Designerefficientlydevelopstask-awarenessandtheca-
structure,whichisnotyetsuitableforguidingmulti-agentcollabo- pabilitytostrategicallydesigntheagentnetwork,achievingtruly
ration.ToalignwithG-Designer‚Äôsobjectivesoftaskadaptiveness task-customizedmulti-agenttopologydesign.Conferenceacronym‚ÄôXX,June03‚Äì05,2018,Woodstock,NY Trovatoetal.
Table1:Performancecomparisonwiththreetypesofbaselines,includingsingle-agentexecution,spatialcommunicationandtemporal
communication.Thebestresultsarehighlightedinbold,andtherunner-upsareunderlined.Allmethods,exceptforthesingle-agentcategory,
utilizefivegpt-4-basedagents.‚ÄúMul.‚Äù,‚ÄúAda.‚Äù,and‚ÄúRob.‚Äùindicatewhetherthemethodsupportsamulti-agentsetting,whetheritistask-
adaptive,andwhetheritisadversariallyrobust,respectively.(cid:37),‚úì‚úóand(cid:33)signifiesno/partial/fullsupportintheseaspects.
Method Mul. Ada. Rob. MMLU GSM8K MultiArith SVAMP AQuA HumanEval Avg.
Vanilla (cid:37) (cid:37) (cid:37) 82.14 85.40 93.15 87.18 70.34 71.68 81.65
CoT (cid:37) (cid:37) (cid:37) 82.65 87.17 94.79 88.32 73.91 75.52 83.73
‚Üë0.51 ‚Üë1.77 ‚Üë1.64 ‚Üë1.14 ‚Üë3.57 ‚Üë3.84
ComplexCoT (cid:37) (cid:37) (cid:37) 83.78 87.62 95.86 90.17 77.58 74.94 84.99
‚Üë1.64 ‚Üë2.22 ‚Üë2.71 ‚Üë2.99 ‚Üë7.24 ‚Üë3.26
SC(CoT) (cid:37) (cid:37) (cid:37) 82.66 87.93 96.88 88.69 75.08 77.30 84.75
‚Üë0.52 ‚Üë2.53 ‚Üë3.73 ‚Üë1.51 ‚Üë4.74 ‚Üë5.62
SC(ComplexCoT) (cid:37) (cid:37) (cid:37) 83.65 86.14 96.94 89.72 77.69 77.94 85.35
‚Üë1.51 ‚Üì0.74 ‚Üë3.79 ‚Üë2.54 ‚Üë7.35 ‚Üë6.26
PHP (cid:33) (cid:37) (cid:37) 83.45 ‚Üë1.31 95.50‚Üë10.1 98.10 ‚Üë2.84 90.02 ‚Üë3.44 79.00 ‚Üë8.66 82.96 ‚Üë11.36 88.17
Chain (cid:33) (cid:37) (cid:37) 82.35 85.57 94.38 83.41 70.94 80.88 82.92
‚Üë0.21 ‚Üë0.17 ‚Üë1.23 ‚Üì3.77 ‚Üë0.60 ‚Üë9.20
Star (cid:33) (cid:37) (cid:37) 80.79 85.55 93.79 88.09 68.57 75.65 82.07
‚Üì1.35 ‚Üë0.15 ‚Üì0.64 ‚Üë0.91 ‚Üì1.77 ‚Üë3.97
Tree (cid:33) (cid:37) (cid:37) 81.89 84.56 94.60 89.25 72.84 77.38 83.42
‚Üì0.25 ‚Üì0.84 ‚Üë1.45 ‚Üë2.07 ‚Üë2.50 ‚Üë5.70
CompleteGraph (cid:33) (cid:37) (cid:37) 83.15 86.49 97.20 89.48 79.21 83.75 86.55
‚Üë1.01 ‚Üë1.09 ‚Üë4.05 ‚Üë2.30 ‚Üë8.87 ‚Üë12.07
RandomGraph (cid:33) (cid:37) (cid:37) 83.76 86.14 95.46 85.41 74.07 82.66 84.58
‚Üë1.62 ‚Üë0.74 ‚Üë2.31 ‚Üì1.77 ‚Üë3.73 ‚Üë10.98
AutoGen (cid:33) (cid:37) (cid:37) 82.13 90.06 93.80 88.44 73.65 85.41 85.58
‚Üì0.01 ‚Üë7.92 ‚Üë0.65 ‚Üì1.26 ‚Üë3.31 ‚Üë13.73
MetaGPT (cid:33) (cid:37) (cid:37) - - - - - 85.90 84.90
‚Üë14.22
LLM-Blender (cid:33) (cid:37) (cid:37) 81.22 89.17 94.27 88.77 77.05 - 86.09
‚Üì0.92 ‚Üë3.77 ‚Üë1.12 ‚Üë1.59 ‚Üë6.71
LLM-Debate (cid:33) (cid:37) (cid:33) 83.69 90.23 96.27 90.56 77.52 83.79 87.01
‚Üë1.55 ‚Üë4.83 ‚Üë3.12 ‚Üë3.38 ‚Üë7.18 ‚Üë12.11
DyLAN (cid:33) ‚úì‚úó (cid:33) 80.16
‚Üì1.98
88.16
‚Üë2.76
94.27
‚Üë1.12
87.40
‚Üë0.22
74.16
‚Üë3.82
89.70
‚Üë18.02
85.64
GPTSwarm (cid:33) ‚úì‚úó (cid:33) 83.98
‚Üë1.84
89.74
‚Üë4.34
97.84
‚Üë4.69
86.42
‚Üì0.76
78.16
‚Üë7.82
88.49
‚Üë16.81
87.32
Optimization configuration. The overall training objective of SVAMP[47],andAQuA[40],withaccuracyastheevaluationmetric
ourmethodisformulatedasL
G-Designer
=Lùë¢ùë°ùëñùëôùëñùë°ùë¶+Lùëéùëõùëê‚Ñéùëúùëü + acrossalldatasets.‚ñ†CodeGeneration:WeoptforHumanEval[9],
Lùë†ùëùùëéùëüùë†ùëí,whereLùë¢ùë°ùëñùëôùëñùë°ùë¶ representstheoptimizationtargetfrom awidelyrecognizedbenchmarkforfunction-levelcodegeneration
Equation(16),Lùëéùëõùëê‚Ñéùëúùëü correspondstothefirstandthirdtermsin designedtoevaluatefundamentalprogrammingskills.Performance
Equation(14),andLùë†ùëùùëéùëüùë†ùëí isthesecondterm.Givenabenchmark ismeasuredusingpass@1,whichreflectsthecorrectnessofgener-
{Qùëñ} ùëñùê∑ =1consistingofùê∑queries,G-Designerbeginsbyoptimizing atedfunctionsacrossmultipletestcases.
withasmallsubsetofùê∑‚Ä≤ queriesandthenfixesthelearnedpa-
rametersfortestingontheremaining(ùê∑‚àíùê∑‚Ä≤)queries.Thewhole 5.1.2 Baselines. Wecomprehensivelyselectrepresentativebase-
linesfrombothsingle-agentenhancementandmulti-agentcollabo-
algorithmworkflowof G-DesignerisdepictedinAlgorithm1.
rationmethods.Forsingle-agentapproaches,weselect:
5 Experiments ‚Ä¢ COT[71]equipsanindividualLLMwiththecapabilitytogener-
Inthissection,weconductextensiveexperimentstoanswerthe atecoherentintermediatereasoningsteps.
followingresearchquestions: ‚Ä¢ ComplexCoT[19]isbuiltonCoT,introducingacomplexity-
‚Ä¢ (RQ1) Can G-Designer design effective and high-performing basedcriterionthatspansboththeprompting(inputselection)
multi-agentcommunicationtopologies? anddecoding(outputselection)stages.
‚Ä¢ (RQ2)CanG-Designergeneratemoretask-adaptivetopologies, ‚Ä¢ Self-Consistency[69]isareasoningchainensemblemethod,
resultinginlesstokenconsumption? workinginconjunctionwithCOTorComplexCoTtoensemble
‚Ä¢ (RQ3)IsG-Designermorerobustagainstadversarialattacks? multiplereasoningchains.Weuse5-wayforexperiments.
‚Ä¢ (RQ4)HowsensitiveistheproposedG-Designersensitiveto ‚Ä¢ PHP[85]isaprogressive-hintpromptingtechnique,andcurrent
itskeycomponentsandparameters? state-of-the-artsingleagentreasoningplugin.
Formulti-agentcollaborationtopologies,weselectthefollowing:
5.1 ExperimentalSetup
5.1.1 DatasetsandMetrics. WeevaluateG-Designer‚Äôsabilityto ‚Ä¢ Chain,Star,andTreearesimpleandstraightforwardtopological
enhanceLLM-MAcollaborativeintelligenceusingthreemajorcat- configurations,formallydefinedin[51].
egoriesofdatasets:‚ñ†GeneralReasoning:WeutilizeMMLU[24], ‚Ä¢ CompleteGraphandRandomGraphareslsodelineatedin
whichprovidesacomprehensivesetoflogicalreasoningassess- [51],whoseexecutionorderisdefinedbytopologicalordering.
mentsacrossdiversesubjectsintheformofmultiple-choiceques- ‚Ä¢ AutoGen[73]isoneoftheearliestframeworksformulti-agent
tions.Theperformanceisevaluatedusingaccuracyonthegener- collaboration.Weprimarilyemploy‚ÄúA1:MathProblemSolving‚Äù
atedsolutions.‚ñ†MathematicalReasoning:Toassessmathemat- formathematicaltasks,‚ÄúA5:DynamicGroupChat‚Äùforgeneral
icalreasoningcapabilities,weuseGSM8K[13],MultiArith[56], reasoning,and‚ÄúA4:Multi-AgentCoding‚Äùforcodegeneration.G-Designer:ArchitectingMulti-agentCommunication
TopologiesviaGraphNeuralNetworks Conferenceacronym‚ÄôXX,June03‚Äì05,2018,Woodstock,NY
HumanEval (case a) HumanEval (case b) GSM8K (case d)
def strlen(string: str) -> int: def double_the_difference(lst: List[float]) -> int: Background:
""" Return length of given string """ A robe takes 2 bolts of blue fiber and half that much
>>> strlen('') Given a list of numbers, return the sum of squares of white fiber.
0 the numbers in the list that are odd. Ignore numbers that Question:
>>> strlen('abc') are negative or not integers. How many bolts in total does it take?
3 If the input list is empty, return 0.
""" """ Math Math
Algorithm Bug
Analyst Solver
Algorithm Programming Designer Fixer
Designer Expert
Programming
Programming Test Inspector
Expert
Expert Analyst
HumanEval (case c) GSM8K (case e)
def do_algebra(operator: List[str], operand: List[int]) -> int: Question:
""" John drives for 3 hours at a speed of 60 mph and then turns
Given two lists operator, and operand. The first list has basic algebra operations, and the second list is a around because he realizes he forgot something very
list of integers. Use the two given lists to build the algebraic expression and return the evaluation of this important at home. He tries to get home in 4 hours but
expression. The basic operations: Addition(+); Subtraction(-); Multiplication(*); Floor division(//); spends the first 2 hours in standstill traffic. He spends the
Exponentiation(**) . Example: operator['+', '*', '-']; array = [2, 3, 4, 5];result = 2 + 3 * 4 - 5;=> result = 9 next half-hour driving at a speed of 30mph, before being
Note: 1. The length of operator list is equal to the length of operand list minus one. 2. Operand is a list of able to drive the remaining time of the 4 hours going at 80
of non-negative integers. 3. Operator list has at least one operator, and operand list has at least two operands. mph. How far is he from home at the end of those 4 hours?
"""
Algorithm Bug Math Math
Designer Fixer Analyst Solver
Harder Example:
G-Designer is complexity-
aware and capable of designing
MPr ao nj ae gc et r Pro Eg xra pm erm ting AT nae ls yt
st
task-adaptive topologies Pro Eg xra pm erm ting Inspector
Figure4:CasestudyofthecommunicationtopologiesdesignedbyG-DesigneronHumanEvalandGSM8Kbenchmarks.
‚Ä¢ MetaGPT[26]isapioneeringmulti-agentframeworkspecifi- 5.2 PerformanceEvaluation(RQ1)
callydesignedforsoftwareengineering.Therefore,wereportits Toassesstheeffectivenessof G-Designerindesigningpowerful
performanceonlyoncodegenerationtasks. LLM-MAtopologies,weconductedevaluationsusingfiveinstances
‚Ä¢ LLM-Debate [15]enhances systemreasoning capabilitiesby of gpt-4,withresultsoutlinedinTable1.Wecandrawtwokey
facilitatingdebatesamongmultipleagents. observations(Obs.):
‚Ä¢ LLM-Blender[31]utilizesaGenFuseragenttoaggregatesolu- Obs.‚ù∂Meticulouslydesignedmulti-agenttopologyiscru-
tionsfromindependentlyoperatingagents.
cial for collective intelligence. As demonstrated in Table 1,
‚Ä¢ DyLAN[42]optimizesagentteamsbydynamicallyassessingthe not all multi-agent topologies outperform single-agent reason-
agentimportancescoresandselectingthemostvaluableones.
ingapproaches.Insomecases,suchastheStarandTreestruc-
‚Ä¢ GPTSwarm[88]conceptualizesaswarmofLLMagentsascom- tures,performanceevenfallsshortofvanillagpt-4,withaccuracy
putationalgraphsandcontinuouslyoptimizesitsdistribution,
dropsof1.35%and0.25%,respectively,ontheMMLUdataset.How-
albeitatarelativelyhightrainingcost.
ever,morecustomizedandadaptivetopologydesigns,likeAuto-
Gen,DyLAN,andGPTSwarm,consistentlyshowimprovementsof
16.81%‚àº18.02%onHumanEval,significantlyoutperformingsingle-
agentbaselinessuchasPHPandCoT.Thisclearlydemonstrates
5.1.3 ImplementationDetails. WeaccesstheGPTmodelsviathe
theemergentpowerofcollectiveintelligence.
OpenAIAPI,andmainlytestongpt-4-1106-preview(gpt-4).we
set temperature to 0 for the single execution and single agent Obs.‚ù∑G-DesigneriseffectiveindesigningpowerfulLLM-
baselinesand1formulti-agentmethods.Fordecision-makingin MAtopologies.AsshowninTable1,G-Designerachievesthe
themulti-agentsystem,wesetasummarizeragenttoaggregatethe bestperformanceinfiveoutofsixbenchmarks,andontheGSM8K
dialoguehistoryandproducethefinalsolutionùëé(ùêæ),withùêæ =3 benchmark,ittrailsonlyPHPwitha9.67%‚Üëaccuracyimprovement.
acrossallexperiments.TheNodeEncoder(¬∑)isimplementedusing
OntheHumanEvalbenchmark,G-DesignersurpassesMetaGPT,
all-MiniLM-L6-v2[67],withtheembeddingdimensionsettoùê∑ =
aspecializedmulti-agentcodegenerationframework,by4.0%at
384.TheanchortopologyAùëéùëõùëê‚Ñéùëúùëü ispredefinedasasimplechain
pass@1,andoutperformsstate-of-the-artmulti-agentcollaboration
structure. The sampling times ùëÄ are set as 10, andùúè = 1ùëí ‚àí2 frameworkslikeGPTSwarmandDyLANbymarginsof0.20% ‚àº
andùúÅ = 1ùëí ‚àí1aresetforallexperiments.Weprovideexplicit
1.41%.Overall,G-Designerdemonstratesexceptionalperformance
intopologydesignacrossawiderangeoftasks.
agentprofilingformulti-agentmethods,followingtheclassical
configurationsinLLM-MAsystems[42,61,78,88],andusegpt-4
togenerateagentprofilepools.Forallbenchmarks,wemerelyuse
ùê∑‚Ä≤ =40queriesfortheoptimizationprocess.Conferenceacronym‚ÄôXX,June03‚Äì05,2018,Woodstock,NY Trovatoetal.
)x^01(
noitpm
MMLU )x^01(
noitpm
HumanEval                 E   H   I   R   U   H  D W W   D   F   N  
    
     D I   W H   U     D W W D   F   N   
    
              
    
             
    
        
usnoc
nekoT
usnoc
nekoT
     
  
 & K D L Q  6 W D U  7 U H H  & R P S O H W H  5 D Q G R P  ' \ / $ 1  * 3 7 6 Z D U P  $ X W R * H Q  *  ' H V L J Q H U
 * U D S K  * U D S K
Accuracy (%) Pass@1 (%) Figure6:Wecomparetheaccuracy(%)ofvariousmulti-agentframe-
GSM8K SVAMP worksbeforeandafterpromptattacksonMMLU.
)x^01(
noitpm
usnoc
nekoT
)x^01(
noitpm
usnoc
nekoT
)%
( y
ca
ru
ccA
)%
( y
ca
ru
ccA
|ùí±|
Accuracy (%) Accuracy (%)
Figure5:Visualizationoftheperformancemetricsandprompttoken Figure 7: (Left)) Sensitivity analysis on the number of agents ùëÅ.
consumptionofdifferentmulti-agentcommunicationtopologies (Right)Ablationstudyoftworegularizationsundercleanandadver-
acrossMMLU,HumanEval,GSM8K,andSVAMPbenchmarks.The sarialattacksettings,testedonMMLUbenchmark.
diameterofeachpointisproportionaltoitsùë¶-axisvalue.
bothefficiencyandtaskperformance,achievingthehighestper-
formanceacrossallfourbenchmarkswhilemaintainingthelowest
tokencost.Forexample,onSVAMP,G-DesignersurpassesDyLAN
5.3 AdaptivenessEvaluation(RQ2) by4%whileusingonly23.7%ofDyLAN‚Äôstokenconsumption.
Task-adaptivemulti-agentnetworkdesignnotonlyimprovestask
5.4 RobustnessVerification(RQ3)
performancebutalsoregulatesthecomplexityofthetopologyac-
cordingtothetask‚Äôsdifficulty.Akeybenefitofthisadaptivityis Inthissection,wecomparetherobustnessofdifferenttopology
thatitpreventstheuseofoverlycomplexstructuresforsimple designswhensubjectedtoadversarialattacks.Following[88],we
tasks,thusminimizingunnecessarycommunicationcosts‚Äîinthe simulateasystempromptattackononeofthefiveagents,withthe
caseofLLM-MA,reducingtokenconsumption.Figure4visualizes resultsshowninFigure6.Weobservethefollowing:
thedifferenttopologiesdesignedbyG-Designerforvaryingquery Obs.‚ù∫G-Designerisarobustdefenderagainstadversarial
difficultiesontheHumanEvalandGSM8Kbenchmarks,whileFig- attacks.AsseeninFigure6,manytrivialstructures,suchaschain
ure5 comparesthetoken consumptionof G-Designer against orcompletegraph,experiencesignificantperformancedegrada-
variousbaselines.Wesummarizeseveralinterestingobservations: tion under partial system attacks, with drops as high as 11.0%.
Obs.‚ù∏G-Designerishighlytask-aware.AsshowninFigure4, Amongmoresophisticatedstructures,GPTSwarm,benefitingfrom
themulti-agenttopologiesgeneratedbyG-Designerarehighly itsspecializednodeoptimizationmechanism,onlysuffersaminor
dependentonthespecifictaskcontextanditsdifficulty.InCase 0.3%accuracydecline.However,othermethodsfarelesswell,with
a,despitehavingfivegpt-4agentsavailableasdesignresources, DyLANandAutoGenshowingaccuracydropsof6.2%and9.9%,
G-Designeridentifiedthetaskofdesigningastrlen(string) respectively.Remarkably,G-Designerdemonstratesexceptional
functionasrelativelysimple.Itstreamlinedthetopologybyre- robustnessagainstadversarialattacks,maintainingnearlyidentical
movingunnecessaryagents,suchas‚Äúbugfixer‚Äùand‚Äútestanalyst‚Äù, performancepre-andpost-attack.Thisresiliencecanbeattributed
andretainedonlyaminimal‚ÄúAlgorithmDesigner‚ÜíProgrammer‚Äù toitsagentencodingcapability,which,duringoptimization,can
structuretosolvetheproblem.Incontrast,forthemorecomplex detectmaliciousinputsandprunethecorrespondingedges.
CasecandCasee,G-Designercraftedamoreintricatecommu-
nicationgraph.Thesecaseshighlightthestrongtask-awareand 5.5 AblationStudy&SensitivityAnalysis(RQ4)
task-adaptivecapabilitiesof G-Designer. SensitivityAnalysis. Wecomparetheperformanceofthechain
Obs.‚ùπG-Designerisatoken-savingandeconomicalassis- structure,GPTSwarm,andG-Designeracrossvaryingnumbers
tant.Figure5illustratesthedifferencesinprompttokenconsump- of agents ùëÅ. As shown in Figure 7 (Left), with the increase in
tionbetweenG-Designerandseveralrepresentativemulti-agent agent count, the simple chain-style structure exhibits marginal
designs. We observe that simpler topologies, such as complete performanceimprovementsandpoorscalingcapacity.Incontrast,
graphsandrandomgraphs,consumefewertokensbutshowsignif- G-Designerdemonstratesastrongeremergentcapability,where
icantlyweakerperformance.Morecomplexcommunicationstruc- theinvolvementofmoreagentsleadstonotableperformancegains.
tures,likeGPTSwarmandDyLAN,achievesuperiorperformance, AblationStudy. Wereportresultsfortwovariantsofourmethod:
albeitatthecostofexcessivetokenconsumption.Forinstance,Dy- (1)G-Designerw/oSR,whichremovesthesparsityregularization
LAN‚ÄôscostonGSM8Kis2.82√óthatoftherandomgraph,reaching inEquation(14),and(2)G-Designerw/oAnchor,whichexcludes
asubstantial2.2ùëí+7.Incontrast,G-Designerelegantlybalances theanchorstructureAùëéùëõùëê‚Ñéùëúùëü.AsshowninFigure7(Right),theG-Designer:ArchitectingMulti-agentCommunication
TopologiesviaGraphNeuralNetworks Conferenceacronym‚ÄôXX,June03‚Äì05,2018,Woodstock,NY
removalofAùëéùëõùëê‚Ñéùëúùëü consistentlyleadstoperformancedegradation, ChristopherHesse,andJohnSchulman.2021.TrainingVerifierstoSolveMath
whiletheabsenceofsparsityregularizationmakesthesystemmore WordProblems.arXivprepringabs/2110.14168(2021).
[14] RoiCohen,MayHamri,MorGeva,andAmirGloberson.2023.Lmvslm:Detecting
vulnerabletoadversarialattacksinadversarialsettings.
factualerrorsviacrossexamination.arXivpreprintarXiv:2305.13281(2023).
[15] YilunDu,ShuangLi,AntonioTorralba,JoshuaB.Tenenbaum,andIgorMor-
6 Conclusion datch.2023.ImprovingFactualityandReasoninginLanguageModelsthrough
MultiagentDebate.CoRRabs/2305.14325(2023).
Inthispaper,wefirstpresenttheLLM-basedMulti-agentCommuni- [16] GiorgioFagiolo,JavierReyes,andStefanoSchiavo.2010.Theevolutionofthe
cationProtocol(MACP),whichaimstoprovideinsightfulguidance worldtradeweb:aweighted-networkanalysis.JournalofEvolutionaryEconomics
20(2010),479‚Äì514.
fordesigningcomplexmulti-agentsystems.Furthermore,wepro-
[17] WenqiFan,YaoMa,QingLi,YuanHe,EricZhao,JiliangTang,andDaweiYin.
poseaneffective,adaptive,androbustLLM-poweredmulti-agent 2019.Graphneuralnetworksforsocialrecommendation.InTheworldwideweb
communicationgraphdesigner,termedG-Designer,tofacilitate conference.417‚Äì426.
[18] RezaZanjiraniFarahani,ElnazMiandoabchi,WaiYuenSzeto,andHannaneh
theautomateddesignofcollaborativeAIsystems.G-Designeris
Rashidi.2013.Areviewofurbantransportationnetworkdesignproblems.Euro-
highlytask-aware,dynamicallycraftingcompactandrobustcom- peanjournalofoperationalresearch229,2(2013),281‚Äì302.
municationtopologiesbasedonthecomplexityofthetaskathand. [19] YaoFu,HaoPeng,AshishSabharwal,PeterClark,andTusharKhot.2022.
Complexity-basedpromptingformulti-stepreasoning.InTheEleventhInter-
WehopethatG-Designerwillinspirefutureresearchontheemer- nationalConferenceonLearningRepresentations.
genceofself-organizingandself-evolvingcollectiveintelligence. [20] ChenGao,XiaochongLan,NianLi,YuanYuan,JingtaoDing,ZhilunZhou,
FengliXu,andYongLi.2023.LargeLanguageModelsEmpoweredAgent-based
ModelingandSimulation:ASurveyandPerspectives. CoRRabs/2312.11970
Acknowledgments (2023).
[21] DiegoGarlaschelli,TicianaDiMatteo,TomasoAste,GuidoCaldarelli,andMariaI
ToRobert,forthebagelsandexplainingCMYKandcolorspaces.
Loffredo.2007.InterplaybetweentopologyanddynamicsintheWorldTrade
Web.TheEuropeanPhysicalJournalB57(2007),159‚Äì164.
References [22] DerekGreene,DonalDoyle,andPadraigCunningham.2010. Trackingthe
evolutionofcommunitiesindynamicsocialnetworks.In2010international
[1] MichaelGHBell,YasunoriIida,etal.1997. Transportationnetworkanalysis. conferenceonadvancesinsocialnetworksanalysisandmining.IEEE,176‚Äì183.
(1997). [23] RuiHao,LinmeiHu,WeijianQi,QingliuWu,YiruiZhang,andLiqiangNie.2023.
[2] MaciejBesta,NilsBlach,AlesKubicek,RobertGerstenberger,LukasGianinazzi, ChatLLMNetwork:Morebrains,Moreintelligence.,arXiv:2304.12998pages.
JoannaGajda,TomaszLehmann,MichalPodstawski,HubertNiewiadomski, [24] DanHendrycks,CollinBurns,StevenBasart,AndyZou,MantasMazeika,Dawn
PiotrNyczyk,andTorstenHoefler.2023.GraphofThoughts:SolvingElaborate Song,andJacobSteinhardt.2021.MeasuringMassiveMultitaskLanguageUnder-
ProblemswithLargeLanguageModels.,arXiv:2308.09687pages. standing.ProceedingsoftheInternationalConferenceonLearningRepresentations
[3] JohnAdrianBondy,UppaluriSivaRamachandraMurty,etal.1976.Graphtheory (ICLR)(2021).
withapplications.Vol.290.MacmillanLondon. [25] SamuelHolt,MaxRuizLuyten,andMihaelavanderSchaar.2024.L2MAC:Large
[4] IslemBouzenia,PremkumarDevanbu,andMichaelPradel.2024.Repairagent:An LanguageModelAutomaticComputerforExtensiveCodeGeneration.InThe
autonomous,llm-basedagentforprogramrepair.arXivpreprintarXiv:2403.17134 TwelfthInternationalConferenceonLearningRepresentations.
(2024). [26] SiruiHong,XiawuZheng,JonathanChen,YuhengCheng,JinlinWang,Ceyao
[5] Chi-MinChan,WeizeChen,YushengSu,JianxuanYu,WeiXue,Shanghang Zhang,ZiliWang,StevenKaShingYau,ZijuanLin,LiyangZhou,ChenyuRan,
Zhang,JieFu,andZhiyuanLiu.2023.ChatEval:TowardsBetterLLM-basedEval- LingfengXiao,andChenglinWu.2023.MetaGPT:MetaProgrammingforMulti-
uatorsthroughMulti-AgentDebate.arXive-prints(Aug.2023).arXiv:2308.07201 AgentCollaborativeFramework.,arXiv:2308.00352pages.
[6] DakeChen,HanbinWang,YunhaoHuo,YuzhaoLi,andHaoyangZhang.2023. [27] ShengchaoHu,LiShen,YaZhang,andDachengTao.2024.Learningmulti-agent
Gamegpt:Multi-agentcollaborativeframeworkforgamedevelopment.arXiv communicationfromgraphmodelingperspective.arXivpreprintarXiv:2405.08550
preprintarXiv:2310.08067(2023). (2024).
[7] JiaweiChen,HongyuLin,XianpeiHan,andLeSun.2024.Benchmarkinglarge [28] WenyueHua,LizhouFan,LingyaoLi,KaiMei,JianchaoJi,YingqiangGe,
languagemodelsinretrieval-augmentedgeneration.InProceedingsoftheAAAI LibbyHemphill,andYongfengZhang.2023.Warandpeace(waragent):Large
ConferenceonArtificialIntelligence,Vol.38.17754‚Äì17762. languagemodel-basedmulti-agentsimulationofworldwars. arXivpreprint
[8] LingjiaoChen,JaredQuincyDavis,BorisHanin,PeterBailis,IonStoica,Matei arXiv:2311.17227(2023).
Zaharia,andJamesZou.2024.Aremorellmcallsallyouneed?towardsscaling [29] WenlongHuang,PieterAbbeel,DeepakPathak,andIgorMordatch.2022.Lan-
lawsofcompoundinferencesystems.arXivpreprintarXiv:2403.02419(2024). guagemodelsaszero-shotplanners:Extractingactionableknowledgeforembod-
[9] MarkChen,JerryTworek,HeewooJun,QimingYuan,HenriquePondede iedagents.InInternationalconferenceonmachinelearning.PMLR,9118‚Äì9147.
OliveiraPinto,JaredKaplan,HarriEdwards,YuriBurda,NicholasJoseph,Greg [30] YoichiIshibashiandYoshimasaNishimura.2024.Self-organizedagents:Allm
Brockman,AlexRay,RaulPuri,GretchenKrueger,MichaelPetrov,HeidyKhlaaf, multi-agentframeworktowardultralarge-scalecodegenerationandoptimization.
GirishSastry,PamelaMishkin,BrookeChan,ScottGray,NickRyder,Mikhail arXivpreprintarXiv:2404.02183(2024).
Pavlov,AletheaPower,LukaszKaiser,MohammadBavarian,ClemensWinter, [31] DongfuJiang,XiangRen,andBillYuchenLin.2023.LLM-Blender:Ensembling
PhilippeTillet,FelipePetroskiSuch,DaveCummings,MatthiasPlappert,Fo- LargeLanguageModelswithPairwiseRankingandGenerativeFusion.InProceed-
tiosChantzis,ElizabethBarnes,ArielHerbert-Voss,WilliamHebgenGuss,Alex
ingsofthe61stAnnualMeetingoftheAssociationforComputationalLinguistics
Nichol,AlexPaino,NikolasTezak,JieTang,IgorBabuschkin,SuchirBalaji,Shan- (Volume1:LongPapers).AssociationforComputationalLinguistics,Toronto,
tanuJain,WilliamSaunders,ChristopherHesse,AndrewN.Carr,JanLeike,Josh Canada,14165‚Äì14178.
Achiam,VedantMisra,EvanMorikawa,AlecRadford,MatthewKnight,Miles [32] YeJin,XiaoxiShen,HuilingPeng,XiaoanLiu,JingliQin,JiayangLi,JintaoXie,
Brundage,MiraMurati,KatieMayer,PeterWelinder,BobMcGrew,DarioAmodei, PeizhongGao,GuyueZhou,andJiangtaoGong.2023.SurrealDriver:Designing
SamMcCandlish,IlyaSutskever,andWojciechZaremba.2021.EvaluatingLarge GenerativeDriverAgentSimulationFrameworkinUrbanContextsbasedon
LanguageModelsTrainedonCode.,arXiv:2107.03374pages. LargeLanguageModel. arXiv:2309.13193
[10] WeizeChen,YushengSu,JingweiZuo,ChengYang,ChenfeiYuan,ChenQian, [33] OmarKhattab,ArnavSinghvi,ParidhiMaheshwari,ZhiyuanZhang,Keshav
Chi-MinChan,YujiaQin,YaxiLu,RuobingXie,ZhiyuanLiu,MaosongSun,and Santhanam,SriVardhamanan,SaifulHaq,AshutoshSharma,ThomasTJoshi,
JieZhou.2023.AgentVerse:FacilitatingMulti-AgentCollaborationandExploring HannaMoazam,etal.2023.Dspy:Compilingdeclarativelanguagemodelcalls
EmergentBehaviorsinAgents. arXiv:2308.10848 intoself-improvingpipelines.arXivpreprintarXiv:2310.03714(2023).
[11] WeizeChen,ZimingYou,RanLi,YitongGuan,ChenQian,ChenyangZhao, [34] ThomasNKipfandMaxWelling.2016.Variationalgraphauto-encoders.arXiv
ChengYang,RuobingXie,ZhiyuanLiu,andMaosongSun.2024. Internetof preprintarXiv:1611.07308(2016).
agents:Weavingawebofheterogeneousagentsforcollaborativeintelligence. [35] ThomasN.KipfandMaxWelling.2017. Semi-SupervisedClassificationwith
arXivpreprintarXiv:2407.07061(2024). GraphConvolutionalNetworks.In5thInternationalConferenceonLearning
[12] YuhengCheng,CeyaoZhang,ZhengwenZhang,XiangruiMeng,SiruiHong, Representations.OpenReview.net.
WenhaoLi,ZihaoWang,ZekaiWang,FengYin,JunhuaZhao,andXiuqiangHe. [36] Guohao Li, Hasan Hammoud, Hani Itani, Dmitrii Khizbullin, and Bernard
2024. ExploringLargeLanguageModelbasedIntelligentAgents:Definitions, Ghanem.2023.CAMEL:CommunicativeAgentsfor"Mind"ExplorationofLarge
Methods,andProspects.CoRRabs/2401.03428(2024). LanguageModelSociety.InNeurIPS.
[13] KarlCobbe,VineetKosaraju,MohammadBavarian,MarkChen,HeewooJun, [37] JunyouLi,QinZhang,YangbinYu,QiangFu,andDehengYe.2024.MoreAgents
LukaszKaiser,MatthiasPlappert,JerryTworek,JacobHilton,ReiichiroNakano, IsAllYouNeed.CoRRabs/2402.05120(2024).Conferenceacronym‚ÄôXX,June03‚Äì05,2018,Woodstock,NY Trovatoetal.
[38] MinghaoLi,YingxiuZhao,BowenYu,FeifanSong,HangyuLi,HaiyangYu, AgentwithLargeLanguageModels. arXive-prints,ArticlearXiv:2305.16291
ZhoujunLi,FeiHuang,andYongbinLi.2023. Api-bank:Acomprehensive (May2023),arXiv:2305.16291pages.arXiv:2305.16291
benchmarkfortool-augmentedllms.arXivpreprintarXiv:2304.08244(2023). [66] LeiWang,ChenMa,XueyangFeng,ZeyuZhang,HaoYang,JingsenZhang,
[39] TianLiang,ZhiweiHe,WenxiangJiao,XingWang,YanWang,RuiWang,Yujiu ZhiyuanChen,JiakaiTang,XuChen,YankaiLin,WayneXinZhao,ZheweiWei,
Yang,ZhaopengTu,andShumingShi.2023.EncouragingDivergentThinking andJi-RongWen.2024.ASurveyonLargeLanguageModelbasedAutonomous
inLargeLanguageModelsthroughMulti-AgentDebate.CoRRabs/2305.19118 Agents.Front.Comput.Sci.18(2024).
(2023). [67] WenhuiWang,FuruWei,LiDong,HangboBao,NanYang,andMingZhou.
[40] WangLing,DaniYogatama,ChrisDyer,andPhilBlunsom.2017. Program 2020.Minilm:Deepself-attentiondistillationfortask-agnosticcompressionof
inductionbyrationalegeneration:Learningtosolveandexplainalgebraicword pre-trainedtransformers.AdvancesinNeuralInformationProcessingSystems33
problems.arXivpreprintarXiv:1705.04146(2017). (2020),5776‚Äì5788.
[41] YuntaoLiu,YongDou,YuanLi,XinhaiXu,andDonghongLiu.2022.Temporal [68] XiangWang,XiangnanHe,YixinCao,MengLiu,andTat-SengChua.2019.Kgat:
dynamicweightedgraphconvolutionformulti-agentreinforcementlearning.In Knowledgegraphattentionnetworkforrecommendation.InProceedingsofthe
ProceedingsoftheAnnualMeetingoftheCognitiveScienceSociety,Vol.44. 25thACMSIGKDDinternationalconferenceonknowledgediscovery&datamining.
[42] ZijunLiu,YanzheZhang,PengLi,YangLiu,andDiyiYang.2023. Dynamic 950‚Äì958.
LLM-AgentNetwork:AnLLM-agentCollaborationFrameworkwithAgentTeam [69] XuezhiWang,JasonWei,DaleSchuurmans,QuocVLe,EdH.Chi,SharanNarang,
Optimization.CoRRabs/2310.02170(2023). AakankshaChowdhery,andDennyZhou.2023. Self-ConsistencyImproves
[43] KaixinMa,HongmingZhang,HongweiWang,XiaomanPan,WenhaoYu,and ChainofThoughtReasoninginLanguageModels.InTheEleventhInternational
DongYu.2023.Laser:Llmagentwithstate-spaceexplorationforwebnavigation. ConferenceonLearningRepresentations.
arXivpreprintarXiv:2309.08172(2023). [70] ZhenhailongWang,ShaoguangMao,WenshanWu,TaoGe,FuruWei,andHengJi.
[44] QunMa,XiaoXue,DeyuZhou,XiangningYu,DonghuaLiu,XuwenZhang, 2023.UnleashingCognitiveSynergyinLargeLanguageModels:ATask-Solving
ZihanZhao,YifanShen,PeilinJi,JuanjuanLi,GangWang,andWanpengMa. AgentthroughMulti-PersonaSelf-Collaboration.,arXiv:2307.05300pages.work
2024.ComputationalExperimentsMeetLargeLanguageModelBasedAgents:A inprogress.
SurveyandPerspective.CoRRabs/2402.00262(2024). [71] JasonWei,XuezhiWang,DaleSchuurmans,MaartenBosma,BrianIchter,FeiXia,
[45] YoheiNakajima.2023.BabyAGI.https://github.com/yoheinakajima/babyagi. EdChi,QuocLe,andDennyZhou.2022.Chain-of-ThoughtPromptingElicits
[46] JoonSungPark,JosephC.O‚ÄôBrien,CarrieJunCai,MeredithRingelMorris,Percy ReasoninginLargeLanguageModels.
Liang,andMichaelS.Bernstein.2023.GenerativeAgents:InteractiveSimulacra [72] RonaldJWilliams.1992. Simplestatisticalgradient-followingalgorithmsfor
ofHumanBehavior.InUIST.ACM,2:1‚Äì2:22. connectionistreinforcementlearning.Machinelearning8(1992),229‚Äì256.
[47] ArkilPatel,SatwikBhattamishra,andNavinGoyal.2021.AreNLPmodelsreally [73] QingyunWu,GaganBansal,JieyuZhang,YiranWu,ShaokunZhang,Erkang
abletosolvesimplemathwordproblems?arXivpreprintarXiv:2103.07191(2021). Zhu,BeibinLi,LiJiang,XiaoyunZhang,andChiWang.2023.AutoGen:Enabling
[48] EmanuelePesceandGiovanniMontana.2023.Learningmulti-agentcoordination Next-GenLLMApplicationsviaMulti-AgentConversationFramework.
throughconnectivity-drivencommunication. MachineLearning112,2(2023), [74] ZhihengXi,WenxiangChen,XinGuo,WeiHe,YiwenDing,BoyangHong,
483‚Äì514. MingZhang,JunzheWang,SenjieJin,EnyuZhou,RuiZheng,XiaoranFan,Xiao
[49] GiorgioPiatti,ZhijingJin,MaxKleiman-Weiner,BernhardSch√∂lkopf,Mrinmaya Wang,LimaoXiong,YuhaoZhou,WeiranWang,ChanghaoJiang,YichengZou,
Sachan,andRadaMihalcea.2024.CooperateorCollapse:EmergenceofSustain- XiangyangLiu,ZhangyueYin,ShihanDou,RongxiangWeng,WensenCheng,Qi
abilityBehaviorsinaSocietyofLLMAgents. arXivpreprintarXiv:2404.16698 Zhang,WenjuanQin,YongyanZheng,XipengQiu,XuanjingHuan,andTaoGui.
(2024). 2023.TheRiseandPotentialofLargeLanguageModelBasedAgents:ASurvey.
[50] ChenQian,XinCong,ChengYang,WeizeChen,YushengSu,JuyuanXu,Zhiyuan arxivpreprintabs/2309.07864(2023).
Liu,andMaosongSun.2023.CommunicativeAgentsforSoftwareDevelopment. [75] YikuanYan,YaolunZhang,andKemanHuang.2024. Dependingonyourself
,arXiv:2307.07924pages. 25pages,9figures,2tables. whenyoushould:MentoringLLMwithRLagentstobecomethemasterin
[51] ChenQian,ZihaoXie,YifeiWang,WeiLiu,YufanDang,ZhuoyunDu,Weize cybersecuritygames.arXivpreprintarXiv:2403.17674(2024).
Chen,ChengYang,ZhiyuanLiu,andMaosongSun.2024.ScalingLarge-Language- [76] ShunyuYao,DianYu,JeffreyZhao,IzhakShafran,ThomasL.Griffiths,YuanCao,
Model-basedMulti-AgentCollaboration.arXivpreprintarXiv:2406.07155(2024). andKarthikNarasimhan.2023.TreeofThoughts:DeliberateProblemSolving
[52] NReimers.2019.Sentence-BERT:SentenceEmbeddingsusingSiameseBERT- withLargeLanguageModels.
Networks.arXivpreprintarXiv:1908.10084(2019). [77] ShunyuYao,JeffreyZhao,DianYu,NanDu,IzhakShafran,KarthikRNarasimhan,
[53] Reworkd.2023.AgentGPT.https://github.com/reworkd/AgentGPT. andYuanCao.2023. ReAct:SynergizingReasoningandActinginLanguage
[54] ToranBruceRichardsandetal.2023.Auto-GPT:AnAutonomousGPT-4Experi- Models.InTheEleventhInternationalConferenceonLearningRepresentations.
ment.https://github.com/Significant-Gravitas/Auto-GPT. [78] ZhangyueYin,QiushiSun,ChengChang,QipengGuo,JunqiDai,Xuan-Jing
[55] EranRosenbluth,JanT√∂nshoff,MartinRitzert,BerkeKisin,andMartinGrohe. Huang,andXipengQiu.2023.Exchange-of-thought:Enhancinglargelanguage
2024.DistinguishedInUniform:SelfAttentionVs.VirtualNodes.arXivpreprint modelcapabilitiesthroughcross-modelcommunication.InProceedingsofthe2023
arXiv:2405.11951(2024). ConferenceonEmpiricalMethodsinNaturalLanguageProcessing.15135‚Äì15153.
[56] SubhroRoyandDanRoth.2016. Solvinggeneralarithmeticwordproblems. [79] EricZelikman,ElianaLorch,LesterMackey,andAdamTaumanKalai.2023.
arXivpreprintarXiv:1608.01413(2016). Self-taughtoptimizer(stop):Recursivelyself-improvingcodegeneration.arXiv
[57] JingqingRuan,YihongChen,BinZhang,ZhiweiXu,TianpengBao,HangyuMao, preprintarXiv:2310.02304(2023).
ZiyueLi,XingyuZeng,RuiZhao,etal.2023.Tptu:Taskplanningandtoolusage [80] GuibinZhang,YanweiYue,ZhixunLi,SukwonYun,GuanchengWan,Kun
oflargelanguagemodel-basedaiagents.InNeurIPS2023FoundationModelsfor Wang,DaweiCheng,JeffreyXuYu,andTianlongChen.2024.CuttheCrap:An
DecisionMakingWorkshop. EconomicalCommunicationPipelineforLLM-basedMulti-AgentSystems.arXiv
[58] MaAngelesSerranoandMari√°nBogun√°.2003.Topologyoftheworldtradeweb. preprintarXiv:2410.02506(2024).
PhysicalReviewE68,1(2003),015101. [81] JintianZhang,XinXu,andShuminDeng.2023.Exploringcollaborationmecha-
[59] NoahShinn,BeckLabash,andAshwinGopinath.2023.Reflexion:anautonomous nismsforllmagents:Asocialpsychologyview.arXivpreprintarXiv:2310.02124
agentwithdynamicmemoryandself-reflection.arXivpreprintabs/2303.11366 (2023).
(2023). https://doi.org/10.48550/arXiv.2303.11366 [82] JintianZhang,XinXu,andShuminDeng.2023.Exploringcollaborationmecha-
[60] HamedShirzad,AmeyaVelingker,BalajiVenkatachalam,DanicaJSutherland, nismsforllmagents:Asocialpsychologyview.arXivpreprintarXiv:2310.02124
andAliKemalSinop.2023. Exphormer:Sparsetransformersforgraphs.In (2023).
InternationalConferenceonMachineLearning.PMLR,31613‚Äì31632. [83] PingZhangandGaryChartrand.2006. Introductiontographtheory. Tata
[61] QiushiSun,ZhangyueYin,XiangLi,ZhiyongWu,XipengQiu,andLingpeng McGraw-Hill2(2006),2‚Äì1.
Kong.2023.Corex:Pushingtheboundariesofcomplexreasoningthroughmulti- [84] KesenZhaoandLiangZhang.2024. Causality-InspiredSpatial-TemporalEx-
modelcollaboration.arXivpreprintarXiv:2310.00280(2023). planationsforDynamicGraphNeuralNetworks.InTheTwelfthInternational
[62] SimengSun,YangLiu,ShuohangWang,ChenguangZhu,andMohitIyyer.2023. ConferenceonLearningRepresentations.
Pearl:Promptinglargelanguagemodelstoplanandexecuteactionsoverlong [85] ChuanyangZheng,ZhengyingLiu,EnzeXie,ZhenguoLi,andYuLi.2023.
documents.arXivpreprintarXiv:2305.14564(2023). Progressive-HintPromptingImprovesReasoninginLargeLanguageModels.
[63] XiangguoSun,HongCheng,BoLiu,JiaLi,HongyangChen,GuandongXu, ,arXiv:2304.09797pages. TechReport.
andHongzhiYin.2023.Self-supervisedhypergraphrepresentationlearningfor [86] ZihaoZhou,BinHu,ChenyangZhao,PuZhang,andBinLiu.2023. Large
sociologicalanalysis.IEEETransactionsonKnowledgeandDataEngineering35, languagemodelasapolicyteacherfortrainingreinforcementlearningagents.
11(2023),11860‚Äì11871. arXivpreprintarXiv:2311.13373(2023).
[64] ZhenTan,RuochengGuo,KaizeDing,andHuanLiu.2023.Virtualnodetuningfor [87] YuchenZhuang,XiangChen,TongYu,SaayanMitra,VictorBursztyn,RyanA
few-shotnodeclassification.InProceedingsofthe29thACMSIGKDDConference Rossi,SomdebSarkhel,andChaoZhang.2023. Toolchain*:Efficientaction
onKnowledgeDiscoveryandDataMining.2177‚Äì2188. spacenavigationinlargelanguagemodelswitha*search. arXivpreprint
[65] GuanzhiWang,YuqiXie,YunfanJiang,AjayMandlekar,ChaoweiXiao,YukeZhu,
LinxiFan,andAnimaAnandkumar.2023.Voyager:AnOpen-EndedEmbodiedG-Designer:ArchitectingMulti-agentCommunication
TopologiesviaGraphNeuralNetworks Conferenceacronym‚ÄôXX,June03‚Äì05,2018,Woodstock,NY
arXiv:2310.13227(2023). OptimizableGraphs.InForty-firstInternationalConferenceonMachineLearning.
[88] Mingchen Zhuge, Wenyi Wang, Louis Kirsch, Francesco Faccio, Dmitrii
Khizbullin,andJ√ºrgenSchmidhuber.2024. GPTSwarm:LanguageAgentsasConferenceacronym‚ÄôXX,June03‚Äì05,2018,Woodstock,NY Trovatoetal.
A AlgorithmWorkflow
Algorithm1:Designingworkflowof G-Designer
Input :InputqueryQ,Graphauto-encoderùëì ùë£ composed
ofencoderùëû(¬∑)anddecoderùëù(¬∑)(parameterizedby
Œò andŒò),learningrateùõº
ùëí
1
forquerydin{1,2,¬∑¬∑¬∑,ùê∑‚Ä≤}do
2 /* Establish multi-agent network */
3
fornodeiin{1,2,¬∑¬∑¬∑,ùëÅ}do
4 xùëñ ‚ÜêNodeEncoder(T(Baseùëñ),Roleùëñ,T(Pluginùëñ))
5
ObtainagentembeddingsXùëéùëîùëíùëõùë° ‚Üê [x1,x2,¬∑¬∑¬∑,xùëÅ]‚ä§
6
Obtaintask-specificnodeùë•
ùë°ùëéùë†ùëò
‚ÜêNodeEncoder(Qùëë)
7
SetananchortopologyAùëéùëõùëê‚Ñéùëúùëü
// In our experiments,
the anchor topology is simply set as the chain structure
Obtainatask-specificmulti-agentnetwork
8
(cid:20) (cid:21)
GÀú = (cid:0) X xùëé ‚ä§ùëîùëíùëõùë° ,Aùëéùëõùëê‚Ñéùëúùëü(cid:1) // Note that Aùëéùëõùëê‚Ñéùëúùëü here
ùë°ùëéùë†ùëò
contains bidirectional edges added by the task node
ùë£ùë°ùëéùë†ùëò
9 /* Design communication topology */
10
EncodeGÀú intolatentagentrepresentationsHùëéùëîùëíùëõùë°:
ùëû(Hùëéùëîùëíùëõùë° |XÀú,Aùëéùëõùëê‚Ñéùëúùëü)=(cid:206) ùëñùëÅ =1ùëû(hùëñ |XÀú,Aùëéùëõùëê‚Ñéùëúùëü)
11
Decode(phase1)andobtainthesketchedgraphS:
ùëù ùë†(S|Hùëéùëîùëíùëõùë°)=(cid:206) ùëñùëÅ =1(cid:206)ùëÅ ùëó=1ùëù ùë†(Sùëñùëó |hùëñ,hùëó,hùë°ùëéùë†ùëò;Œò ùëë),
Decode(phase2)andobtainthecommunicationgraph
12
Gùëêùëúùëö =(V,Eùëêùëúùëö),Eùëêùëúùëö ={(ùëñ,ùëó) |SÀú ùëñùëó ‚â†0‚àß(ùëñ,ùëó) ‚àà
E})
/* Guide multi-agent system collaboration */
13
foriterationtin{1,2,¬∑¬∑¬∑,ùêæ}do
14
fornodeiinùúô(Gùëêùëúùëö)do
15 Agentùë£ ùëñ generatesR ùëñ(ùë°) ‚Üê
ùë£ ùëñ(Ps( yùë° s),Pu( sùë° r) ), Pu( sùë° r) ={Q,‚à™ùë£ùëó‚ààNin(ùë£ùëñ)R ùëó(ùë°) }
/* Aggregate solution */
ùëé(ùë°) ‚ÜêAggregate(R(ùë°),R(ùë°),¬∑¬∑¬∑,R(ùë°) )
16 1 2 ùëÅ
/* Update G-Designer parameters */
17
Œòùëë+1‚ÜêŒòùëë ‚àíùõº‚àá ŒòùëëL
G-Designer