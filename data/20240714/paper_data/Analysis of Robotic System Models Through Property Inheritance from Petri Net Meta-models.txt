1
Analysis of Robotic System Models Through
Property Inheritance from Petri Net Meta-models
Maksym Figat∗, Member, IEEE and Cezary Zielin´ski, Senior Member, IEEE
Abstract—This article investigates the analysis of robotic application to robotics is a challenge [2]. Many model-based
system models using the Robotic System Hierarchic Petri Net approaches focus on specific robot tasks (multi-robot path
(RSHPN) meta-model, proposing streamlined methods by focus-
planning[8],[9])orevenlayers(decisionlayer[10],functional
ing on significant system fragments and inheriting properties
layer [6]), without providing a holistic view of the system.
fromthemeta-model.Ourresearchdemonstratesthatitisfeasi-
ble to: 1) effectively analyze complex robotic systems expressed Moreover, a predominant focus on implementation, sidelin-
usingRSHPN,and2)enablemodelstoinheritpropertiesfromthe ing specification, even in many model-driven engineering
meta-model. This approach significantly simplifies the analysis approaches couples modelling and implementation concepts,
process,reducesdesigntime,andensuresthesafetyandreliability
hindering the development of platform-independent models
of the systems. These aspects are crucial for robots operating in
and comprehensive system analysis [2].
human environments. Our results suggest that Petri nets could
be further explored as a useful tool for the formal description Lack of formal system model prior to implementation is
and in-depth analysis of the properties of robotic systems. usually due to: (a) computational complexity of the analy-
Index Terms—Robotic System Analysis, Hierarchical Petri sis [11], (b) scalability problems in model checking [6], and
Nets, Properties Inheritance, System Safety and Reliability (c)explosionofthestatespace(asinavariablestructuremulti-
robot system modelled by Variable Petri net (VPN) [11]).
Decomposition of the analysis is seen as a remedy to the
I. INTRODUCTION
problem of excessive model complexity [12] (but system was
As robots ever more often execute complex tasks in close rudimentary,limitedtomotionplanningforsimplerobotsina
proximity of humans, the need for their accurate and safe fixedstructureenvironment).Tomitigatestatespaceexplosion
operation is crucial. However, formal methods for system runtime verification (RV) is performed. RV does not require
description,avitalcomponentofmodel-basedapproaches,are a model of the system, but this limits the class of properties
often overlooked, thus flaws are detected as late as the imple- that can be analysed. However, by providing to RV a model
mentationorevenverificationstages,henceresultingincostly of the system, treated as a priori knowledge, predictive RV
redesigns[1].Component-baseddevelopmentframeworks,e.g. is obtained [13], [14]. Future system states are predicted.
ROS, offer flexibility, but lack stringent guidelines, what However, this is still done after the implementation phase.
makes the quality of the resulting systems heavily dependent
We developed a parametric Robotic System Hierarchical
on the designer’s expertise, often leading to inferior software
PetriNet(RSHPN)meta-model[15].Thesix-layeredRSHPN
code [2]. The quality of such systems can be verified at the
models the activity of the entire robotic system. Parameters
runtimeverificationstage,i.e.therearemanyROS-basedtools
derived from robotics ontology define both the structure and
foranalysis,e.g.SOTER[3],ROSMonitoring[4],ROSRV[5].
the activities of the system and its components. Domain-
However, they are mainly used to analyse the message flow
specific Robotic System Specification Language (RSSL) [16]
between nodes that are treated as black boxes, so it is not
is used to define the RSHPN parametres thus transforming
possible to analyse the state of subsystems directly, which
the meta-model into a model. The model is used to generate
makes it much more difficult to perform an overall analysis
the controller code or perform the analysis. This forms the
of the designed system and significantly narrows the potential Robotic System Design Methodology (RSDM) [17]1.
space of analysed properties, as stated in [6]. Early utilisation
Conventional Petri net analysis tools (Tina [19]) applied
of formal methods could greatly improve system reliability
to RSHPN were of limited utility (state space explosion),
and safety, thus minimizing risks and redesign expenses.
even for a robot collecting ping-pong balls [15]. Petri net
Formal methods are necessary to perform model checking
analysis (1168 places, 1294 transitions, 3085 edges) resulted
before implementation.
in a reachability graph of over 25 million states and 163
They play a critical role in model-based design methods,
millionedges.Acomputerwith32GBRAMdidnotcope.For
enabling system specification [7] and analysis, although their
morecomplexsystems,e.g.multi-robotsystemswithdynamic
structure [20], it would only be worse. Thus, an alternative
MaksymFigatandCezaryZielin´skiarewithWarsawUniversityofTech-
nology, Institute of Control and Computation Engineering, Warsaw, Poland. method for analysing RSHPN had to be devised. This paper
∗Correspondingauthor:MaksymFigat(maksym.figat@pw.edu.pl) showsthattheRSHPNstructuregreatlysimplifiestheanalysis
ResearchwasfundedbytheWarsawUniversityofTechnologywithinthe
of the designed system due to hierarchical decomposition.
ExcellenceInitiative:ResearchUniversity(IDUB)programme.
This work has been submitted to the IEEE for possible publication.
Copyright may be transferred without notice, after which this version may
nolongerbeaccessible. 1IntroductiontotheRSDM:https://youtu.be/027JvJ-CtjY
4202
luJ
11
]OR.sc[
2v45460.7042:viXra2
A similar idea of analysis decomposition was used in [12], pi 1n t1
Multi­agent robotic
however it was not applied to RSHPN. Pj ... Pj′ system layer
The following presents: Sec. II – contribution, Sec. III –
t2
introduction to Petri nets, Sec. IV – introduction to RSHPN
meta-model, Sec. V – properties to be verified, Sec. VI – pi 1n t1
theanalysismethods,SecVII–RSHPNmeta-modelanalysis,
Sec. VIII – analysis results, and Sec. IX – conclusions. sPv ... sPv′ Agent layer
II. CONTRIBUTION
po 2ut t2
This article focuses on robotic system analysis. A robotic
system (RS) is modelled using the RSHPN, which has a pi 1n t1 P ωB t3 [f 1σ]
PB
hierarchicstructure.Theproposedmethoddivergesfromclas- ω′
pout
sicalfull-modelanalysisinonestep.IndividualRSHPNmeta- 2 t2 [isStopped] t4 [f 2σ]
modellayersareanalysedseparatelyorinsubsets.AsRSHPN
models inherit properties directly from the meta-model each pi 1n t5 [¬fϵ∧¬fτ] po 6ut
step of the analysis is much simpler. This inheritance is of
great significance, because it implies that for new robotic Pf Psnd O4
systems,analysisrequiresonlytheexaminationofthesupplied
parameterstothemeta-modelandselectednetworkfragments, t1 t2 t3 p4 t4 Prcv t6
i.e. fragments that depend on the tasks.
III. PETRINETPRELIMINARIES
sH jB ,v,f
,ω
sH jB ,v,s ,n ωd sH jB ,v,r ,c ωv A lac yt eio rn
A Petri net (PN) is a bipartite graph with two kinds of
nodes: places p (single circles) and transitions t (rectangles). Fig. 1: RSHPN H modeling activities of a robotic system
Directedarcsconnectplacestotransitionsandviceversa.PNs
arerepresentedeithergraphically(e.g.Fig.1)oralgebraically.
Evolution of PN marking illustrates the changes of system IV. ROBOTICSYSTEMHIERARCHICALPETRINET
state. µ(p ) indicates marking, i.e. number of tokens (filled-
i RSHPN H [17],[22]extendsaPNbyintroducingpages P
in black circles) in place p ∈ pˆ, where µ(p ) ≥ 0 and pˆ is
i i (double circles) representing an underlying PN (rectangular
a set of places; M is a PN marking vector in instance m,
m panel connected by a dashed arrow to its page) (Table I).
M m =(cid:0) µm(p 1),...,µm(p k)(cid:1)⊤ ,wherek =|pˆ|andm≥0(in Each such net has a single input pin and a single output pout
general |ˆ⋆| is the cardinality of set ˆ⋆); M indicates the initial
0 place. Logical conditions C and priorities Pr are associated
markingandM markingmderivedfromM ;M (p )isthe
m 0 m i withtransitions,whileoperationsOareassociatedwithplaces.
numberoftokensinplacep whileinM .PNinanalgebraic
i m Moreover, separate HPNs can have common places called fu-
formisrepresentedbytheincidencematrix.ForaPNwith|tˆ|
sion places pfusion. RSHPN H modeling a multi-agent robotic
transitions and |pˆ| places, the incidence matrix N =[n ] is a
ij system RS consists of six layers (Fig. 1).
|tˆ|×|pˆ| matrix containing integers; n represents the change
ij Decomposition of RSHPN into layers follows from the
of the number of tokens in a place p when t ∈ˆt fires [21]:
j i structure of RS. RS consists of one or more embodied
n ij =n+ ij −n− ij (1) agents a j [15]. An a j consists of: a single control subsystem
c , real receptors R , real effectors E , virtual effectors
n− denotes the number of tokens removed from the input j j,l j,h
ij e , and virtual receptors r , where j,l,k,h,m,n are their
place p and n+ denotes the number of tokens inserted into j,n j,k
j ij designators.Receptors R collectdatafromtheenvironment.
p bothafterfiringt .IfforM ∀p (n− ≤M (p )),thent j,l
j i m j ij m j i Data is aggregated by r and passed to c . Based on the
j,k j
fires causing a transition: M −t →i M . The marking M aggregated data and the task, c sends control commands to
m m+1 m j
is a column vector |pˆ|×1. As the i-th row in the incidence e , which in turn transforms them to affect the environment
j,n
matrix N denotes the change in the marking from M to the via E . Those subsystems have a common structure. Each
m j,h
marking M as a result of firing t , the new marking of subsystems ofagenta contains3typesofbuffers:1)ss
m+1 i j,v j j,v
the network can be expressed by the formula Eq. (2). (internalmemory),2)inputbuffers s ,and3)outputbuffers
x j,v
s . Detailed notation is described in [17], [18].
M =M +N⊤·u (2) x j,v
m+1 m m+1
whereu isacolumnvector|tˆ|×1containing1atposition
m+1 A. Description of RSHPN layers
i(denotingthefiringoft )with0atallotherpositions.Thus:
i
Multi-agent robotic system layer contains a single net H
M −M =N⊤·(u +...+u )=N⊤·x (3)
m 0 1 m representing the RS task T aggregating the tasks executed
where x (called firing count vector [21]) is a column vector by all agents (each a is represented by P ). On system
j j
of dimension |tˆ|×1 with non-negative integer values, where initiation t fires and thus all pages representing activities of
1
i-th value in the vector x denotes the number of times the RS agents are activated in parallel. Once all pages complete
x
transition t fires, leading from M to M , i.e. M −→M . their activities t fires and the system terminates its activities.
i 0 m 0 m 2
H
jH
v,jHs
ω,v,B
jHs
]τf∨ϵf[
metsysbuS
ruoivaheB
reyal
reyal3
TABLE I: RSHPN notation [15].
pin
NotationofRSHPNconcepts Graphicalnotation
1 [new(s y′sj,v,h)]
centralsymbol
t1
O2
t2
sH jB ′, ,r hc ,v ω′,κ
typeofsubsystems
H
jB ,, vf ,ω,ψlistof
l f ji o
,k
s r
vte ,y
no
ωw
af
,mo
s
ρr
u e
,d
b s
ψs
,s ,t e κi .t gu .t :es
p
p
trl aa agc nee
sition
token
f po au nr els
t4p2 {2t }3
{{22}} t1
pi 1n
[T2==t ti 2meout2]
sC ye mn pt br oal
l
D ple as cc eription S tu ub jtest si- N aga em ntes: Key iw nord D ine ps uc tri pp lt ai co en
[T5==t ti
5meout1]p3
t6
{t 28 }{3} p pf (u 1
f
(us , 21i
s
,o ) 2in
o )n
{ t3 5}
O2 p2
O3
p3
P page v subsystem out outputplace O4 t3 t4
t transition ω behaviour B behaviourlayer
H hierarchical ψ partialfunction snd sendsublayer
p4 po 4ut
Petrinet ρ outputbuffer rcv receivesublayer
t7
C condition κ inputbuffer fusion fusedplace po 5ut
a agent f transitionfunction
s subsystem sublayer Fig. 2: Petri net modelling nine communication models
Agentlayerdefinesforeacha asinglenetH representing
j j each communicating pair of subsystems an inter-subsystem
its task T , which aggregates the tasks of its subsystems. H
j j communication model is produced by out of communication
containsonepagesP foreachs withina [15],[16],[18].
j,v j,v j modes (Table II). Because each subsystem can communicate
Allpagesareactivatedinparallel,ensuringthatallsubsystems
with other subsystem in either of three modes: blocking,
of this layer act independently from each other.
blocking with timeout or non-blocking, nine possible inter-
Subsystem layer defines for each s a single net sH
j,v j,v subsystem communication models result. All of them are
representing its task sT . The task determines how s
j,v j,v realised by the PN presented in Fig. 2.
switches between its behaviours sB . Each sB is
j,v,ω j,v,ω
represented by a page sPB . For each pair of consecutive Communication Receive
j,v,ω
behaviors (e.g. sB – current, and sB – next be- model t_out2=0 t_out2=∞ 0<t_out2<∞
haviour), a single tj r, av n,ω sition st
j,v,α
exists wj i,v th,ω′ an associated tt __ oo uu tt 11 == ∞0 N BB -N-N BB N BB -B-B N BB -B-B TT
initial condition sfσ . When sB terminates and sfσ 0<t_out1<∞ BT-NB BT-B BT-BT
j,v,α j,v,ω j,v,α
is true sB is switched to sB . Exactly one condition TABLE II: Nine communication models realised by the PN
j,v,ω j,v,ω′
associated with transitions st connected by directed arcs in Fig. 2 depending on t_out and t_out , where (t_out ≜
j,v,α 1 2 i
emerging from sPB must be true upon termination of timeout,i=1,2);modes:NB–non-blocking,B–blocking,
j,v,ω i
sB . Condition [isStopped] is true only if s terminates. and BT – blocking with timeout
j,v,ω j,v
BehaviourlayerdefinesforeachbehavioursB asingle
j,v,ω
fixed-structure net sHB formed by a sequence of pages
j,v,ω
constituting an elementary action sA j,v,ω, supplemented by a V. PNPROPERTIESTOBEANALYSED
terminal sfτ and error sfϵ conditions. sA consists
j,v,ω j,v,ω j,v,ω PN is deadlock-free if for any reachable marking M , i.e.
of 3 pages and one operation, all executed unconditionally: 1) m
sPB,f calculates the transition function sf , 2) sPB,snd derived from M 0, there always exists at least a single fireable
j,v,ω j,v,ω j,v,ω transition(i.e.enabledwithafulfilledcondition).Nodeadlock
sends out the results of sf evaluation, 3) increments the
j,v,ω within H does not mean that the deadlock does not occur
discrete time stamp i (operation sOB ), 4) sPB,rcv inserts
j,v,ω,4 j,v,ω in any subsystem or between communicating subsystems.
the received data into s . If neither sfϵ nor terminal
x j,v j,v,ω Therefore, individual lower level PNs need to be analysed.
sfτ are satisfied, stB fires leading to the next iteration
j,v,ω j,v,ω,5 PN is safe if for any reachable marking M each place p
of sB . Otherwise, stB fires, terminating sB , i.e. m i
j,v,ω j,v,ω,6 j,v,ω contains at the most one token, i.e. 0 ≤ M (p ) ≤ 1. Safety
a single token appears in spB and the control returns to m i
j,v,ω,6 assures that the operation associated with the place p i cannot
sH which designates a new behaviour based on sT .
j,v j,v be executed concurrently to itself.
Action layer defines 3 modules each divided into 2 layers
PN is conservative [21] if ∀ y(p ) > 0 (y – vector
for each behaviour sB : 1) sHB,f – defines transition pi∈pˆ i
j,v,ω j,v,ω of weights for each place) the weighted sum of tokens for
f r su e Hpn r Bc et ,si ro ce vn nt rs s ef pj t rh,v ee, sω es ne e tx n se d tc hu c et oe rmd ecmb ey u ivns eij c,v ca otr i me oa n mli us mi nn o ig cd aes tB iouj ns,v e, mdω o, b d2 y e)s usH sj, evjB d, ,, vs , bn 3ω yd ) Me av ne dmry ( ypr ie )a ̸=c =ha 0b (cid:80)le thpi em ∈ na pˆr y Pk Ni (n pg i) isM · pMm a0 ri ( ts ip ac i l)o lyn =st ca on c nt o, sn ei s. re t v. .: aI t(cid:80) f ivep yi ,(∈ p wpˆ i)y hi( l≥p ei) i0 f·
j,v,ω
s j,v. For a more detailed description see [15] or video2. y = (1,...,1)⊤ then PN is strictly conservative, i.e. the
number of tokens in PN remains the same for any M .
m
B. Communication models Justification for conservatism analysis The structure of
H assures that when any subnet is activated, a single token
Subsystem s communication modes are defined by two
j,v
nets: a) sHB,snd and b) sHB,rcv. Each of them determines the appearsinitsinputplace.SinceeachnetworkinH ismeantto
j,v,ω j,v,ω be safe, the parent network cannot introduce another token to
order and the arrangement in which the s communicates
j,v
an already activated subnet. Thus, the number of tokens in an
withitsassociatedsubsystems(thearrangementofpages).For
activated subnet can only change due to firing its transitions.
2IntroductiontotheRSHPNanalysis:https://youtu.be/JenAB1IKVVY Hence, a subnet is conservative and to what extent depends
dns,BHs ρ,ω,v,j
dneS
])h,v,js′
ys(wen¬[4
onitsstructure,notontheparentnetwork.Ineffecttheparent satisfied. This is equivalent to: M⊤·y=M⊤·y=const,
m 0
network can be treated as a transition connecting the output i.e.: (M −M )⊤·y=0, and by using Eq. (3) we obtain:
m 0
place to the input place of the analysed subnet. Thus, in a
x⊤·(N ·y)=0, and since x̸=0 then: N ·y=0 (4)
strictlyconservativenetworkatanytimethenumberoftokens
is always constant and exactly one, i.e. subnet will always The solutions of Eq. 4 for y ̸= 0 are called place invariants.
execute exactly one operation at any time (as it has a single Theyguaranteethattheweightedsumoftokensinthenetwork
tokeninaninputplaceintheinitialmarkingM 0).Ultimately, is constant. The set of places corresponding to the non-zero
eachsubnetinanRSHPNendsupwithexactlyonetokeninits elements of the solution is ∥y∥, called the support of place
outputplace.Hownetworkmarkingchangescanbeexamined invariant [21]. Firing any transition in the network does not
through conservativeness analysis. change the weighted sum of tokens from ∥y∥. This enables
distinctionofthesetofplacesrepresentingoperationsrepeated
VI. ANALYSISMETHODS cyclically and those dependent on each other, e.g. if a sum of
RSHPN H is composed of four network types: tokens is 1, then always only one operation is executed out of
those represented by the places in set ||y||. To point out the
• trivial with a variable structure, namely: H, H j, and
operations that are independent of each other two subsystems
assuming sequential or parallel arrangement: a) sHB,f ,
j,v,ω operating independently can be distinguished by identifying
b) sHB,snd and c) sHB,rcv, and sHB,f ,
j,v,ω j,v,ω j,v,ω,ψ two independent vectors: y 1 and y 2.
• trivial with a fixed structure, namely: sH jB ,v,ω, Transition invariants are vectors defining the number of
• complex with a fixed structure, namely a network com- transitionfiringskeepingthemarkingofthenetworkthesame,
posedofsHB,snd andsHB,rcv representingthegeneral
j,v,ω,ρ j,v,ω,κ i.e. after firing transitions as many times as specified in the
communication model for a pair of subsystems,
transition invariant vector, PN will switch from M to M ,
0 m
• complex with a variable structure (e.g. sH j,v and in but M m =M 0. Hence, based on Eq. (3) we obtain Eq. (5).
hybrid arrangements: sHB,f , sHB,snd, sHB,rcv).
j,v,ω j,v,ω j,v,ω N⊤·x=0 (5)
PN properties can be verified using three methods: 1) PN
interpretation; 2) reachability graph construction; 3) place/- The non-zero solutions of Eq. (5) are transition invariants.
transitioninvariantsanalysis.Forallmethods,eachPNdefined The set of transitions corresponding to the non-zero elements
by an individual panel must be modified using reduction of the solution is ∥x∥, called the support of transition in-
methods [21], as in [15]. This involves: a) replacing a higher- variant [21], i.e. firing all transitions from ∥x∥ does not
ordernetbyatransitionconnectingoutputtoinputplaceofthe change PN marking, e.g. if x = (1,2)⊤ and PN starts from
analysed PN, b) replacing pages with places, and c) updating M it will reach M by firing: t once and t twice, i.e.
0 0 1 2
the indices; as shown in Fig. 5 and Fig. 8a.
M
−( −t1−) −,( −t2−) →2
M . The transition invariant does not specify
0 0
theorderoftransitionfirings.Transitioninvariantscanbeused
A. Petri net interpretation in a graphical form to prove the repeatability of the system and the absence of
Itconsistsinfiringenabledtransitionsandpresentinggraph- deadlocks while executing transitions from ||x||.
icallyallpossiblemarkingsM thatcanbederivedfromM . Placeinvariantsareusedtostudytwoproperties:1)network
m 0
InthiswayH,H canbeanalysed,asshowninFigs3and5. safety, and 2) network conservativeness. Transition invariants
j
show the lack of deadlocks in the network. Safety analysis
requires solving the equation Eq. (4). If all places of the
B. Reachability graph analysis
network belong to ∥y∥ and M is bounded (i.e., the sum of
0
Reachability graph nodes represent markings M derived
m tokens in M is finite) then the network is bounded. If for
0
from M , while edges show transformations of markings due
0 each ∥y∥ the sum of tokens is 1 then the network is safe.
t
to firing transitions t, e.g. M 0 →− ... →− M m →− M m+1. The Conservativity analysis also employs solutions of Eq. (4).
analysis consists in deriving from M 0 all possible markings The vector of weights can be obtained just by summing all
(e.g. Fig. 8b) and checking that for each marking: (1) there the linearly independent vectors that are place invariants. If
is always at least one transition that can fire, i.e. PN has no the resulting vector is (1,...,1)T, then the network is strictly
deadlock; (2) number of tokens in each place is either 0 or 1, conservative. If no place invariant is found for the network
i.e.PNissafe;and(3)totalnumberoftokensinanymarkingis except y = 0, then the network is not conservative. On the
same(strictlyconservative)orvariable(partiallyconservative). other hand, if some component of the vector is 0 (but y̸=0)
then the network is partially conservative. In other cases, the
C. Place invariant and transition invariant analysis networkisconservative.Therearenodeadlocksinanetworkif
thenetworkislive[21].Anetworkisliveifforeachreachable
Invariants[21],[24]arepropertiesofthelogicalstructureof
markingM ,thereexistssuchasequenceoftransitionfirings
anetwork.Theycharacterizethewaytransitionsarefired[23]. m
in which each transition can potentially fire at least once.
Place invariants express properties of reachable markings,
i.e. they describe sets of places in the network where the
weighted sum of the number of tokens for each reachable
VII. RSHPNMETA-MODELANALYSIS
marking remains constant. Let y be the vector of weights as- First the PNs in any layer of RSHPN are analysed sepa-
signedtoplacesforwhichtheassumptionofplaceinvariantsis rately. To do that to each such PN an additional transition5
Ppi
1
jnt1fi .r .e .sa ttn 21d Pa jc ′tivates Pa pl
i
1
jl npage .s
..
tt
21p Pa tg
j
2e
′
fiP rej′ sfini Ppsh
i
1
jnes
...
p
tt
2a 1g Pe jp P ′a jg fie nP isj h Ppfi e
i
1n js nishes
...
tp
t
21ag Pe j′Pj′finis Ph pe
i
1
jns
...
tt 21
Pj′
e Hxt jended t3H pj
i 1n
ps
o
2P utv
.t .1 .fir
t
te
1
2sa sn Pd va ′ctivate ts 3all pp
i
1na psg
o
2Pe us
tv
...
t t1
2
sPv′ t3
pi 1n
ps
o
2P utv
...
tt 21
sPv′
Fig.3:GraphicalanalysisofH(firstlayerofRSHPNinFig.1) t3fires pagePvfinishes pagePvfinishes
pi 1n
t1
pi 1n
t1
pi 1n
t1
... ... ...
Ppi 1 jn
H
... tt 21 Pj′ p p1 2 ... tt 21
psi |am ˆ|+p 1li tfi
t1
2e
fi
fid
r re es
sH
p p1 2 ... tt 21 p|aˆ|+1 Fig.
5:t3 Grp as o 2P putv hicalt a2 ns aPv l′ ysist3 ofps Ho 2P utv
j
modt2 elsP inv′
g
tht3
et
a2p cfis o 2P
r
tu
e
itv
s vity
ot2 fs aP jv′
.
Fig. 4: Simplified H has two markings: M =(1,0,...,0)⊤
0
and M 1 =(0,1,...,1)⊤; |aˆ| – number of agents in RS extendedHj t1fires
simplifiedHj
t2fires
c To hn isne sc et pin ag rati ets
s
o thu etp au nt ap lyla sec de t Po Nth fe rominp tu ht ep hla igc he eris lain yt er ro .d Tu hc ee rd e. t3
pi1n
ps o2P utv ...
t t1
2 sPv′ t3
p1
p p2 |sˆj|+2...
t t1
2p|sˆj|+1
tp 31
pp |2 sˆj|+2 ...
t t1
2p|sˆj|+1 t3
p t1
3p p fi2 |sˆ rj e|+ s2...
t t1
2p|sˆj|+1
are two potential causes of deadlocks in such a PN: (a) Fig. 6: Simplified H markings: M = (1,0,...,0,0)⊤,
j 0
incorrect structure or permanently false values of conditions M =(0,1,...,1,0)⊤,M =(0,0,...,0,1)⊤;|sˆ |–number
1 2 j
defined within this PN, or (b) deadlocks in lower layer PNs. of a subsystems
j
If the lower-layer PNs are deadlock-free, then the pages
representing them can be converted to places, as in Fig. 4.
The analysis starts from the top layer of H, assuming the place.SincesH representsanarbitrarytasksT itassumes
j,v j,v
lower-layer PN properties are as required, and then verifying diverse structures. Hence, the analysis of sH is based
j,v
this assumption as we proceed to the bottom layers. on an incidence matrix. A valid structure of sH requires
j,v
no self-loops and that within each row of incidence matrix
sN exactly two non-zero numbers exist: −1 and 1. If the
A. Multi-agent robotic system layer analysis j,v
assumptionsareviolatedthePNstructureisincorrect.E.g.for
H is composed of one PN. Its simplified structure is shown
the PN in Fig. 7 the incidence matrix sN is as in Eq. (6).
j,v
in Fig. 3. Assuming that lower-level PNs are correct the
simplified PN is as in Fig. 4. By inspection we conclude that pinsPB sPB sPB pout
1 j,v,ω′ j,v,ω′′ j,v,ω′′′ 5
H is safe (in every reachable marking, i.e. M and M , each −1 1 0 0 0  t
0 1 1
place has at the most a single token), conservative (due to the  0 −1 0 0 1  t 2
vector of weights y = (|aˆ|,1,...,1)⊤) and deadlock-free as   0 −1 1 0 0   t 3
in M 0 and M 1, always a single transition can fire. sN j,v =   0 0 −1 1 − 01 0 1 0 0    t t4 5 (6)
 0 1 0 −1 0  t
  6
 0 0 −1 1 0  t
B. Agent layer analysis 7
1 0 0 0 −1 t
8
The agent layer consists of |aˆ| different H . Each H
j j
consistsofasingleinputandoutputplace.Thus,thestructure
ofH canbeextendedwithanadditionaltransition,asshown
j
inFig.5.AssumingthatthepropertiesoflowerlevelPetrinets,
sH
j,v extendedbyt8
e
es t P ei dl th. i hi
n
qa ee e mm e ec
s
ua. t rr h ui
d
ap ei tH a
r
llel pn eoni d ifij tl sa ce s o, alev ktt cy to.d,
-
|a hes
sf
ˆS l aia 1 rwb jws i
e
tr , |mye ea ,i s io t .y ni o whc ff l s Aah iu hsn HH ral ia ilfi n
m
cvey jjl hg a el s pia ce ci ib sn
l
mns hd
t
io og figs, i eri ra ln el e at ep fs dh oa nea S ce f. sd tg He hn rSoe wac ta hs w ji n.t b en ah sV ln ii c
t
tie e gn hteI ht i Hemt Io oe o tf- sx nrA ja wp ot rt ye ,hl em ik ra sn e ie t ic g=h nd a cae he ge da ons td n y
(
n, ey(n |a i
d
ssu ˆa .H l tr ee jy ms oe rs. |sj a
v,
ui b Mi c fin a1s mec h t,rr 0a iF eao
.
v,n o,o b .fi eMg ff l
.
.tb e. s ,ht tie 1 1o o6 em m, ,k k.f Mp a |e H eu T sˆrl n nr ki j2h jt fi s s|ih )u )ne ie
⊤
iiis n gd sssr ,
t8 sPt ωB2
′fiP n.
[
pω iB Cp.
so
5′. i 1 2t hn us 1 ]a ets Pn sin jdt ,g v1 tal , t
t
tωe 43fi f
5
6′trt ee so .r ws .k [, [[t [ .e i
f
fffe tn a
(
((r ( σc σσσ
tω
ωωωc m h 4i ′t ′′n ′e ′′ ,,i i
′
fiω,ωsv n ,ωp
ω
r′a ′a ′′t ′ ei 1
′
′)t )n )t o
)
s]e ] ]i ]os fi an nn ts P 7 PB dio ωs Bj f aωh B′, ′ cv ′es ′, t′dBω iv′ j a,v t, eω safi′ s scr B Bt te3 i js jv , ,v vaa , ,t ωn ωe ′d ′′st8 t2 P P[ pω ωp pB BC o 5i 1
i
1′ ′2t tn nu1 1] t st tPt tt t4 43 35 6
ωB
′′fi[[ [[ [ff fn[f ff(( (i( (σσ σσ σωω ωs(ω ωσ ω h′′ ′′ ′′ ′,, ,′ eω, ,ω ω′ω ω′ s′ ,′ ′′′ ′ω′ ′′) )) )) ′] ]] ]] )]≡ tP Pt 7P7ω ωB BTωB′ ′′ ′′ r′′ ue
aC. sS iS u nu b gb s les yy ss Ptet Ne mm sll a Ha yy ee rr .ca o An na ntal ay i lns yi s ss is(cid:80) oa fj∈ saˆ H|sˆ j| p rea qn ue il rs e, sea sc uh bsh tio tl ud ti in og
n
..a .ctt −i6 vafi thtr ee ess ssa aBn mjd , ev,ω. p′. a. nes lP wωB ′ i′ t′ hfin oi ts hh ee rs. m.. aa rc ktt ii7 nv gafi str ee ss sa Bn jd ,v,ω′′′t8 t2 [ pC o 52 u] t t t5 6 [ [f f( (σ σω ω′ ′, ′ω ′,ω′′′ ′) )] ]≡P TωB r′′ u′ e
of H
j
by a
tranj, sv
ition connecting
sj H,v
j,v
output with input
Fig. 7: Analysis of an exemplary sH j,v.
H
3tyb
dednetxejH
] )′′′ω,′′ωσ (f[
sehsinfi
′vPegap
sehsinfi
′vPegap
] )′′′ω,′′ωσ (f[
] )′′′ω,′′ωσ
(f[6
Satisfactionoftheaboverequirementsensuresstrictconserva-
tiveness. To show the invariability of the token number in any pi 1n t5 [¬fϵ∧¬fτ] po 6ut
M ,itsufficestonoticethatwhenatransitionfires,onetoken
m
from a place/page is consumed, and one token is inserted into Pf Psnd O4
another place/page, hence y =(1,...,1)⊤.
To guarantee no deadlock, in any reachable M exactly a
t1 t2 t3
p4
t4 Prcv t6
singletransitionshouldbeabletofire,i.e.conditionm associated sH jB ,v,ωisextendedbyt7
with the transition must be satisfied. To ensure deterministic
t7
execution of sH conditions associated with transitions for p1 t5 [¬fϵ∧¬fτ] p6 j,v
which considered place/page is an input must satisfy: (1) the
logic sum of all initial conditions must be True; and (2) the
logical product of any two conditions must be False. Those
t1 p2 t2 p3 t3 p4 t4 p5 t6
two conditions must be fulfilled upon termination of the (a)
place/page activity. The first condition guarantees that always Marking Transitions
at least a single transition can fire (assures no deadlock) M mB =(cid:0)µm(p1),...,µm(p6)(cid:1)⊤ t1 t2 t3 t4 t5 t6 t7
in sH j,v. The second condition ensures that only a single M 0B=(1,0,0,0,0,0)⊤ M 1B - - - - - -
behaviourcanbeselectedasthenextbehaviour(determinism). MB=(0,1,0,0,0,0)⊤ - MB - - - - -
1 2
MB=(0,0,1,0,0,0)⊤ - - MB - - - -
2 3
D. Behaviour layer analysis
MB=(0,0,0,1,0,0)⊤ - - - MB - - -
The behaviour layer consists of (cid:80) aj∈aˆ(cid:80) sj,v∈sˆj|sBˆ j,v| M3 4B=(0,0,0,0,1,0)⊤ - - - -4 M 1B M 5B -
panels. Each PN (panel) has exactly the same structure as MB=(0,0,0,0,0,1)⊤ - - - - - - MB
5 0
sHB –thisisthegeneralbehavioursB pattern(Fig.1).
j,v,ω j,v,ω (b)
So instead of analysing all the PNs specified in all panels, it
suffices to analyse a single PN being the pattern. Hence, PN Fig. 8: (8a): extended sHB ; (8b): tabular form of the
j,v,ω
inFig.8aisanalysedonly.Inthatnetworkeachtransitionhas reachability graph of extended sHB (rows represent graph
j,v,ω
exactlyoneinputplaceandexactlyoneoutputplace,i.e.firing nodes,columnstransitions(e.g.firingt atMB,leadstoMB)
4 3 4
any transition does not change the number of tokens in the
network.Thus,thenetworkisstrictlyconservative.Sincethere
isexactlyonetokenintheinitialmarking,thenetworkissafe. PNs are connected by fusion places. Both nets form a single
Moreover, for any reachable marking, there is always exactly PN representing the communication model for a pair of
onefireabletransition(theconditionsforthetransitionst and subsystems. Sec. IV-B introduces 9 different communication
5
t are mutually exclusive), thus there is no deadlock. Those models, however, all of them can be represented by a single
6
properties can also be verified using the reachability graph PN (Fig. 2). Thus a single PN is analysed. To produce its
presented in Table 8b. For each possible marking: a) each incidence matrix from the network in Fig. 2 3 self-loops must
place has at the most a single token, i.e. PN is safe, b) total be removed: 1) t 3 ↔pf (u 1s ,1io )n, 2) t 8 ↔p 3, and 3) t 8 ↔pf (u 1s ,1io )n.
number of tokens remains always the same, i.e. the net is The result is a pure PN, i.e. without self-loops, (Fig. 9). This
strictly conservative, and c) for any reachable marking always networkistransformedintoincidencematrixNmodel (Eq.(7))
a single transition can fire, i.e. net is deadlock-free. without losing information about the network operation.
E. Activity sublayers analysis
Nmodel=
p1 p2 p3 p4 p5 p6 p7 p8 p9 p10 p11 p12 p13
Analysis of the action layer requires the analysis of 3  −− 11 10 00 00 01 00 00 00 00 00 00 00 0 0  t t1 2
c csP t o aN r nmus c p bti uu en tr a aes t cH i to o if vj nB , asv e t,, a eω c da, h :nn d sPa em N qc uoe el d my ne: m tp is ae uH ln n ld yijB c ,s,, v a if , o ntω in o, pn ats ,h rH ae a ljB s l, o e, vs r l, pn gω od aa rgna ei hn s s yad bt oi rs o f iH n d.tjB ho, T, v ofr y, sc ω s pv ef i. cj PT a,v N lh , lω ye s           10 00000 −− 00 00011 −−−10 00111 − 001000 1 −110000 1 −− 00001 11 −−0 0000 11 000 0000 00 000 00 00 000 00 00 000 00 000 001 0 0 0000 01           t tt tttt 8 96 7543
PNs:sHB,f ,sHB,sndandsHB,rcv adoptparallelarrangement    0 0 0 0 0 0 0 0 0 0 − 01 0 0 − −1 1 1 0 0 1 0 0 0 0 0 0    t t1 10 1
since opj e, rv a,ω tion oj f,v, pω ages canj,v b, eω independent, i.e. s can    00 00 00 00 00 − 01 − 11 − 01 −1 1 00 10 00 00    t t1 12 3
independently send data from each output buffer. Hoj, wv ever,    0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 1 0 0 − 01 −1 1 0 0 00    t t1 14 5
0 0 1 0 0 1 0 0 0 0 0 −1 0 t16
sometimes it is better to send data sequentially. For PN with 0 0 1 0 0 1 0 0 0 0 0 0 −1 t17
parallel arrangement the analysis is exactly the same as in (7)
Sec. VII-B, while for sequential is the same as in Sec. VII-D. Eq. (8) (transition invariant) and Eq. (9) (place invariant) are
Hybrid configuration is defined by the developer and should solved assuming: xmodel ̸=0, ymodel ̸=0 and restricting the
thereforefollowsimilarrulestothosepresentedinSec.VII-C. solution to non-negative integers.
F. Analysis of the general communication model (Nmodel)⊤·xmodel =(0,0,0,0,0,0,0,0,0,0,0,0,0)⊤ (8)
PNs forming send and receive mode sublayers can not be
analysed independently, as the last sublayer models the inter- Nmodel·ymodel =(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)⊤
actionbetweenapairofcommunicatingsubsystemswherethe (9)
BHs
BHs
dednetxe
ω,v,j
ω,v,j
]τf∨ϵf[
]τf∨ϵf[7
0F ,or Ex
q.i
(∈ 10{ )x
i9
s,x
pr1 o2
d,x
uc14
ed,x
,1 d5
e, tx
er1
m6, inx
i1 n7
g}, tha ess tu rm ani sn ig tiox
ni
∈ invZ a, rix
ani
t>
s.
p1
[new(s y′sj,v,h)]
xmodel =                        −x x9 1 −− xx 2+ xx 11 − 11 −− 22x 241 ++ xxx −+4 111 x xx x xxx x 444− x xx 1 11 1 111 1 +++ 9 11 4 56 4 266 7x 451 ++ xxx ++5 111 xx 555− xx 11 − 11 77x 561 x6 17                       

(10) ymodel =                  y y y y y y y y y y y0 01 1 1 1 1 1 1 1 1 1 13 3 3 3 3 1 1 1 1 3 3                   Figt [T9 .6= 9= :t tt Pi 86mt1 ueo ru et O p1t ]4 4O 4 Pp2 2 p e3 trt ip7t 52 n{2 e{ }2t t}3 t p{5 13 (3} comp1 m2 utp p1 n6 7 7t1 i6 ca{3 t}t i1 oO2 n9{2 m} p p9 ot t 1p 1 1 18 d0 3 el frO[ pT o12 1 0 m0== Ft ti tm 11 i41 geo t .u 1t 5 22] ).
 
x16
(11)
x17 from p
6
and produces a token in p 12. Subsequently, t
16
fires
producing a token in p . As a result the number of tokens
Now the positive transition invariant is determined, 6
for which (cid:13) (cid:13)xmodel(cid:13) (cid:13) contains the maximum number in p 6 remains the same. Thus, tokens will never multiply in
p and M (p ) ≤ 1. Similar inference is made for p based
of different transitions. Setting x = 5, x = 1, 6 m 6 7
9 12 on t and t . Transitions t and t assure that the tokens
x = 1, x = 4, x = 1, x = 1, then 12 13 3 12
14 15 16 17 do not multiply within p and p , respectively (if the token
xmodel = (1,4,1,3,1,3,1,3,5,2,1,1,3,1,4,1,1)⊤. Thus 6 7
was not consumed by t and t ). Summarizing, for each p
firing all the transitions as many times as xmodel indicates, 10 7 i
(i = 1,...,13) and any marking M , the M (p ) ≤ 1 is
the network will return to M . As shown in Sec. VI-C, if it is m m i
0 always fulfilled, thus the PN is safe.
possible to reach M by firing all transitions in the PN then
0 The obtained place invariants are used to check whether
the net is live. And since it is live there are no deadlocks.
the PN is conservative. It is sufficient to sum the
Interestingly, by manipulating the parameters x , x , x ,
9 12 14 two obtained minimal place invariants, i.e. 1ymodel and
x , x and x one can obtain different combinations of
15 16 17 2ymodel. This yields a vector of non-negative weights
sender and receiver modes, e.g.: (1) both in blocking mode:
(1,1,1,1,1,0,0,1,1,1,1,1,1)⊤, for which the weighted
if x =1, x =1, x =1, (2) both in non-blocking mode:
9 15 17 numberoftokensinanyreachablemarkingisequalto2.Thus
if x =2, x =1, x =2, x =1, x =1 (others are 0).
9 14 15 16 17 the PN is partially conservative. Moreover, it can be demon-
Eq. (11), where: y ,y ∈ Z and y ,y > 0, rep-
11 13 11 13 stratedthatthePNcanperformtwooperationssimultaneously,
resents the solution of Eq. (9). The vector ymodel de-
i.e. sending from s and receiving into s .
termines all possible place invariants. Two linearly inde- y j,v x j′,h
pendent place invariants can be derived: a) 1ymodel =
(1,1,1,1,1,0,0,0,0,0,0,1,1)⊤ for y = 1 ∧ y = 0, VIII. ANALYSISRESULTS
13 11
and b) 2ymodel =(0,0,0,0,0,0,0,1,1,1,1,0,0)⊤ for y 13 = RSHPN meta-model analysis indicates that H is safe and
0∧y 11 = 1, thus the weighted sum of the tokens remains conservative. The degree of conservativeness varies across
constantforeachreachablemarkingM m,i.e:M m⊤· 1ymodel = different layers (Table III). For each layer in H, the vector
M⊤· 1ymodel = 1 and M⊤· 2ymodel = M⊤· 2ymodel = of weights y and the weighted sum of the number of tokens
0 m 0
1, where M
0
= (1,0,0,0,0,0,0,1,0,0,0,0,0)⊤. From the wasdetermined.InH,allsubnetsare:(1)strictlyconservative
abovetwoequations,Eq.(12)andEq.(13)arederived,which – performing exactly one operation at any time, (2) con-
are satisfied for any reachable M m. servative – performing several operations simultaneously, or
(3) partially conservative – exactly two operations. If a PN
M (p )+...+M (p )+M (p )+M (p )=1 (12)
m 1 m 5 m 12 m 13 does not produce the correct weighted sum of tokens, then
it is incompatible with the meta-model, and thus it must be
M (p )+M (p )+M (p )+M (p )=1 (13)
m 8 m 9 m 10 m 11
corrected. This enables automation of the RSHPN analysis.
It follows from Eq. (12) that the sum of the tokens in p , Moreover, H is deadlock-free if the input parameters to the
1
p , p , p , p , p and p always equals 1, similarly, for meta-modelarecorrect(initialconditionsdetermininghowthe
2 3 4 5 12 13
p , p , p , p based on Eq. (13). Then, to prove that the subsystem switches between behaviours are as presented in
8 9 10 11
PN (Fig. 9) is safe, it suffices to show that for any marking Sec. VII-C).
M : M (p ) ≤ 1, and M (p ) ≤ 1 (since the condition Table III implies that RSHPN analysis model is reduced
m m 6 m 7
for the remaining places is satisfied, as follows from Eq. 12 to the analysis of networks with a task-dependent (variable)
and Eq. 13). To prove the first one, a single token inserted structure only: 1) produced by the designer, i.e. those in sub-
into p by either t (requires prior firing of t ) or t . The system layer or having hybrid arrangement, and 2) modeling
6 16 3 4
choice which transition fires, when M (p ) = 1, depends the interaction between communicating subsystems (only if
m 2
on the current marking of p . If M (p ) = 0 then t fires B-B mode is used). If all subsystems of RS communicate
6 m 6 4
producing a single token in p , i.e. as a result M (p ) = 1. in non-blocking mode, and all operations performed by the
6 m 6
Otherwise, if M (p ) = 1 then t fires consuming a token subsystemsareeithersequentialorparallel,theanalysisofthe
m 6 3
])h,v,js′ ys(wen¬[8
TABLE III: Summary of RSHPN H analysis regarding con-
constraints expressed using Linear Temporal Logic (LTL)
servativeness (where µ=| sˆ |, ν =| sˆ |)
y j,v x j,v specification(leadingtotheintroductionofasupervisormoni-
toringthesystem,asin[14],[25]),andtoproposeappropriate
User Weighted
Petrinet Conservative Vectory
defined sum toolstoperformtheoptimisationofthesystemresources[26],
H no yes (|aˆ|,1,...,1) |aˆ| mission, or task.
Hj no yes (|sˆj|,1,...,1,|sˆj|) |sˆj|
sH j,v yes strictly (1,...,1) 1 REFERENCES
sHB no strictly (1,...,1) 1
j,v,ω
sHB,f ,sHB,send,sHB,rcv: [1] S. García, et al., “Robotics Software Engineering: A Perspective from
j,v,ω j,v,ω j,v,ω the Service Robotics Domain“. Association for Computing Machinery,
sequential no strictly (1,...,1) 1
p.593–604,2020.
parallel no yes (µ,1,...,1,µ) ν [2] E. de Araújo Silva, et al., “A survey of Model Driven Engineering in
hybrid yes yes dependsonthestructure robotics“,JournalofComputerLanguages,vol.62,p.101021,2021.
sHB,f no strictly (1,...,1) 1 [3] S. Shivakumar, et al., “Soter on ROS: A run-time assurance framework
j,v,ω,ψ ontheRobotOperatingSystem,”inRuntimeVerification,Springer,2020.
sHB,snd (1,1,1,1,1,
j,v,ω,ρ no partially 2 [4] A. Ferrando, et al., “ROSMonitoring: A runtime verification framework
sH jB ,, vr ,c ωv ,κ 0,0,1,1,1,1) forROS,”inTowardsAutonomousRoboticSystems,Springer,2020.
[5] J. Huang, et al., “ROSRV: Runtime verification for robots,” in Runtime
Verification,Cham:SpringerInternationalPublishing,pp.247–254,2014.
developed H model reduces to the analysis of the networks [6] S.DalZilio,P.-E.Hladik,F.Ingrand,andA.Mallet,“Aformaltoolchain
for offline and run-time verification of robotic systems,” Robotics and
in the subsystem layer (as for the table-tennis ball collecting AutonomousSystems,vol.159,p.104301,2023.
robotic system [15]3). The properties of PNs in other layers [7] “Robotics2020Multi-AnnualRoadmapForRoboticsinEurope-Horizon
are derived directly from the meta-model. 2020 Call ICT-2017, SPARC The Partnership for Robotics in Europe:
EuropeanCommisionandeuRoboticsAISBL,”2016.
[8] S. Hustiu, C. Mahulea, M. Kloetzer, and J.-J. Lesage, “On multi-robot
IX. CONCLUSIONS path planning based on Petri net models and ltl specifications,” IEEE
TransactionsonAutomaticControl,pp.1–8,2024.
The introduced RSHPN meta-model significantly simplifies [9] Z. He, J. Yuan, N. Ran, and X. Yin, “Security-based path planning of
the process of verifying the correctness of a PN modeling the multi-robot systems by partially observed Petri nets and integer linear
programming,”IEEEControlSystemsLetters,vol.8,pp.352–357,2024.
activities of a particular RS. The meta-model is a template
[10] C.Lesire,D.Doose,andC.Grand,“FormalizationofRobotSkillswith
into which parameters are inserted. The transformation of the DescriptiveandOperationalModels,pp.7227–7232,2020.
meta-model into a model of a RS can be facilitated by using [11] Y. Su, L. Qi, and M. Zhou, “A backward algorithm to determine the
existenceoflegalfiringsequencesinordinaryPetrinets,”IEEERobotics
theRSSLlanguage[16].TheproposedRSHPNdecomposition
andAutomationLetters,vol.8,no.6,pp.3190–3197,2023.
into 6 layers and separation of panels which define separate [12] Z. Ding, et al., “Interactive-control-model for human–computer inter-
PNs with one input and one output place, solved the usual active system based on Petri nets,” IEEE Transactions on Automation
ScienceandEngineering,vol.16,no.4,pp.1800–1813,2019.
PN state space explosion problem and scalability issues of
[13] S.Pinisetty,etal.,“Predictiveruntimeverificationoftimedproperties,”
modelchecking.Inconsequence,networkanalysiscanemploy JournalofSystemsandSoftware,vol.132,pp.353–365,2017.
reduction methods, such as collapsing higher-order networks [14] B.Pelletier,etal.,“Predictiveruntimeverificationofskill-basedrobotic
systems using Petri nets,” in 2023 IEEE International Conference on
into a single transition and lower-order networks into single
RoboticsandAutomation(ICRA),pp.10580–10586,2023.
places,whilepreservingthenetworkproperties.Assignificant [15] M. Figat and C. Zielin´ski, “Parameterised robotic system meta-model
parts of the meta-model are general (behaviour layer PNs expressedbyHierarchicalPetrinets,”RoboticsandAutonomousSystems,
vol.150,p.103987,2022.
are patterns; multi-agent robotic system layer and agent layer
[16] ——, “Synthesis of robotic system controllers using Robotic System
form trivial PNs) they are analysed only once for all possible SpecificationLanguage,”IEEERoboticsandAutomationLetters,vol.8,
systems.ThustheanalysisofaparticularRS modelisreduced no.2,pp.688–695,2023.
[17] M.FigatandC.Zielin´ski,“RoboticSystemSpecificationMethodology
to the analysis of only some PNs (subsystem layer PNs
BasedonHierarchicalPetriNets,”IEEEAccess,vol.8,2020.
or communication and computation composition PNs). This [18] C.Zielin´ski,“RoboticSystemDesignMethodologyUtilisingEmbodied
enablesdesignerstofocusontheanalysisofthecrucialaspects Agents,” in Automatic Control, Robotics and Information Processing,
vol.296,Springer,pp.523–561,2021.
of the system, such as the task definition and communication
[19] “TINA(TImepetriNetAnalyzer),”https://projects.laas.fr/tina/news.php.
model. Modification of systems designed by using RSHPN [20] R. Yang, et al., “Modeling and analysis of three properties of mobile
is much simpler, because of modular structure only some interactive systems based on variable Petri nets,” IEEE Transactions on
AutomationScienceandEngineering,vol.20,no.4,pp.2479–2491,2023.
subsystemsneedtobeexchangedandthusonlynewPNshave
[21] T. Murata,“Petri nets: Properties, analysisand applications,” Proceed-
to be created and analysed. ingsoftheIEEE,vol.77,no.4,pp.541–580,1989.
The proposed PN analysis method can be further extended [22] M.FigatandC.Zielin´ski,“Methodologyofdesigningmulti-agentrobot
control systems utilising hierarchical Petri nets,” in 2019 International
and thus additional RS properties can be investigated: (1)
ConferenceonRoboticsandAutomation(ICRA),pp.3363–3369,2019.
model checking (e.g.: schedulability, reachability [11], admis- [23] P. Freedman, “Time, Petri Nets, and Robotics,” Robotics and Automa-
sibility [25]) and (2) runtime verification (e.g.: task period tion,IEEETransactionson,vol.7,pp.417–433,1991.
[24] W.Reisig,TrapsandPlaceInvariantsofGenericSystemNets. Springer,
overshoot, WCET overshoot [6]). It would also be valuable
pp.119–129,2013.
to combine model checking with runtime verification, either [25] B.LacerdaandP.U.Lima,“Petrinetbasedmulti-robottaskcoordination
by restricting the state space analysed [14] or by introducing from temporal logic specifications,” Robotics and Autonomous Systems,
vol.122,p.103289,2019.
predictive runtime verification [13] using the system model as
[26] M.Lahijanian,etal.,“Resource-performancetradeoffanalysisformo-
aprioriknowledge.RSHPNcouldbeextendedbyintroducing bile robots,” IEEE Robotics and Automation Letters, vol. 3, no. 3, pp.
1840–1847,2018.
3Section12:Ballcollectoranalysis:https://youtu.be/JenAB1IKVVY