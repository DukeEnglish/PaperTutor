Instance by Instance: An Iterative Framework for Multi-instance 3D
Registration
XinyueCao1,XiyuZhang1,YuxinCheng2,ZhaoshuaiQi1,YanningZhang1,JiaqiYang1,*
1SchoolofComputerScience,NorthwesternPolytechnicalUniversity,China
2DepartmentofElectronicandComputerEngineering,ChineseUniversityofHongKong,China
1{caoxinyue,2426988253}@mail.nwpu.edu.cn; {zhaoshuaiqi1206,ynzhang,jqyang}@nwpu.edu.cn;
2yuxin.cheng@link.cuhk.edu.cn
Abstract
Multi-instance registration is a challenging problem in
computer vision and robotics, where multiple instances of
anobjectneedtoberegisteredinastandardcoordinatesys-
tem. Inthiswork, weproposethefirstiterativeframework
calledinstance-by-instance(IBI)formulti-instance3Dreg-
istration(MI-3DReg). Itsuccessivelyregistersallinstances Source
inagivenscenario,startingfromtheeasiestandprogress-
ingtomorechallengingones. Throughouttheiterativepro- (a)Inputcorrespondences (b)One-shotstyle(ECC)
cess,outliersareeliminatedcontinuously,leadingtoanin-
creasinginlierratefortheremainingandmorechallenging
instances. UndertheIBIframework, wefurtherproposea
sparse-to-dense-correspondence-based multi-instance reg- ...
istration method (IBI-S2DC) to achieve robust MI-3DReg.
Experimentsonthesyntheticandrealdatasetshavedemon-
stratedtheeffectivenessofIBIandsuggestedthenewstate-
of-the-art performance of IBI-S2DC, e.g., our MHF1 is
12.02%/12.35% higher than the existing state-of-the-art (c)Iterativestyle(OurIBI)
methodECConthesynthetic/realdatasets.
Figure 1. Comparison of one-shot method and our IBI for MI-
3DReg.Theinliersandoutliersarevisualizedingreenandred,re-
spectively.Thegreenandredboundingboxesrepresenttheground
1.Introduction
truthandestimatedposesofinstances,respectively.
Most research on 3D point cloud registration focuses on
estimating a single transformation between pairwise point
cloud [3, 4, 6, 8, 9, 17, 34, 40]. However, the target scene spondence clustering (ECC), followed by a learned Point-
may contain multiple repeated instances in real applica- CLMmethod[38]. Existingmethodsgenerallyregisterall
tions, and the problem of estimating multiple transforma- instances in a one-shot manner, demonstrating their effi-
tionsiscalledmulti-instance3Dregistration(MI-3DReg). ciency. However, the correspondences between different
This task has been relatively underexplored. Early instances can interfere with each other, making the regis-
works [11, 14] use point pair features (PPF) to detect and trationofinstanceswithlowinlierrateverydifficult.
estimate the pose transformations of the instances. The To this end, we propose the first iterative framework
quality of correspondence has been enhanced with the calledinstancebyinstance(IBI)forrobustMI-3DReg. We
emergence of deep-learned features, resulting in perfor- argue that inliers of a specific instance appear to be out-
mance boosting for correspondence-based MI-3DReg [29, liers to other instances. IBI iteratively registers instances
38]. The first research on MI-3DReg based on corre- andreducesoutliersforeachinstance,whichcaneffectively
spondences is proposed in 2022 [29], i.e., efficient corre- alleviate the registration problem for instances with scarce
1
4202
beF
6
]VC.sc[
1v59140.2042:viXrainliers. First, a small set of highly consistent correspon- solutions for correspondence-based MI-3DReg. ECC [29]
dences are selected as seed correspondences. Second, the pioneersmulti-instancepointcloudregistrationbyclassify-
seed correspondence set guides the enhancement of con- inginitialcorrespondencesintosetsrelatedtodifferentin-
sistentcorrespondencestoretrievemoreinliers. Third, the stances, rejectingoutliers, andresolvingambiguity. Point-
six-degree-of-freedom(6-DoF)posetransformationisesti- CLM [38], a contrastive-learning-based method, presents
matedwithaguidedsampleconsensusstrategy.Finally,the representation learning and outlier pruning strategies suit-
generatedregistrationhypothesisisgloballyvalidated,and able for MI-3DReg. Overall, the research particularly for
theinputcorrespondencesetisupdatedbyremovingcorre- MI-3DRegisstillatanearlystage.
spondencesbelongingtothecurrentinstance. Fig.1shows
2.2.Multi-modelFitting
that IBI is able to register more instances than traditional
one-shotmethods. Theoretically, multi-model fitting methods can be also ap-
Thecontributionsareasfollows: plied to MI-3DReg. Multi-model fitting methods estimate
• We propose IBI, the first iterative framework in MI- model parameters from data points generated by multiple
3DReg. It iteratively refines the registration results for models. Many existing methods perform one-shot model
each instance and gradually improves the precision and fitting. T-Linkage [20] initializes a broad hypothesis set
robustnessoftheregistrationprocess. throughpointsamplingandclusteringwithpreferencevec-
• Under the IBI framework, we introduce a sparse-to- tors for outlier removal. RansaCov [21] addresses multi-
dense-correspondence-basediterativemethodcalledIBI- modelfittingasamaximumcoverageproblem,offeringap-
S2DC. It mines consistent yet sparse seed correspon- proximate solutions. Alternatively, some methods rely on
dences to guide the retrieval of the whole inlier set. Its sequential RANSAC-based fitting. Progressive-X [5] uses
MHF1 is 12.02%/12.35% higher than the existing state- revised RANSAC with modified sampling weights to ob-
of-the-artmethodECC[29]onthesynthetic/realdatasets. tain distinct model parameters iteratively. CONSAC [16]
incorporatesdeepmodels,akintoPointNet,forguidingthe
2.RelatedWork samplingprocess. However, theybecomeinefficientwhen
handlinglarge-scaleinputs.
2.1.3DPointCloudRegistration
Existing one-shot style MI-3DReg methods have over-
lookedthecorrespondenceinterferencebetweeninstances,
Pairwise3Dpointcloudregistration. 3Dpointcloudreg-
whilemulti-modelfittingmethodsfailtoincorporateproper
istrationisanessentialtaskincomputervisionandrobotics,
pointcloudgeometricconstraints. Motivatedbythesecon-
includingfeatureextraction,outlierrejection,andposeesti-
cerns,weproposeanoveliterativeIBIframeworkwithtwo
mation.Forthefirststage,recentadvanceshavehighlighted
traits.First,itrefinestheregistrationresultsofeachinstance
the effectiveness of learning-based features over hand-
iteratively. Second, it enhances the registration accuracy
designed ones in certain benchmarks, such as 3DMatch
and robustness progressively. It effectively alleviates the
[39] and SpinNet [1]. However, they still require robust
mutual interference issue caused by correspondences be-
outlier removal mechanisms. For the second stage, tradi-
longingtodifferentinstances,whichisacommonchallenge
tionaloutlierrejectionmethodsaresummarizedbyYanget
encounteredinone-shotmethods.
al.[36],includingindividual-basedmethods(e.g.,SS[36],
NNSR [19], SI [13], CV [33]) and group-based meth-
3.TheIBIIterativeFramework
ods (e.g., RANSAC [12], ST[18], GC [7], 3DHV [30],
GTM [27]). Other techniques, such as GORE [6] and
3.1.ProblemFormulation
PMC [23], reduce outliers through geometric consistency
tests. Bai et al. [3] combined traditional methods and FortwopointcloudsPs andPt toberegistered,Ps repre-
deep learning approaches to propose a two-stage network sentsthesourceinstanceandtherearemultipleinstancesof
called PointDSC. For the third stage, traditional methods Ps presentedinPt. Letps andpt respectivelydenotethe
such as RANSAC and its variants [4, 12, 25, 34, 37] fol-
pointsinthePsandPt,IBIestimatesthe6-DoFposetrans-
lowahypothesisverificationprocesstoestimatethe6-DoF formations {R i,t i} i=1,2,...,k between the source instance
pose transformation. On the other hand, FGR [41] and in Ps and multiple instances in Pt, where k presents the
TEASER [32] solve transformations directly from noisy numberofrepeatedinstances.
correspondencesusingrobustestimators.
3.2.ThePipelineofIBIFramework
Multi-instance 3D point cloud registration. Multi-
instance 3D point cloud registration is a complex problem An initial correspondence set C = {c} is served as input,
in computer vision and robotics, involving the alignment wherec = (ps,pt). Itcanbeobtainedbymatchingpoint
ofmultipleobjectinstancesinasharedcoordinatesystem. cloud features. For dense input, we usually downsample
To the best of our knowledge, there are only two existing the C to C , which contains N cor-
downsample downsample
2Input Seed Corr. Corr. Trans. Hypothesis Output
(cid:40)
Selection Enhancement Estimation Validation r(c ,c ), if c ̸=c
i j i j
Π= , (3)
0, otherwise
Update
wheretherigiditytermr(c ,c )is:
i j
Figure2.SchematicillustrationoftheIBIframework.
r(c i,c j)=(cid:12) (cid:12)∥p i−p j∥−(cid:13) (cid:13)p′ i−p′ j(cid:13) (cid:13)(cid:12) (cid:12). (4)
respondences. TheIBIframeworkincludesfoursteps,i.e., ThedynamicswillconvergetoaNashequilibrium[31].
seed correspondence selection (SCS), correspondence en- AfterN timesofevolution,thecorrespondenceswhose
gtm
hancement (CE), transformation estimation (TE), and hy- strategies are greater than a threshold t , are served as
gtm
pothesisvalidation(HV).First,asetofsparseyetconsistent inliers. This step makes an efficient selection of the input
seed correspondences is selected to identify a single con- correspondence set C , generating a sparse cor-
downsample
sistency from C . Second, the seed correspon- respondencesetC ,whichishighlyconsistent.
downsample s
dences are utilized to guide the enhancement of consistent
4.2.CE:Voting-basedEnhancement
correspondences. Third,theposetransformationofasingle
instanceisestimatedbyarobust6-DoFestimator. Finally, After SCS, the seed correspondence set is consistent but
the generated registration hypotheses are validated, where sparse, which cannot guarantee the accuracy of instance
a correct hypothesis indicates the identification of a valid registration. Therefore,weproposeavoting-basedmethod,
instanceinthetargetpointcloud. Aftervalidation,thecor- in order to retrieve more inliers from the input correspon-
respondencesrelatedtotheidentifiedinstanceareremoved denceset. Inparticular,itcalculatesavotingscoreforeach
and the iterative framework proceeds to the next instance. correspondencebasedontheconsistencycheckbetweenthe
TheregistrationframeworkisillustratedinFig.2. input correspondences and the voting set. We propose to
serve the seed correspondence set as the voting set to im-
4.ATrailonIBIforMI-3DReg provethevotingreliability.Thepipelineofconsistencyvot-
ingisillustratedinFig.4.
In this section, under the IBI framework, we propose IBI-
First,thesparsecorrespondencessetC isservedasthe
s
S2DCforMI-3DReg,thepipelineisshowninFig.3.
votingsetC . ThecorrespondencesinC arevotersand
vot s
thoseinCarecandidates.
4.1.SCS:Game-theoreticMatching
Second,weintroduceacompatibilitymeasureforacor-
It is challenging to directly retrieve all inliers from the in- respondencepair(c ,c )withsingleconsistency:
i j
putbecausethescaleisusuallylargeandcorrespondences
(cid:32) (cid:33)
belonging to different instances exist simultaneously. To r(c ,c )2
D(c ,c )=exp − i j , (5)
address this, we propose a sparse-to-dense-based mecha- i j δ2
r
nism. For sparse correspondences, we propose to mine a
setofseedcorrespondenceswithhighconsistencyunderthe whereδ representstherigidityparameters.
r
game-theoreticmatching(GTM)[38]guidance. Third,allvoterscasttheirvotesforthecandidatesinthe
First,PsandPtaretreatedasapairofplayers,andcan- input correspondence set C. The final voting score of a
didatecorrespondencesinC areavailablestrate- correspondencecisdefinedasthesumofallcompatibility
downsample
gies. The amount of population x that plays each strategy scoresofcandc ∈C :
i vot
c atagiventimeisdefinedas:
i
(cid:88)
s(c)= D(c,c ). (6)
(cid:0) (cid:1)T i
x= x ,...,x . (1)
1 |Cdownsample| ci∈Cvot
The correspondences are ranked based on voting scores in
Thenwesettheinitialpopulationaroundthebarycenter,
descending order, and the top N correspondences are
vot
and then the population will dynamically update with an
keptasinliers.
evolutionary process by applying the following replicator
This step verifies and enhances the consistency of the
dynamicsequation:
sparse correspondence set C , resulting in a dense corre-
s
spondencesetC .
(Πx(t)) d
x (t+1)=x (t) i , (2)
i i x(t)T Πx(t) 4.3.TE:GuidedSampleConsensus
where Π is the payoff matrix that assigns the payoff be- Single-instance 6-DoF pose transformation estimation is
tweenstrategiesc andc torowiandcolumnj, anditis typicallyachievedwithRANSAC[12]. However,theorig-
i j
measuredbythecompatibilityas: inalRANSACissensitivetooutliersandusuallyrequiresa
3Update
SCS: TE: HV:
Input CE:
Game-theoretic Guided Sample Verify Hypothesis MI-3DReg
Corr. Voting
Matching Consensus Globally
Figure3. ThepipelineofIBI-S2DC.1. SCS:MineasparseyetconsistentcorrespondencesetC underGTMguidance. 2. CE:Enhance
s
consistency to achieve a dense correspondence set C based on a voting scheme. 3. TE: Estimate the transformation for the current
d
instancebasedonaguidedsampleconsensusestimator(GSAC).4.HV:Validatethehypothesisgloballyusingthepointcloudoverlaprate.
ingscoreconstraintsassamplingweight.Itcanimprovethe
Initial Voting Consistency Top-ranked
accuracyoftransformationestimationandreducethenum-
Corr. C Set Cs Check Corr. Cd
berofiterations.
① ② ③ ④ First, correspondence triplets are generated from C
d
with three-point-sampling. Then, they are sorted in de-
scendingorderbasedonthesumofthevotingscoresofthe
sampledthreecorrespondences. AfterN iterations,the
gsac
generated hypotheses are evaluated to identify the optimal
hypothesisastheoutputofGSAC.Specifically,weusethe
mean absolute error (MAE) [35] to assess the quality of a
hypothesisT . TheMAEscoreisdefinedas:
i
|C|
(cid:88)
S (T )= f(c ), (7)
mae i i
i=1
① ② ③ ④ wherethetransformationerrorofc iisdefinedas:
Figure 4. The pipeline of the voting-based correspondence en-
|e(c )−t |
hancement. Afterminingasparsecorrespondenceset, theinlier  i he , if e(c )<t
rateoftheinstancerisesbutthenumberofinliersisverysmall. f(c j)= t he i he , (8)
Thevoting-basedenhancementhelpstoretrievesignificantlymore 0, otherwise
inlierswhilemaintainingahighinlierrate, resultinginaconsis-
tentanddensecorrespondenceset.
where e(c ) = ∥R ps+t −pt∥ represents the transfor-
i i i i i
mationerrorofc . Inaddition,t isadistancethresholdto
i he
judgewhetherc isaninlier. Thehypothesiswiththehigh-
i
numberofiterations. InourTEstep, weproposeaguided estMAEscoreisservedasthefinalposetransformationfor
samplingconsensus(GSAC)methodtofullyutilizethevot- thecurrentinstance.
4Algorithm1IBI-S2DCAlgorithms
Input: thepointcorrespondencesC
Output: the 6-DoF pose transformations of target in-
stances
1: Downsample C to C downsample with N downsample
correspondences
2: whilethesizeofN s >t sdo
3: InitialthepayoffmatrixΠ(i,j)
(a)Correspondenceswithhighinlierrateyetmultipleconsistencies 4: fori=0;i<N gtm;i++ do
5: ComputethepopulationV(j)
6: UpdateV(j)dynamicallybyEq.2
7: endfor
8: ComputethesparsecorrespondencesetC s
9: forj =0;j <N vot;j++ do
10: ComputeconsistencyscorebyEq. 5
11: ComputevotingscorebyEq. 6
12: ComputethedensecorrespondencesetC d
13: endfor
(b)Correspondenceswithlowinlierrateandmultipleconsistencies 14: RankC dbyvotingscoresindescendingorder
Figure5. Inchallengingregistrationcases,correspondencesmay
15: fork =0;k <N gsac;k++ do
still exhibit multiple consistencies and suffer from outliers after 16: Performguidedthree-point-samplinginC d
theCEstep. In(a),thedensecorrespondenceshaveahighinlier 17: EvaluatehypotheseswithEq.7andkeepthebest
rate,whilemultiple-consistenciesexist. In(b),therearemultiple hypothesis
consistenciesandmanyoutliersinthedensecorrespondenceset. 18: endfor
19: Validatethekepthypothesis
4.4.HV:VerifyHypothesisGlobally
20: ifoverlap>t overlapthen
21: Serve the hypothesis as the predicted transforma-
After the previous three steps, we perform post-validation tion
for the transformation generated by TE. The motivation 22: UpdatetheinputcorrespondencesetC←C−C d
is that correspondences between the scene and the source 23: endif
model, even after the CE step, may still exhibit multi- 24: endwhile
consistency and suffer from outliers, as shown in Fig. 5.
Itispotentiallyduetothatsomeinstancesarespatiallyvery
close,sotheconsistenciesarehardtodistinguish. Thisin- where|·|denotesthecardinalityofaset.
dicatesthatsimplyusingcorrespondence-levelinformation Ifoverlap>t ,thehypothesisisacceptedandan
overlap
forhypothesisvalidationisnotsufficient.Hence,wefurther instanceissupposedtoberegistered. Thenitscorrespond-
proposeavalidationstepthatleveragesglobalpoint-cloud- ingdensecorrespondencesetC isremovedfromtheinitial
d
levelinformationforhypothesisverification. correspondenceset. Thishelpsononehandreducethein-
In particular, the overlap rate between two point clouds put size and, on the other, improve the inlier ratio of the
isconsideredforvalidation. First,wedefinethesetofover- remaininginstances. Otherwise,theiterationwillswitchto
lappedpointsas [26]: theSCSstep. NotethatwestillremoveC whenoverlap
d
P =(cid:8) p′s|d(p′s,Pt)≤dth,p′s ∈P′s(cid:9) , (9) issmallerthant overlap,topreventtheiterationfromgetting
op i i op i stuckinanendlessloop. Becausethenumberofinstances
where P′s represents the transformed point cloud, and the in the 3D scene is unknown, an iteration stop criterion is
‘point-to-surface’distanced(p′s,Pt)is: required. Weassumethatwhenthenumberofsparsecorre-
i
spondencesN < t ,theconsistencyisnotstrongenough,
d(p′ is,Pt)= min (cid:13) (cid:13)p′ is−pt j(cid:13) (cid:13), (10) andtheiteratios nstos
ps(seeAlgorithm1forpseudocode).
pt∈Pt
j
wheredth isadistancethresholdtodetermineiftwopoints 5.Experiment
op
are in the overlapped area of Ps and Pt. Then we define
5.1.ExperimentalSetup
theoverlaprateas:
|P | Datasets. We conduct experiments on both synthetic and
overlap= op , (11)
|Ps| realdatasets. Thesyntheticdatasetiscreatedbasedonpre-
5Metrics MHR(%) MHP(%) MHF1(%) Times(s)
T-Linkage[20] 0.19 0.54 0.27 43.46
Prog-X[5] 15.90 31.01 18.98 86.39
Source
CONSAC[16] 0.10 0.07 0.08 7.65
ECC[29] 53.39 61.44 51.80 1.28
PointCLM[38] 0.62 0.18 0.28 0.50 (a)Inputcorrespondences (b)ECC(2022)
IBI-S2DC 61.16 71.20 63.82 6.28
Table1.Resultsonthesyntheticdataset.
sampling the ModelNet40 dataset using PointNet++ [24].
Eachpointcloudisdownsampledto256points,andK (up (c)PointCLM(2022) (d)Ours
to20)randomtransformationsmixedwithotherobjectsand
Figure 6. Results on the synthetic dataset. (a) displays the in-
randompointsareappliedtoformthetargetpointcloud.
putcorrespondences. (b-d)showtheresultsofseveralcompared
Scan2CAD[2]servesasarealbenchmarkdatasetalign-
methods.Here,estimatedposesandthegroundtruthonesareren-
ing ShapeNet [28] CAD models with object instances in
deredinredandgreenboundingboxes,respectively.
ScanNet [10] point clouds. We sample pairs that contain
multipleCADmodelsinscansfortesting.
Metrics MHR(%) MHP(%) MHF1(%) Times(s)
Metrics. We adopt the three metrics for MI-3DReg task
proposedinECC[29],includingMeanHitRecall(MHR), T-Linkage[20] 2.46 3.79 2.71 1655.00
MeanHitPrecision(MHP),andMeanHitF1(MHF1).
Prog-X[5] 11.58 6.86 7.87 26.32
Implementation details. We compare the proposed IBI-
CONSAC[16] 2.66 0.35 0.62 21.35
S2DC with five state-of-the-art methods for MI-3DReg:
ECC[29] 31.63 29.23 27.04 1.46
PointCLM (2022) [38], ECC (2022) [29], T-linkage
PointCLM[38] 1.78 0.73 1.04 0.19
(2014) [20], Progressive-X (2019) [5], and CONSAC
IBI-S2DC 50.31 36.30 39.39 7.56
(2020)[16]. Forafaircomparison,allmethodsemploythe
samepointcorrespondencesasinput. InPointCLM,wedi-
Table2.Resultsontherealdataset.
rectly utilize the trained models in the synthetic and real
datasetsprovidedbytheauthorsforevaluation.
The parameters of our method are set as follows:
5.2.2 RealDataset
N = 1024, N = 20, andN = 300. The
downsample gtm vot
thresholdt gtm iscalculatedbyOSTU[22]. Thetermδ r in Table 2 reports the results on the real dataset. It indicates
theCEstepissetto10pr. Here,‘pr’istheresolutionofa thatforcorrespondencegeneratedbyPREDATOR[15]with
pointcloud[33]. Stopcritriat sissetto5. Forthesynthetic anoutlierrateexceeding75%,IBI-S2DCconsistentlyout-
dataset,wesetN gsac = 100,t he =10pr,dt oh p =1.5pr,and performs all competitors. The MHR is 50.31%, the MHP
t overlap = 0.85. For the real dataset, we set N gsac = 20, is 36.30%, and the MHF1 is 39.39%. This demonstrates
t he =1pr,dt oh p =3pr,andt overlap =0.7. thesuperiorityofIBI-S2DCinlarge-scaleandcomplex3D
real scenes. PointCLM, a deep-learned method, exhibits
5.2.ComparativeExperiments very limited performance when applied to the data setting
byECC.Fig.7providesvisualizationsofseveralresults.
5.2.1 SyntheticDataset
5.3.AnalysisExperiments
We employ the correspondences generated by PREDA-
TOR [15], as same as ECC [29]. Table 1 shows the per-
5.3.1 ValidationGloballyorLocally
formanceonthesyntheticdataset. Theresultsdemonstrate
that even under challenging initial conditions with an out- We find that after the CE step, there may still be multiple
lierrateexceeding90%,IBI-S2DCmanagestoperformad- consistencies in C . Therefore, hypotheses need further
d
mirably. TheMHRis61.16%,theMHPis71.20%,andthe validation.Wecomparetheperformanceofvalidationglob-
MHF1is63.82%.AlthoughIBI-S2DCtrailsslightlybehind ally(usingpointcloudoverlaprate)andlocally(usinginlier
PointCLMandECCintermsofefficiency,itsperformance count[35])todemonstrateourstatement,asshowninTable
remains far better than those of the two competitors. We 3. Two observations can be made. 1) Without hypothesis
presentsomevisualresultsinFig.6. validation (referring to the control group), IBI-S2DC ex-
6Source
(a)Syntheticdataset (b)Realdataset
(a)Inputcorrespondences (b)ECC(2022)
Figure8. RobustnesstoN variationonthesyntheticandreal
gtm
datasets.
(c)PointCLM(2022) (d)Ours (a)Syntheticdataset (b)Realdataset
Figure7.Resultsontherealdataset. Figure9. RobustnesstoN variationonthesyntheticandreal
vot
datasets.
Metrics MHR(%) MHP(%) MHF1(%) Times(s)
Controlgroup:withouthypothesisvalidation,N <t
s s
t =5 59.56 26.03 32.68 6.21
s
t =10 54.90 26.46 32.03 6.03
s
t =15 50.05 26.97 31.33 5.24
s
Experimentalgroup:theinliercount,#inliers>t
inliers
t inliers=50 60.12 25.15 32.03 8.02 (a)Syntheticdataset (b)Realdataset
t =100 51.25 25.69 30.56 7.60
inliers
Figure10.RobustnesstoN variationonthesyntheticandreal
gsac
t =150 28.29 26.04 23.56 3.97
inliers datasets.
Experimentalgroup:pointcloudoverlaprate,overlap>t
overlap
t =0.8 60.50 66.84 61.55 5.48
overlap
t overlap=0.85 61.16 71.20 63.82 6.28 N gtm = 20, t s = 5 and vary N vot. Fig. 9 shows the per-
t overlap=0.9 58.34 76.60 64.35 8.28 formanceofourmethodunderdifferentN vot values. Gen-
erally, largervotingsetsresultinbetterperformance. This
Table3. TheperformanceofIBI-S2DCwithdifferenthypothesis indicatesthatmoreinliersarecontained,whilemoreconsis-
validationmethodsonthesyntheticdataset. tencychecksarerequired. WhenN isgreaterthan200,
vot
theperformanceisverystable.
Iterations of GSAC. We set N = 20, N = 300,
gtm vot
hibitslimitedperformance. 2)Withglobalhypothesisvali- t = 5, and vary N in this experiment. Fig. 10 shows
s gsac
dation,theresultunderdifferentt overlapvaluesconsistently the performance of our method under different N
gsac
val-
outperformsthatwithlocalhypothesisvalidation. ues. TheresultsdemonstratethatIBI-S2DCisrobusttothe
N setting. Evenwith20iterations,weareableachieve
gsac
accurate3Dregistration.
5.3.2 RobustnessAnalysis
Varying correspondence densities. We examine the ro-
IterationsofGTM.WeanalyzetheimpactofN gtm inthe bustness of IBI-S2DC in the presence of inputs with var-
SCSstep,andsetN vot =300andt s =5. Fig.8showsthe ious densities. Here, we set N gtm = 20, N vot = 300,
performance of our method under different N gtm values. t s = 5, andN gsac to100and20onthesyntheticandreal
TheresultssuggestthatourmethodisveryrobusttoN gtm datasets,respectively.Table4andTable5reporttheresults.
changes on the synthetic dataset. On the real dataset, the On the synthetic dataset, our IBI-S2DC consistently out-
performancefluctuatesslightlywhenN gtm variesfrom10 performsECC.Inaddition,wefindthatIBI-S2DCisquite
to50. Overall,ourmethodisrobusttoN gtmvariation. stable when the number of input correspondences varies
Number of correspondences after voting. Here, we set from512to2048. Whenfacedwithextremelysparseinput
7Metrics MHR(%) MHP(%) MHF1(%) Times(s) SCS CE TE HV MHR(%) MHP(%) MHF1(%) Times(s)
Ndownsample
N 35.76 7.50 11.50 7.56
ECC[29] - - - -
256 H 44.26 72.62 52.51 66.65
IBI-S2DC 6.71 31.91 9.69 0.88
(cid:37) 25.50 34.02 26.53 0.38
ECC[29] 48.78 62.92 51.26 0.32
512 R 54.25 72.61 59.69 0.63
IBI-S2DC 59.66 72.25 63.42 6.11
S 57.07 70.13 60.68 304.75
ECC[29] 53.39 61.44 51.80 1.28
1024 M 57.56 68.13 60.00 12.04
IBI-S2DC 61.16 71.20 63.82 6.28
(cid:37) 60.44 25.70 32.51 6.35
ECC[29] 53.98 59.37 50.41 2.05
2048 L 49.57 69.30 54.32 7.51
IBI-S2DC 54.91 72.92 60.32 6.61
(cid:33) (cid:33) (cid:33) (cid:33) 61.16 71.20 63.82 6.28
ECC[29] - - - -
5096
IBI-S2DC 47.23 71.52 54.14 8.62
Table 6. Module effectiveness analysis on the synthetic dataset.
‘N’representsNNSR,‘H’represents3DHoughVoting[30],‘R’
Table4. PerformancewithdifferentN valuesonthe
downsample representsRANSAC[12],‘S’representsSAC-COT[34],‘M’rep-
syntheticdataset.Theterm‘-’representsthatitfailstogetresults
resentsMAC[40]and‘L’representsvalidatelocally[35].
underthetestedscenario.
Metrics MHR(%) MHP(%) MHF1(%) Times(s)
conductedasanalternativemethod.
Ndownsample
Second,weablatetheCEmodule.Wesetthepopulation
ECC[29] 32.11 28.70 28.40 0.32
256 of C as the guided sampling score for GSAC. Applying
IBI-S2DC 37.36 36.67 32.43 3.58 s
CE achieves MHF1 improvements of 37.29% and 21.77%
ECC[29] 32.18 29.11 27.57 0.61
512 onthesyntheticandrealdatasets,respectively.Thisdemon-
IBI-S2DC 44.76 33.70 35.98 4.24
stratesthattheCEmoduleiscriticaltoretrievinginliersand
ECC[29] 31.63 29.23 27.04 1.46
1024 achievingaccurateregistration.
IBI-S2DC 50.31 36.30 39.39 7.56
ECC[29] - - - - Third, we analyze the TE module. We replace GSAC
2048
IBI-S2DC 50.91 37.31 40.50 6.99 withRANSAC,SACCOT,andMAC.ComparedtoGSAC,
ECC[29] - - - - othersolversboostefficiencynotablybutmeetaclearper-
5096
IBI-S2DC 50.82 37.60 40.30 9.26 formance deterioration. This suggests that GSAC fully
leverages the consistency information of the SCS and CE
Table5. PerformancewithdifferentN downsample valuesonthe modulesandeffectivelyimprovesregistrationaccuracy.
realdataset.
Fourth, we remove the HV module. Without hypothe-
sis validation, the MHF1 results on the synthetic and real
datasets drop by 31.31% and 23.45%, respectively. Local
(the correspondence count is smaller than 512), IBI-S2DC
validationintherealdatasetachievesbetterperformance.
also yields limited performance. On the real dataset, IBI-
S2DC consistently exhibits superior performance. Mean-
Finally,wehavealsodemonstratedthatIBIisageneral
while,IBI-S2DCalsoachievesgoodperformancewith256 framework. Forinstance,whenemployingRANSACinthe
inputcorrespondencesontherealdataset. Theseresultsin- TE step, it achieves 59.69% in terms of MHF1, with a re-
dicatethatIBI-S2DCpossessesstrongrobustnesstovarying duced time consumption at 0.63 seconds. This variant of
correspondencedensities. IBIstillsurpassesECC,demonstratingtheflexibilityofIBI.
WebelievetheperformanceofIBIcanbefurtherimproved
withmoreadvancedmethodsforeachmodule.
5.3.3 ModuleEffectivenessAnalysis
Table6andTable7presenttheeffectivenessanalysisonthe 6.Conclusion
fourmodulesofourIBImethod,i.e.,SCS,CE,TE,andHV,
onthesyntheticandrealdatasets. Inthispaper,wepresentedanIBIframeworkforMI-3DReg
First,weanalyzetheSCSmodule. WeremovetheSCS by registering instances and reducing outliers iteratively.
moduleandreplacethevotingsetinCEwiththetop-ranked Under the framework, we further proposed IBI-S2DC and
correspondences sorted by nearest neighbor similarity ra- achievedstate-of-the-artperformanceonalltesteddatasets.
tio (NNSR) [19]. Without SCS, the MHF1 of IBI-S2DC In particular, its MHF1 values are 12.02%/12.35% higher
decreases 52.32% and 10.85% on the synthetic and real than the existing state-of-the-art method ECC on the syn-
datasets, respectively. This verifies the necessity of min- thetic/real datasets. We expect more trials under the pro-
ingconsistencywithasparseset. 3DHoughvoting[30]is posedIBIframeworkinthefuture.
8SCS CE TE HV MHR(%) MHP(%) MHF1(%) Times(s) Proc.oftheIEEEConferenceonComputerVisionandPat-
ternRecognition,pages2432–2443,2017. 6
N 34.47 28.92 28.55 6.41
[11] BertramDrost,MarkusUlrich,NassirNavab,andSlobodan
H 33.18 31.02 29.69 46.23
Ilic. Modelglobally,matchlocally: Efficientandrobust3d
(cid:37) 35.31 15.41 17.62 0.30 objectrecognition.InIEEEComputerSocietyConferenceon
R 29.30 28.28 26.17 0.52 ComputerVisionandPatternRecognition,pages998–1005.
S 57.73 36.14 41.28 291.53 IEEE,2010. 1
M 60.05 34.36 40.28 22.46 [12] Martin A Fischler and Robert C Bolles. Random sample
(cid:37) 28.04 12.58 15.94 3.80 consensus:aparadigmformodelfittingwithapplicationsto
L 52.59 51.72 48.54 6.47 imageanalysisandautomatedcartography.Communications
(cid:33) (cid:33) (cid:33) (cid:33) 50.31 36.30 39.39 7.56 oftheACM,24(6):381–395,1981. 2,3,8
[13] AndersGlentBuch,YangYang,NorbertKruger,andHenrik
Gordon Petersen. In search of inliers: 3d correspondence
Table7.Moduleeffectivenessanalysisontherealdataset.
bylocalandglobalvoting. InProc.oftheIEEEConference
on Computer Vision and Pattern Recognition, pages 2067–
References 2074,2014. 2
[14] Jianwei Guo, Xuejun Xing, Weize Quan, Dong-Ming Yan,
[1] ShengAo,QingyongHu,BoYang,AndrewMarkham,and QingyiGu,YangLiu,andXiaopengZhang. Efficientcenter
YulanGuo. Spinnet: Learningageneralsurfacedescriptor votingforobjectdetectionand6dposeestimationin3dpoint
for 3d point cloud registration. In Proc. of the IEEE/CVF cloud. IEEE Transactions on Image Processing, 30:5072–
Conference on Computer Vision and Pattern Recognition, 5084,2021. 1
pages11753–11762,2021. 2 [15] Shengyu Huang, Zan Gojcic, Mikhail Usvyatsov, Andreas
[2] Armen Avetisyan, Manuel Dahnert, Angela Dai, Manolis Wieser,andKonradSchindler. Predator: Registrationof3d
Savva, Angel X. Chang, and Matthias Nießner. Scan2cad: point clouds with low overlap. In Proc. of the IEEE/CVF
Learning cad model alignment in rgb-d scans. In Proc. of Conference on Computer Vision and Pattern Recognition,
theIEEE/CVFConferenceonComputerVisionandPattern pages4267–4276,2021. 6,1
Recognition,pages2609–2618,2019. 6 [16] Florian Kluger, Eric Brachmann, Hanno Ackermann,
[3] Xuyang Bai, Zixin Luo, Lei Zhou, Hongkai Chen, Lei Li, CarstenRother, MichaelYingYang, andBodoRosenhahn.
ZeyuHu,HongboFu,andChiew-LanTai. Pointdsc:Robust Consac: Robust multi-model fitting by conditional sample
point cloud registration using deep spatial consistency. In consensus. InProc.oftheIEEE/CVFConferenceonCom-
Proc.oftheIEEE/CVFConferenceonComputerVisionand puter Vision and Pattern Recognition, pages 4634–4643,
PatternRecognition,pages15859–15869,2021. 1,2 2020. 2,6
[4] Daniel Barath and Jiˇr´ı Matas. Graph-cut ransac. In Proc. [17] Junha Lee, Seungwook Kim, Minsu Cho, and Jaesik Park.
of the IEEE Conference on Computer Vision and Pattern Deep hough voting for robust global registration. In Proc.
Recognition,pages6733–6741,2018. 1,2 oftheIEEE/CVFInternationalConferenceonComputerVi-
[5] Daniel Barath and Jiri Matas. Progressive-x: Efficient, sion,pages15994–16003,2021. 1
anytime, multi-model fitting algorithm. In Proc. of the [18] MariusLeordeanuandMartialHebert. Aspectraltechnique
IEEE/CVF International Conference on Computer Vision, forcorrespondenceproblemsusingpairwiseconstraints. In
pages3780–3788,2019. 2,6 Proc. International Conference on Computer Vision, pages
[6] Alvaro Parra Bustos and Tat-Jun Chin. Guaranteed outlier 1482–1489.IEEE,2005. 2
removal for point cloud registration with correspondences. [19] David G Lowe. Distinctive image features from scale-
IEEETransactionsonPatternAnalysisandMachineIntelli- invariantkeypoints. InternationalJournalofComputerVi-
gence,40(12):2868–2882,2017. 1,2 sion,60:91–110,2004. 2,8
[7] HuiChenandBirBhanu. 3dfree-formobjectrecognitionin [20] LucaMagriandAndreaFusiello. T-linkage: Acontinuous
rangeimagesusinglocalsurfacepatches. PatternRecogni- relaxationofj-linkageformulti-modelfitting.InProc.ofthe
tionLetters,28(10):1252–1262,2007. 2 IEEEConferenceonComputerVisionandPatternRecogni-
[8] ZhiChen,KunSun,FanYang,andWenbingTao. Sc2-pcr: tion,pages3954–3961,2014. 2,6
Asecondorderspatialcompatibilityforefficientandrobust [21] LucaMagriandAndreaFusiello. Multiplemodelfittingas
point cloud registration. In Proc. of the IEEE/CVF Con- a set coverage problem. In Proc. of the IEEE Conference
ferenceonComputerVisionandPatternRecognition,pages on Computer Vision and Pattern Recognition, pages 3318–
13221–13231,2022. 1 3326,2016. 2
[9] Christopher Choy, Wei Dong, and Vladlen Koltun. Deep [22] Nobuyuki Otsu. A threshold selection method from gray-
global registration. In Proc. of the IEEE/CVF Conference levelhistograms. IEEETransactionsonSystems,Man,and
on Computer Vision and Pattern Recognition, pages 2514– Cybernetics,9(1):62–66,1979. 6
2523,2020. 1 [23] Alvaro Parra, Tat-Jun Chin, Frank Neumann, Tobias
[10] Angela Dai, Angel X. Chang, Manolis Savva, Maciej Hal- Friedrich,andMaximilianKatzmann.Apracticalmaximum
ber, Thomas Funkhouser, and Matthias Nießner. Scannet: clique algorithm for matching with pairwise constraints.
Richly-annotated 3d reconstructions of indoor scenes. In arXivpreprintarXiv:1902.01534,2019. 2
9[24] Charles Ruizhongtai Qi, Li Yi, Hao Su, and Leonidas J [38] Mingzhi Yuan, Zhihao Li, Qiuye Jin, Xinrong Chen, and
Guibas. Pointnet++: Deephierarchicalfeaturelearningon Manning Wang. Pointclm: A contrastive learning-based
pointsetsinametricspace.AdvancesinNeuralInformation framework for multi-instance point cloud registration. In
ProcessingSystems,30,2017. 6 Proc. of the European Conference on Computer Vision,
[25] SiwenQuanandJiaqiYang. Compatibility-guidedsampling pages595–611.Springer,2022. 1,2,3,6
consensus for 3-d point cloud registration. IEEE Trans- [39] Andy Zeng, Shuran Song, Matthias Nießner, Matthew
actions on Geoscience and Remote Sensing, 58(10):7380– Fisher,JianxiongXiao,andThomasFunkhouser. 3dmatch:
7392,2020. 2 Learninglocalgeometricdescriptorsfromrgb-dreconstruc-
[26] Siwen Quan, Jie Ma, Fangyu Hu, Bin Fang, and Tao Ma. tions. InProc.oftheIEEEConferenceonComputerVision
Localvoxelizedstructurefor3dbinaryfeaturerepresentation andPatternRecognition,pages1802–1811,2017. 2
androbustregistrationofpointcloudsfromlow-costsensors. [40] XiyuZhang,JiaqiYang,ShikunZhang,andYanningZhang.
InformationSciences,444:153–171,2018. 5 3d registration with maximal cliques. In Proc. of the
[27] Emanuele Rodola`, Andrea Albarelli, Filippo Bergamasco, IEEE/CVF Conference on Computer Vision and Pattern
andAndreaTorsello. Ascaleindependentselectionprocess Recognition,pages17745–17754,2023. 1,8
for3dobjectrecognitioninclutteredscenes. International [41] Qian-YiZhou,JaesikPark,andVladlenKoltun. Fastglobal
JournalofComputerVision,102:129–145,2013. 2 registration. InProc.oftheEuropeanConferenceonCom-
[28] Manolis Savva, Fisher Yu, Hao Su, M Aono, B Chen, D puterVision,pages766–782.Springer,2016. 2
Cohen-Or, W Deng, Hang Su, Song Bai, Xiang Bai, et al.
Shrec16 track: largescale 3d shape retrieval from shapenet
core55. InProc.oftheEurographicsWorkshopon3DOb-
jectRetrieval,2016. 6
[29] WeixuanTangandDanpingZou.Multi-instancepointcloud
registrationbyefficientcorrespondenceclustering. InProc.
oftheIEEE/CVFConferenceonComputerVisionandPat-
ternRecognition,pages6667–6676,2022. 1,2,6,8
[30] FedericoTombariandLuigiDiStefano. Objectrecognition
in 3d scenes with occlusions and clutter by hough voting.
InPacific-RimSymposiumonImageandVideoTechnology,
pages349–355.IEEE,2010. 2,8
[31] Jo¨rgenWWeibull. Evolutionarygametheory. MITpress,
1997. 3
[32] Heng Yang, Jingnan Shi, and Luca Carlone. Teaser: Fast
andcertifiablepointcloudregistration. IEEETransactions
onRobotics,37(2):314–333,2020. 2
[33] Jiaqi Yang, Yang Xiao, Zhiguo Cao, and Weidong Yang.
Ranking3dfeaturecorrespondencesviaconsistencyvoting.
PatternRecognitionLetters,117:1–8,2019. 2,6
[34] JiaqiYang,ZhiqiangHuang,SiwenQuan,ZhaoshuaiQi,and
Yanning Zhang. Sac-cot: Sample consensus by sampling
compatibilitytrianglesingraphsfor3-dpointcloudregistra-
tion.IEEETransactionsonGeoscienceandRemoteSensing,
60:1–15,2021. 1,2,8
[35] JiaqiYang,ZhiqiangHuang,SiwenQuan,QianZhang,Yan-
ning Zhang, and Zhiguo Cao. Toward efficient and robust
metricsforransachypothesesand3drigidregistration.IEEE
TransactionsonCircuitsandSystemsforVideoTechnology,
32(2):893–906,2021. 4,6,8
[36] Jiaqi Yang, Ke Xian, Peng Wang, and Yanning Zhang. A
performance evaluation of correspondence grouping meth-
odsfor3drigiddatamatching.IEEETransactionsonPattern
AnalysisandMachineIntelligence,43(6):1859–1874,2021.
2
[37] JiaqiYang,JiahaoChen,SiwenQuan,WeiWang,andYan-
ningZhang. Correspondenceselectionwithloose–tightge-
ometricvotingfor3-dpointcloudregistration. IEEETrans-
actionsonGeoscienceandRemoteSensing,60:1–14,2022.
2
107.PerformancewithVaryingOutlierRatios
Metrics MHR(%) MHP(%) MHF1(%) Times(s)
In this section, we create input correspondences by mix- DrostPPF[11] 1.70 1.64 1.64 2.64
ing GT correspondences with outliers instead of generat- CentralVotingPPF[14] 0.45 0.40 0.40 1.14
ingcorrespondencesbyPREDATOR[15],inordertocon- IBI-S2DC 50.31 36.30 39.39 7.56
trol the outlier ratio Outlier ratio. Various outlier ratios
were examined, including 10% ∼ 50%, 50% ∼ 70%, Table10.ComparisonwithPPFmethodsontherealdataset.
and 70% ∼ 90%. Outliers were randomly selected within
specified ranges for each test instance. For parameters,
9.MoreVisualizations
we set N = 20, N = 300, N = 100, and
gtm vot gsac
t = 5. The outcomes are detailed in Table 8. Our More visualizations on the synthetic and real datasets are
select
IBI-S2DC achieves notable and stable performance under shown in Fig. 11 and Fig. 12, respectively. We compare
eachrangeofOutlier ratio,anditsMHF1surpasses90% withECCandfindthatourIBI-S2DCsuccessfullyregisters
under 10% ∼ 90% outlier ratio. Our MHF1 also achieves moreinstancesinthepresenceofheavyoutliers.
88.51%whenfacingextremesituations,i.e.,theoutlierra-
tio exceeds 90%. This clearly indicates the robustness of
ourIBI-S2DCtovaryingoutlierratios.
Metrics MHR(%) MHP(%) MHF1(%) Times(s)
Outlierratio
ECC[29] 21.72 61.90 29.70 1.58
10%∼50%
IBI-S2DC 97.74 88.10 92.36 2.85
ECC[29] 21.01 53.49 27.87 2.22
50%∼70%
IBI-S2DC 98.41 85.79 91.30 4.04
ECC[29] 20.65 33.41 22.99 2.60
70%∼90%
IBI-S2DC 98.49 84.05 90.25 5.39
ECC[29] - - - -
90%∼99%
IBI-S2DC 99.10 80.94 88.51 13.62
Table8. PerformancewithdifferentOutlier ratiovaluesonthe
syntheticdataset.
8. Comparison with Correspondence-free
Methods
Althoughourmainfocusisoncorrespondence-basedmeth-
odsforMI-3DReg,therearealsosomecorrespondence-free
methods,typicallyincludingpoint-pair-feature-based(PPF)
ones. Here, two PPF methods for comparison, including
Drost PPF [11] and Central Voting PPF [14]. Table 9 and
Table10presentthecomparativeresults. Clearly,bothPPF
methods achieve very limited performance, and our IBI-
S2DCachievesthebestperformance.Thisisbecausestable
PPFs usually rely on dense and high-quality point clouds,
whilethedatasetsusedforMI-3DRegaresparseandnoisy.
Metrics MHR(%) MHP(%) MHF1(%) Times(s)
DrostPPF[11] 7.52 5.45 5.34 2.20
CentralVotingPPF[14] 3.61 3.78 3.15 5.68
IBI-S2DC 61.16 71.20 63.82 6.28
Table9.ComparisonwithPPFmethodsonthesyntheticdataset.
1Source
Source
Source
Source
(a) Input correspondences (b) ECC (c) Ours
Figure11.Visualresultsonthesyntheticdataset.
2SSoouurrccee
SSoouurrccee
SSoouurrccee
(a) Input correspondences (b) ECC (c) Ours
Figure12.Visualresultsontherealdataset.
3