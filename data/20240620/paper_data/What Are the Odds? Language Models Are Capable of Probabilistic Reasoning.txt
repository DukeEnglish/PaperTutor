What Are the Odds?
Language Models Are Capable of Probabilistic Reasoning
AkshayParuchuri*,JakeGarrison,ShunLiao,JohnHernandez,
JacobSunshine,TimAlthoff,XinLiu,DanielMcDuff
Google
akshay@cs.unc.edu,{althoff,xliucs,dmcduff}@google.com
Abstract
## Consider the following distribution:
Type: Log-Normal Distribution
Languagemodels(LM)arecapableofremark- Characteristics: This distribution models values that are the result of
the multiplicative product of many independent random variables,
ablycomplexlinguistictasks;however,numer-
such as income levels, stock prices, or city sizes.
ical reasoning is an area in which they fre- Log Mean (mu): 3.543
quentlystruggle. Animportantbutrarelyeval- Log Sigma (sigma): 0.677
These parameters mean that the natural logarithm of the values
uatedformofreasoningisunderstandingprob- follows a normal distribution with the speci�ed mean and
ability distributions. In this paper, we focus standard deviation.
Your task is to estimate the percentile of a given average exercise
onevaluatingtheprobabilisticreasoningcapa- minutes count value for a population that regularly uses Fitbit devices
bilitiesofLMsusingidealizedandreal-world and is active on a daily basis. The data is �ltered for individuals aged
18-65. The data is age-balanced and gender-balanced, and pe�ains
statisticaldistributions. Weperformasystem-
to the U.S. population only.
aticevaluationofstate-of-the-artLMsonthree Consider the following parameters that describe a normal distribution:
Mean: 43.20
tasks: estimatingpercentiles,drawingsamples,
Standard Deviation: 30.50
andcalculatingprobabilities.Weevaluatethree ## Here is your question:
waystoprovidecontexttoLMs1)anchoring Question:
What is the percentile of the value 35 within the provided distribution?
examples from within a distribution or fam-
ily of distributions, 2) real-world context, 3) What is the percentile of 35 exercise minutes?
summarystatisticsonwhichtobaseaNormal 20000 Answer: 50th 1 17 5. .5 0 approximation. Models can make inferences 15000 Predictions:
12.5
about distributions, and can be further aided 10000 68th 10.0
bytheincorporationofreal-worldcontext,ex- 60th 7.5
5000 46th 5.0
ampleshotsandsimplifiedassumptions,even 2.5
0 0.0
iftheseassumptionsareincorrectormisspec- Exercise (minutes) Health
ified. To conduct this work, we developed a
What is the percentile of $1800 monthly gross rent?
wco im thp ar se sh oe cn is ai tv ee db qe un ec sh tim onar -k and si wst eri rb pu ati io rsn td ha at ta wse et 60000 Answer: 80th 1 17 5. .5 0
Predictions: 12.5
willreleasepublicly. 40000 95th 10.0
20000 68th 7.5
1 Introduction 75th 5.0
2.5
0 0.0
Language models (LMs) (Workshop et al., 2022; Monthly Gross Rent ($) Finance
Touvronetal.,2023;Achiametal.,2023)areversa- What is the percentile of 294mm precipitation?
tileinterfacestoknowledge,capableofremarkably 5000 Answer: 20th 1 17 5. .5 0
Predictions:
complexlinguistictasks. Summarizationofcom- 3000 12.5
62th 10.0
plex documents (Tang et al., 2023; Zhang et al., 2000 11th 7.5
2024b),reasoningoverlongpassagesoftext(Sha- 1000 13th 5.0
2.5
ham et al., 2022; Chen et al., 2023; Team et al., 0 0.0
Precipitation (mm) Climate
2023)andzero-shotinferenceinspecialistdomains Idealized Distribution + Real-World Context
suchasmedicine(McDuffetal.,2023)areafew + Real-World Context & Normal Assumption
examples that demonstrate their abilities. While Figure1:LMs&ProbabilisticReasoning.Modelscan
performanceonprimarilylinguisticproblems,can makeinferencesaboutdistributions,butcanbeaidedby
often be strong, effectiveness on operations that theincorporationofreal-worldcontext,exampleshots
involvenumericalreasoningisadomainthatlan- andsimplifiedassumptions,eveniftheseassumptions
areincorrectormisspecified.
guagemodelshavestruggledwith(Kojimaetal.,
*WorkcompletedduringaninternshipatGoogle.
1
4202
nuJ
81
]LC.sc[
1v03821.6042:viXra
ycneuqerF
ycneuqerF
ycneuqerF
)EAM(
rorrE
.sbA
naeM
)EAM(
rorrE
.sbA
naeM
)EAM(
rorrE
.sbA
naeM2022). Difficultieshandlingnumbersmaybedue bilisticreasoningtasksandusethemtoevaluatethe
tomodelpretrainingformulations(e.g.,usingau- capabilitiesofLMs-estimatingpercentiles,draw-
toregressivenexttokenpredictionpretexttasks)or ingsamples,andcalculatingprobabilities. Nextwe
numericaltokenrepresentationsnotnecessarilybe- evaluatetheimpactofadditionalreal-worldcontext
ingsuitedtomathematicalreasoning(Bachmann andparametricassumptions(Normaldistribution)
andNagarajan,2024),orsimplyalimitedrepresen- usingthetaskofestimatingpercentiles(taskchoice
tationofthesetypesoftasksinthetrainingcorpora. ismotivatedinSection3).
Nevertheless,someworksuggestspromptingtech- Tosummarizeourresearchquestions:
niquescansubstantiallyimproveLMperformance
1. Section 5.1: Provided with an idealized dis-
on numerical reasoning tasks, indicating that rel-
tribution, are language models able to accu-
evant knowledge may already be encoded within
rately answer questions about them? Does
thesemodels(Imanietal.,2023).
this vary by the distribution family? Does
A form of numerical reasoning that is impor-
providingpromptexamplesfromdifferentdis-
tantforinterpretingmanydifferentformsofdata
tributionsinthesamefamilyorsamplesfrom
is contextualizing an individual measurement or
thesamedistributionhelp? DoLMssimplyre-
measurements(asampleorsamples)withinapop-
peatthenearestin-contextexampleoristhere
ulation(adistribution). Drawinginsightsfromdata
evidenceofmorecomplexLMbehavior?
frequently requires comparing and contrasting a
sample from other samples. This is because ab-
2. Section 6.2: Can an LM answer questions
solutevaluesinisolationcanbehardtointerpret,
aboutdistributionsintheworld(e.g.,income
without the context of how probable they are or
in the US population)? Are LMs able to re-
how closetheyare tothe maximumor minimum
trieve statistics and answer questions about
valuesobservedacrossthepopulation. Probabilis-
thesedistributionsinazero-shotmanner?
tic reasoning is something that the human brain
appears to do (Knill and Pouget, 2004) and that 3. Section 6.2: Using simple approximations
is an important component in cognition (Chater suchasassumingaNormaldistribution,can
etal.,2006). Thinkingprobabilisticallyisefficient wedesignpromptsthatleadtomoreaccurate
as one does not have to represent every detail of answerstoprobabilisticreasoningquestions?
every sample that one observes, and instead can
Toanswerthesequestionswedevelopadistribu-
havethedatasummarizedwithasmallnumberof
tiondatasetwithassociatedquestion-answerpairs
parametersthatdescribethedistribution(Lindskog
thatwewillreleasepublicly. Thedatasetincludes
etal.,2021). Researchhasshownthatsomeprob-
questionsabout12familiesofstandard,idealized
abilisticreasoningprocessesleadtosuperiorper-
distributions(e.g.,NormalorPower-lawdistribu-
formance;forexample,peoplearemoreaccurate
tions) and distributions of real-world data from
atansweringquestionsaboutstatisticalproperties
thedomainsofpopulationhealth,climate,andfi-
whentheyestimatethefulldistributionfirst(Gold-
nance.
steinandRothschild,2014). Yet,therearelimited
examples evaluating or improving on the proba-
2 RelatedWork
bilistic reasoning by designing LMs that reason
oversets(Ozturkleretal.,2023). Language Models and Numerical Reasoning.
Understandingthedistributionsisimportantin Working with numbers is necessary for many ev-
manycontexts. Inpopulationleveldataitisimpor- eryday tasks. Yet, while large language models
tantwhengaugingwhetheranindividualbehavior pretrainedonvastnumbersofdocumentsexhibit
isnormative(e.g.,Issleeping8hoursnormalfora impressivelinguisticcapabilities,theyoftenstrug-
collegeagedstudent?). Inclimatology,inferences gle at tasks involving numerical reasoning (Sax-
aboutdistributionsoftemperatureorprecipitation ton et al., 2019; Kojima et al., 2022) (for a sur-
data on a given day of the year at a particular lo- veyseeLuetal.(2022)). Differentapproachesto
cationareimportantwhendeterminingifobserved numerical reasoning have been proposed, many
eventsaretypicalorabnormal. Isamaximumtem- focusing on logical reasoning of mathematical
perature of 35°C likely to be observed in Seattle tasks(Gevaetal.,2020;Imanietal.,2023;Yang
everyyear? et al., 2022; Webb et al., 2023). In quantitative
Inthisworkweproposeanddefineasetofproba- reasoningproblemssuchasthoseinthedomainsof
2mathematics,science,andengineering,theprocess rate(GoldsteinandRothschild,2014).
offine-tuningmodelshasbeenusedtosuccessfully
remedyweaknesses(Lewkowyczetal.,2022). Au- 3 DefiningProbabilisticReasoningTasks
tomatic generation of data can be used as a way
Our probabilistic reasoning benchmark contains
ofobtainingtrainingexamples(Gevaetal.,2020;
threedistincttasksthatexplorealanguagemodel’s
Liuetal.,2022). Thefactthatspecificprompting,
(LM’s) context-free (idealized) understanding of
suchasprovidingexamples,canimprovetheper-
basic, idealized distributions, we describe these
formanceofLMsonnumericaltasks,suggeststhat
tasksasfollows:
their training data may already include relevant
Task 1: Estimating Percentiles. Given a dis-
information to perform these tasks (Imani et al.,
tribution, the model is asked for the percentile
2023;Yangetal.,2022). Benchmarkdatasetshave
a sample would appear in. A question is
helped the research community to develop these
composed of a value (a sample) that is calcu-
methods(e.g.,(He-Yueyaetal.,2023;Zhangetal.,
lated given the target percentile. The answer
2024a;Liuetal.,2024))furtherandautomaticeval-
is expected to be a numerical response from
uationofnumericalreasoningproblemshasbeen
0 to 100. The target percentiles utilized were
proposed to help in cases where accuracy cannot
nst/th = {1,10,20,30,40,50,60,70,80,90,99}.
becomputedmathematically(Cobbeetal.,2021).
Languagemodelsresponsestothesequestionsare
NumericalReasoningPromptDesign. Prompts
sampled10timeswitharandomseed.
designed to handle automatically generated con-
tent (from an LM) were used to improve on nu-
Returnthepercentileofthevalue{X}within
merical and scientific commonsense reasoning
a normal distribution with mean {Y} and
tasks(Liuetal.,2022). Algorithmsandcodeare
standarddeviation{Z}.
usefultoolswhenworkingwithnumbers,chain-of-
thought prompts have been designed to leverage
Task 2: Drawing Samples. Given a distribution
these specifically to improve the performance of
themodelisaskedtodrawsamplesatrandomfrom
LMs on arithmetic problems (Imani et al., 2023;
it. A random seed is used for each sample and
Merrill et al., 2024). Retrieval of correlated-
we repeat this 1000 times per distribution. The
examples (Yang et al., 2022), generating inter-
language model is explicitly instructed to avoid
mediate reasoning steps (Gao et al., 2023) and
generating any code or using additional tools to
expressing reasoning as a program (Chen et al.,
performthesampling. Theanswerisexpectedto
2022) are examples that can also help improve
beanumericalresponse.
LMperformanceonmathematicalandlogicprob-
lems. Simpleapproachessuchaszero-shotchain-
of-thought(Kojimaetal.,2022)existandarecapa- Sampleanumberfromthenormaldistribu-
bleofleveragingmulti-stepreasoning,butforprob- tionwithmean{X}andstandarddeviation
abilisticreasoningtasksleadtoseverelydegraded {Y}.
performanceduetogenerallypoornumericalrea-
soningperformance. Task 3: Calculating Probabilities. Given a
ProbabilisticReasoningandCognition. Inspira- distribution the model is asked for the probabil-
tionforAIsystemsisoftendrawnfromourunder- ity a sample from the distribution will fall be-
standingofhumancognition,cognitivesciencehas tween two given values. The target probabili-
revealedinsightsabouthowhumanscanthinkprob- tiesandthecorrespondingtargetrangesarecom-
abilistically(CosmidesandTooby,1996;Oaksford putedbasedonalowerandupperquantiletoform
andChater,2001)andcanbuildrepresentationsof examples with different probabilities in the set
relativelycomplexprobabilitydistributions(Lind- P = {0.1,0.2,0.3,0.4,0.5,0.6,0.7,0.8,0.9,1.0}.
skog et al., 2021), yet our perceptions of means TheanswerfromtheLMisexpectedtobeanumer-
and variances are subject to biases (Tversky and icalresponsefrom0to1.
Kahneman,1974). Thethoughtprocessespeople
usewhenansweringquestionsaboutdistributions Calculatetheprobabilitythatavaluefalls
haveanimpactontheiraccuracy. Specifically,elic- between{W}and{X}inanormaldistribu-
itingafulldistributionbeforecomputingsummary tionwithmean{Y}andstandarddev. {Z}.
orsamplestatisticscanmakeanswersmoreaccu-
3=
Figure2: Distributions. Avisualizationofthe12idealizedand12real-worlddistributionsacrossthedomainsof
health,finance,andclimateinvolvedinourevaluation.
In order to evaluate the impact of real-world butionsidentified(Frank,2009)andtestedinprior
contextonLMprobabilisticreasoning,weexplore studies(GoldsteinandRothschild,2014). Whenan
distributionsinthereal-worldthathaveadditional LMisaskedaboutanidealizeddistribution,adistri-
real-world context (e.g., prior knowledge and ex- butiondescriptionisprovidedwithparametersthat
pectationsaboutUShouseholdincomes). Wethen canrangefromsimpleparameterssuchasthemean
leverageTask1ofestimatingpercentilestoevalu- andstandarddeviation(e.g.,foraNormaldistribu-
atetowhatdegreereal-worldcontextimpactsper- tion)tolesseasilyinterpretableparameterssuchas
formances. Task 1 is particularly well suited for locationandscale(e.g.,foraGumbeldistribution).
thisexploration,aswelaterdemonstratethatthis Notethatthedistributiondescriptiondoesnotin-
Task1elicitsthehighestvariationinperformance cludeanydistrbutionprobabilitydensityfunction
acrossdistributionfamiliesandthenumberofin- (PDF)orcumulativedistributionfunction(CDF).
context examples/shots (further detailed in Sec- All parameters are captured in a popular, public
tion 6). In Appendix A we provide full prompt Pythonlibraryforscientificcomputing-NumPy.
templatesforourthreeproposedbenchmarktasks,
aswellasfurtherdetailsregardingtemplatecompo- Real-WorldDistributions. Wechoosereal-world
nentsandreal-worlddistributionprompttemplates. distributionsfromthedomainsofhealth,finance,
andclimateforwhichthereispresumedtoberele-
4 CuratingDataDistributions
vantinformationinthemodel’strainingset.
Weusetwodistinctdatasetsforthepurposeofun-
derstandingtheprobabilisticreasoningcapabilities Health:Wesample100KFitbitusersfromtheU.S.
ofLMs-adatasetofidealizeddistributionsanda population,aged18-65,andwithatleast10days
datasetofreal-worlddistributions. Avisualization ofdatafrom thecalendaryear2023. The dataset
ofbothdatasetsisshowninFigure2. wasgenderandagebalanced(seeAppendix). We
Idealized Distributions. We identify 12 analyze four common wearable metrics (A) step
families of distributions: Normal, Log-Normal, count, (B) resting heart rate, (C) sleep duration,
Skew-Normal,Exponential,PowerLaw,Uniform, and(D)exerciseminutes. Weaggregatethisdata
Gamma, Gumbel, Poisson, Geometric, Binomial to obtain averages for each user and ultimately
andMultinomial. Theseencompasssetsofdistri- distributionsofdailymetricsacross100Kusers.
4
snoitubirtsiD
dezilaedI
snoitubirtsiD
dlroW-laeRues. Forexample,ifweareaskingforapercentile
In what percentile of the US population
of a value in a normal distribution with a mean
would someone with an average of 6000
of100andastandarddeviationof10,andweare
stepsperdaybe?
providingthreeshots,therandomizedshotsmaybe
generatedfromthreevariantnormaldistributions
Finance:WeusepubliccensusdatafromtheCen-
withmeansof108,118,and112andcorresponding
susBureau’sAmericanCommunitySurvey(ACS)
standarddeviationsof13,16,and10. Withindistri-
Public Use Microdata Sample (PUMS) (Ruggles
butionshotsentailshotsfromthesamedistribution
etal.,2020)thatcontainsmeasuresof(E)annual
thatisbeingaskedaboutinaquestion.
income, (F) monthly gross rent, (G) annual elec-
To help contextualize the performance in the
tricity costs, and (H) annual water costs ($) for
N-shotexperiments,forthetaskofestimatingper-
individuals and households in the US. We select
centileswecomparebothshottypestoabaseline
datafromthecalendaryear2018.
where the answer is picked based on the nearest
corresponding target percentile value in the shot
InwhatpercentileofUShouseholdswould
examples (i.e., the nearest neighbor). This base-
someone with a household income of
line does not perform any interpolation between
$70,000be?
percentiles, whichwouldberequiredforoptimal
performance. IftheLMperformanceexceedsthis
Climate:WeusethepublicGlobalHistoricalCli- baseline performance, it would suggest that the
matologyNetworkdaily(GHCNd)dataset(Menne LMsdoesperformsomeformofinterpolation,in-
et al., 2012) maintained by the National Oceanic steadofsimplyrecitingin-contextexamples.
andAtmosphericAdministration(NOAA)thatcon- We explicitly avoid using shots that involve
tains average daily measures for variables of (I) an answer that could be an answer to one of our
temperature,(J)precipitation,(K)windspeed,and proposedquestions. Specifically,weusenth =
shots
(L)humiditylevelforweatherstationsacrossthe {5,15,25,35,45,55,65,75,85,95}andP =
shots
continentalUnitedStates. Weconsiderdatafrom {0.05,0.15,0.25,0.35,0.45,0.55,0.65,0.75,0.85,
the calendar year 2018 and filter erroneous mea- 0.95}. For example, if we are asking for a per-
suresindicatedbymeasurementqualityflagsbuilt centile of a value in a Normal distribution with
intotheGHCNddataset. a mean of 100 and a standard deviation of 10,
and we are providing three shots, the mapped
Inwhatpercentilewouldanaveragetemper- shots will be generated from the same normal
atureof20degreesCelsiusbeintheUSA? distributionandcorrespondto35.0,55.0,and75.0.
We sample LM responses 10 times per question
with a random seed. We provide further details,
5 ExperimentalSetup including examples per shot type and shot count,
inourSection8.
5.1 IdealizedDistributions
5.2 Real-WorldDistributions
Zero-shot Performance. We evaluate the zero-
shot performance of four LMs (Gemini 1.0 Ul- Zero-shot Performance. We evaluate the zero-
tra,GPT4-Turbo,GPT3.5-Turbo,andLlama3-70B) shot performance of four LMs (Gemini 1.0 Ul-
acrossourthreetasksand12idealizeddistributions. tra,GPT4-Turbo,GPT3.5-Turbo,andLlama3-70B)
LM prompts are generated as formulated in Sec- acrosstheproposedtaskofestimatingpercentiles
tion3. inordertoevaluateanLM’sunderstandingofprob-
N-Shot Performance. We propose two types abilistic reasoning of the real-world distributions
of shots that might be reasonably employed for inthedomainsofhealth,finance,andclimatemen-
the tasks - within distribution family distribution tionedinSection4. Wedesignpromptsthatcontain
shotsandwithindistributionshots. Withindistribu- information about the corresponding real-world
tionfamilydistributionshotsareexamplesfroma data,suchaswhereitwassourcedfrom,theyearin
differentdistributionfromthesamefamily as the timeforwhichthedataisrelevant,andanyrelevant
current distribution in question. The distribution filteringthatwasdone,thisactsascontextthatwe
parameters of the variant are randomly sampled refertoas“Real-WorldContext”intheremainder
fromaspecifiedrangeofreasonableparameterval- ofthepaper. Thepromptsarebuiltusing11unique
5Zero Shot Answer Three Shot Answer Ground-Truth Zero Shot Answer Three Shot Answer Ground-Truth
Zero Shot MAE: MAE: MAE: MAE: MAE:
Three Shot MAE: MAE: MAE: MAE: MAE:
Zero Shot
Three Shot
Zero Shot MAE: MAE: MAE: MAE: MAE:
Three Shot MAE: MAE: MAE: MAE: MAE:
Figure3:ResultsonIdealizedDistributions. Modelresults(top)estimatingpercentiles,(middle)drawingsamples,
(bottom)estimatingprobabilities,forfivecommondistributions(seeAppendixBforresultsonalldistributions).
target values that correspond to ground truth per- despite characteristics such as skewedness being
centiles generated from the real-world data. We presentinreal-worlddistributions,manydistribu-
sampleLMresponses10timesperquestionwitha tionsaresimilartoaNormaldistribution. Wequan-
randomseed. titativelyreinforcethisobservationusingtheKol-
mogorov–Smirnov test (Chakravarti et al., 1967)
Performance by Context. To investigate the ef-
to show that even if the Normal equivalent is not
fects of context, we compare two conditions: 1)
the best fit for a given real-world distribution, it
questionsaboutanidealizeddistributionwithcom-
canberemarkablycloseasevidencedbytheK-S
parableshapeandparametersofthereal-worlddis-
statistic. Additionally, wecompareour proposed
tribution but no other context, and 2) questions
Normalapproximationapproachtosimplyprovid-
aboutthedistributionwithReal-WorldContext(see
ingaquestioninvolvingareal-worlddistribution
examplesinAppendix8). Bothconditionsinvolve
withthreewithindistributionshots.
adistributiondescriptionasmentionedinSection3.
Thepromptsareagainbuiltusing11uniquetarget
6 ExperimentalResults
valuesthatcorrespondtogroundtruthpercentiles
generated from the real-world data. We sample Weorganizeourresultsbasedontheresearchques-
Gemini1.0Ultraresponses10timesperquestion tionsposedinSection1. Alongsideaconcisean-
witharandomseed. swerinbold,weprovidediscussionbasedonour
SimplifiedAssumptions. Certainreal-worlddis- analysisoftheexperimentalresults.
tributionsfoundinSection4areNon-Normal. For
6.1 IdealizedDistributions
example,annualincomefollowsaPowerLawdis-
tribution. DespitenotalldistributionsfoundinSec- Q1: Are LMs able to accurately answer ques-
tion4beingperfectlyNormaldistributions,wede- tions about idealized distributions in a zero-
viseapromptingstrategythatinvolvestreatingany shot setting? Answer: It varies, performance
distributioninthepromptasanormaldistribution on some idealized distributions is better than
withaspecifiedmeanandstandarddeviation. This others. Discussion: Languagemodelperformance
approach can be further justified by the fact that, variedconsiderablyacrossfamiliesofdistribution.
6
1
ksaT
2
ksaT
3
ksaTModelPercentiles(%)Sampling(K-S)Probabilities(%)
(shots)fromdifferentdistributionsfromthesame
Llama3-70B 26.6±3.76 0.63±0.07 32.5±2.33
GPT3.5-Turbo 25.7±3.11 0.73±0.07 32.7±2.38 familyhaslessimpactontheperformancethanpro-
GPT4-Turbo 14.9±2.39 0.59±0.08 21.0±2.11 vidingpromptexamplesfromthesamedistribution
Gemini1.0Ultra 16.5±2.67 0.76±0.09 19.4±2.26
inthequestion.
Table 1: Aggregated zero-shot task performance Q3: Do LMs simply repeat the nearest in-
across different LMs. We evaluate zero-shot perfor- context example? Answer: No, they appear to
mancefortaskssuchaspercentiles,sampling,andprob- performsomeinterpolationthatissuperiorto
abilitiesusingGemini1.0Ultra,GPT4-Turbo,GPT3.5- a nearest-in-context baseline. Discussion: We
Turbo, and Llama3-70B. For the tasks of estimating
observethatLMperformanceexceedsthatofthis
percentilesandcalculatingprobabilities,resultsarere-
baseline(Figure4)whichsuggeststhatLMsper-
portedasMeanAbsoluteError(MAE)±StandardError
formsomekindofinterpolation,insteadofsimply
(σ ). Forthetaskofdrawingsamples,theMeanK-S
M
statistic±StandardError(σ )isreportedwithallre- recitingin-contextexamples.
M
portedvalueshavingp<0.01.
6.2 Real-WorldDistributions
# Shots Q4: What is the zero-shot accuracy of an LM
25 0
ondistributionsintheworld(e.g.,incomeinthe
1
20 3 USpopulation)? Answer: Itvaries,performance
5
15 7 onsomereal-worlddistributionsisbetterthan
10 9 others. Discussion: As shown in Table 2, LMs
arecapableofvaryingdegreesofzero-shotperfor-
5
mance given different kinds of context. We con-
0
Nearest Shot Within Family Shots Within Distribution Shots siderthereal-worldcontextastheprimarybaseline
inourinvestigationofreal-worlddistributions,in
Figure 4: Language models appear to interpolate
betweenin-contextexamples. Comparisonofwithin contrastto idealized, context-free versionsof the
familyandwithindistributionshottypestoabaseline same real-world distributions and added context
wheretheanswerisbasedonthenearestcorresponding thatsimplifiesassumptions(e.g.,Normalapproxi-
shot to the target percentile value (nearest neighbor), mation). Onaveragewithreal-worldcontext,Gem-
importantlythebaselinedoesnotperformanyinterpo-
ini 1.0 Ultra has superior zero-shot performance
lationbetweenpercentiles.
ondistributionsintheclimatedomain. Incontrast,
Zero-shotperformanceonthepercentiletaskwas GPT4-Turbo has superior zero-shot performance
bestfortheuniform(MAE=0.54%)andnormal inthehealthdomain. BothGemini1.0Ultraand
(MAE = 2.29%) distributions (see Figure 3 for GPT4-Turbohadcomparableperformanceonthefi-
examplesand Figure6formoredetailedresults). nancedomainwhilebeingsuperiortoLlama3-70B
Furthermore,theperformanceofLMsonanswer- andGPT3.5-Turbo. Weattributethesedifferences
ing questions about distributions varied by task. inzero-shotperformancetounderlyingdifferences
Estimating percentiles showed rather impressive inthelargeamountsoftrainingdatausedtotrain
zero-shot performance (MAE µ¯ = 16.52, min = LMs,especiallyinthecaseGemini1.0Ultraand
0.54,max=28.36). Calculatingprobabilitieswas GPT4-Turbo.
worse on average (MAE µ = 21.48, min = 9.03, Q5: Doestheprovidedreal-worldcontexthelp
max=32.53)andsamplingperformancewasgen- withprobabilisticreasoningperformance? An-
erally poor in the zero-shot case. In all cases, swer: Yes. Discussion: Figure 5 details both
providingshots(fordifferentpercentiles,samples distribution-wise and domain-wise results using
orprobabilities)withinadistributionimprovedthe Gemini1.0Ultrawithourfourcontextcategories
performancesubstantially(Percentile∆ = -idealized,real-worldcontext,real-worldcontext
0→1shot
+59.14%,Sampling∆ =+55.26%K-Sstat., withNormalapproximation,andreal-worldcontext
0→1shot
Probability∆ =+70.13%). with3shots. Onaverage,addingrealworld-context
0→1shot
Q2: Doesprovidingpromptexamplesfromdif- improvesperformanceandaddingreal-worldcon-
ferentdistributionsinthesamefamilyorsam- textwithaNormalapproximationimprovesperfor-
ples from the same distribution help? Answer: mancestillfurther. Thistrendistrueonaggregate
Providing within distribution shots helps more but not for all individual distributions (e.g., rest-
than within family shots. Discussion: As illus- ing heart rate). This observation appears to be
trated in Figure 4, providing prompt examples restricted to distributions that already have a rea-
7
)EAM(
rorrE
etulosbA
naeM ʬ  ʭ  y Ø Į ë Ē Į ċ ´ Č Î Ø  Í Ř  | Ø ´ Ć ʲ Œ Ē Į Ć Ô  $ ô Ĳ Ĺ Į ô Í ľ Ĺ ô Ē Č  ʬ  ʭ  y Ø Į ë Ē Į ċ ´ Č Î Ø  Í Ř  $ Ē ċ ´ ô Č
Idealized
30 + Real-World Context 30
+ Real-World Context
& Normal Approximation
20 + Real-World Context 20  ʗ
& 3 Shots  ʗ
 ʗ
10 10
0 0
Steps
Heart
Rate
Sleep
Mi En xs
ercise
Mins Income
Gross
Rent
Elec
Cost
Water
Co Ts et mperatur Pre ecipitation
Wind
Speed Humidity Health Finance Climate
Figure5: Inferencescanbeaidedbycontextandsimplifiedassumptions. Meanabsoluteerrorincalculating
percentilesforreal-worlddistributionswithdifferentprompts,includingidealizeddistributionswithoutreal-world
context,addedreal-worldcontext,andaNormalapproximationapproachthatsimplifiesparametercontent. (*)
designatesp<0.05forallpossiblepairsusingtheWilcoxonsigned-ranktest.
Health Finance Climate
Model Idealized Real-worldCon.Norm.Approx. Idealized Real-worldCon.Norm.Approx. Idealized Real-worldCon.Norm.Approx.
Llama3-70B 14.8±6.01 15.3±4.03 8.61±1.97 23.9±4.02 19.8±6.56 6.24±0.78 23.5±5.71 20.2±5.29 8.87±0.99
GPT3.5-Turbo 20.5±9.62 20.3±8.51 6.81±0.68 17.7±4.54 20.4±2.88 7.55±0.77 22.7±6.88 25.7±6.32 7.90±0.22
GPT4-Turbo 11.0±4.94 4.92±3.18 3.15±00.76 8.99±1.18 10.7±3.24 5.50±0.48 18.5±6.53 15.2±5.13 4.94±0.58
Gemini1.0Pro25.30±8.41 11.51±1.06 10.42±1.32 29.35±3.72 11.77±0.92 10.10±1.01 26.20±5.44 18.67±2.01 16.53±1.94
Gemini1.0Ultra 12.8±4.43 10.3±2.49 5.89±1.09 14.0±4.47 10.5±2.75 7.62±1.06 16.9±3.86 10.5±0.79 7.43±1.11
Table2: Zero-shotperformancebydomainandcontextcategoryacrossdifferentLMs. Allresultsarereported
asMeanAbsoluteError(MAE)±StandardError(σ )with(%)units.
M
sonablebaselineperformance,wesuspectthatthe canhave,andsubsequentlyhowstatssuchasmean
saturated performance conflicts with the model’s andstandarddeviationcanhelpcorrecttheLM’s
abilitytoleveragereal-worldcontextandsimpler baseline knowledge. It is perhaps surprising that
assumptions such as the Normal approximation. performanceimprovesrelativelyconsistently,de-
Additionally, certain distributions such as house- spite the real-world distributions often differing
holdincomeshowadecreaseinperformancewhen from an idealized Normal distribution and there-
Normal approximation is applied, likely because foretheLMisbeingconditionedonamisspecified,
thehouseholdincomedistributionfollowsaPower yetstillhelpful,model.
Lawdistribution. ItisunhelpfultoapplyaNormal Q7: How do simpler assumptions such as a
approximation on distributions that differ greatly Normal approximation compare to providing
fromanormaldistribution. Weempiricallyshow three few-shot examples? Answer: Providing
thiswiththesamesetof12idealizeddistributions threefew-shotexamplesisgenerallybetter. Dis-
inAppendixD.Lastly,wenotethatreal-worldcon- cussion: Generallyspeaking,providingthreefew-
textwith3shotshasthebestperformance. Thisis shotexamplesisbetterandprovidessuperiorper-
unsurprising,andfurthermoredoesnotinvalidate formance across our proposed domain-specific
theimpactofsimplifiedassumptionssuchasNor- datasetsofhealth,finance,andclimate.
mal approximation, which can be more efficient
7 Conclusion
duetonotrelyingon3shots.
Q6: DoparametricassumptionssuchasaNor- LMsareabletoanswerquestionsaboutidealized
malapproximationasapromptdesignstrategy and real-world distributions, with real-world re-
improveperformance? Answer: Yes. Discussion: sultssuggestingthereissomeinternalrepresenta-
On average across all domains, yes. The simple tion that enables modeling or interpolation from
assumptionofaNormaldistributionperformswell distributionparameters. Theprobabilisticreason-
and when paired with real-world context, consis- ingperformanceofLMsvaries,withcertaindistri-
tentlyimprovesperformanceonreal-worlddistribu- butions (e.g., uniform, normal) having much bet-
tions(seeFigure5). Thisseemsreasonablegiven ter performance in contrast to other distributions
theaforementionedinternal,potentiallyincorrect (e.g., log-normal, skew-normal). Within distribu-
representationsofreal-worlddistributionsthatLMs tion shots and context can improve probabilistic
8
)EAM(
rorrE
etulosbA
naeMreasoningperformance,ascanasimplifiedNormal
approximation.
8 Limitations
Numerical calculation and reasoning remains an
area in which language models, even very large
models, tend to perform poorly. Making approx-
imations based on distributions is effective; how-
ever, it may also be a source of potential biases.
Our experiments have not focused on a deep ex-
plorationoftheabilityoflanguagemodelstorep-
resentandanswerquestionsaboutextremevalues,
such as outliers in distributions. Our results do
suggestthatlanguagemodelparticularlystruggle
withaccountingforextremevaluesinveryskewed
(long-tail)distributions. Incomputingpercentiles
themodelwouldoftenoverestimatethepercentiles
(and thus underestimate the presence of extreme
values)-seethePowerLawfamilyresultsinFig.6
of our appendices. Our work shows that, despite
somepromisingzero-shotperformanceandways
toimprovethatperformance,languagemodelsre-
quiremoreimprovementswithNon-Uniformand
Non-Normaldistributionsbeforetheyarecapable
of being relied on for probabilistic reasoning of
real-worlddistributionsthatfollowotherdistribu-
tions(e.g.,PowerLaw). Wehopeourinsightsasa
partofthiswork,aswellasourproposedtasksand
datasetscriticaltoprobabilisticreasoningandtobe
publiclyreleased,provevaluabletothecommunity
atlargeandtheireffortstomakelanguagemodels
moreuseful,safer,andultimatelymorereliable.
9References ShimaImani,LiangDu,andHarshShrivastava.2023.
Mathprompter: Mathematicalreasoningusinglarge
JoshAchiam,StevenAdler,SandhiniAgarwal,Lama
languagemodels. arXivpreprintarXiv:2303.05398.
Ahmad, Ilge Akkaya, Florencia Leoni Aleman,
DiogoAlmeida,JankoAltenschmidt,SamAltman,
David C Knill and Alexandre Pouget. 2004. The
ShyamalAnadkat,etal.2023. Gpt-4technicalreport.
bayesianbrain: theroleofuncertaintyinneuralcod-
arXivpreprintarXiv:2303.08774.
ing and computation. TRENDS in Neurosciences,
27(12):712–719.
GregorBachmannandVaishnavhNagarajan.2024. The
pitfalls of next-token prediction. arXiv preprint
TakeshiKojima,ShixiangShaneGu,MachelReid,Yu-
arXiv:2403.06963.
takaMatsuo,andYusukeIwasawa.2022. Largelan-
guagemodelsarezero-shotreasoners. Advancesin
IndraMohanChakravarti,RadhaGoviraLaha,andJo-
neural information processing systems, 35:22199–
gabrataRoy.1967. Handbookofmethodsofapplied
22213.
statistics. WileySeriesinProbabilityandMathemati-
calStatistics(USA)eng.
AitorLewkowycz,AndersAndreassen,DavidDohan,
Nick Chater, Joshua B Tenenbaum, and Alan Yuille. EthanDyer,HenrykMichalewski,VinayRamasesh,
2006. Probabilisticmodelsofcognition: Conceptual Ambrose Slone, Cem Anil, Imanol Schlag, Theo
foundations. Trendsincognitivesciences,10(7):287– Gutman-Solo,etal.2022. Solvingquantitativerea-
291. soningproblemswithlanguagemodels. Advances
inNeuralInformationProcessingSystems,35:3843–
ShouyuanChen,ShermanWong,LiangjianChen,and 3857.
YuandongTian.2023. Extendingcontextwindowof
large language models via positional interpolation. MarcusLindskog,PärNyström,andGustafGredebäck.
arXivpreprintarXiv:2306.15595. 2021. Canthebrainbuildprobabilitydistributions?
FrontiersinPsychology,12:596231.
Wenhu Chen, Xueguang Ma, Xinyi Wang, and
William W Cohen. 2022. Program of thoughts JiachengLiu,AlisaLiu,XimingLu,SeanWelleck,Pe-
prompting: Disentanglingcomputationfromreason- terWest,RonanLeBras,YejinChoi,andHannaneh
ing for numerical reasoning tasks. arXiv preprint Hajishirzi.2022. Generatedknowledgeprompting
arXiv:2211.12588. forcommonsensereasoning. InProceedingsofthe
60thAnnualMeetingoftheAssociationforCompu-
Karl Cobbe, Vineet Kosaraju, Mohammad Bavarian, tationalLinguistics(Volume1: LongPapers),pages
MarkChen,HeewooJun,LukaszKaiser,Matthias 3154–3169.
Plappert, Jerry Tworek, Jacob Hilton, Reiichiro
Nakano,etal.2021. Trainingverifierstosolvemath Xiao Liu, Zirui Wu, Xueqing Wu, Pan Lu, Kai-Wei
wordproblems. arXivpreprintarXiv:2110.14168. Chang,andYansongFeng.2024. Arellmscapable
ofdata-basedstatisticalandcausalreasoning? bench-
Leda Cosmides and John Tooby. 1996. Are humans
markingadvancedquantitativereasoningwithdata.
goodintuitivestatisticiansafterall? rethinkingsome
arXivpreprintarXiv:2402.17644.
conclusions from the literature on judgment under
uncertainty. cognition,58(1):1–73. Pan Lu, Liang Qiu, Wenhao Yu, Sean Welleck, and
Kai-Wei Chang. 2022. A survey of deep learn-
StevenAFrank.2009. Thecommonpatternsofnature.
ing for mathematical reasoning. arXiv preprint
Journalofevolutionarybiology,22(8):1563–1585.
arXiv:2212.10535.
Luyu Gao, Aman Madaan, Shuyan Zhou, Uri Alon,
Daniel McDuff, Mike Schaekermann, Tao Tu, Anil
PengfeiLiu, YimingYang, JamieCallan, andGra-
Palepu, Amy Wang, Jake Garrison, Karan Sing-
ham Neubig. 2023. Pal: Program-aided language
hal,YashSharma,ShekoofehAzizi,KavitaKulka-
models. In International Conference on Machine
rni,etal.2023. Towardsaccuratedifferentialdiag-
Learning,pages10764–10799.PMLR.
nosis with large language models. arXiv preprint
Mor Geva, Ankit Gupta, and Jonathan Berant. 2020. arXiv:2312.00164.
Injecting numerical reasoning skills into language
MatthewJMenne,ImkeDurre,RussellSVose,ByronE
models. In Proceedings of the 58th Annual Meet-
Gleason,andTamaraGHouston.2012. Anoverview
ingoftheAssociationforComputationalLinguistics,
of the global historical climatology network-daily
pages946–958.
database. Journalofatmosphericandoceanictech-
DanielGGoldsteinandDavidRothschild.2014. Lay nology,29(7):897–910.
understandingofprobabilitydistributions. Judgment
andDecisionmaking,9(1):1–14. MikeA.Merrill,AkshayParuchuri,NaghmehRezaei,
GezaKovacs,JavierPerez,YunLiu,ErikSchenck,
Joy He-Yueya, Gabriel Poesia, Rose E Wang, and Nova Hammerquist, Jake Sunshine, Shyam Tai-
NoahDGoodman.2023. Solvingmathwordprob- lor, Kumar Ayush, Hao-Wei Su, Qian He, Cory Y.
lemsbycombininglanguagemodelswithsymbolic McLean, Mark Malhotra, Shwetak Patel, Jiening
solvers. arXivpreprintarXiv:2304.09102. Zhan, Tim Althoff, Daniel McDuff, and Xin Liu.
102024. Transforming wearable data into health in- Zhicheng Yang, Jinghui Qin, Jiaqi Chen, Liang Lin,
sightsusinglargelanguagemodelagents. Preprint, andXiaodanLiang.2022. Logicsolver: Towardsin-
arXiv:2406.06464. terpretablemathwordproblemsolvingwithlogical
prompt-enhancedlearning. InFindingsoftheAssoci-
MikeOaksfordandNickChater.2001. Theprobabilis- ationforComputationalLinguistics: EMNLP2022,
ticapproachtohumanreasoning. Trendsincognitive pages1–13.
sciences,5(8):349–357.
Hugh Zhang, Jeff Da, Dean Lee, Vaughn Robinson,
BatuOzturkler,NikolayMalkin,ZhenWang,andNebo- CatherineWu,WillSong,TiffanyZhao,PranavRaja,
jsaJojic.2023. Thinksum: Probabilisticreasoning DylanSlack,QinLyu,etal.2024a. Acarefulexami-
oversetsusinglargelanguagemodels. InProceed- nationoflargelanguagemodelperformanceongrade
ingsofthe61stAnnualMeetingoftheAssociationfor schoolarithmetic. arXivpreprintarXiv:2405.00332.
ComputationalLinguistics(Volume1: LongPapers),
pages1216–1239. TianyiZhang,FaisalLadhak,EsinDurmus,PercyLiang,
Kathleen McKeown, and Tatsunori B Hashimoto.
StevenRuggles,SarahFlood,RonaldGoeken,Josiah 2024b. Benchmarking large language models for
Grover,ErinMeyer,JosePacas,andMatthewSobek. news summarization. Transactions of the Associa-
2020. Ipumsusa: version10.0[dataset]. Minneapo- tionforComputationalLinguistics,12:39–57.
lis,Mn: Ipums,10:D010.
David Saxton, Edward Grefenstette, Felix Hill, and
PushmeetKohli.2019. Analysingmathematicalrea-
soning abilities of neural models. arXiv preprint
arXiv:1904.01557.
Uri Shaham, Elad Segal, Maor Ivgi, Avia Efrat, Ori
Yoran,AdiHaviv,AnkitGupta,WenhanXiong,Mor
Geva, Jonathan Berant, et al. 2022. Scrolls: Stan-
dardizedcomparisonoverlonglanguagesequences.
arXivpreprintarXiv:2201.03533.
LiyanTang,ZhaoyiSun,BetinaIdnay,JordanGNestor,
AliSoroush,PierreAElias,ZiyangXu,YingDing,
GregDurrett,JustinFRousseau,etal.2023. Eval-
uatinglargelanguagemodelsonmedicalevidence
summarization. npjDigitalMedicine,6(1):158.
Gemini Team, Rohan Anil, Sebastian Borgeaud,
Yonghui Wu, Jean-Baptiste Alayrac, Jiahui Yu,
Radu Soricut, Johan Schalkwyk, Andrew M Dai,
Anja Hauth, et al. 2023. Gemini: a family of
highlycapablemultimodalmodels. arXivpreprint
arXiv:2312.11805.
Hugo Touvron, Louis Martin, Kevin Stone, Peter Al-
bert, Amjad Almahairi, Yasmine Babaei, Nikolay
Bashlykov,SoumyaBatra,PrajjwalBhargava,Shruti
Bhosale, et al. 2023. Llama 2: Open founda-
tion and fine-tuned chat models. arXiv preprint
arXiv:2307.09288.
AmosTverskyandDanielKahneman.1974. Judgment
underuncertainty: Heuristicsandbiases: Biasesin
judgmentsrevealsomeheuristicsofthinkingunder
uncertainty. science,185(4157):1124–1131.
TaylorWebb,KeithJHolyoak,andHongjingLu.2023.
Emergent analogical reasoning in large language
models. NatureHumanBehaviour,7(9):1526–1541.
BigScience Workshop, Teven Le Scao, Angela Fan,
ChristopherAkiki,ElliePavlick,SuzanaIlic´,Daniel
Hesslow, Roman Castagné, Alexandra Sasha Luc-
cioni,FrançoisYvon,etal.2022. Bloom: A176b-
parameteropen-accessmultilinguallanguagemodel.
arXivpreprintarXiv:2211.05100.
11OverviewofAppendices distributionwithameanof100andastandardde-
viationof10,andweareprovidingthreeshots,the
Theappendixisorganizedasfollows:
randomizedshotsmaybegeneratedfromthreevari-
AppendixAcontainsadditionalexperimentalde-
ant normal distributions with means of 108, 118,
tails related to the usage of idealized distribu-
and112andcorrespondingstandarddeviationsof
tion prompts, examples of idealized distribution
13, 16, and 10. Within distribution shots entail
prompts used in Section 5.1, per task, as well as
shotsfromtheexactsamedistributionthatisbeing
distributiondescriptionexamples,andexamplesof
asked about in a question. The shots are mapped
few-shots.
pershotcounttoallowforareasonablespreadof
AppendixBcontains3x4summaryfigurescorre-
shotsthroughoutthedistribution.
spondingtoidealizeddistributionresultsdescribed
Additionally, for the task of estimating per-
inSection6.1.
centiles,wecomparebothshottypestoabaseline
AppendixCcontainsexamplesofreal-worlddis-
where the LM is asked to pick from one or more
tributionpromptsusedinSection5.2.
shots’answerbasedonthenearestcorresponding
AppendixDcontainsadditionalresultsinvolving
target percentile value. This baseline represents
normalapproximation,andwhetherornotinvok-
a nearest neighbor approach using the set of in-
ingthetruedistributionnamemakesadifference.
context examples. This baseline makes appropri-
Appendix E contains our broader impacts state-
ateuseoftheinformationgiventothemodel,but
ment.
importantlydoesnotperformanyinterpolationbe-
A IdealizedDistribution tween percentiles, which would be required for
strongperformance. IfLMperformanceexceeded
A.1 ExperimentalDetails
baselineperformance,thiswouldsuggestthatLMs
Tosystematicallyinvestigateperformanceonide- performsomekindofinterpolation,insteadofsim-
alizeddistributionsusingthethreeproposedtasks plyrecitingin-contextexamples.
of estimating percentiles, drawing samples, and To avoid biasing our results, in the case of the
calculatingprobabilities,ourmethodinvolvessets estimatingpercentilesandcalculatingprobabilities
of questions, or in the case of drawing samples, tasks,weexplicitlyavoidusingshotsthatinvolve
acommand,thatsystematicallyteststhemodel’s ananswer(percentileorprobabilityrespectively)
knowledge of a given distribution. In addition to that could potentially be an answer to one of our
investigatingourproposedtasksinazero-shotset- proposedquestions. Specifically,weusenth =
shots
ting,weconsidertwodifferentwaysofproviding {5,15,25,35,45,55,65,75,85,95}andP =
shots
in-contextexamples(shots)intheprompt-within {0.05,0.15,0.25,0.35,0.45,0.55,0.65,0.75,0.85,
familyshotsandwithindistributionshots. 0.95}. For example, if we are asking for a per-
Zero-shot Performance. We evaluate the zero- centile of a value in a normal distribution with a
shot performance of four LMs (Gemini 1.0 Ul- mean of 100 and a standard deviation of 10, and
tra,GPT4-Turbo,GPT3.5-Turbo,andLlama3-70B) weareprovidingthreeshots,themappedshotswill
acrossourproposedtasksofestimatingpercentiles, be generated from the same normal distribution
drawingsamples,andcalculatingprobabilitiesin andcorrespondto35.0,55.0,and75.0. Wesample
ordertoevaluateanLM’sunderstandingofproba- Gemini1.0Ultraresponses10timesperquestion
bilisticreasoningofthe12idealizeddistributions with a random seed. We provide further details,
describedinSection4. LMpromptsaregenerated including examples per shot type and shot count,
asformulatedinSection3. inourSection8.
PerformancebyShotType. Weproposetwoshot Key LM Parameters for Reproducibility. Lan-
typesusedacrosstheaforementionedtasks-within guagemodelstypicallyhaveadditionalparameters,
distributionfamilydistributionshotsandwithindis- suchastemperatureandsamplingstrategies,which
tributionshots. Withindistributionfamilydistribu- have default settings that can vary from model
tionshotsentailrandomizedshotsfromadifferent to model. For Gemini 1.0 Ultra, GPT4-Turbo,
variant of the distribution being asked about in a GPT3.5-Turbo, andLlama3-70B,weutilizeade-
question. Thedistributionparametersofthevariant faulttemperatureof0.7forallofourexperiments.
are randomly sampled from a specified range of Wealsoutilizethedefaultsamplingstrategiesavail-
reasonable parameter values. For example, if we ableineachlanguagemodel. Unlessnotedother-
are asking for a percentile of a value in a normal wise,resultsareobtainedusingarandomseed.
12A.2 PromptExamples
PercentileExample
##Youareanexpertonstatistics. Yourtaskistoestimatethepercentileofanumberwithinaspecificdistribution.
Answerwithjustanumericalresponsefrom0to100.Makesureyourfinalanswerisenclosedbyxmltags<answer>
and</answer>.
##Herearesomeexamplestohelpyouunderstandthetask:
{few_shot_examples}
##Considerthefollowingdistribution:
{distribution_description}
##Hereisyourquestion:
Question:
Whatisthepercentileofthevalue{target_number}withintheprovideddistribution?
Answer:
SamplingExample
##Youareanexpertonstatistics.Yourtaskistosampleanumberfromagivendistribution.Donotwriteanycodeor
useanyadditionaltoolstoperformthesampling.Answerwithjustanumericalresponse.Makesureyourfinalanswer
isenclosedbyxmltags<answer>and</answer>.
##Herearesomeexamplestohelpyouunderstandthetask:
{few_shot_examples}
##Considerthefollowingdistribution:
{distribution_description}
##Instruction:Sampleanumberfromthegivendistributionandoutputonlythenumericalvalue.
ProbabilityExample
##Youareanexpertonstatistics.Yourtaskistoestimatetheprobabilityofbeinginarangeofvalueswithinagiven
distribution. Answerwithjustanumericalresponsefrom0to1,representingtheprobability. Makesureyourfinal
answerisenclosedbyxmltags<answer>and</answer>.
##Herearesomeexamplestohelpyouunderstandthetask:
{few_shot_examples}
##Considerthefollowingdistribution:
{distribution_description}
##Hereisyourquestion:
Question:
Consideringonlyvaluesincludingandbetweenthe1stpercentileandthe99thpercentile,whatistheprobabilitythata
valuefromtheprovideddistributionisbetween{lower_target_number}and{upper_target_number}?
Answer:
13A.2.1 DistributionDescriptionExamples
Normal
DistributionType:NormalDistribution
Mean:{mean}
StandardDeviation:{std}
Log-Normal
DistributionType:Log-NormalDistribution
Characteristics:Thisdistributionmodelsvaluesthataretheresultofthemultiplicativeproductofmanyindependentrandomvariables,suchasincomelevels,stockprices,orcity
sizesLogMean(mu):{mean}
LogSigma(sigma):{sigma}
Theseparametersmeanthatthenaturallogarithmofthevaluesfollowsanormaldistributionwiththespecifiedmeanandstandarddeviation.
Exponential
DistributionType:ExponentialDistribution
Characteristics:Modelsthetimebetweeneventsinaprocesswhereeventsoccurcontinuouslyandindependentlyataconstantaveragerate.
Rate:{rate}(Theaveragenumberofeventsperunittimeis{1/rate:.2f}.)
PowerLaw
DistributionType:PowerLawDistribution
Characteristics:Knownforitsheavytailssuitablefordescribingphenomenawithahighincidenceofextremevalues.
Alpha:{alpha}(Controlsthetailheaviness—thesmallerthealpha,thefatterthetail.)
Xmin:{xmin}(Minimumvalueforwhichthepowerlawbehaviorholds.)
Uniform
DistributionType:UniformDistribution
Characteristics:Allvalueswithintheintervalhaveequalprobabilityofoccurring.
Min:{a}(Minimumvalueofthedistribution.)
Max:{b}(Maximumvalueofthedistribution.)
Gamma
DistributionType:GammaDistribution
Characteristics:Usedtomodelwaitingtimesandlifedataamongotherthings.
Shape:{shape}(Controlstheskewnessofthedistribution.)
Scale:{scale}(Controlsthespreadofthedistribution.)
Skew-Normal
DistributionType:Skew-NormalDistribution
Characteristics:Ageneralizationofthenormaldistributiontoaccommodateskewness.
Location:{location}(Shiftsthedistributionalongthex-axis.)
Scale:{scale}(Controlsthespreadofthedistribution.)
Skew:{skew}(Determinesthedirectionanddegreeofskewness.)
Gumbel
DistributionType:GumbelDistribution
Characteristics:Oftenusedtomodelthedistributionofextremevalues.
Location:{loc}(Centersthedistribution.)
Scale:{scale}(Controlsthespreadofthedistribution.)
Poisson
DistributionType:PoissonDistribution
Characteristics:Suitableformodelingthenumberofeventshappeninginafixedintervaloftimeorspace.
Lambda:{lam}(Averagerateofeventsperinterval.)
Geometric
DistributionType:GeometricDistribution
Characteristics:Modelsthenumberoftrialsuntilthefirstsuccess.
ProbabilityofSuccess:{p}
14Binomial
DistributionType:BinomialDistribution
Characteristics:Describesthenumberofsuccessesinafixednumberoftrialswithagivenprobabilityofsuccess.
Trials:{n}(Totalnumberoftrials.)
ProbabilityofSuccess:{p}(Probabilityofsuccessineachtrial.)
Multinomial
DistributionType:MultinomialDistribution
Characteristics:Generalizesthebinomialdistributionforscenarioswhereeachtrialcanresultinmorethantwooutcomes.
Trials:{n}(Totalnumberoftrials.)
Probabilities:{probs}
A.2.2 ExamplesofFew-shots
WithinFamilyShots
Example1:
Distribution:
DistributionType: NormalDistribution
Mean: 80
StandardDeviation: 10
Question:
Whatisthepercentileof74.722withintheprovideddistribution?
Answer:
<answer>30.0</answer>
Example2:
Distribution:
DistributionType: NormalDistribution
Mean: 108
StandardDeviation: 13
Question:
Whatisthepercentileof107.903withintheprovideddistribution?
Answer:
<answer>50.0</answer>
Example3:
Distribution:
DistributionType: NormalDistribution
Mean: 82
StandardDeviation: 8
Question:
Whatisthepercentileof88.708withintheprovideddistribution?
Answer:
<answer>80.0</answer>
15WithinDistributionShots
Example1:
Distribution:
DistributionType: NormalDistribution
Mean: 100
StandardDeviation: 10
Question:
Whatisthepercentileof96.183withintheprovideddistribution?
Answer:
<answer>35.0</answer>
Example2:
Distribution
DistributionType: NormalDistribution
Mean: 100
StandardDeviation: 10
Question:
Whatisthepercentileof101.298withintheprovideddistribution?
Answer:
<answer>55.0</answer>
Example3:
Distribution:
DistributionType: NormalDistribution
Mean: 100
StandardDeviation: 10
Question:
Whatisthepercentileof106.802withintheprovideddistribution?
Answer:
<answer>75.0</answer>
16B IdealizedDistributionsResultsSummaries
You are an expe� on statistics. Your task is to estimate the percentile of a number within a speci�c distribution.
Answer with just a numerical response from 0 to 100. Make sure your �nal answer is enclosed by xml tags <answer> and </answer>.
Consider the following distribution:
\textbf{\{distribution\_description\}}
Here is your question:
Question: What is the percentile of the value \textbf{\{target\_number\}} within the provided distribution?
Answer:
Zero Shot Answer Three Shot Answer Ground-Truth
Figure6: PercentileResults. Zeroandthree-shot(withindistribution)resultsforreturningpercentileestimations
ineachofthe12familiesofdistributions.
17## You arean expe� on statistics. Your task is to sample a number from a given distribution. Do not write any code or use any
additional tools to pe�orm the sampling.
Answer with just a numerical response. Make sure your �nal answer is enclosed by xml tags <answer> and </answer>
## Consider the following distribution:
{distribution_description}
## Instruction: Sample a number from the given distribution and output only the numerical value.
Answer:
Zero Shot Answer Three Shot Answer Ground-Truth
Figure7: SamplingResults. Zeroandthree-shot(withindistribution)resultsfordrawingsamples(singlerepeated
draws)ineachofthe12familiesofdistributions.
18## You arean expe� on statistics. Your task is to estimate the probability of being in a range of values within a given distribution.
Answer with just a numerical response from 0 to 1, representing the probability.
Make sure your �nal answer is enclosed by xml tags <answer> and </answer>.
## Consider the following distribution:
{distribution_description}
## Instruction: Considering only values including and between the 1st percentile and the 99th percentile, what is the probability that
a value from the provided distribution is between {lower_target_number} and {upper_target_number}?
Answer:
Zero Shot Answer Three Shot Answer Ground-Truth
Figure8: ProbabilityResults. Zeroandthree-shot(withindistribution)resultsforcalculatingprobabilitiesineach
ofthe12familiesofdistributions.
19C Real-WorldDistributionPrompts
HealthExample
##Youareanexpertonpopulationhealthandwearablefitnessdevices.Yourtaskistoestimatethepercentileofagiven
averagestepcountvalueforapopulationthatregularlyusesFitbitdevicesandisactiveonadailybasis.Thedatais
filteredforindividualsaged18-65.Thedataisage-balancedandgender-balanced,andpertainstotheU.S.population
only.Donotuseanyadditionaltoolssuchascodegenerationorsearchengines.Answerwithjustanumericalresponse
from0to100.Makesureyouranswerisenclosedbyxmltags<answer>and</answer>.
##Considerthefollowingparametersthatdescribeanormaldistributionofthisdata:
Mean:8366.971
StandardDeviation:3291.940
##Hereisyourquestion:
Question:
Whatisthepercentileoftheaveragestepcountvalue{target_number}stepsforusersofFitbitdevices?Donotuse
anyadditionaltoolssuchascodegenerationorsearchengines.Answerwithjustanumericalresponsefrom0to100.
Makesureyouranswerisenclosedbyxmltags<answer>and</answer>.
Answer:
FinanceExample
##Youareanexpertonfinanceandstatistics. Yourtaskistoestimatethepercentileofagivenannualhousehold
incomewithinthepopulationusingdatafromtheyear2018intheUnitedStates,sourcedfromtheCensusBureau’s
AmericanCommunitySurvey(ACS)PublicUseMicrodataSample(PUMS).Donotuseanyadditionaltoolssuchas
codegenerationorsearchengines.Answerwithjustanumericalresponsefrom0to100.Makesureyouransweris
enclosedbyxmltags<answer>and</answer>.
##ConsiderthefollowingparametersthatdescribeaGumbeldistributionofthisdata:
Mean:66028.713
StandardDeviation:53616.018
##Hereisyourquestion:
Question:
Whatisthepercentileofanannualhouseholdincomevalueof${target_number}?Donotuseanyadditionaltoolssuch
ascodegenerationorsearchengines.Answerwithjustanumericalresponsefrom0to100.Makesureyouransweris
enclosedbyxmltags<answer>and</answer>.
Answer:
ClimateExample
## You are an expert on climate science and statistics. Your task is to estimate the percentile of a given average
temperaturevalueusingdatafromU.S.weatherstationsintheyear2018,sourcedfromtheNationalOceanicand
Atmospheric Administration (NOAA) Global Historical Climatology Network Daily (GHCNd). Do not use any
additionaltoolssuchascodegenerationorsearchengines.Answerwithjustanumericalresponsefrom0to100.Make
sureyouranswerisenclosedbyxmltags<answer>and</answer>.
##Considerthefollowingparametersthatdescribeanormaldistributionofthisdata:
Mean:10.643
StandardDeviation:12.628
##Hereisyourquestion:
Question:
Whatisthepercentileofanaveragetemperatureof{targe_number}degreesCelsius?Donotuseanyadditionaltools
suchascodegenerationorsearchengines. Answerwithjustanumericalresponsefrom0to100. Makesureyour
answerisenclosedbyxmltags<answer>and</answer>.
Answer:
20Additional Comparisons to Normal Approximation
Idealized Baseline (RQ1)
40 Normal Approximation
True Distribution Approximation
30
20
10
0
Normal Log-Normal Exponential Power-Law Uniform
Gam
ma Skew-Normal Gumbel Poisson Geometric Binomial Multinomial
Distribution Type
Figure9: AdditionalNormalApproximationResults. Additionalidealizeddistributionresultscomparingthe
normalapproximationapproachtothebaselinecorrespondingtoidealizedorreal-worlddistributionsandthetrue
distributionapproach.
D AdditionalNormalApproximation
Results
In Figure 9, we additionally present results that
involveavariantofnormalapproximationwhere
the true distribution is assumed with a mean and
standarddeviationasapartoftheprompt. Inthe
caseofidealizeddistributions,weutilizethesame
distributionnamewithprovidedmeanandstandard
deviation. In the case of real-world distributions,
we approximate the distribution based on the K-
S statistic after a matching process across all 12
idealizeddistributionsdescribedinSection4.
E BroaderImpacts
Thoughweposemoreconstrained,systematicques-
tions as a part of our investigation of language
models and their ability to perform probabilistic
reasoning,real-worldquestionssuchas"istaking
8000 steps a day normal for an average adult in
theU.S.populationusingwearabledevices?"and
othersthatweposeasapartofsection4arecom-
pletelyreasonablequestionsforanaverageuserof
LMstoask. Thereisasignificantpracticalimpact
inimprovingtheprobabilisticreasoningcapabili-
tiesoflanguagemodelsonreal-worlddistributions,
especiallywhenanswerstotheaforementionedrea-
sonable questions can affect a user’s perception
ofreal-worlddistributionsandultimatelytheirper-
spectiveonpotentiallycriticalmatterssuchasthose
inthedomainsofhealth,finance,andclimate.
21
)EAM(
rorrE
etulosbA
naeM