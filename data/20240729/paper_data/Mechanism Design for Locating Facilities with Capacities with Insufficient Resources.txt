Mechanism Design for Locating Facilities with
Capacities with Insufficient Resources†
Gennaro Auricchio1*, Harry J. Clough2 and Jie Zhang2
1Department of Mathematics, Universit`a di Padova, Padua, Italy.
2Department of Computer Science, University of Bath, Bath, UK.
*Corresponding author(s). E-mail(s): gennaro.auricchio@unipd.it;
Contributing authors: hc2405@bath.ac.uk; jz2558@bath.ac.uk;
Abstract
ThispaperexplorestheMechanismDesignaspectsofthem-CapacitatedFacility
Location Problem where the total facility capacity is less than the number of
agents.Followingtheframeworkoutlinedin[2],theSocialWelfareofthefacility
locationisdeterminedthroughaFirst-Come-First-Served(FCFS)game,inwhich
agents compete once the facility positions are established. When the number
of facilities is m > 1, the Nash Equilibrium (NE) of the FCFS game is not
unique,makingtheutilityoftheagentsandtheconceptoftruthfulnessunclear.
Totackletheseissues,weconsiderabsolutelytruthfulmechanisms—mechanisms
thatpreventagentsfrommisreportingregardlessofthestrategiesusedduringthe
FCFS game. We combine this stricter truthfulness requirement with the notion
of Equilibrium Stable (ES) mechanisms, which are mechanisms whose Social
WelfaredoesnotdependontheNEoftheFCFSgame.Wedemonstratethatthe
class of percentile mechanisms is absolutely truthful and identify the conditions
under which they are ES. We also show that the approximation ratio of each
ES percentile mechanism is bounded and determine its value. Notably, when all
the facilities have the same capacity and the number of agents is sufficiently
large, it is possible to achieve an approximation ratio smaller than 1+ 1 .
2m−1
Finally,weextendourstudytoencompasshigher-dimensionalproblems.Within
this framework, we demonstrate that the class of ES percentile mechanisms is
even more restricted and characterize the mechanisms that are both ES and
absolutelytruthful.Wefurthersupportourfindingsbyempiricallyevaluatingthe
performanceofthemechanismswhentheagentsarethesamplesofadistribution.
Keywords:FacilityLocation,MechanismDesign,GameTheory,NashEquilibrium
†ApreviousversionofthispaperappearedintheproceedingsofUAI24,[1].Inthisimproved
version, we study the problem in higher dimension and enhance our numerical results.
1
4202
luJ
62
]TG.sc[
1v74581.7042:viXra1 Introduction
The m-Capacitated Facility Location Problem (m-CFLP) extends the m-Facility
Location Problem (m-FLP) by introducing a constraint that bounds the number of
clients the facility can accommodate [3–5]. Both the m-FLP and the m-CFLP are
essentialsubproblemsinvariousapplicationswithinsocialchoicetheory.Theseinclude
areas such as disaster relief [6], where efficient allocation of resources is of critical
importance; supply chain management [7], which focuses on optimizing logistics and
distribution networks; healthcare systems [8], aiming to improve service delivery and
accessibility;clusteringtechniques[9,10],usedindataanalysisandmachinelearning;
andpublicfacilityaccessibility[11],whichenhancescommunityservicesbyeffectively
placing facilities to serve the population. In its fundamental guise, the m-CFLP con-
sistsofdeterminingthelocationofmfacilitiesstartingfromthepositionsofnagents.
Each facility has a capacity limit, which describes the maximum amount of agents it
can serve. While the algorithmic aspects of this problem have been extensively stud-
ied in the literature (see [3]), the mechanism design aspects of the problem have only
recently started to garner the attention of the scientific community. In mechanism
design,theFacilityLocationProblemandthem-CFLParestudiedundertheassump-
tion that each agent incurs a cost to access the facilities. This cost is usually equal
to the distance between the agent and the nearest facility. Consequently, every agent
preferstohaveafacilitylocatedasclosetothemaspossible.Inthiscase,ifeachagent
is in charge of reporting its own position on the line, optimizing a communal goal is
subject to manipulation driven by the agents’ self-interested behaviour. For this rea-
son, a key property that a mechanism should possess is truthfulness, which ensures
that no agent can gain an advantage by misrepresenting their private information.
This stringent property, however, forces the mechanism to produce suboptimal loca-
tions, leading to an efficiency loss which is quantified by the approximation ratio –
thatistheworst-caseratiobetweentheobjectiveachievedbythemechanismandthe
optimal objective attainable [12]. Defining efficient routines that forbid agents from
manipulating is the defining issue of mechanism design.
In this paper, we study the mechanism design aspects of the m-CFLP. In partic-
ular, we focus on the framework presented in [2], and extend it to the case in which
we have m facilities whose total capacity is lower than the number of agents need-
ing accommodation. In this framework, the mechanism designer cannot force agents
to use a specific facility, therefore the agents compete in a First-Come-First-Served
(FCFS)gametodeterminewhoisaccommodatedbythefacilities.Theoverallprocess
thereforeconsistsoftwoparts.First,theagentsreporttheirpositiontoamechanism,
which locates the facilities. Second, the agents compete in the FCFS game to deter-
minetheirutilities.NoticethattheSocialWelfareachievedbythemechanismandthe
utilitiesoftheagentsdependontheNashEquilibria(NE)oftheFCFSgameinduced
by the facilities’ placements. When we need to place a single facility, that is m = 1,
theFCFSgamehasalwaysauniqueNE.Whenm≥2,however,theNEoftheFCFS
game is no longer unique, posing a series of challenges: if the NE is not unique, the
agents’utilities and thustheSocialWelfareachieved byafacility placementhave dif-
ferent values depending on the equilibrium of the FCFS game. As a consequence, the
2approximation ratio also depends on the specific NE. Furthermore, the classic defini-
tion of the truthful mechanism is no longer suitable for this problem as it does not
consider the different strategies that the agents may adopt during the FCFS game.
Addressing these issues are a major challenge for this problem, and thus they were
left as an open problem in [2].
A previous version of this paper appeared in the proceedings of UAI 2024. In this
improved version, we fully characterize the set of feasible percentile mechanisms by
studyingtheAll-In-OneandSide-By-Sidemechanismandextendourstudytohigher
dimensional problems. Furthermore,weenhance our numerical results by adding new
metrics to study how well the best percentile mechanisms perform when the agents
are assumed to be sampled from a probability distribution.
Our Contribution
In this paper, we study the mechanism design aspects of the m-CFLP when the total
capacity of the facilities is less than the number of agents. In particular, we extend
the framework presented in [2] to encompass problems in which there is more than
onecapacitatedfacilitytolocate.First,weshowthat,regardlessofhowwelocatethe
facilities, the FCFS game induced by the location has at least one pure NE. We then
present a notion of truthfulness that accounts for the different strategies the agents
can adopt during the FCFS game, which we name absolute truthfulness. Finally, we
introduce the class of Equilibrium Stable (ES) mechanisms, i.e. mechanisms whose
output induces a FCFS game in which every NE achieves the same Social Welfare.
Withinthis framework, westudy thepercentilemechanisms [13].Weshowthat every
percentile mechanism is absolutely truthful and then fully characterize the set of
conditions under which a percentile mechanism is ES and compute its approximation
ratio.
First, we consider the case m = 2 and show that an absolutely truthful and ES
percentile mechanism exists. In particular, we show that there are three categories of
ES percentile mechanisms: (i) the All-In-One (AIO) mechanisms, which place all the
facilities at the same position, i.e. y = y = x ; (ii) the Side-By-Side (SBS) mecha-
1 2 i
nisms, which places all the facilities at two consecutive agents’ positions, i.e. y =x
1 i
and y =x ; and (iii) the Wide-Gap (WG) mechanisms, which places the facilities
2 i+1
at two well-separated positions, i.e. y = x and y = x where i+1 < j. We then
1 i 2 j
characterize the approximation ratio of a percentile mechanism as a function of the
facilities’ capacities and the vector inducing the percentile mechanism. Consequen-
tially, we determine the best percentile mechanism tailored to the number of agents
n and the capacities of the facilities k and k . We show that the best approximation
1 2
ratio that an ES percentile mechanism placing two facilities can achieve is 4, which
3
occurs when k =k =k and n≥3k. We then consider the case in which m>2. In
1 2
this framework, a percentile mechanism that is ES and places the facilities at more
than two different locations might not exist. However, when all the facilities have the
same capacity and n ≥ (2k−1)m holds, there exists a percentile mechanism whose
approximationratioislessthan1+ 1 .Thisresulthastwointerestingconsequences:
m−1
(i) it shows that, under suitable assumptions, the percentile mechanisms are asymp-
totically optimal with respect to m and (ii) it highlights the differences between the
3m-CFLPandthem-FLP.Indeed,intheclassicframework,anypercentilemechanism
has unbounded approximation ratio whenever m > 2, [14, 15]. We then extend our
study to higher-dimensional problems. We demonstrate that when agents are sup-
ported in a space that has two or more dimensions, the set ES percentile mechanisms
becomesevenmorerestricted.Specifically,apercentilemechanismisESifandonlyif
it places all the facilities at the same location or distributes all the facilities between
two different points. Despite their differences, the worst-case analysis of these two
types of percentile mechanisms yield similar worst-case guarantees.
Lastly,weempiricallystudythebehaviourofthebestpercentilemechanismsunder
theassumptionthattheagentsaredistributedaccordingtoadistributionµ.Wefocus
onthecaseinwhichwehavetwofacilities,sinceitisthecaseinwhichthegapbetween
1andtheapproximationratioofthebestpossiblepercentilemechanismislargest.We
conduct our analysis using two different metrics: the Bayesian approximation ratio,
whichcomparestheexpectedcostofthemechanismandtheexpectedoptimalcost[16]
and the average-case ratio, which measures the average ratio between the mechanism
cost and the optimal cost [17]. From our analysis, we observe that, regardless of the
metric, when the agents follow a distribution, the performances of the ES mechanism
are close to optimal, regardless of the distribution.
Related Work
The Mechanism Design aspects of the m-FLP were firstly studied in [18], where the
authors studied the problem of placing a set of facilities amongst n self-interested
agentswhowanttoafacility locatedascloseaspossibletotheirrealposition.Inthis
pioneering work, the authors studied the problem of placing a facility that minimizes
the sum of all the agents costs. Following this seminal work, various mechanisms
with constant approximation ratios for placing one or two facilities on lines [19],
trees [20, 21], circles [22, 23], general graphs [24, 25], and metric spaces [26, 27] were
introduced. Crucially, all these positive results are limited to scenarios where the
number of agents is restricted or the number of facilities is either 1 or 2 and the
objective is to minimize the total agents costs. For a comprehensive survey of the
mechanism design aspects of the FLP, we refer to [28].
The m-Capacitated Facility Location Problem (m-CFLP) is a variation of the m-
FLP in which each facility has a capacity limit. The first game theoretical framework
for the m-CFLP was presented in [29]. In this paper, the authors studied the case in
which there are at least two facilities whose total capacity is enough to accommodate
all the agents and the mechanism designer has to decide where to place the facilities
andwhichagentcanusethem,sothatthemechanismmustelicitthepositionsandthe
agent-to-facility matching. Following this initial study, in [30] the authors proposed a
more theoretical analysis of the problem, while in [31] it was shown that it is possible
to define deterministic mechanisms with bounded approximation ratio when all the
facilities have the same capacities and the number of agents is equal to the total
capacities of the facilities. Lastly, the m-CFLP has been studied from a Bayesian
mechanism design perspective in [32].
In this paper, we consider an alternative game theoretical framework for the m-
CFLP, firstly introduced in [2]. This framework differs from the one proposed in [29]
4for two main reasons: (i) the total capacity of the facilities is lower than the total
number of agents, thus part of the agents cannot be accommodated and (ii) the
mechanism designer does not enforce an agent-to-facility assignment. Thus, after the
positionsofthefacilitiesareelicited,theagentscompeteinaFirst-Come-First-Served
(FCFS) game to access the facilities. When m = 1, the FCFS game is trivial as the
agentsaccommodatedbythefacilityaretheonesthatareclosertothefacility.When
m > 1, designing mechanisms becomes much more complicated as, for example, the
Nash Equilibrium (NE) of the FCFS game is no longer unique. As a consequence the
utility of every agent depends on the specific NE of the game, making the classic
notion of trustfulness unfit for this framework.
2 Setting Statement
Let ⃗x ∈ [0,1]n be the position of n agents in the interval [0,1]. We denote with
⃗k = (k ,...,k ) the m-dimensional vector containing all the capacities of the m
1 m
facilities, so that k is the maximum number of agents that the j-th facility can
j
accommodate. We assume that the total capacity of the facilities is less than the
number of agents, hence P k < n. In this case, a mechanism is a function
j∈[m] j
M : [0,1]n → Rm that maps a vector containing the agents’ reports to a facility
location ⃗y = (y ,...,y ), where y is the position of the facility with capacity k .
1 m j j
Afterthemechanismplacesthefacilities,agentscompeteinaFirst-Come-First-Served
(FCFS) game to access the facilities.
2.1 First-Come-First-Served Game
Let⃗y =(y ,...,y )beavectorcontainingthepositionofthefacilitiestolocate,that
1 m
is the facility with capacity k is located at y . In what follows, we implicitly assume
j j
that there is an internal ordering of the agents to break ties. Then, given ⃗x ∈ [0,1]n
the vector containing the positions of the n agents on the interval [0,1], the FCFS
game induced by the facility location ⃗y is as follows:
(i) Each agent selects one of the facilities, so that the set of strategies of each agent
is the set [m]:={1,2,...,m}. We denote with ⃗s∈[m]n the vector containing a
set of pure strategies. For every⃗s, we denote with S ⊂[n] the set of agents that
j
selected strategy j.
(ii) Denoted with d = |x −y | the distance of the agent i from the location of
i,j i j
the facility they selected, we define T ⊂ S as the set containing the agents in
j j
S whose value d is in among the k lowest values. Break ties according to the
j i,j j
prefixed priority rule.
(iii) Finally, the utility of agent i is defined as follows
(
1−|x −y | if i∈T
u (⃗x,⃗y;⃗s)= i j j .
i 0 otherwise
First, we show that every FCFS game has at least one pure Nash Equilibrium
(NE).
5Theorem 1 For every ⃗x∈[0,1]n, every ⃗y∈[0,1]m, and every capacity vector⃗k, the FCFS
game associated with ⃗x, ⃗y, and⃗k admits at least one pure Nash Equilibrium.
Proof Let ⃗x be the vector containing the position of the agents and let ⃗y be the position of
the facilities. We denote with k the capacity of the facility located at y for every j ∈[m].
j j
In what follows, we assume that the set of agents has an inner ordering that decides how
to break ties. Let us define D the set containing all the distances agents to facility, that is
D={|x −y |} .
i j i∈[n],j∈[m]
Let⃗c,⃗s∈Rm betwonullvectors,thatisc =s =0foreveryj ∈[m].Wenowconstruct
j j
a Nash Equilibrium through the following iterative routine.
1. Let d be the minimum of the elements in D. Up to a tie, there exist a couple (i ,j )∈
1 1
[n]×[m] such that d = |x −y |. We set c = c +1, s = j , and remove all the
i1 j1 j1 j1 i1 1
elements of the form |x −y | from D. Then, if c = k , we remove from D all the
i1 j j1 j1
elements of the form |x −y |.
i j1
2. We repeat the routine of point (1) until D becomes empty.
3. If s =0 for some i∈[n], we set them to be equal to 1.
i
Since D is discrete, the routine terminates in finite number of iterations and the output
is a vector containing a set of agents’ pure strategies.
We now show that the output of the routine⃗s is a Nash Equilibrium by proving that no
agenticanincreaseitsutilitybydeviatingfromplayings .Towardacontradiction,assume
i
that an agent i can increase its utility by playing s′ rather than s . By definition of s , we
i i i
havethatif|x i−y s′ i|<|x i−ysi|,thenthereareatleastk s′
i
agentsthatareclosertoy s′
i
or
that have a higher priority order than agent i and play strategy s′. Thus the agent cannot
i
gain a benefit from deviating from s , which proves that⃗s is a pure Nash Equilibrium. □
i
When the vector ⃗k is clear from the context, we denote the set of all the pure
Nash Equilibria with NE(⃗x,⃗y). The Social Welfare (SW) of the facility location ⃗y
according to γ ∈ NE(⃗x,⃗y) is defined as the sum of all the agents’ utilities, that is
SW (⃗x,⃗y)=P u (⃗x,⃗y;γ). Notice that when m=1, the Nash Equilibrium of the
γ i∈[n] i
FCFS game is unique, since every agent can play only one strategy, hence the SW
of the game is well defined. This is no longer true when we need to place more than
one facility. In this case, the SW of the game changes depending on the specific Nash
Equilibrium.
Example1 Letusconsiderthecaseinwhichwehave5agentsandneedtoplacetwofacilities
with k =k =2. Let ⃗x:=(0,0.3,0.4,0.5,0.9)∈[0,1]5 be the vector containing the agents’
1 2
positions. If ⃗y = (0.3,0.5), both γ = (1,1,2,2,2) and γ = (1,1,1,2,2) are pure NE of
1 2
the FCFS game. However, the SW of the FCFS game depends on the specific NE, indeed
SWγ1(⃗x,⃗y)=3.6>3.5=SWγ2(⃗x,⃗y). Moreover, the utility the agent located at 0.9 is zero
or 0.6 depending on the equilibrium.
Lastly, we define the optimal SW achievable on the instance ⃗x as
SW (⃗x)= sup sup SW (⃗x,⃗y). (1)
opt γ
⃗y∈[0,1]mγ∈NE(⃗x,⃗y)
6x1 x2 x3 x4 x5
(a) The Nash Equilibrium γ from Example 1.
1
x1 x2 x3 x4 x5
(b) The Nash Equilibrium γ from Example 1.
2
Fig. 1: The two Nash Equilibria described in Example 1. The circles represents the
agents,thegreensquaresthefacilitiesandtheredarrowsthestrategiesplayedbythe
agents getting a non-null utility.
2.2 Mechanism Design Aspects of the problem
A key property that a mechanism M must possess is truthfulness, which ensures
that no agent can increase their utility by misreporting their position. As shown in
Example 1, the utility of an agent depends on the other agents’ strategies. For this
reason, we employ a stronger notion of truthfulness that keeps track of the different
strategies that agents can play in the FCFS game.
Definition 1 A mechanism M is absolutely truthful if no agent increases its utility by mis-
reporting,regardlessofthestrategiesplayedbyotheragents.Moreformally,foreveryagent
i∈[n],⃗x∈[0,1]n, and⃗s ∈[m]n−1, we have
−i
max u (⃗x,M(⃗x);s ,⃗s )≥ max u (⃗x,M(⃗x′);s′,⃗s ),
i i −i i i −i
si∈[m] s′ i∈[m]
where (i)⃗x′ =(x′,⃗x ) for every x′ ∈[0,1], (ii)⃗x and⃗s , are the vectors containing the
i −i i −i −i
positions and strategies of the other n−1 agents, respectively.
In general, the FCFS game induced by the output of a mechanism has multiple
NE, hence the SW of the mechanism is not unique. For this reason, we introduce the
notion of Equilibrium Stable mechanism.
Definition 2 An absolutely truthful mechanism M is said Equilibrium Stable (ES) if, for
every⃗x, we have that
SW(⃗x,M(⃗x);γ)=SW(⃗x,M(⃗x);γ′)
for every Nash Equilibria γ,γ′ ∈NE(⃗x,M(⃗x)).
An absolutely truthful mechanism is not necessarily ES. For example, consider
the mechanism that places the facilities at (0.3,0.5) regardless of the agents’ reports.
7No agent can manipulate the outcome of the mechanism by changing their reports,
however,goingbacktoExample1,wehavethatthemechanisminducestwoNEwith
differentSWontheinstance(0,0.3,0.4,0.5,0.9).Finally,sinceweareconsideringthe
utilities of the agents, we define the approximation ratio of an ES mechanism as the
worst-case ratio of the optimal SW and the SW achieved by the mechanism.
Definition 3 Let M be an absolutely truthful and ES mechanism. We define the approxi-
mation ratio of M as
SWopt(⃗x)
ar(M)= sup ,
SW (⃗x)
⃗x∈[0,1]n M
where SW
M
is the SW value achieved by M on any of the NE in NE(⃗x,M(⃗x)) and SWopt
is defined in (1).
3 Absolutely Truthful and Equilibrium Stable
Mechanisms to place more than one facility
In this section, we study the class of percentile mechanisms and characterize under
which conditions a percentile mechanism is absolutely truthful and ES.
Definition 4 (PercentileMechanism,[13]) Givenapercentilevector⃗v∈[0,1]m,theroutine
of the percentile vector associated with ⃗v, namely PM , is as follows: (i) The mechanism
⃗v
designercollectsallthereportsoftheagents{x 1,x 2,...,xn}andsortstheminnon-decreas-
ingorder,sothatx ≤x .(ii)Themechanismthenplacesthemfacilitiesatthepositions
i i+1
y =x , where i =⌊(n−1)v ⌋+1 for every j ∈[m].
j ij j j
All percentile mechanisms are absolutely truthful.
Theorem 2 PM is absolutely truthful for every⃗v.
⃗v
Proof Toward a contradiction, let PM be a percentile vector such that, on instance ⃗x ∈
⃗v
[0,1]m, the agent whose real position is x can manipulate by reporting x′ ∈[0,1]. Let ⃗y be
i i
the output of PM in the truthful input and let ⃗y′ be the output of PM after the agent
⃗v ⃗v
manipulation. If x′ ≤x , we have that the position of the facilities that PM places on the
i i ⃗v
left of x move further to the left of x . Each facility that was placed by PM on the right
i i ⃗v
of x does not change position. Thus it holds |x −y |≤|x −y′| for every j ∈[m]. Finally,
i i j i j
let ⃗s ∈ [m]n−1 be a vector containing the strategies of the other agents and let us define
−i
with F (⃗z) ⊂ [m] the set of strategies that give a non-null utility to the agent at x when
i i
the facilities are located at ⃗z. Since |x −y | ≤ |x −y′| for every j ∈ [m], we have that
i j i j
F (⃗y′)⊂F (⃗y). To conclude, notice that for every s ∈F (⃗y′) the utility of the manipulative
i i i i
agentdecreases,asallthedistancesfromthefacilitieshaveincreasedafterthemanipulation,
which concludes the proof. □
Unfortunately, not every percentile mechanism is ES: consider the situation rep-
resented in Example 1: the position of the facilities are the output of the PM with
⃗v
8⃗v = (0.25,0.75), however, different NE induce different SW values. In what follows,
wecharacterizethesetofpercentilemechanismsthatareESandstudytheirapproxi-
mationratio.Owingtothischaracterization,weidentifytheESpercentilemechanism
withthelowestapproximationratio.Forthesakeofsimplicity,westartourdiscussion
from the case in which m=2.
3.1 Mechanisms to Place Two Facilities
First,westudythecaseinwhichweplacetwofacilities.Wedenotewithk andk the
1 2
capacitiesofthetwofacilitiesandassumethatk +k <n.Withoutlossofgenerality,
1 2
letk ≥k .WeshowthateachESpercentilemechanismbelongtooneofthefollowing
1 2
three categories: (i) the All-In-One (AIO) mechanisms, that place all the facilities at
the same spot, that is y = y ; (ii) the Side-By-Side (SBS) mechanisms, that places
1 2
thefacilitiesattwoadjacentpositions,thatisy =x andy =x wherei∈[n−1];
1 i 2 i+1
and (iii) the Wide-Gap (WG) mechanism, which places the facilities at two agents
positionsthatarewell-separated,i.e.y =x andy =x wherei+1<j.Noticethat
1 i 2 j
each percentile mechanism belongs to exactly one of these three sub-classes, making
the partition complete.
We start from the Wide-Gap mechanisms, as they are the more interesting class
of ES percentile mechanisms.
3.1.1 Wide-Gap mechanisms
First, we show that for every k and k , there exists at least a WG percentile mecha-
1 2
nism that is ES. Moreover, for every k and k , we compute the approximation ratio
1 2
of every ES percentile mechanism and characterize the mechanism achieving the low-
est approximation ratio. Notice that by definition of WG mechanisms, and without
loss of generality, we assume that v <v . Thus the facility with the highest capacity
1 2
is always located on the left of the less capacious facility. The case in which v < v
2 1
is symmetric and thus it does not need to be considered.
Theorem 3 Let ⃗v = (v ,v ) ∈ [0,1]2 be a percentile vector and let PM be its associated
1 2 ⃗v
percentile mechanism. Let k ,k ∈ N and let n ∈ N be such that k +k < n and ⌊v (n−
1 2 1 2 2
1)⌋−⌊v (n−1)⌋>1. Then, we have that PM is ES if and only if
1 ⃗v
⌊v (n−1)⌋−⌊v (n−1)⌋≥k +k −1. (2)
2 1 2 1
Proof First, we show that condition (2) is sufficient to make a percentile mechanism ES.
If ⃗v satisfies (2), there are always k +k agents such that y ≤ x ≤ y , where y and
1 2 1 i 2 1
y are the two facility locations returned by the mechanism. Notice that if y = y , then
2 1 2
the two facilities share the position with k +k agents, hence the SW of any NE is equal
1 2
to k +k . Assume now that y < y . Let us then define r the minimal values such that
1 2 1 2 j
Brj(y j)∩{x i}
i∈[n]
has cardinality larger or equal to k j∗. Since there are at least k 1+k
2
agentsin[y ,y ],wehavethatr +r ≤|y −y |.AccordingtoeveryNE,agentsthatdonot
1 2 1 2 1 2
belongtoeitherBr1(y 1)orBr2(y 2)haveutilityequalto0.Indeed,if⃗s∈NE(⃗x,PM ⃗v(⃗c))is
∗HereBr(y)denotestheballcenteredinyofradiusr.
9suchthatx
i
∈/ Br1(y 1)∩Br2(y 2)getsaccommodatedbyy 1,wewouldhavethatatleastone
agentx
j
∈Br1(y 1)hasnullutility,hences
j
=2.However,ifagentx
j
canincreaseitsutility
by changing its strategy to s =1, hence⃗s∈/ NE(⃗x,PM (⃗x)), which is a contradiction. By
j ⃗v
thesameargument,weinferthateveryagentx ∈(y −r ,y +r )attainsutility1−|x −y |
i j j j j i j
according to every NE. Finally, we observe that the set of agents such that |x −y | = r
i j j
that have non null utility may change according to the specific NE, but the total utility of
these agents does not change. Thus condition (2) is sufficient to ensure PM is ES.
⃗v
Lastly, we show that the condition is necessary. Let us assume that ⃗v does not satisfy
the condition (2). For the sake of simplicity, let us denote with i = ⌊v (n−1)⌋+1 and
1 1
i =⌊v (n−1)⌋+1. Let us consider the following instance x =···=x =0, x =0.4,
2 2 1 i1−1 i1
x = ··· = x = 0.5, x = 0.6 and x = 0.9 for all the other indexes j > i . Notice
i1+1 i2−1 i2 j 2
that,since⌊v (n−1)⌋−⌊v (n−1)⌋>1,thereisatleastoneagentlocatedat0.5.Following
2 1
the same argument used in Example 1, we can show that, depending on the strategy played
by the agents at 0.5, the Social Welfare of the mechanism changes. □
Next,wecharacterizetheapproximationratioofeveryWGpercentilemechanism.
Given a percentile vector ⃗v ∈ [0,1]2 that satisfies condition (2), we denote with i =
1
⌊v (n−1)⌋+1 and i = ⌊v (n−1)⌋+1. Therefore that the mechanism places the
1 2 2
facility with capacity k at x and the facility with capacity k at x .
1 i1 2 i2
Theorem 4 Given n, k , and k , let PM an ES percentile mechanism. Then, if i ≥
1 2 ⃗v 1
⌊k1+1⌋, we have that
2
k +k
ar(PM )= 1 2 (3)
⃗v min{k +(n−i )+1,k1+1 +k }
1 2 2 2
If i <⌊k1+1⌋ and i <n−⌊k2+1⌋, we have
1 2 2 2
k +k
ar(PM )= 1 2 .
⃗v min{k +(n−i )+1,i +k }
1 2 1 2
Otherwise, we have
k +k
ar(PM )= 1 2 .
⃗v min{k + k2+1,k +i }
1 2 2 1
Proof Our argument is as follows: we show that the worst instance for the mechanism is
either (i) x = 0 if i ∈ {1,...,i −1}, x = 1, and x = 1 otherwise, or (ii) x = 0 if
i 1 i1 2 i i
i∈{1,...,i −1}andx =1otherwise.Noticethatinbothcases,theoptimalSWisequalto
2 i
k +k ,whichisthemaximumSWattainable.Letusshowthattheworst-caseinstancehas
1 2
theformdescribedin(i)or(ii).OwingtoTheorem3,wehavethatthereareatleastk +k
1 2
agents in the interval [y ,y ], hence the agents that are accommodated by the facility at y
1 2 j
are,uptoties,thek agentsthatareclosertoy .Sincei ≥⌊k1+1⌋,thetotalutilityofthe
j j 1 2
agentaccommodatedbythefacilityaty isminimizedwhenalltheagentsaccommodatedby
1
y areallatthesamedistancefromy ,thatis|x −y |=|x −y |.Givenλ∈[0,1],let
1 1 i1−1 1 i1+1 1 2
usconsiderthefollowinginstance:x =···=x =0,x =λ,x =···=x =2λ.
1 i1−1 i1 i1+1 i2−1
Letusnowconsiderthefacilitylocatedaty .Bythesameargument,wehavethatifn−i
2 2
is larger than ⌊k2+1⌋, then, for every λ, the position y that minimizes the utility is 1 +λ.
2 2 2
Inthiscase,thecostofthemechanismis2+(1−λ)(k −1)+(1+λ)(k −1).Sincek ≥k ,
1 2 2 1 2
we have that the minimum SW is achieved when λ= 1, thus all the agents on the right of
2
10x are located at 1, all the agents on the left are located at 0 and x = 1. In this case
i1 i1 2
SW PM⃗v(⃗x)= k1 2+1+k 2,whileSWopt(⃗x)=k 1+k 2,whichisthemaximumutilityachievable
and is attained by placing both facilities at 1. Consider now the case n−i < ⌊k2+1⌋. In
2 2
this case, for every λ, the worst position for y is 1, hence the SW of the mechanism is
2
n−i +2+(1−λ)(k −1)+2λ(k −n+i −1),thereforetheSWisminimizedwhenλ=0
2 1 2 2
or λ= 1. In particular, we have that worst Social Welfare attainable by the mechanism is
2
1
min{n−i +k +1), (k +1)+k )}.
2 1 1 2
2
Since SWopt(⃗x)=k 1+k 2, we conclude the first part of the proof.
We now consider the case in which i < ⌊k1+1⌋. First, we consider the case in which
1 2
i < n−⌊k2+1⌋. By the same argument used to prove the case in which i ≥ ⌊k1+1⌋, we
2 2 1 2
have that the worst-case instance in this case is

x =0 if i=1,...,i ,
 i 1
x i = x i =λ if i=i 1+1,...,i 2−1,

x =1 otherwise.
i
for some λ ∈ [0,1], since the SW of the mechanism is minimized when the i -th and i -th
1 2
agents are at the extremes of the interval. For any value of λ, the SW of the mechanism is
SW(⃗x)=i +(n−i )+(1−λ)(k −i )+λ(k −(n−i )).
1 2 1 1 2 2
Since SW(⃗x) is linear in λ, we have that the minimum is achieved at either λ=0 or λ=1.
Thus the minimal SW achievable is
min{k +(n−i ),k +i }.
1 2 2 1
Since in both cases we have that the optimal SW is k +k , we conclude the thesis.
1 2
Lastly,weconsiderthecaseinwhichn−i ≥⌊k2+1⌋andi <⌊k1+1⌋.Inthiscase,the
2 2 1 2
worst-caseinstanceplacesthefirsti agentsat0,thereforetheinstancesweneedtoconsider
1
are

x =0 if i=1,...,i ,
xi
=λ if i=i
+1,1
...,i −1,
i 1 2
x =
i x = λ+1
 i2 2
x =1 otherwise.
i
The SW induced by the mechanism is then
1+λ
SW(⃗x)=i +1+(1−λ)(k −i )+ (k −1).
1 1 1 2
2
Again,sincetheSWislinearinλ,wehavethattheminimiumisattainedateitherλ=0or
λ=1. Then the minimum SW achievable by the mechanism is
n (k +1) o
min k + 2 ,k +i .
1 2 1
2
Toconcludenoticethatinbothcases,theSWattainedbytheoptimalsolutionisk +k . □
1 2
Consequentially, we characterize the best ES percentile mechanisms given any
2-dimensional vector ⃗k. In particular, we show that the approximation of the best
percentile mechanism decreases as ∆:=n−(k +k ) increases.
1 2
Theorem 5 Given n and⃗k, let us define ∆=n−(k +k ), then we have that the ES WG
1 2
percentilemechanismthatachievesthelowestapproximationratioisinducedbythepercentile
vector⃗v=(i1,i2), where i and i are as follows
n n 1 2
11(i) i =⌈k1⌉ and i =n−⌊k2⌋ if ∆≥⌈k1+k2⌉, in which case ar(PM )= k1+k2 ,
1 2 2 2 2 ⃗v k1 2+1 +k2
(ii) i =k −k +αandi =n−α,whereα=⌈∆−(k1−k2)⌉,ifk −k ≤∆≤⌊k1+k2⌋+1,
1 1 2 2 2 1 2 2
in which case ar(PM )= k1+k2, and
⃗v i1+k2
(iii) i =∆+1 and i =n otherwise, in which case ar(PM )= k1+k2 .
1 2 ⃗v ∆+k2+1
Proof When∆≥⌈k1+k2⌉,theindexesi =⌈k1⌉andi =n−⌊k2⌋arewelldefined.Owing
2 1 2 2 2
toTheorem3andbydefinitionof∆,wehavethatPM isES.Finally,fromTheorem4,we
⃗v
infer that
k +k
ar(PM )= 1 2 ,
⃗v k1+1 +k
2 2
which is the smallest approximation ratio achievable by an ES WG percentile mechanism.
Let us consider the case (ii), that is k −k ≤ ∆ ≤ ⌊k1+k2⌋+1. Owing to Theorem 4,
1 2 2
we retrieve the best values i and i by maximizing the quantity
1 2
min{k +(n−i ),i +k }.
1 2 1 2
Thus, we look for i and i such that
1 2
k +(n−i )=i +k ,
1 2 1 2
subject to the constraint
n−i +i =∆,
2 1
since, owing to Theorem 2, k + k agents must lay between x and x . By a simple
1 2 i1 i2
computation, we have that
k −k +∆
n−i = 2 1 ,
2
2
thus i = ∆−(k2−k1) = k −k + ∆−(k2−k1) and i = n− k2−k1+∆, which concludes the
1 2 1 2 2 2 2
proof of case (ii).
Lastly, we consider case (iii). In this case, we have that ∆<k −k , thus we have
1 2
k +i −k −(n−i )=i −n+i +k −k ≤∆+k −k <0,
2 1 1 2 2 1 2 1 2 1
since i −n+i < n−i +i ≤ ∆. Thus the minimum SW attainable by the mechanism
2 1 2 1
is i +k , therefore, to maximize the minimum achievable SW, we need to set i = ∆ and
1 2 1
i =n, which concludes the proof. □
2
Notice that the lowest approximation ratio is achieved when ∆≥⌈k1+k2⌉. More-
2
over, notice that the smaller the gap between k and k , that is k −k , the lower
1 2 1 2
the approximation ratio of the best percentile mechanism. In particular, the lowest
approximation ratio is attained when k =k and n≥3k, in which case there exists
1 2
a percentile mechanism whose approximation ratio is 4 ∼ 4.
3+1 3
k
3.1.2 The All-In-One and Side-By-Side mechanisms
We conclude our study by considering the AIO and the SBS mechanisms. Unlike
the WG mechanisms, each AIO and SBS is ES. We consider the AIO mechanisms
first. Since all the AIO mechanisms place the facilities at the same position, every
NashEquilibriuminducedbythefacilityplacementachievesthesameSocialWelfare.
Moreover, it is easy to see that the best AIO mechanism places the both the facilities
at the median agent. Indeed, we have the following.
12Theorem6 ThebestAIOmechanismplacesallthefacilitiesatthemedianagent.Moreover,
denoted with M the mechanism that places both facility at the median agent, we have that
 2k k2 1+ +2 k⌊ 2n 2 +⌋ 1+1 if k
1
≥⌈n 2⌉
ar(M)= (4)
2(k2+k1)
otherwise.
k1+k2+1
Proof We prove this theorem as it follows: first, we compute the approximation ratio of a
generic AIO mechanism and then show that the approximation ratio is minimized when the
AIO mechanism places both facility at a median agent. Let then M be an AIO mechanism
such that y
1
=y
2
=xr where r∈[n]. Without loss of generality, we assume r≤⌊n+ 21⌋.
We notice that, given an instance⃗x, it is possible to increase the optimal Social Welfare
and decrease the Social Welfare of the mechanism by moving all the agents that are not
the r-th agent to either 0 or 1. We therefore restrict our attention to instances such that
x
1
=···=x
r−1
=0, xr =λ∈[0,1], and x
j
=1 otherwise. Since we have that r≤⌊n 2⌋, we
have that the worst-case instance happens when λ∈[0,1], thus the Social Welfare achieved
2
by the mechanism can be computed explicitly
SW (⃗x)=1+(1−λ)min{r−1,k +k −1}+λ(k +k −min{k +k ,r}).
M 1 2 1 2 1 2
TocompletetheproofweneedtocomputetheoptimalSWachievableontheseinstances.
Sincer≤⌊n⌋andk ≥k ,wehavethattheoptimalsolutioneitherplacesthetwofacilities
2 1 2
at 1, in which case the SW is equal to
SW =min{n−r+λ,k +k },
opt,1 1 2
or places the facility with capacity k at 0 and the facility with capacity k at 1, in which
2 1
case the optimal SW is equal to
SW =min{r−λ,k }+min{n−r+λ,k }.
opt,2 2 1
So that SWopt =max{SW opt,1,SW opt,2} and hence
( (cid:8) (cid:9))
max min{n−r+λ,k +k },min{r−λ,k }+min{n−r+λ,k }
1 2 2 1
ar(M)= max .
λ∈[0,1] 1+(1−λ)min{r−1,k 1+k 2−1}+λ(k 1+k 2−min{k 1+k 2,r})
2
We notice that this quantity is minimized when r = ⌈n⌉, which proves that the best AIO
2
mechanism is the one placing all the facilities at the median agent.
Letusnowcomputetheapproximationratioofthemedianmechanism,thatisr=⌈n⌉.
2
Moreover, since SWopt ≥ SW M, k
1
≥ k 1, and both SW
M
and SWopt are piecewise linear
functions with respect to λ, we have that the maximum defining ar(M) is attained when
wither λ=0 or 1. We then conclude that
2
( max(cid:8) min{⌊n⌋+λ,k +k },k +min{⌊n⌋+λ,k }(cid:9) )
ar(M)= max 2 1 2 2 2 1 ,
λ∈{0,1 2} λ+(1−λ)min{⌊n 2⌋,k 1+k 2}+λ(k 1+k 2−min{k 1+k 2,⌈n 2⌉})
whereweusedthefactthatk ≤⌈n⌉.Whichallowsustoconclude(4)andthustheproof. □
2 2
We then consider the SBS mechanisms. As for the AIO mechanisms, every SBS
mechanism is ES.
Theorem 7 Each SBS mechanism is ES.
13Proof LetPM beanSBSpercentilemechanismandletibetheparametersuchthaty =x
1 i
and y =x . Without loss of generality, we assume that the facility at y has capacity k
2 i+1 1 1
and that the facility at y has capacity k . Let ⃗x be the vector containing the reports of n
2 2
agents, we now show that every NE equilibrium induced by placing the facilities at y =x
1 i
and y = x achieves the same SW. Notice that if y = y , there is nothing to prove, we
2 i+1 1 2
then consider the case in which y <y .
1 2
Let us now define
A :={x ≤y } and A :={x ≥y }. (5)
1 i 1 1 i 2
NoticethatA ∪A ={x } andA ∩A =∅.Bydefinition,everyagentinA isstrictly
1 2 i i∈[n] 1 2 1
closer to y and every agent in A is strictly closer in y . We have three cases: (i) |A |≤k
1 2 2 1 1
and |A |≤k ; (ii) |A |>k and |A |≤k ; and (iii) |A |≤k and |A |>k .
2 2 1 1 2 2 1 1 2 2
Case(i):Inthiscase,wehavethatineveryNE,theagentsgettingaccesstothefacilities
are, up to breaking ties, the k rightmost agents in A and the k leftmost agents in A . In
1 1 2 2
particular the SW remains constant across all the possible Nash Equilibria.
Case(ii):Inthiscase,wehavethatineveryNE,theagentsgettingaccesstothefacilities
are, up to breaking ties, the a := |A | agents in A and the k +k −a leftmost agents
1 1 1 2 1 1
in A . Notice that, up to ties, the k leftmost agents in A are served by the facility at y ,
2 2 2 2
while the other k −a are served by the facility y . In particular the SW remains constant
1 2 1
across all the possible Nash Equilibria.
Case (iii): This case follows from an argument similar to the one used to handle Case
(ii). Thus we conclude the proof. □
Lastly, we notice that the approximation ratio of any SBS mechanism can be
obtained by following the same argument used to prove Theorem 6. Indeed, it is
easy to see that the worst-case instance of the SBS places the two facilities at the
same position, i.e. y =y , as otherwise it would be possible to increase the ratio by
1 2
overlapping the two facilities. For this reason, the worst-case guarantees of the SBS
mechanisms are similar to the worst-case guarantees of the AIO mechanisms, hence
the SBS mechanism that achieves the lowest approximation ratio is the one placing
facilities at x ⌊n 2⌋ and x ⌊n+ 21⌋.
3.2 Beyond two facilities
We now extend our study to the case in which we want to place m>2 facilities. For
the sake of simplicity, we consider m facilities that have the same capacity k. The
techniques used in this section can be easily extended to the case in which facilities
have different capacities. Notice that, in this case, any percentile mechanism needs to
be endowed with a permutation to specify how to assign the different capacities to
the positions returned by the mechanism [29, 32].
First, we extend Theorem 3 to this framework.
Theorem 8 Let k be the capacity of m facilities. Moreover, let⃗v be a percentile vector such
that v
1
< v
2
< ··· < vm so that ⃗v does not possess two equal entries and let PM
⃗v
be its
associated percentile mechanism. Assume that ⌊v (n−1)⌋−⌊v (n−1)⌋ > 1 for every
j+1 j
14j ∈[m−1]. Then PM is ES if and only if the following system of inequalities is satisfied
⃗v

⌊v (n−1)⌋−⌊v (n−1)⌋≥2k−1
 2 1
... . (6)

⌊vm(n−1)⌋−⌊v m−1(n−1)⌋≥2k−1
Proof TheprooffollowsbythesameargumentusedtoproveTheorem3.Indeed,bycondition
(6) for every j ∈[m] we have that at least 2k agents are located between y and y , thus
j j+1
theSocialWelfaregeneratedbythefacilitiesaty andy doesnotdependonthespecific
j j+1
Nash Equilibrium. To conclude the proof, it suffices to apply this argument to each couple
of facilities (y ,y ). □
j j+1
The set of inequalities (6) allows us to characterize the vectors ⃗v that induces an
ES percentile mechanism PM depending on the capacity k. Notice that system (6)
⃗v
does not admit any solution when k > n+m or, equivalently, n<(2k−1)m. Indeed,
2m
by summing all the inequalities in (6), we have that
⌊v (n−1)⌋−⌊v (n−1)⌋≥(2k−1)m.
m 1
Sincen≥⌊v (n−1)⌋−⌊v (n−1)⌋,wemusthavethatn≥(2k−1)m.Althoughwhen
m 1
n < (2k−1)m it is impossible to define an ES percentile mechanism that places m
facilities at m different locations, it is possible to define an ES percentile mechanism
that places all the facilities at one or two different locations. To keep the discussion
on track, we first study the case in which system (6) admits a solution and defer the
pathological case to a dedicated section.
3.3 Case n ≥ (2k − 1)m.
Inthiscase,itispossibletoselectanESandabsolutelytruthfulpercentilemechanism
that places the m facilities at m different positions among the agents’ reports.
Theorem 9 If k< n+m, then given an ES PM , we have
2m ⃗v
(
ar(PM ⃗v)= (m−m 1 2k )k+ m1 2
k
ifi 1,n o− thi em rw≥ ise⌊k+ 21⌋
(m−1)k+min{i1,n−im}
where i
1
=⌊v 1(n−1)⌋+1 and im =⌊vm(n−1)⌋+1.
Proof Thecaseinwhichi 1,n−im ≥⌊k+ 21⌋followsbythesameargumentadoptedintheproof
ofTheorem4.Indeed,bydefinitionofthemechanism,theSWofthemechanismisminimized
when each facility y = x is such that |y −x | = |y −x |.
j ⌊vj(n−1)⌋+1 j ⌊vj(n−1)⌋ j ⌊vj(n−1)⌋+2
HencethemechanismachievestheminimalSWwhenx = 2j−1 foreveryj ∈[m]
⌊vj(n−1)⌋+1 2m
and x = l if ⌊v (n−1)⌋+1 < i < ⌊v (n−1)⌋+1 where l = 0,1,...,m, v = 0 and
i m l l+1 0
v =1.OnsuchinstancetheSWofthemechanismis(m−1)k+1.Noticethemechanism
m+1 2 2
achievesthesameSWontheinstance⃗x definedas(x ) =0foreveryi≤⌊v (n−1)⌋+1,
O O i 1
and(x ) =1otherwise.Toconclude,weobservethattheoptimalSWoninstance⃗x ismk.
O i O
15Toconcludetheproof,weneedtoconsiderthecaseinwhicheitheri
1
orn−im arelower
than ⌊k+1⌋.
2
Sincetheothercaseissymmetric,werestrictouranalysistothecaseinwhichi ≤n−i .
1 2
Again, since i 1,n−im ≤ ⌊k+ 21⌋, we have that the worst-case instance places the first i
1
agents at 0 and the last n−im+1 at 1. Since every facility has the same capacity, we have
that the worst-case instance has the following form

0 if i=1,...,i ,
δδ
δ
11
1
++ 21 2−
1(
2−mδ (m1 δ−−
1
−−2δ
)
22
δ )2
if
i if
f
i
i
i=
=
=i
i1
i2
2+
,
+1,
1.1
,. .. ., .i
,2
i
3− −1,
1,
x i = δ 1+31 2− (mδ1 −− 2δ )2 if i=i 3,
δ
.
11
.
−.+ δ4 21 2− (mδ1 −− 2δ )2 ifif i=i=
i
mi
3
−+ 1+1, 1. ,. .. ., .i
,4
i− m1 −,
1,
1 otherwise
where δ ,δ ≥0 and such that δ +δ ≤1. The SW of the mechanism on this instance is
1 2 1 2
m X−2(cid:18) (cid:16)m−3+δ +δ (cid:17)(cid:19)
SW(⃗x)=i +(n−i )+m−2+(k−i )(1−δ )+ (k−1) 1 2
1 2 1 1
m−2
i=2
+(k−(n−im))(1−δ 2).
Again, this quantity is linear in δ and δ , thus it is minimized when δ ,δ ∈ {0,1} By
1 2 1 2
plugging in the possible combinations, we infer that the minimum is achieved when δ = 1
1
and δ
2
=0 since i
1
≤n−im. □
Inparticular,foreverygiventhecapacityk andnumberoffacilitym,itispossible
to detect the best possible ES and absolutely truthful percentile mechanism.
Theorem 10 Given k, m, and n, let us define α = ⌊(n−2k(m−1)+1)⌋. The vector ⃗v where
2
v = α+(2k−1)(j−1) for j ∈[m] induces the ES percentile mechanism with the lowest approx-
j n
imation ratio. In particular, if n ≥ 2km, the approximation ratio of PM is less than
⃗v
1+ 1 .
2m−1
Proof Owingto Theorem 9,theapproximationratiois lowerwhenmin{i 1,n−im}ismaxi-
mized, thus when i
1
=n−im. Thus the best mechanism places the first and last facility at
x
ℓ
andx n−ℓ,whereℓisasuitableinteger.Sincei 1+n−im =n−2k(m−1)+1,wecomplete
the first half of the proof.
Notice that, if i
1
or im is less than ⌊k+ 21⌋, then we have that min{i 1,im}≤⌊k+ 21⌋. By
(cid:16) (cid:17)
comparing the Social Welfare computed in the Theorem 9, we have that m− 1 k+ 1 ≥
2 2
(m−1)k+min{i 1,im}, indeed
(cid:16) 1(cid:17) 1 k 1 k+1
m− k+ −(m−1)k−min{i 1,im}≥ + −⌊ ⌋≥0,
2 2 2 2 2
thustheapproximationratioofthemechanismissmallerwheni 1,im ≥⌊k+ 21⌋.Moreover,in
this case, the approximation ratio does not depend on the specific⃗v, thus any ES percentile
16mechanism whose⃗v is such that i 1,im ≥⌊k+ 21⌋ achieves the minimum approximation ratio.
Notice that, by definition, the vector ⃗v where v = α+(2k−1)(j−1) for j ∈ [m] where α =
j n
⌊(n−2k(m 2−1)+1)⌋ is such that i 1,im ≥⌊k+ 21⌋. Moreover, owing to Theorem 2, it is also ES,
hence it achieves the minimal approximation ratio.
Lastly, notice that
mk mk (m− 1)k+ k 1
≤ = 2 2 =1+ ,
(m− 1)k+ 1 (m− 1)k (m− 1)k 2m−1
2 2 2 2
which concludes the proof. □
Noticethat,ifn≥2km,theapproximationratioofthebestpercentilemechanism
decreases as the number of facilities increases. Noticeably, when m goes to infinity,
the approximation ratio goes to 1.
3.4 Case n < (2k − 1)m.
WenowconsiderthecaseinwhichthenumberofagentistoosmallandthusTheorem
8 does not hold. In this case, it is possible to circumvent Theorem 8, by considering
an percentile mechanism that places all the facilities at either one or two locations,
thatisthepercentilemechanismswhoseassociatedvector⃗v hasatmosttwodifferent
entries. When more than one facility is placed at the same location, we considered
them as a unique facility whose capacity is the sum of all the facilities placed at the
common location. Notice that it is sufficient to consider the case in which facilities
are divided between at most two points. Indeed, splitting the facilities between three
or more positions leads to another unfeasible system of the form (6).
Owing to the results of Section 3.1, we have that there are only three ways in
which the facilities can be grouped.
3.4.1 The All-aside mechanisms
When the mechanism places the facilities at two different locations, we can use the
resultsproposedinSection3.1.Indeed,owingtoTheorem5,weknowthattheapprox-
imation ratio becomes lower as the difference in capacity between facilities is smaller.
Forthisreason,weconsideramechanismthatsplitsthefacilitiesasevenlyaspossible.
Mechanism 1 (All-aside mechanism). Let k be the capacity of m facilities and
let a,b ∈ N be such that a+2mk ≤ b ≤ n. Given in input a vector ⃗x ∈ [0,1]n, the
All-aside mechanism associated with a and b, namely AS , places ⌈m⌉ facilities at
a,b 2
x and ⌊m⌋ facilities at x .
a 2 b
Owing to Theorem 3, the All-aside mechanism is absolutely truthful and ES.
Moreover, we can extend Theorem 4 to this case.
Theorem11 TheapproximationratioofeveryAS isdeterminedbyTheorem4bysetting
a,b
k =⌈m⌉k, k =⌊m⌋k, i =a, and i =b.
1 2 2 2 1 2
17Proof It follows directly from Theorem 4. Indeed, it suffices to prove that even if we have
m facilities to locate, the optimal SW we can obtain by locating m facilities with capacity
l is the same as locating two facilities with capacity ⌈m⌉k and ⌊m⌋k. Since the worst-case
2 2
instanceofanyPM with⃗v∈[0,1]2 placesi agents0andtheothersat1,theoptimalSW
⃗v 1
remains mk even though we locate m facilities separately. □
3.4.2 The AIO and SBS mechanisms
Lastly, we consider the case in which the mechanism places all the facilities at one
place, hence the percentile vector ⃗v = (v,v,...,v) for a v ∈ [0,1]. In this case, every
⃗v = (v,v,...,v) induces an absolutely truthful and ES mechanism. By the same
argument used to prove Theorem 6, the best percentile mechanism places all the
facilitiesatthemedianagent,thatism⃗ =(0.5,0.5,...,0.5).Inourcase,however,the
approximation ratio guarantees are worse than the one presented in [2]. Indeed, since
inourcasethecapacitycanbesplitatmdifferentlocations,theoptimalsolutionhas
afurtherdegreeoffreedomthatheightenstheapproximationratioofthemechanism.
Theorem 12 Let k > 1 be the capacity of the facilities and fix ⃗v = (0.5,...,0.5). If n ≤
(m+1)k, we have that
2(m−1)k+(n−(m−1)k)+1
ar(PM )= .
⃗v mk+1
Otherwise, ar(PM )= 2mk =2− 2 .
⃗v mk+1 mk+1
Proof Bydefinition,wehavethatforeveryinput⃗x∈[0,1]n thefacilityisplacedatx ⌊n+1⌋.
2
Thenumberofagentsontheleftofy andthenumberofagentsontherightofy isthesame,
1 1
hence the SW of the mechanism is minimized when x i = 0 when i < ⌊n+ 21⌋, x ⌊n+1⌋ = 1 2,
2
and x =1 otherwise. The SW of the mechanism is mk+1.
i 2
If n≤(m+1)k, the optimal SW on the instance is (m−1)k+ n−(m−1)k + 1. Indeed,
2 2
we can locate m−1 facilities at either 0 or 1 that only accommodate the agents at 0 and 1.
Thetotalcombinedutilityoftheagentsaccommodatedbythesem−1facilitiesis(m−1)k.
Since the agents are divided evenly among 0 and 1, the maximum utility attainable by
the last facility is at most n−(m−1)k + 1. Therefore the total utility of the optimal SW is
2 2
(m−1)k+ n−(m−1)k + 1.
2 2
If n > (m+1)k, the optimal SW on this instance is mk, and it is attained when ⌊m⌋
2
facilities are placed at 0 and the others at 1. To conclude the thesis it suffices to take the
ratio of the optimal SW and the SW of the mechanism. □
Remark1 Noticethatthehighestapproximationratiooccurswhenn=km+1,inwhichcase
ar(PM )=2− k .Thus,asthenumberoffacilitiesincreases,weattainanapproximation
⃗v mk+1
ratio that converges to 2
.
Lastly, we observe that Side-By-Side mechanisms can be generalized to this case.
It suffices to distribute all facilities between the positions of two consecutive agents.
18Asforthecasewherem=2,theworst-caseanalysisofthesemechanismsisconducted
in a similar manner to the AIO mechanisms, yielding comparable results.
4 The Higher Dimensional Problem
In this section, we extend our study to higher dimensional settings. We recall that
an m-dimensional percentile mechanism is defined by a d times m matrix V =
(v(1),v(2),...,v(d)), where each row vector v(j) = (v(j),v(j),...,v(j)) ∈ [0,1]m lies
1 2 m
within the unit cube. Given a the agents’ reports ⃗x, the percentile mechanism asso-
ciated with V determines the k-th facility’s location by selecting, for each dimension
j ≤ d, the v(j)-th percentile of the ordered projection of ⃗x on the j-th dimension to
k
be the coordinate of k-th facility in that dimension. More formally, we have that
y(j) =(z(1) ,z(2) ,...,z(d) ),
⌊v(1)
(n−1)⌋+1
⌊v(2)
(n−1)⌋+1
⌊v(d)
(n−1)⌋+1
j j j
where z(l) is the vector containing the projections of the agents positions on the
l-coordinatesre-orderedincreasingly.Tosummarize,ad-dimensionalpercentilemech-
anism determines the coordinates of the facilities by running d percentile mechanism
along each coordinate. We call the percentile mechanism determining the j-th
coordinates of the m facilities the j-th coordinate percentile mechanism.
In what follows, we extend our framework to higher-dimensional problems and
demonstrate that most of the previously presented results do not generalize to this
setting.Thisremainstrueevenwhenweneedtolocateonlytwofacilitiesamongagents
supported in a bidimensional space. For this reason and for the sake of simplicity, we
limitourdiscussiontothecasewheretwofacilitiesneedtobelocated,andeachagent
position is a point in the unit cube [0,1]2.
4.1 The Setting
Let ⃗x ∈ ([0,1]2)n be the bi-dimensional vector containing the position of n agents in
the interval [0,1]2, so that ⃗x=(x(1),...,x(n)), where x(i) =(x(i),x(i))∈[0,1]2 is the
1 i
vector containing the coordinates of the i-th agent. We denote with ⃗k = (k ,k ) the
1 2
2-dimensional vector containing all the capacities of the 2 facilities, and assume that
k +k <n. In this case, a mechanism is a function M :([0,1]2)n →(R2)2 that maps
1 2
a vector containing the agents’ reports to a facility location ⃗y = (y(1),y(2)), where
y(j) ∈R2 is the position of the facility with capacity k .
j
As for the one dimensional case, once the facilities are located, agents compete
in a First-Come-First-Served (FCFS) to determine their utilities. The FCFS game is
defined as in Section 2, with the only difference being that the distance between an
agent located at ⃗x(i) and a facility located at ⃗y(j) is
q
d(⃗x(i),⃗y(j))= (cid:0) x(i)−y(j)(cid:1)2+(cid:0) x(i)−y(j)(cid:1)2 ,
1 1 2 2
√
so that the utility of every agent is either 0 or 2−d(⃗x(i),⃗y(j)) depending on the
outcome of the FCFS game. It is then easy to see that the construction used to prove
19Theorem1triviallyextendstothiscase,sothatapureNashEquilibriumtotheFCFS
game always exists. Lastly, given a Nash Equilibrium, namely γ, we define the Social
Welfare associated with γ as the sum of all the agent’s utilities according to γ.
4.2 The Equilibrium Stable Mechanisms
We now discuss under which conditions a percentile mechanism is ES in the higher
dimensional framework. First of all, we notice that every ES percentile mechanism
M must be such that each Coordinate Percentile Mechanism (CPM) is ES. Indeed,
if the first CPM was not ES, it means that there exists a one dimensional instance
⃗x = (x ,...,x ) whose Nash Equilibria induce different Social Welfare values. It
1 n
is then easy to see that the percentile mechanism M is not ES by considering the
instance{x(i) =(x ,0)} .Unfortunately,assumingthateachcoordinatepercentile
i i∈[n]
mechanism is ES does not guarantee that the percentile mechanism is ES in higher
dimensions. In particular, enforcing Theorem 9 to each coordinate percentile mecha-
nismisnotenoughtocharacterizealltheESpercentilemechanismswhend>2.Asthe
next example shows, percentile mechanisms whose coordinate percentile mechanisms
are SBS or WG mechanisms no longer ensure that the mechanism is ES.
Example 2 Let us consider a problem in which we have 10 agents, that is n = 10, and two
facilities with capacity 2, that is k = k = 2. Let us consider the percentile mechanism
1 2
induced by v(1) = v(2) = (0.4,0.5), so that both the coordinate percentile mechanisms are
SBS mechanisms. In what follows, we denote this mechanism with PM. Let us consider the
following instance x =x =x =(0,0), x =(0.4,0.4), x =(0.4,0.5), x =(0.5,0.5), and
1 2 3 4 5 6
x =···=x =(0.8,0.8),sothatPMplacesthefacilitiesat(0.4,0.4)and(0.5,0.5).Notice
7 10
that,dependingonwhatstrategytheagentat(0.4,0.5)plays,theSocialWelfareinducedby
the percentile mechanism changes.
Example 2, can be extended to handle any percentile mechanism whose coordi-
nates are either SBS or WG. Indeed, the only percentile mechanisms that are ES for
higher dimensional problem must determine one of the two coordinates using an AIO
mechanism. In particular, we now show that any percentile mechanism whose CPMs
are two AIO mechanisms or AIO mechanism an SBS mechanism are ES.
Theorem13 ApercentilemechanismsisESifandonlyifallitsCPMsareAIOmechanisms
or all the CPMs but one are AIO mechanisms. In the latter case, the CPM that is not an
AIO mechanism must be a SBS mechanism.
Proof If a percentile mechanism uses two AIO mechanisms to determine the coordinates of
thefacilities,wehavethatthemechanismsplacesallthefacilitiesatthesamespot,thusthe
mechanism is trivially ES.
Let us consider the other case, in which one coordinate is determined via an AIO mech-
anism and the other one by an SBS mechanism. Without loss of generality, let us assume
that the first coordinate is determined by the SBS, so that both the facilities have the same
20xj xj
x6 x7 x6 x7
x5 x5
xl xl
Fig. 2: The two Nash Equilibria described in Example 2. The circles represents the
agents (agents from 1 to 4 are represented by x while agents from 8 to 10 are repre-
l
sentedbyx ),thegreensquaresthefacilitiesandtheredarrowsthestrategiesplayed
j
by the agents getting a non-null utility in the two different Nash Equilibria.
(1) (2)
second coordinate, i.e. y =y . Let us define the following sets
2 2
A =(cid:8) x(i) s.t.x(i) ≤y(1)(cid:9) and A =(cid:8) x(i) s.t.x(i) ≥y(2)(cid:9) . (7)
1 1 1 2 1 1
From our assumptions, we have that A ∪A ={x(i)} and A ∩A =∅. By definition
1 2 i∈[n] 1 2
ofA andA ,wehavethateveryagentinA prefersy(1) toy(2).Vice-versa,everyagentin
1 2 1
A prefersy(2) toy(1).Wecanthenconcludetheproofbyusingthesameargumentusedto
2
prove Theorem 7. □
Lastly, we show that a mechanism determining the facilities using an AIO and a
WG mechanism is not ES.
Example3 Letusconsideraninstanceforn=10,k =k =2,andthepercentilemechanism
1 2
induced by the vectors v(1) = (0,0.3) and v(2) = (0,0). Owing to Theorem 3, we have
that each coordinate percentile mechanism is ES, however the global percentile mechanism
is not. Indeed, let us consider the following instance x =(0,0), x =(0.2,0), x =(0.2,1),
1 2 3
x =(0.4,0),andx =···=x =(0.7,0).Thepercentilemechanismplacesthefacilitiesat
4 5 10
(0,0) and at (0.4,0). This facility location induces two Nash Equilibria, one in which agent
x plays 1 and one in which agent x plays 2. When agent x plays 1, we have that one of
3 3 3 √
the agents located at (0.5,0) is accommodated by y , thus the Social Welfare is 2(3.5). If
2
agentx plays2,oneoftheagentslocatedat(0.7,0)isaccommodatebythefacilityy ,thus
3 √ 1
the Social Welfare is 2(3.1). We then conclude that the percentile mechanism is not ES.
Lastly, we characterize the approximation ratio of the ES percentile mechanism
thatdeterminesthecoordinatesofbothfacilitiesusingthemedianmechanism.Indeed,
by a similar argument used in Theorem 6, we have that the percentile mechanism
inducedbyV =((0.5,0.5),(0.5,0.5))achievesthelowestapproximationratioamongst
all the possible ES higher dimensional percentile mechanisms.
21x3 x3
x1 x2 x4 xj x1 x2 x4 xj
Fig. 3: The two Nash Equilibria described in Example 3. The circles represents the
agents (agents from 5 to 10 are represented by x ), the green squares the facilities
j
and the red arrows the strategies played by the agents getting a non-null utility in
the two different Nash Equilibria.
Theorem 14 Let M be the percentile mechanism whose coordinate percentile mechanisms
are median mechanisms, then we have that
√ √ √
2 2 1 2
ar(M)= √ − √ √ ≤ √ , (8)
2−1 2−1( 2−1)(k +k )+1 2−1
1 2
if k ,k ≤⌊n⌋ and
1 2 2 √ √
2(k +⌊n⌋)+ 2−1
ar(M)= √ 2 2 , (9)
( 2−1)(k +k )+1
1 2
otherwise.
Proof Letusconsideraninstance⃗x=(x(1),...,x(n))∈([0,1]2)n.Forthesakeofsimplicity,
we assume n to be odd, so that the median along each coordinate is uniquely determined.
Since all the coordinate percentile mechanisms of mechanism M are AIO, the output of
the mechanisms places both the facilities at the same location, which we denote with y =
(y ,y ) ∈ [0,2]2. Without loss of generality, let us assume that 0 < y ,y < 1 and that at
1 2 1 2
most one agent is located at y. We then have that the set [0,1]2 is divided into four regions
A = {x ∈ [0,1]2 s.t. x ≤ y , x ≤ y }, A = {x ∈ [0,1]2 s.t. x ≤ y , x > y },
1 1 1 2 2 2 1 1 2 2
A = {x ∈ [0,1]2 s.t. x > y , x ≤ y }, and A = {x ∈ [0,1]2 s.t. x > y , x > y }
3 1 1 2 2 4 1 1 2 2
(see Figure 4). We denote with A the set containing the agents positions in A , that is
i i
A ={x(j) s.t.x(j) ∈A }. By definition of M, we have that |A |+|A |=|A |+|A | and
i i 1 3 2 4
|A |+|A |=|A |+|A |, which implies |A |=|A | and |A |=|A |.
1 2 3 4 2 3 1 4
Letusnowassumethat|A |=|A |=0,sothatalltheagentsarelocatedinA andA .
2 3 1 4
Since the number of agents is odd, we then have that the worst-case instance is such that
⌊n⌋ agents are located at (0,0), ⌊n⌋ agents are located at (1,1) and one agent is located at
2 2
y=(y ,y ).Noticethatify +y ̸=1,wecanincreasetheapproximationratiobymovingthe
1 2 1 2
facility(andtheagentsharingthepositionwithit)toapointofthelinex +x =1.Finally,
1 2
22A2 A4
y
A1 A3
Fig. 4: The way A , A , A , and A partition of [0,1]2 in Theorem 14.
1 2 3 4
we have that the approximation ratio is maximized when either y = (1,0) or y = (0,1).
Notice that if either |A |,|A |̸=0, we can find an instance such that the Social Welfare of
2 3
the mechanism is the same while the optimal Social Welfare is equal or larger than the SW
of the original instance. Therefore, the worst-case instance for mechanism M is such that
⌊n⌋agentsarelocatedat(0,0),⌊n⌋agentsarelocatedat(1,1),andoneagentislocatedat
2 2 √
(0,1).NoticethattheSWinducedbythemechanismonthisinstanceis( 2−1)(k +k )+1.
1 2
Toconcludetheproofwecomputetheapproximationratioofthemechanism,todothatwe
consider two cases.
Case 1: k ,k ≤⌊n⌋.Inthiscase,theoptimalSWisequaltok +k ,thusweinfer(8).
2 1 2 1 2 √
Case 2: k >⌊n⌋.Inthiscase,theoptimalSWisequaltok +⌊n⌋+( 2−1),thuswe
1 2 1 2
infer (9) and conclude the thesis. □
4.3 Beyond m = 2 and d = 2
To conclude, we briefly comment on the cases in which either we have more than two
facilitiestolocate,i.e.m>2,ortheagentsinhabitaspacewhosedimensionishigher
than 2, i.e. d>2.
For higher dimensional problems, it is possible to adapt Example 2 and Example
3 to show that the only percentile mechanisms that are ES must be such that d−1
coordinatesofthemechanismsareAIOmechanismsandthelastoneiseitheranAIO
mechanism or an SBS mechanism.
Whenm>2,wehavethattheresultspresentedinthissectionstillhold:theonly
percentile mechanisms that are ES either place all the facilities at the same spot or
theyplacethetwofacilitiesattwopositionswhosecoordinatedifferonlyinoneentry.
Inthefirstcase,wehavethatthecoordinatesofthepercentilemechanismareallAIO
23mechanisms, in the second case, the coordinates of the mechanism are all AIO except
for one coordinate which is an SBS.
5 Experimental Results
In this section, we complement our theoretical study of the m-CFLP with scarce
resourcesbyrunningseveralnumericalexperiments.Inparticular,wewanttoevaluate
the performances of the percentile mechanisms identified by Theorem 5 when the
inputs of the mechanisms are generated by a probability distribution. To this extent,
we consider two different metrics to assess the efficiency of a mechanism.
The first metric we consider is the Bayesian approximation ratio, which measures
how close the expected SW induced by the mechanism and the expected optimal SW
are when the agents’ positions are samples drawn from a probability distribution µ,
[33]. More formally, the Bayesian approximation of PM is
⃗v
E [SW (X⃗)]
B (PM ):= X⃗∼µ opt , (10)
ar ⃗v E [SW (X⃗)]
X⃗∼µ PM⃗v
where X⃗ is a n dimensional random vector distributed according to µ.
The second metric we consider is the Average-Case approximation ratio, which
measurestheaverageratiobetweentheoptimalSocialWelfareandtheSocialWelfare
induced by the mechanism when the agents’ positions are samples drawn from a
probability distribution µ, [17]. More formally, the Average-Case approximation ratio
is defined as
h SW (⃗x) i
AVG (PM )=E opt . (11)
ar ⃗v X∼µ SW (⃗x)
PM⃗v
ItisworthyofnoticethattheBayesianapproximationratioB andtheAverage-
ar
Case approximation ratio AVG are two different measures: B measures the
ar ar
percentage-loss of the Social Welfare, while the AVG measures the average Social
ar
Welfare percentage-loss.
Our aim is to show that percentile mechanisms that are optimal according to the
worst-case analysis, namely PM (see Theorem 5), are optimal or quasi-optimal
best
with respect to both the Bayesian approximation ratio and the Average-Case ratio.
For this reason, we run two tests:
• first,weassesstowhatextenttheBayesianapproximationratioandtheAverage-
Case ratio depend on the percentile vector inducing the percentile mechanism
when all the agents are independent and identically distributed (i.i.d.). In par-
ticular, we compare PM with PM , that is the percentile mechanism
best (0,1)
induced by⃗v =(0,1).
• Secondly, we assess the Bayesian approximation ratio and Average-Case ratio
of PM when diverse agents within the populations follow distinct distribu-
best
tions.ThisexaminationhelpsdeterminethesuitabilityofPM foraddressing
best
problems involving non-identically distributed agents.
Werunourexperimentsfordifferentdistributionsµanddifferentcapacityvectors
⃗kinordertoprovideacomprehensiveview.Moreover,sincethehighestapproximation
24ratio is attained when m = 2, we only consider cases in which we need to place two
facilities.
Throughout our experiments, we sample the agents’ positions from three different
probability distributions supported over [0,1]: (i) the uniform distribution, namely
U whose density is equal to 1 over a [0,1], (ii) the triangular distributions, namely
T, whose density is equal to 2(1−x) over a [0,1], and (iii) the Beta distributions
of parameters α,β > 0, namely B(α,β) whose density is equal to Cxα−1(1−x)β−1
overa[0,1],whereC isanormalizingconstant.Weconsiderdifferentcapacityvectors
⃗k. Specifically, we consider balanced capacities ⃗k = (k,k) and unbalanced capacities
⃗k =(k ,k ),k >k . For the case of balanced capacities, we consider k =αn, where
1 2 1 2
α = 0.1,0.2,0.3, and 0.4. For the case of unbalanced capacities, we consider the
slightly unbalanced capacities i.e. ⃗k = (0.4n,0.3n), and highly unbalanced capacities
i.e.⃗k =(0.6n,0.2n), (0.7n,0.1n). Lastly, for every instance ⃗x, we do not compute the
optimalSW,butratheranupperboundtothatquantity.Indeed,theoptimalposition
ofthefacilitiescanbeanycoupleofpointsin[0,1].Furthermore,toselecttheoptimal
facility location we must compute all the NE of every possible facility location and
select the one achieving the highest SW. For these reasons, we consider an easier to
compute upper bound that is obtained by considering the maximum SW achievable
when the mechanism forces agents to use a specific facility, that is
X X
SW (⃗x):= sup sup (1−|x −y |)π (12)
UB i j i,j
y1,y2∈[0,1]π∈Π
i∈[nu]j∈[2]
where Π is the set containing all the matching π ⊂[n]×[2] such that (i) every i∈[n]
has degree that is equal or lower than 1 and (ii) every j ∈ [2] has degree equal to
k . This quantity is easy to compute, as the set of optimal positions for the facilities
j
coincides with the positions of the agents.
5.1 Experiment results – Comparing different percentile
mechanisms.
In this experiment we want to assess to what degree the percentile vector affects the
performancesofthepercentilemechanismsitinduces.Forthisreason,wecomparethe
empiric Bayesian approximation ratio and the Average-Case approximation ratio of
thebestpercentilemechanismPM (identifiedviaTheorem5),withtherespective
best
ratios of a mechanism that places the facilities at the extreme agents’ positions. That
is, the percentile mechanism induced by the vector w⃗ =(0,1), namely PM .
(0,1)
We first consider the case of balanced capacities ⃗k = (k,k). Figure 5 shows the
average and the 95% confidence interval (CI) of Bayesian approximation ratio for
n=10,20,30,40,50whentheagentsaredistributedaccordingtoU andT.InFigure
6weplottheresultsfortheAverage-CaseRatiounderthesamesettings.Eachaverage
is computed over 500 instances. We observe that the percentile mechanism identified
in Theorem 5 achieves the a Bayesian approximation ratio that is lower than the one
obtainedbyPM foreveryvalueofn.Moreover,theBayesianapproximationratio
(0,1)
ofPM consistentlyincreasesasthenumberofagentsincreases,whiletheBayesian
(0,1)
25=0.2 =0.3 =0.4
1.30 1.30 1.30
ESP (0, 1) ESP (0, 1) ESP (0, 1)
ESP (Best) ESP (Best) ESP (Best)
1.25 1.25 1.25
1.20 1.20 1.20
1.15 1.15 1.15
1.10 1.10 1.10
1.05 1.05 1.05
1.00 1.00 1.00
10 20 30 40 50 10 20 30 40 50 10 20 30 40 50
Number of Agents Number of Agents Number of Agents
=0.2 =0.3 =0.4
1.30 1.30 1.30
ESP (0, 1) ESP (0, 1) ESP (0, 1)
ESP (Best) ESP (Best) ESP (Best)
1.25 1.25 1.25
1.20 1.20 1.20
1.15 1.15 1.15
1.10 1.10 1.10
1.05 1.05 1.05
1.00 1.00 1.00
10 20 30 40 50 10 20 30 40 50 10 20 30 40 50
Number of Agents Number of Agents Number of Agents
=0.2 =0.3 =0.4
1.30 1.30 1.30
ESP (0, 1) ESP (0, 1) ESP (0, 1)
ESP (Best) ESP (Best) ESP (Best)
1.25 1.25 1.25
1.20 1.20 1.20
1.15 1.15 1.15
1.10 1.10 1.10
1.05 1.05 1.05
1.00 1.00 1.00
10 20 30 40 50 10 20 30 40 50 10 20 30 40 50
Number of Agents Number of Agents Number of Agents
Fig. 5:TheBayesianapproximationratioofPM andPM inthebalancedcase,
best w⃗
i.e. k = k for n = 10,20,...,50. Every column contains the results for different
1 2
vector ⃗k. In the first row, we consider a uniform distribution. In the second row a
symmetric Beta, that is B(5,5). The third row contains the results for the triangular
distribution T.
approximation ratio of PM remains constant regardless of n. Remarkably, these
best
comments hold true even for th Average-Case approximation ratio, showing that the
best percentile mechanism is quasi-optimal for both the metrics under study.
Wenowconsiderthecaseinwhichthefacilitieshavedifferencecapacities.Figure7
shows the average and the 95% confidence interval (CI) of Bayesian approximation
ratioforn=10,20,30,40,50whenthecapacitiesofthetwofacilitiesarenotbalanced,
and the agents are distributed according to T. In Figure 8 we plot the results for
26
oitaR
noitamixorppA
naiseyaB
oitaR
noitamixorppA
naiseyaB
oitaR
noitamixorppA
naiseyaB
oitaR
noitamixorppA
naiseyaB
oitaR
noitamixorppA
naiseyaB
oitaR
noitamixorppA
naiseyaB
oitaR
noitamixorppA
naiseyaB
oitaR
noitamixorppA
naiseyaB
oitaR
noitamixorppA
naiseyaB=0.2 =0.3 =0.4
1.30 1.30 1.30
ESP (Worst) ESP (Worst) ESP (Worst)
ESP (Best) ESP (Best) ESP (Best)
1.25 1.25 1.25
1.20 1.20 1.20
1.15 1.15 1.15
1.10 1.10 1.10
1.05 1.05 1.05
1.00 1.00 1.00
10 20 30 40 50 10 20 30 40 50 10 20 30 40 50
Number of Agents Number of Agents Number of Agents
=0.2 =0.3 =0.4
1.30 1.30 1.30
ESP (Worst) ESP (Worst) ESP (Worst)
ESP (Best) ESP (Best) ESP (Best)
1.25 1.25 1.25
1.20 1.20 1.20
1.15 1.15 1.15
1.10 1.10 1.10
1.05 1.05 1.05
1.00 1.00 1.00
10 20 30 40 50 10 20 30 40 50 10 20 30 40 50
Number of Agents Number of Agents Number of Agents
=0.2 =0.3 =0.4
1.30 1.30 1.30
ESP (Worst) ESP (Worst) ESP (Worst)
ESP (Best) ESP (Best) ESP (Best)
1.25 1.25 1.25
1.20 1.20 1.20
1.15 1.15 1.15
1.10 1.10 1.10
1.05 1.05 1.05
1.00 1.00 1.00
10 20 30 40 50 10 20 30 40 50 10 20 30 40 50
Number of Agents Number of Agents Number of Agents
Fig. 6: The Average-Case approximation ratio of PM and PM in the balanced
best w⃗
case,i.e.k =k forn=10,20,...,50.Everycolumncontainstheresultsfordifferent
1 2
vector ⃗k. In the first row, we consider a uniform distribution. In the second row a
symmetric Beta, that is B(5,5). The third row contains the results for the triangular
distribution T.
the Average-Case Ratio under the same settings. More specifically, we consider ⃗k =
(0.4n,0.3n) and (0.7n,0.1n). We observe that the percentile mechanism identified by
Theorem 5 has a lower and more stable Bayesian approximation ratio, highlighting
how choosing a percentile vector affects the average performances of the mechanism.
The same holds for the Average-Case approxiamtion ratio.
27
oitaR
esaC-egarevA
oitaR
esaC-egarevA
oitaR
esaC-egarevA
oitaR
esaC-egarevA
oitaR
esaC-egarevA
oitaR
esaC-egarevA
oitaR
esaC-egarevA
oitaR
esaC-egarevA
oitaR
esaC-egarevA=(0.4,0.3) =(0.6,0.2) =(0.7,0.1)
1.30 1.30 1.30
ESP (0, 1) ESP (0, 1) ESP (0, 1)
ESP (Best) ESP (Best) ESP (Best)
1.25 1.25 1.25
1.20 1.20 1.20
1.15 1.15 1.15
1.10 1.10 1.10
1.05 1.05 1.05
1.00 1.00 1.00
10 20 30 40 50 10 20 30 40 50 10 20 30 40 50
Number of Agents Number of Agents Number of Agents
=(0.4,0.3) =(0.6,0.2) =(0.7,0.1)
1.30 1.30 1.30
ESP (0, 1) ESP (0, 1) ESP (0, 1)
ESP (Best) ESP (Best) ESP (Best)
1.25 1.25 1.25
1.20 1.20 1.20
1.15 1.15 1.15
1.10 1.10 1.10
1.05 1.05 1.05
1.00 1.00 1.00
10 20 30 40 50 10 20 30 40 50 10 20 30 40 50
Number of Agents Number of Agents Number of Agents
=(0.4,0.3) =(0.6,0.2) =(0.7,0.1)
1.30 1.30 1.30
ESP (0, 1) ESP (0, 1) ESP (0, 1)
ESP (Best) ESP (Best) ESP (Best)
1.25 1.25 1.25
1.20 1.20 1.20
1.15 1.15 1.15
1.10 1.10 1.10
1.05 1.05 1.05
1.00 1.00 1.00
10 20 30 40 50 10 20 30 40 50 10 20 30 40 50
Number of Agents Number of Agents Number of Agents
Fig. 7: The Bayesian approximation ratio of PM and PM when the agents are
best w⃗
distributedaccordingtoT andthefacilitiesareunbalanced,i.e.k =α n̸=k =α n
1 1 2 2
for n = 10,20,...,50. Every column contains the results for different vector ⃗k. The
first row contains the results for a symmetric Beta distribution, that is B(5,5). The
secondrowcontainstheresultsforthetriangulardistributionT.Thelastrowcontains
the results for the Uniform distribution U.
5.2 Experiment results – Bayesian approximation ratio for
non i.d. populations.
Inthistest,weempiricallyevaluatetheBayesianapproximationratioofthepercentile
mechanisms identified by Theorem 5 when agents are not identically distributed. In
particular, we consider the case in which each agent of the population is distributed
according to U, T, and B(5,5). Every instance is identified by the percentages of
agents following each distributions, hence we set Λ = (λ U,λ B,λ T), where λ
U
= n nU,
28
oitaR
noitamixorppA
naiseyaB
oitaR
noitamixorppA
naiseyaB
oitaR
noitamixorppA
naiseyaB
oitaR
noitamixorppA
naiseyaB
oitaR
noitamixorppA
naiseyaB
oitaR
noitamixorppA
naiseyaB
oitaR
noitamixorppA
naiseyaB
oitaR
noitamixorppA
naiseyaB
oitaR
noitamixorppA
naiseyaB=(0.4,0.3) =(0.6,0.2) =(0.7,0.1)
1.30 1.30 1.30
ESP (Worst) ESP (Worst) ESP (Worst)
ESP (Best) ESP (Best) ESP (Best)
1.25 1.25 1.25
1.20 1.20 1.20
1.15 1.15 1.15
1.10 1.10 1.10
1.05 1.05 1.05
1.00 1.00 1.00
10 20 30 40 50 10 20 30 40 50 10 20 30 40 50
Number of Agents Number of Agents Number of Agents
=(0.4,0.3) =(0.6,0.2) =(0.7,0.1)
1.30 1.30 1.30
ESP (Worst) ESP (Worst) ESP (Worst)
ESP (Best) ESP (Best) ESP (Best)
1.25 1.25 1.25
1.20 1.20 1.20
1.15 1.15 1.15
1.10 1.10 1.10
1.05 1.05 1.05
1.00 1.00 1.00
10 20 30 40 50 10 20 30 40 50 10 20 30 40 50
Number of Agents Number of Agents Number of Agents
=(0.4,0.3) =(0.6,0.2) =(0.7,0.1)
1.30 1.30 1.30
ESP (Worst) ESP (Worst) ESP (Worst)
ESP (Best) ESP (Best) ESP (Best)
1.25 1.25 1.25
1.20 1.20 1.20
1.15 1.15 1.15
1.10 1.10 1.10
1.05 1.05 1.05
1.00 1.00 1.00
10 20 30 40 50 10 20 30 40 50 10 20 30 40 50
Number of Agents Number of Agents Number of Agents
Fig. 8:TheAverage-CaseapproximationratioofPM andPM whentheagents
best w⃗
are distributed according to T and the facilities are unbalanced, i.e. k =α n̸=k =
1 1 2
α n for n = 10,20,...,50. Every column contains the results for different vector ⃗k.
2
The first row contains the results for a symmetric Beta distribution, that is B(5,5).
The second row contains the results for the triangular distribution T. The last row
contains the results for the Uniform distribution U.
λ
B
= n nB, and λ
T
= n nT, n is the total number of agents, and n U, n B, and n
T
are the number of agents following the uniform, Beta, and Triangular distribution,
respectively.
In Figure 9, we report our results for different vectors Λ. We consider the case in
whichthecapacitiesofthefacilitiesarebalanced,thatk =k =⌊αn⌋,whereα=0.1,
1 2
0.2,and0.3.Fromourexperimentsweobservethatthepercentilemechanismachieves
analmostoptimalBayesianapproximationratio(peakingat1.01),thatitisconstant
29
oitaR
esaC-egarevA
oitaR
esaC-egarevA
oitaR
esaC-egarevA
oitaR
esaC-egarevA
oitaR
esaC-egarevA
oitaR
esaC-egarevA
oitaR
esaC-egarevA
oitaR
esaC-egarevA
oitaR
esaC-egarevA=(0.1,0.3,0.6) =(0.2,0.5,0.3) =(0.3,0.4,0.3)
1.014
1.012 1.012
1.012
1.010 1.010
1.010
1.008 1.008
1.008
1.006 1.006 1.006
1.004 1.004 1.004
1.002 = 0.1 1.002 = 0.1 1.002 = 0.1
= 0.2 = 0.2 = 0.2
1.000 = 0.3 1.000 = 0.3 1.000 = 0.3
10 20 30 40 50 10 20 30 40 50 10 20 30 40 50
Number of Agents Number of Agents Number of Agents
0=(0.1,0.3,0.6) 0=(0.2,0.5,0.3) 0=(0.3,0.4,0.3)
1.030 1.030
1.020
1.025 1.025
1.015 1.020 1.020
1.010 1.015 1.015
1.010 1.010
1.005
= 0.1 1.005 = 0.1 1.005 = 0.1
= 0.2 = 0.2 = 0.2
1.000 = 0.3 1.000 = 0.3 1.000 = 0.3
10 20 30 40 50 10 20 30 40 50 10 20 30 40 50
Number of Agents Number of Agents Number of Agents
Fig. 9: The Bayesian approximation ratio of PM for a population non i.d.. The
best
capacitiesofthefacilitiesarebalanced,i.e.k =k =αnwithα=0.1,0.2,0.3,andfor
1 2
n = 10,20,...,50. In the first raw, the Beta distribution is symmetric, in particular
B(5,5), in the second raw the Beta distribution is asymmetric, in particular B(1,9).
Every column contains the results for different Λ.
regardless of n, and that the CI is small (around 0.003). Our experiments confirm
thatthebestpercentilemechanismaccordingtotheworst-caseanalysisbehavealmost
optimally in a Bayesian framework.
In Figure 10, we report our results for the Average-Case approximation ratio. We
observethat,whiletheexpectedapproximationratioofthemechanismisstilllowand
close to 1, the confidence interval in this case is tighter, which further confirms the
suitabilityofthepercentilemechanismtohandleinstancesinwhichthepopulationis
non identically distributed.
6 Conclusion and Future Works
In this paper, we studied the mechanism design aspects of the m-CFLP under the
assumptionthatthetotalcapacityofthefacilityissmallerthanthenumberofagents
toaccommodate.Weassumethat,afterthepositionofthefacilityisfixed,theagents
compete in a First-Come-First-Served (FCFS) game to gain access to the facilities.
Our main contribution consist in studying the case in which m ≥ 2, which was left
as an open questions in the paper introducing the problem [2]. Our approach empha-
sizes the significance of absolutely truthful mechanisms, which prevent agents from
benefiting regardless of their strategy in the FCFS game, and ES mechanisms, whose
30
oitaR
noitamixorppA
naiseyaB
oitaR
noitamixorppA
naiseyaB
oitaR
noitamixorppA
naiseyaB
oitaR
noitamixorppA
naiseyaB
oitaR
noitamixorppA
naiseyaB
oitaR
noitamixorppA
naiseyaB=(0.1,0.3,0.6) =(0.2,0.5,0.3) =(0.3,0.4,0.3)
1.014
1.014
1.012 1.012
1.012
1.010 1.010
1.010
1.008 1.008
1.008
1.006 1.006 1.006
1.004 1.004 1.004
1.002 = 0.1 1.002 = 0.1 1.002 = 0.1
= 0.2 = 0.2 = 0.2
1.000 = 0.3 1.000 = 0.3 1.000 = 0.3
10 20 30 40 50 10 20 30 40 50 10 20 30 40 50
Number of Agents Number of Agents Number of Agents
=(0.1,0.3,0.6) =(0.2,0.5,0.3) =(0.3,0.4,0.3)
1.030 1.030
1.020
1.025 1.025
1.015 1.020 1.020
1.010 1.015 1.015
1.010 1.010
1.005
= 0.1 1.005 = 0.1 1.005 = 0.1
= 0.2 = 0.2 = 0.2
1.000 = 0.3 1.000 = 0.3 1.000 = 0.3
10 20 30 40 50 10 20 30 40 50 10 20 30 40 50
Number of Agents Number of Agents Number of Agents
Fig. 10: The Average-Case approximation ratio of PM for a population non i.d..
best
The capacities of the facilities are balanced, i.e. k = k = αn with α = 0.1,0.2,0.3,
1 2
and for n = 10,20,...,50. In the first raw, the Beta distribution is symmetric, in
particularB(5,5),inthesecondrawtheBetadistributionisasymmetric,inparticular
B(1,9). Every column contains the results for different Λ.
SWremainsindependentoftheFCFSgameequilibrium.Weshowthatthepercentile
mechanisms[13]areabsolutelytruthfulandcharacterizeunderwhichconditionsthey
areES.WeshowthatESpercentilemechanismsachieveboundedapproximationratio
for every m > 1 and characterize the best percentile vector as a function of n, k ,
1
and k . Interestingly, if n>(2k−1)m, the approximation ratio of the best percentile
2
mechanism 1+ 1 , i.e. is asymptotically optimal with respect to the number of
2m−1
facilities. Lastly, we run extensive numerical results to study the performances of the
percentile mechanism from a Bayesian perspective.
In our future works, we aim at extending this problem to the case in which the
agentsarelocatedonagenericgraph.Anotherinterestingresearchavenueistostudy
howchangingthepreferencesoftheagentsaffectstheperformancesofthemechanisms.
Finally,itwouldbeinterestingtostudytheasymptoticBayesianapproximationratio
of ES percentile mechanisms. In that regard, it is worth to notice that the upper
bound we presented in (12) can be connected to the truncated Wasserstein Distance
presented in [34, 35], which enables to apply the same techniques developed in [32].
Acknowledgements
Jie Zhang was partially supported by a Leverhulme Trust Research Project Grant
(2021 – 2024) and the EPSRC grant (EP/W014912/1).
31
oitaR
esaC-egarevA
oitaR
esaC-egarevA
oitaR
esaC-egarevA
oitaR
esaC-egarevA
oitaR
esaC-egarevA
oitaR
esaC-egarevAReferences
[1] Auricchio,G.,Clough,H.J.,Zhang,J.:Onthecapacitatedfacilitylocationprob-
lem with scarce resources. In: The 40th Conference on Uncertainty in Artificial
Intelligence (2024). https://openreview.net/forum?id=3tH77YyFTs
[2] Aziz, H., Chan, H., Lee, B.E., Parkes, D.C.: The capacity constrained facility
location problem. Games and Economic Behavior 124, 478–490 (2020)
[3] Brimberg,J.,Korach,E.,Eben-Chaim,M.,Mehrez,A.:Thecapacitatedp-facility
location problem on the real line. International Transactions in Operational
Research 8(6), 727–738 (2001)
[4] Pal,M.,Tardos,T.,Wexler,T.:Facilitylocationwithnonuniformhardcapacities.
In: Proceedings 42nd IEEE Symposium on Foundations of Computer Science,
pp. 329–338. IEEE, New York (2001)
[5] Aardal, K., Berg, P.L., Gijswijt, D., Li, S.: Approximation algorithms for
hard capacitated k-facility location problems. European Journal of Operational
Research 242(2), 358–368 (2015)
[6] Balcik, B., Beamon, B.M.: Facility location in humanitarian relief. International
Journal of Logistics Research and Applications 11(2), 101–121 (2008)
[7] Melo,M.T.,Nickel,S.,Saldanha-da-Gama,F.:Facilitylocationandsupplychain
management–areview.EuropeanJournalofOperationalResearch196(2),401–
412 (2009)
[8] Ahmadi-Javid,A.,Seyedi,P.,Syam,S.S.:Asurveyofhealthcarefacilitylocation.
Computers & Operations Research 79, 223–263 (2017)
[9] Hastie, T., Tibshirani, R., Friedman, J.H., Friedman, J.H.: The Elements of Sta-
tistical Learning: Data Mining, Inference, and Prediction vol. 2. Springer, Berlin
(2009)
[10] Auricchio, G., Bassetti, F., Gualandi, S., Veneroni, M.: Computing wasserstein
barycenters via linear programming. In: International Conference on Integration
ofConstraintProgramming,ArtificialIntelligence,andOperationsResearch,pp.
355–363 (2019). Springer
[11] Barda, O.H., Dupuis, J., Lencioni, P.: Multicriteria location of thermal power
plants. European Journal of Operational Research 45(2-3), 332–346 (1990)
[12] Nisan, N., Ronen, A.: Algorithmic mechanism design. In: Proceedings of the
Thirty-first Annual ACM Symposium on Theory of Computing, pp. 129–140.
ACM, New York (1999)
32[13] Sui, X., Boutilier, C., Sandholm, T.: Analysis and optimization of multi-
dimensional percentile mechanisms. In: IJCAI, pp. 367–374. AAAI press,
Washington (2013). Citeseer
[14] Walsh, T.: Strategy proof mechanisms for facility location in euclidean and
manhattan space. arXiv preprint arXiv:2009.07983 (2020)
[15] Fotakis, D., Tzamos, C.: On the power of deterministic mechanisms for facility
location games. ACM Transactions on Economics and Computation (TEAC)
2(4), 1–37 (2014)
[16] Hartline,J.D.,Roughgarden,T.:Simpleversusoptimalmechanisms.In:Proceed-
ings of the 10th ACM Conference on Electronic Commerce, pp. 225–234. ACM,
New York (2009)
[17] Deng, X., Gao, Y., Zhang, J.: Beyond the worst-case analysis of random prior-
ity: Smoothed and average-case approximation ratios in mechanism design. Inf.
Comput. 285(Part), 104920 (2022) https://doi.org/10.1016/J.IC.2022.104920
[18] Procaccia, A.D., Tennenholtz, M.: Approximate mechanism design without
money. ACM Transactions on Economics and Computation (TEAC) 1(4), 1–26
(2013)
[19] Filos-Ratsikas, A., Li, M., Zhang, J., Zhang, Q.: Facility location with double-
peaked preferences. Auton. Agents Multi Agent Syst. 31(6), 1209–1235 (2017)
https://doi.org/10.1007/S10458-017-9361-0
[20] Feldman, M., Wilf, Y.: Strategyproof facility location and the least squares
objective. In: EC, pp. 873–890. ACM, New York (2013)
[21] Filimonov, A., Meir, R.: Strategyproof facility location mechanisms on discrete
trees. In: AAMAS, pp. 510–518. ACM, New York (2021)
[22] Lu, P., Sun, X., Wang, Y., Zhu, Z.A.: Asymptotically optimal strategy-proof
mechanismsfortwo-facilitygames.In:EC,pp.315–324.ACM,NewYork(2010)
[23] Lu,P.,Wang,Y.,Zhou,Y.:Tighterboundsforfacilitygames.In:WINE.Lecture
Notes in Computer Science, vol. 5929, pp. 137–148. Springer, Berlin (2009)
[24] Alon,N.,Feldman,M.,Procaccia,A.D.,Tennenholtz,M.:Strategyproofapprox-
imationoftheminimaxonnetworks.MathematicsofOperationsResearch35(3),
513–526 (2010)
[25] Dokow, E., Feldman, M., Meir, R., Nehama, I.: Mechanism design on discrete
lines and cycles. In: EC, pp. 423–440. ACM, New York (2012)
[26] Meir, R.: Strategyproof facility location for three agents on a circle. In: SAGT.
LectureNotesinComputerScience,vol.11801,pp.18–33.Springer,Berlin(2019)
33[27] Tang, P., Yu, D., Zhao, S.: Characterization of group-strategyproof mechanisms
for facility location in strictly convex space. In: EC, pp. 133–157. ACM, New
York (2020)
[28] Chan, H., Filos-Ratsikas, A., Li, B., Li, M., Wang, C.: Mechanism design for
facility location problems: a survey. arXiv preprint arXiv:2106.03457 (2021)
[29] Aziz, H., Chan, H., Lee, B., Li, B., Walsh, T.: Facility location problem with
capacity constraints: Algorithmic and mechanism design perspectives. In: Pro-
ceedingsoftheAAAIConferenceonArtificialIntelligence,vol.34,pp.1806–1813.
MIT Press, New York (2020)
[30] Walsh, T.: Strategy proof mechanisms for facility location with capacity limits.
In: Proceedings of the Thirty-First International Joint Conference on Artificial
Intelligence,IJCAI-22,pp.527–533.InternationalJointConferencesonArtificial
Intelligence Organization, Massachusetts (2022)
[31] Auricchio, G., Wang, Z., Zhang, J.: Facility location problems with capacity
constraints: Two facilities and beyond. In: IJCAI 24 (to Appear). ijcai.org, ???
(2024)
[32] Auricchio, G., Zhang, J., Zhang, M.: Extended ranking mechanisms for the
m-capacitated facility location problem in bayesian mechanism design. In: Pro-
ceedings of the International Joint Conference on Autonomous Agents and
Multiagent Systems, AAMAS 24 (to Appear) (2024)
[33] Hartline, J.D., Lucier, B.: Bayesian algorithmic mechanism design. In: Proceed-
ings of the Forty-second ACM Symposium on Theory of Computing. STOC ’10.
Association for Computing Machinery, New York, NY, USA (2010)
[34] Pele, O., Werman, M.: Fast and robust Earth Mover’s Distances. In: Computer
Vision,2009IEEE12thInternationalConferenceOn,pp.460–467(2009).IEEE
[35] Auricchio, G., Gualandi, S., Veneroni, M.: The maximum nearby flow prob-
lem. Advances in Optimization and Decision Science for Society, Services and
Enterprises: ODS, Genoa, Italy, September 4-7, 2019, 23–33 (2019)
34