MegaAgent: A Practical Framework for Autonomous Cooperation in
Large-Scale LLM Agent Systems
QianWang1,TianyuWang2,QinbinLi3,JingshengLiang4,BingshengHe1
1NationalUniversityofSingapore2ShanghaiJiaoTongUniversity
3UniversityofCalifornia,Berkeley4SouthChinaUniversityofTechnology
Abstract Yet,real-worldsimulationsrequirefarmorethan25LLM
agents. For example, S3 utilizes LLM-empowered agents
Withtheemergenceoflargelanguagemodels(LLMs),LLM-
to simulate 26,058 users in a social network, enabling the
poweredmulti-agentsystems(LLM-MAsystems)havebeen
analysis of opinions on gender discrimination (Gao et al.
proposed to tackle real-world tasks. However, their agents
2023).Moreover,certaincomplexworldsimulationscenar-
mostly follow predefined Standard Operating Procedures
(SOPs)thatremainunchangedacrossthewholeinteraction, ios, such as policy-making (Tesfatsion 2023), war simula-
lackingautonomyandscalability.Additionally,currentsolu- tion (Hua et al. 2023), and alien civilizations simulation
tionsoftenoverlookthenecessityforeffectiveagentcooper- (Jin et al. 2024), can only be realistically simulated using
ation.Toaddresstheabovelimitations,weproposeMegaA- a large number of LLM agents. As reliance on large-scale
gent,apracticalframeworkdesignedforautonomouscoop- LLM-MAsystemscontinuestogrow,thereisanurgentneed
erationinlarge-scaleLLMAgentsystems.MegaAgentlever- forscalable,autonomousframeworksthatcanhandlelarge-
agestheautonomyofagentstodynamicallygenerateagents
scaleagentinteractions.
based on task requirements, incorporating features such as
However, the majority of current LLM-MA frameworks
automatically dividing tasks, systematic planning and mon-
primarilyemphasizetheAIaspectswhileneglectingthecru-
itoring of agent activities, and managing concurrent opera-
tions. In addition, MegaAgent is designed with a hierarchi- cialinfrastructureneededtosupportlarge-scalecooperation
calstructureandemployssystem-levelparallelismtoenhance among LLM agents. This oversight leads to three signifi-
performanceandboostcommunication.Wedemonstratethe cantlimitations.First,theydonotconsiderthemanagement
effectivenessofMegaAgentthroughGobanggamedevelop- oflarge-scaleagents(Hongetal.2023;Chenetal.2023b).
ment, showing that it outperforms popular LLM-MA sys- Second,thesesystemsdemonstratelimitedcooperation,thus
tems;andnationalpolicysimulation,demonstratingitshigh hinderstheireffectivenessandapplicabilityinsolvingmulti-
autonomy and potential to rapidly scale up to 590 agents
disciplinary complex tasks (Chan et al. 2024; Chen et al.
whileensuringeffectivecooperationamongthem.Ourresults
2023b;Wuetal.2023;Panetal.2024).Third,theyrelyon
indicate that MegaAgent is the first autonomous large-scale
predefinedSOPsandpromptstodictatehowagentsrespond
LLM-MAsystemwithnopre-definedSOPs,higheffective-
to specific situations or inputs (Hong et al. 2023). This ap-
ness and scalability, paving the way for further research in
thisfield.Ourcodeisathttps://anonymous.4open.science/r/ proach not only stifles creativity but also becomes imprac-
MegaAgent-81F3. tical when implementing SOPs for hundreds or even thou-
sandsofagents.
Introduction Addressing the above limitations presents two key chal-
lenges. First, organizing communication among agents and
Given the impressive planning and cognitive abilities of
withexternalservices,suchascodeandtextfiles,becomes
LLMs(Touvronetal.2023;Zhuetal.2023),thereisgrow-
increasingly complex on a large scale with parallelism in-
inginterestresearchinterestinLLM-MAsystems(Wuetal.
cluded,especiallywhendifferentagentsareinvolvedindif-
2023;Chenetal.2023b;Hongetal.2023)duetotheirabil-
ferent rounds of communication (Zhang et al. 2024a). Sec-
itiestotacklecomplextasks.Forinstance,MetaGPTintro-
ond, currently existing agents have inadequate autonomic
ducesameta-programmingframeworkthateffectivelysim-
capabilities. Manually crafting predefined SOPs becomes
ulatesthesoftwaredevelopmentprocess(Hongetal.2023).
impractical at large scales, and the inherent instability of
Furthermore, recent works leverage LLMs’ cognitive abil-
LLM agent outputs (Lu et al. 2023) necessitates maintain-
ities to simulate more complex scenarios, known as world
ingadegreeofcontrolovereachagent’sactionswhilestill
simulations(Guoetal.2024).Forexample,Simulacra(Park
allowing for flexibility and creativity. Therefore, ensuring
et al. 2023) simulates social behaviors among 25 LLM-
sufficient agent autonomy is crucial for problems at larger
empowered agents living in a town where each agent can
scales.
planandschedulewhattodointhedailylife.
To address these limitations, we propose MegaAgent, a
Copyright©2025,AssociationfortheAdvancementofArtificial practical framework designed to manage large-scale LLM-
Intelligence(www.aaai.org).Allrightsreserved. MAsystemsandfacilitateeffective,autonomousagentcom-
4202
guA
91
]AM.sc[
1v55990.8042:viXramunication. We anticipate that MegaAgent will serve as practicality. Section 5 discusses future research directions
the foundational infrastructure for future large-scale LLM- forLLM-MAsystems,andSection6concludesthepaper.
MAsystems,effectivelyfunctioningastheoperatingsystem
(OS)forLLM-MA.ThecoreideaofMegaAgentistodivide RelatedWork
thelargetaskintomultiplehierarchicalsub-tasks,andeach
sub-task is finished by a group of agents. Communications Inthissection,wereviewLLM-MAsystemsandthecoop-
canbedoneeitherwithintheagentgrouporbetweenagent eration between agents within these systems. Due to space
groups.TheoverviewofMegaAgentisinFigure1. constraints, we only include the most relevant work here,
To address the first challenge, we introduce a hierarchi- withadditionalrelatedworkprovidedintheappendix.
cal mechanism: a boss agent receives the prompt, divides
the task into sub-tasks, and assigns each sub-task to a cor- LLM-MASystems
respondingsub-taskadmin.Theadminagentthengenerates
WiththeemergenceofpowerfulLLMs(Achiametal.2023;
a group of agents to complete the task. If an agent cannot
Team et al. 2023), recent research on LLM-based multi-
completethetaskonitsown,itcangenerateanothergroup
agentsystemshasinvestigatedhowmultipleagentscanac-
ofagentsatthenextlevel.Eachagentgroupruninparallel
complishtasksthroughcooperation,utilizingelementssuch
toensurethehigheffectiveness.
as personas (Chen et al. 2024; Chan et al. 2024), planning
To address the second challenge, we implement three
(Chen et al. 2023a; Zhang et al. 2024b; Yuan et al. 2023),
mechanisms: First, the OS agent is employed to monitor
and memory (Zhang et al. 2023; Hatalis et al. 2023). Un-
theagentgroups’outputtoensuretheychatintherightfor-
like systems relying on a single LLM-based agent, multi-
mat;second,theadminagentineachgroupmonitorsthesta-
agentsystemsdemonstratesuperiorityintacklingchalleng-
tus of individual agents inside this group; third, each agent
ing tasks. Recent works, such as MetaGPT (Hong et al.
maintains a checklist to track its actions. The workflow of
2023), AutoGen (Wu et al. 2023), and AgentVerse (Chen
MegaAgent is as follows: First, it accepts natural language
etal.2023b),designmultiplespecificrolestoachieveatask.
prompts from users; then, it splits the tasks into multiple
However, most popular LLM-MA systems heavily rely
sub-tasks, each completed by a group of agents monitored
on handcrafted prompts and expert design. For instance,
by admin agents. At the same time, the OS agent monitors
MetaGPT (Hong et al. 2023) requires users to pre-design
theprogressofeachagentgroup.Thesegroupsinteractwith
roles like product manager and software engineer. Another
externalservicesthroughadataretriever,wheretheyretrieve
limitationisthesesystemsutilizeasequentialpipelinewith-
databases,codefiles,andchecklistsforeachagent.
outconsideringparallelexecutionofagents(Lietal.2023).
Wethenconducttwoexperimentstodemonstratetheef-
Although AgentScope (Pan et al. 2024) does consider this,
fectiveness and autonomy of MegaAgent. The first exper-
its implementation follows a fixed trajectory in different
iment, a Gobang game against an AI opponent, highlights
rounds of interaction, prohibiting changes in communica-
MegaAgent’ssuperiorautonomyandefficiencyoverallpre-
tionpartners,thuslimitingperformanceimprovementasthe
vious baselines, with MegaAgent being the only model to
numberofagentsscalesup.
completethetaskwithin800seconds.Thesecondexperi-
Incontrast,intherealworld,whenmanysoftwaredevel-
ment, an industry-wide national policy simulation, demon-
opersareemployed,theymayfirstworkondifferentfilessi-
strates MegaAgent’s large-scale autonomy and scalability
multaneously,andthenfocusononespecificfilewhendiffi-
by successfully generating and coordinating about 590
cultiesareencountered,sparkingcreativeideastoovercome
agentstoproducetheexpectedpolicieswithin3000sec-
challengesbycooperation.Additionally,existingLLM-MA
onds. In stark contrast, the baseline models can coordinate
systemsarerestrictedbytheirsmallscaleandhavenotbeen
fewerthan10agentsandfailtoproducetheexpectedpoli-
applied in large-scale scenarios with complex cooperation
cies. Finally, we provide insights gained from these exper-
involved. We compare current popular LLM-MA systems
iments and discuss future research directions for managing
withMegaAgentinTable1.Wecanseefromthetablethat
scalingtolargernumbersofLLM-MAsystems.
MegaAgentstandsoutforitshighautonomy,multi-filesup-
Tosummarize,ourcontributionsareasfollows:
port,parallelism,andscalability.
• WeproposeMegaAgent,apracticalframeworkdesigned
for autonomous cooperation in large-scale LLM-MA
CooperationbetweenLLM-basedAgents
systems, enabling dynamic task splitting and parallel
communicationamongLLMagents. The coordination between LLM-based agents is critical in-
frastructure for supporting LLM-MA systems (Guo et al.
• We validate MegaAgent’s effectiveness through experi-
2024).Therearethreemaincoordinationparadigms:coop-
mentsinGobanggamedevelopmentandnationalpolicy
erative,debate,andcompetitive.MegaAgentfocusesonthe
simulation,demonstratingitsautonomyandscalability.
cooperationparadigm,aimingtohaveagentsworktogether
• Weprovideinsightsintothechallengesandpotentialfu-
toward a shared goal. Within the cooperative paradigm are
tureresearchdirectionsforscalingLLM-MAsystems.
three main structures: layered, decentralized, and central-
Theremainderofthispaperisorganizedasfollows:Sec- ized. Layered communication is organized hierarchically,
tion 2 reviews related work in LLM-MA systems. Section with agents at each level having distinct roles and each
3 provides details of the MegaAgent framework. Section layerinteractingwithadjacentlayers(Liuetal.2023b).De-
4 presents two experiments that demonstrate MegaAgent’s centralizedcommunicationoperatesonapeer-to-peerbasisParallel tasks Action Module Storage Module
Log
Multi-level (Serialized)
Query Task Level 1 Admin 1 Admin 2 Admin 3 ...
Splitting
Monitor
Memory
Level 2 Group 1 Group 2 Group 3 ... Database
Zoom in
Function f {...}
Call Group 2 Group 2_1 Task Monitor
prompt
Group 2_2
OS Agent Monitor Admin 2_2 prompt prompt prompt PI yn tt he ora nc Etiv xe ec
Admin 2_1
Level 3 prompt prompt
Function Calls
Python
Data Retriver f {...}
read_file prompt
write_file
exec_python Files
python_input Group 2_2_1
add_agent Level 4 ... Admin 2_2_1 Data Retriver f {...}
talk Checklist
... ... ......
Provide Interface
Figure1:MegaAgentstartsbyacceptingprompts,whichitautomaticallydividesintotasksformultipleagentgroups.OSAgent
monitorstheagents’progress,whiletheactionmoduleinteractswiththestoragemodulethroughadataretriever.
Model NoPredefinedSOP Multi-fileSupport Parallelism Scalability
AutoGen(Wuetal.2023) ✗ ✗ ✗ ✗
MetaGPT(Hongetal.2023) ✗ ✓ ✗ ✗
CAMEL(Lietal.2023) ✗ ✗ ✗ ✗
AgentVerse(Chenetal.2023b) ✓ ✗ ✗ ✗
MegaAgent ✓ ✓ ✓ ✓
Table1:ComparisonofPopularLLM-MASystemswithMegaAgent
among agents. Centralized communication involves a cen- Multi-LevelTaskSplitting
tralagentoragroupofcentralagentscoordinatingthesys-
To address the impossibility of predefined SOPs in large-
tem’scommunication,withotheragentsprimarilyconnect-
scaleLLM-MAsystems,wecreativelyassignthebossagent
ingtothecentralagent.Asharedmessagepool,asproposed
to perform task splitting. To ensure each subtask is com-
inMetaGPT(Hongetal.2023),maintainsasharedmessage
pletedcorrectly,wecreativelydesignateanadminagentfor
pool where agents publish and subscribe to relevant mes-
eachgrouptooverseethegroup’sprogress.Thebossagent
sages,boostingcommunicationefficiency.
assigns the big task into several admin agents where each
admin is in charge of a sub-task. Each admin has a name
MegaAgentFramework
representingitsrole,formattedasthefollowingexample:
<employeename=”MinisterHealth”>YouareMinisterHealth,
Overview
the Health Policy Minister of the Health Department. Your job
As illustrated in Figure 1, MegaAgent consists of five key is to develop a comprehensive health policy document (’pol-
components: (1) Multi-Level Task Splitting, which accepts icy health.txt’)accordingto...Youwillcollaboratewith...(omitted
thepromptanddividesthetaskintoseveralagentgroupsfor here)</employee>
completion;(2)ActionModule,composedofmultipleagent Admin agents can either work independently or recruit
groups, each responsible for completing a specific subtask; other agents to form a group. Recruited agents can further
(3)StorageModule,composedofdatabase,files,andcheck- decompose sub-tasks intosmaller tasks, assume the role of
lists;(4)MonitorMechanism,whichincludesOSagent,ad- anadminagent,recruitadditionalagents,andformnewsub-
min agent, and each agent’s checklist to monitor agents’ ordinate groups. When agents determine that a task needs
actions; and (5) Communication Mechanism including the further subdivision but cannot complete it independently,
communicationbetweenagentsandbetweenagentsandex- they create a new level and generate more agents to ad-
ternalservices.Wenowdiscusseachcomponentindetail. dress this need. This process is done iteratively and imple-mentedthroughfunctioncalls.Wechooseahierarchicalde- agentcanfetchthemostsimilarmessageintoitsmemoryby
signasitallowstaskstobeefficientlydistributedandman- cosine similarity metric.Therefore, agents fetch the check-
agedacrossdifferentlevels,ensuringthatastheMegaAgent list and the prior summarization to dynamically track and
grows, it can handle increasing complexity without over- updatetheirprogressateachstep.
whelming a central agent. This multi-level task splitting The task monitor is designed to verify the existence of
makes the MegaAgent both practical and autonomous, output files, report their content to the supervising agent,
particularly when handling complex tasks that require and, if necessary, assign rework to the subordinate agent.
numerousLLMagents. Additionally, when there are no active tasks, the task mon-
itor prompts the OS agent to review all generated files and
ActionModule determinethenextstepsor,ifappropriate,terminatethepro-
To execute a sub-task, each agent group admin divides the cess.Thetaskmonitoractsasasafeguard,ensuringthetask
task into smaller components and generates several agents progressesgraduallyandconsistently.
tocompletethem.Eachagentthencreatesachecklistbased
MonitorMechanism
on its assigned task. Throughout the task completion pro-
cess,agentscommunicateandcoordinatetheirworkwithin To ensure effective monitoring and minimize hallucination
thegroup,updatingandcompletingtheirchecklistsuntilthe propagationinalarge-scaleLLM-MAsystem,weintroduce
bossagentmarksthetaskas’finished.’Meanwhile,theOS OS agent to oversee the output format of each agent group
agentensuresproperinputandoutputformatsandserializes andverifywhethertheoutputmeetstheexpectedstandards.
theAPImessagecallsofindividualagents.Thisallowsmul- Ifnot,anerrormessageisaddedtotheagent’smemoryand
tipleagentstoworkonthesametaskwithoutcompromising theOSsystemtriestogenerateagain.Inaddition,eachagent
dataconsistencyandenhancesdevelopmentefficiency. maintainsanupdatedchecklisttotrackitsactionsandensure
Tosupportthisprocess,weintroduceadataretrieverasan theyalignwithexpectations.Oncetheworkwithinanagent
interfacebetweenactionmoduleandstoragemodule.Adata group is completed, the admin agent reviews each agent’s
retrievermanagesfunctioncalls—includingfilereadingand checklistandresultstoconfirmfullcompletion.Iftheresults
writing,checklists,andPythonexecution—andrelaysthem areunexpected,theOSagentwouldreturnanerrormessage
tothestoragemodule.Thelistofavailablefunctioncallsis explaining the discrepancies, prompting the agent to retry.
providedtothedataretrieveragentsatthebeginning.Then, However,eachagenthasamaximumnumberofallowedre-
The data retrievers determine which function calls to gen- triesperround,ahyperparameterwehavesettothirty.
erateandexecutebasedonthespecificneedsoftheagents,
CommunicationMechanism
ensuring the system operates automatically.This process is
illustratedinFigure1. To ensure effective communication, agents are organized
Buildingonthepreviouslyestablishedprocess,theac- into distinct hierarchies. They can communicate only with
tion module ensures scalability by allowing each agent theirdirect superiors,theirdirect subordinates,within their
grouptooperatesimultaneouslyandindependently.This own group. File operation and code execution are also re-
parallelexecutioncapabilitysignificantlyreducestheoverall garded as communication. Their communication format is
taskcompletiontimecomparedtothelinearoperatingmech- specified in a instructional paragraph, which is detailed in
anisms used in other baselines, such as MetaGPT (Hong our source code. It enables agents to simultaneously dis-
etal.2023). patchdistinctmessagesthroughfunctioncallinaspecified
format.Thecompletecommunicationpatternsareprovided
StorageModule intheappendix.Here,wepresentanexample:
To facilitate data communication between the LLM agents <talk goal=“Carol”> Carol, please provide ‘ai.py’
and external files, we introduce a storage module. This once you have developed the AI for the Gobang
storage module includes agent execution logs, a memory game.</talk>
database,ataskmonitor,PythoncodeandinteractivePython <talk goal=“David”> David, please provide
executionsupport,files,andchecklistsforeachagent. ‘game logic.py’ once you have developed the game
We introduce Git to support file management in storage logicfortheGobanggame.</talk>
module. As each agent requires considerable time to edit The OS agent then delivers these messages to the desig-
a file after reading it, during which the file may change, a nated agents, who respond in parallel to ensure both effec-
mechanism to keep data consistency is required. When an tivenessandscalability.
agentreadsafile,italsoretrievesitsGitcommithash.Upon
Experiments
writing, the agent must provide that hash to the file agent,
whichcommitsthechangestothepreviouscommit,merges Inthissection,weaimtoevaluateMegaAgent’scapabilities
them to the latest HEAD, and requests the agent to resolve byaddressingthefollowingtworesearchquestions:
anymergeconflictsifnecessary.AllGitoperationsareseri- RQ1: Can MegaAgent complete a task requiring extensive
alizedusingaglobalmutexlock. cooperationwithoutapredefinedSOP?Howdootherbase-
Thememorydatabaseisusedforlong-termmemorysum- linescompare?
marization as LLMs would forget prior conversations. The RQ2: Can MegaAgent be applied to a more complex task
outputofeachroundisencodedusinglanguagemodelsinto requiringsignificantlymoreagents,demonstratingitsscala-
embeddings to be stored in the vector database, so that the bility?Howaboutotherbaselines?GobangGamewithAIOpponent willneverproduceamove.Inanothertrial,AutoGengener-
atesaprogramendingwith# To be continued..af-
Gobang is a strategic board game played between two par-
terabouttwominutes,andgetsstuckwhentryingtoexecute
ticipants,whoalternateplacingblackandwhitepiecesona
it. The possible reason for its failure is that its SOP is too
grid.Theobjectiveistobethefirsttoalignfiveconsecutive
pieces horizontally, vertically, or diagonally 1. We conduct simple, and does not include enough communication (like
codereview)betweenagents.
this experiment to evaluate MegaAgent’s cooperation, au-
MetaGPT: None of the trials are able to produce an AI
tonomy, and parallelism in completing the development of
move,evenaftergeneratingsixagents.Themajorerrorsare:
thisgamewithoutpredefinedSOPs.
• Thecodeisnotexecutable,andraisesanerror.Thepos-
Experiment Setup We conduct this experiment with the
siblereasonisthatMetaGPTdoesnothaveexternaltools
GPT-4o API 2, setting the ‘temperature’ parameter to 0 to
toexecuteanddebugtheproducedcode.
ensure more deterministic responses (Achiam et al. 2023).
• TheproducedprogramisnotaGobanggame(forexam-
Atthebeginning,wefeedthemetaprompt:
ple, a tic-tac-toe game instead). The possible reason for
You are Bob, the leader of a software development club.
failureisthatitsSOPistoosimple,andtherequirement
Yourclub’scurrentgoalistodevelopaGobanggamewith
forcommunicationbetweenagentsisnotsufficient.
anAI,andcanbeexecutedbyrunning’main.py’.
Forcomparativeanalysis,weutilizeAutoGen,MetaGPT, • AIfallsintoaninfiniteloop.Thepossiblereasonisthat
CAMEL, and AgentVerse to perform the same task. We MetaGPTdoesnothaveexternaltoolstoexecuteandde-
manually adapt their underlying large language models to bugtheproducedcode,andthecurrentChatGPTAPIis
GPT-4o or to GPT-4 3 when GPT-4o is incompatible with notcapableofdevelopingtheAlphaBetaalgorithmwith-
their code settings. Details of the those API costs of each outerrorsbyitself.
modelcanbefoundintheappendix.
To ensure fairness in our experiment, we use exactly the
same prompt: Develop a Gobang game with an AI for all
baselines, as well as following the guidelines specified in
each baseline’s paper to determine the appropriate testing
methods.Thefullexperimentsettingsofthesebaselinesare
inourappendixduetothespacelimit.
Evaluation Metrics To evaluate the generated Gobang Figure2:CAMELfailstogeneratetheneededfilesthatare
game, we establish the following evaluation metrics: (1) requiredinitsplanningstage.
error-free execution, which assesses the program’s ability
to run without errors; (2) user move functionality, which
CAMEL: We find that CAMEL can only produce code
evaluates the user’s ability to make a move; (3) AI move
segments using two agents. For example, as shown in Fig-
functionality, which measures the AI’s ability to make a
ure 2, CAMEL forgets to write ui.py, which is included in
move; and (4) correct game termination, which ensures
game.py.Thepossiblereasonforthisisthatitsplanningand
thegame’sabilitytoendcorrectlywhentherearefivecon-
contextualabilityisweak.
secutivepieces.
AgentVerse: AgentVerse generates four agents to finish
thistask.However,wefindthat,inthefirstandsecondtrial,
theagentkeepsrejectingtheresultforallthetenrounds;as
Model CompletedMetrics NumberofAgents Time
AutoGen(Wuetal.2023) (1)(2) 2 120s for the third trial, although the agent accepts the result, the
MetaGPT(Hongetal.2023) (1)(2) 6 480s code still presents many placeholders, and cannot be exe-
CAMEL(Lietal.2023) Programnotexecutable 2 1830s
AgentVerse(Chenetal.2023b) Incompleteprogram 4 1980s* cuted.Anincompletecodeblocksmaylookasfollows:
MegaAgent (1)(2)(3)(4) 7 800s
*WeallowedAgentVersetorunfor10rounds,butitwas class AI:
stillunabletocompletetheprogramafter1,980seconds. def heuristic(self):
# It should consider Gobang patterns
Table2:GobangExperimentResults # like open threes, closed fours.
pass
Experiment Results To provide a comprehensive com- ThepossiblefailingreasonforAgentVerseisthattheout-
parison, Table 2 presents performance of various state-of- linefromitsplanningstateistoostrict,whilecurrentLLMs
the-art models for large-scale LLM multi-agents. We ana- areunabletomeetthatdemand.
lyzeeachofthemindividuallyasfollows: MegaAgent: TheMegaAgentsystemautonomouslyde-
AutoGen:AutoGenusestwoagentstoproducesanmini- vises an SOP integrating seven agents, leading to the suc-
maxAIwithnoprone,whichtakesinfinitetimetothink,and cessful execution of the designated task. It autonomously
developsafunctionalGobanggameinterfacedwithanaive
1https://en.wikipedia.org/wiki/Gomoku
AI,capableof:
2https://openai.com/index/hello-gpt-4o/
3https://platform.openai.com/docs/models/gpt-4-turbo-and- i. Allowing player input for row and column selections to
gpt-4 executemoves.ii. EnablingAItorespondwithitsmoveontheboard. For comparative analysis, we utilize AutoGen, MetaGPT,
iii. Repeating this interaction until a player aligns five con- CAMEL,andAgentVersetoperformthesametask.Details
secutivepieces. of API costs are in the appendix. We manually adapt their
underlying large language models to GPT-4o or to GPT-4
Thesefunctionalitiesfulfillcriteria(1)through(4)ofour whenGPT-4oisincompatiblewiththeircodesettings.The
requirements. MegaAgent’s ability to produce a fully oper- promptwefeedintotheseframeworksare:
ational game itself is an unprecedented achievement com-
YouareNationLeader,theleaderofapioneeringnation.
pared to the above LLM-MA systems, whose result either
Youwanttodevelopthebestdetailedpolicyforyourcutting-
consistsofunfinishedplaceholders,orfailstoincludeanAI.
edge country in ’policy department.txt’. You are now re-
Finally, MegaAgent successfully produces a runnable
cruitingministersandassigningworktothem.Foreachpos-
GobanggamewithanaiveAI,whoseinterfaceisshownin
sibleminister,pleasewriteaprompt.......
Figure5.Thecompletelogandprogramofthisexperiment
Thefullpromptisintheappendixduetothespacelimit.
canbefoundinoursourcecode.
ExperimentResults WepresenttheresultsinTable4.
Model Outputs NumberofAgents Time
AutoGen(Wuetal.2023) Outline 1 40s
MetaGPT(Hongetal.2023) PythonProgram 6 580s
CAMEL(Lietal.2023) Plans 2 1380s
AgentVerse(Chenetal.2023b) None 4 510s
MegaAgent CompletePolicies 590 2991s
Table 4: Industry-Wise Nation Policy Simulation Results.
Theresultisforasingletest,andmayvaryasLLM’soutput
isunstable.
AutoGen: It produces merely an outline for each aspect
Figure3:InterfaceofMegaAgent’sGobangDemo
and responses in a single output without amendment. This
trialtakesabout40secondsandincludesonlyasingleagent.
MetaGPT:Ittakes580secondsandsevenagentstopro-
Ablation Study To validate the effectiveness of the par-
duceaPythonprogram,whichisnotwhatweneed.
allel design in MegaAgent, we conduct an ablation study
byrunningMegaAgentwithoutparallelmechanismofeach CAMEL:Ittakes1380secondsandusesonlytwoagents
agentgroup,andwepresenttheresultsinTable3. in this trial. It takes lots of time to provide a plan, overall
strategy,implementationmethods,andpotentialrisks,which
isnotwhatwewant.
Mechanism CompletedMetrics NumberofAgents Time
AgentVerse: After510seconds,AgentVerseconsistently
w/oparallelism (1)(2)(3)(4) 7 4505s
rejects the solution across all ten rounds and is unable to
withparallelism (1)(2)(3)(4) 7 800s
provideaviablepolicywithfouragents.
Table3:GobangAblationStudyResults MegaAgent:MegaAgentsuccessfullyrecruitsninemin-
ister agents by the boss agent, each responsible for differ-
ent sectors such as health (“MinisterHealth”). Each minis-
WhenMegaAgentoperateswithoutparallelexecution,it
teragentworkssimultaneously,draftsapolicy,andrecruits
takes 4505 seconds to complete the task using 7 agents. In
dozens of subordinate citizen testers to simulate and pro-
contrast, with parallelism enabled, the same task is com-
videfeedback.About590agentsareinvolvedinoneexperi-
pletedinjust800seconds.Bothconfigurationssuccessfully
ment,formingathree-levelhierarchy,asillustratedinFigure
achieveallthespecifiedmetrics,butthedrasticreductionin
4. MegaAgent completes this experiment in 2991 seconds,
timehighlightstheefficiencyoftheparalleldesign.
evenwith590agents,demonstratingitshighefficiencyand
Industry-WiseNationPolicySimulation scalability.
Finally,MegaAgentpresentsacomprehensivepolicyad-
We propose a more challenging experiment: formulating
dressingallseventeenministriesofthesimulatednation,in-
industry-specificnationalpolicies,whichrequiresnumerous
agents performing various tasks across complex domains cludingdetailedinstructionsandamendments,asfollows:
suchaseducation,health,andfinance.Thisexperimentcan /project
evaluatetheautonomy,scalability,andcooperationcapabil- policy health.txt
itiesofMegaAgent. feedback health.txt
policy education.txt
Experiment Setup Due to budget constraints, we use
feedback education.txt
the GPT-4o-mini API4 for this experiment by MegaAgent.
...
4https://openai.com/index/gpt-4o-mini-advancing-cost- The complete version is in the appendix. The autonomy
efficient-intelligence/ andscalabilityofMegaAgentaredemonstratedbyitsabilityHierachy Diagram 2991 seconds, while the best-performing CAMEL requires
1380 seconds to complete the planning with only 2 agents.
Nation Leader Thus,MegaAgentisapracticalframeworkforautonomous
cooperation within large-scale LLM-MA systems, offering
theabilitytoscaleeffectivelywithanincreasingnumberof
LLMagents.
M Edin ui cs ate tir o o nf M Hein ai ls thter of M Fii nn ais nt ce er of ......
ResearchDirections
E Td eu sc tea rt i 0o 1n E Td eu sc tea rt i 0o 2n E Td eu sc tea rt i 0o 3n Physician Psychologist F Ei xtn pe es rs t R Re eg vu il ea wto er ry Trader F Ce oe lT d la ebx ca tock r ... Mitigating hallucination. Occasional hallucinations have
been observed in our experiments, such as the output for-
matnotmeetingthespecifiedrequirements.Toaddressthis,
Figure4:Anexampleofthegeneratedhierarchyforthepol- MegaAgent maintains an updated checklist for each agent
icymakingexperiment tomonitoritsactionsandensureadherencetoformatguide-
lines. However, the checklist is also generated by LLM
which may be wrong. Recent works propose leveraging on
to enable agents to communicate with different objectives anexpertexternalknowledgebasebefore(Pengetal.2023),
acrossmultipleroundsandrecruitnewagentsasneeded. during(Caoetal.2023)orafter(Gaoetal.2022)thegener-
ationofLLMstoguidetheLLM’soutputswhichmaybea
Ablation Study To validate the effectiveness of the par-
potentialdirection.
allel design in MegaAgent, we also conduct an ablation
Integrating different LLMs. In our experiments, we ob-
study by running this simulation without parallel mecha-
servethattheAPIcostsforGPT-4arequitehigh.Giventhat
nism,showninTable5.
manyLLMscheaperthanGPT-4specializeindifferentdo-
mains,utilizingdifferentLLMsforspecificroleswithinthe
Mechanism Outputs NumberofAgents Time
entire LLM-MA system could be an effective way to en-
w/oparallelism IncompletePolicies >100 >14400s hanceefficiencywhilereducingcosts(Touvronetal.2023;
withparallelism CompletePolicies 590 2991s
Jiang et al. 2024; Yang et al. 2024). Additionally, find-
*Weterminatetheexecutionwithoutparallelism
ingeffectivemethodsfordatasharingbetweentheseLLMs
after14400seconds.
presentsavaluableresearchdirection(WuandFard2024).
Table 5: Industry-Wise Nation Policy Simulation Ablation Increasing Effectiveness. The primary bottleneck in
StudyResults MegaAgent is the planning time and communication be-
tween LLM agents, specifically in translating code into
prompts, managing checklists, maintaining the framework,
After14400seconds,theMegaAgentwithoutparallelism
and debugging. This issue is exacerbated as the number of
designstillcannotfinishthepoliciesgeneration.Ithasgen-
communication rounds and agents increases, resulting in a
erated more than 100 agents, and the admin agents in the
significantnumberofinputandoutputtokensthroughoutthe
first level are still recruiting agents and drafting plans. We
process (Wang et al. 2024). Previous research suggests us-
find that in the single-threaded environment, admin agents
ing summarization compression and semantic compression
recruitedfewersubordinatesandproducedsimplerpolicies
tocondenselengthyconversationsfromearlierrounds(Liu
withminimaltesting.Thisisbecausetheymustseriallyex-
et al. 2023a). In MegaAgent, we summarize previous con-
ecutemultiplefunctioncallstorecruitmultipleagentsfora
versationsbetweenagentsandstoretheminanexternalvec-
completetestingprocedure,whichcurrentLLMsstruggleto
tordatabaseforefficientretrieval.Futureworkcouldfurther
manageeffectively.
enhancecommunicationefficiency.
Moreover, this observation highlights a key limitation of
currentLLMs:theirinefficiencyinhandlingcomplex,serial-
izedtasks.Theperformanceofthenon-parallelizedMegaA- Conclusion
gentdemonstratesthatparallelismisnotjustbeneficial,but
We introduce MegaAgent, a practical framework designed
essential for LLM-based systems to manage complex tasks
for autonomous cooperation in large-scale LLM-MA sys-
likecomprehensivepolicygenerationandevaluation.
tems.ThroughaGobanggamedevelopmentexperiment,we
demonstrateMegaAgent’ssuperiorautonomyandcoopera-
ScalabilityAnalysis
tioncomparedtobaselinemodels.Additionally,weconduct
In MegaAgent, for n agents, the hierarchical layer-to-layer anationalpolicysimulationtohighlightMegaAgent’sscala-
communicationcostisO(logn)sincetheycanruninparal- bility.Withitshierarchicalandadaptivedesign,MegaAgent
lelandeachagentgroupinteractsonlywithadjacentlayers has the potential to serve as the foundational OS for future
as shown in Figure 4. In contrast, existing frameworks ex- LLM-MA systems. Moreover, we identify key research di-
hibit linear running time growth O(n) as they run serially, rections emerging from the MegaAgent experiments, pro-
whichbecomesimpracticalwiththenumberofLLMagents viding guidance for future research. We encourage the re-
increasingmuch.Theabovetheoreticalanalysisisvalidated search community to focus on enhancing the effective co-
by industry-wide national policy simulation results, where operation of LLM agents to meet the growing demands of
MegaAgentcompletesthecooperationof590agentsinjust large-scaleLLM-MAsystems.References Jin,M.;Wang,B.;Xue,Z.;Zhu,S.;Hua,W.;Tang,H.;Mei,
K.;Du,M.;andZhang,Y.2024.WhatifLLMsHaveDiffer-
Achiam, J.; Adler, S.; Agarwal, S.; Ahmad, L.; Akkaya, I.;
entWorldViews:SimulatingAlienCivilizationswithLLM-
Aleman, F. L.; Almeida, D.; Altenschmidt, J.; Altman, S.;
basedAgents. arXivpreprintarXiv:2402.13184.
Anadkat, S.; et al. 2023. Gpt-4 technical report. arXiv
preprintarXiv:2303.08774. Li, G.; Hammoud, H.; Itani, H.; Khizbullin, D.; and
Ghanem, B. 2023. Camel: Communicative agents for”
Cao, H.; An, Z.; Feng, J.; Xu, K.; Chen, L.; and Zhao, D.
mind” exploration of large language model society. Ad-
2023. A Step Closer to Comprehensive Answers: Con-
vances in Neural Information Processing Systems, 36:
strained Multi-Stage Question Decomposition with Large
51991–52008.
LanguageModels. arXivpreprintarXiv:2311.07491.
Liu, J.; Li, L.; Xiang, T.; Wang, B.; and Qian, Y. 2023a.
Chan,X.;Wang,X.;Yu,D.;Mi,H.;andYu,D.2024. Scal- Tcra-llm:Tokencompressionretrievalaugmentedlargelan-
ing Synthetic Data Creation with 1,000,000,000 Personas. guage model for inference cost reduction. arXiv preprint
arXivpreprintarXiv:2406.20094. arXiv:2310.15556.
Chen, J.; Wang, X.; Xu, R.; Yuan, S.; Zhang, Y.; Shi, W.; Liu, Z.; Zhang, Y.; Li, P.; Liu, Y.; and Yang, D. 2023b.
Xie,J.;Li,S.;Yang,R.;Zhu,T.;etal.2024.Frompersonato Dynamic llm-agent network: An llm-agent collaboration
personalization: A survey on role-playing language agents. framework with agent team optimization. arXiv preprint
arXivpreprintarXiv:2404.18231. arXiv:2310.02170.
Chen,J.;Yuan,S.;Ye,R.;Majumder,B.P.;andRichardson, Lu,Q.;Qiu,B.;Ding,L.;Xie,L.;andTao,D.2023. Error
K.2023a. Putyourmoneywhereyourmouthis:Evaluating analysis prompting enables human-like translation evalua-
strategicplanningandexecutionofllmagentsinanauction tioninlargelanguagemodels:Acasestudyonchatgpt.
arena. arXivpreprintarXiv:2310.05746. Mei, K.; Li, Z.; Xu, S.; Ye, R.; Ge, Y.; and Zhang,
Y. 2024. Llm agent operating system. arXiv preprint
Chen, W.; Su, Y.; Zuo, J.; Yang, C.; Yuan, C.; Qian,
arXiv:2403.16971.
C.; Chan, C.-M.; Qin, Y.; Lu, Y.; Xie, R.; et al. 2023b.
Agentverse: Facilitating multi-agent collaboration and ex- Pan,X.;Gao,D.;Xie,Y.;Wei,Z.;Li,Y.;Ding,B.;Wen,J.-
ploring emergent behaviors in agents. arXiv preprint R.;andZhou,J.2024. VeryLarge-ScaleMulti-AgentSim-
arXiv:2308.10848. ulationinAgentScope. arXivpreprintarXiv:2407.17789.
Gao,C.;Lan,X.;Lu,Z.;Mao,J.;Piao,J.;Wang,H.;Jin,D.; Park,J.S.;O’Brien,J.;Cai,C.J.;Morris,M.R.;Liang,P.;
andLi,Y.2023.S3:Social-networkSimulationSystemwith and Bernstein, M. S. 2023. Generative agents: Interactive
LargeLanguageModel-EmpoweredAgents. arXivpreprint simulacra of human behavior. In Proceedings of the 36th
arXiv:2307.14984. annualacmsymposiumonuserinterfacesoftwareandtech-
nology,1–22.
Gao,L.;Dai,Z.;Pasupat,P.;Chen,A.;Chaganty,A.T.;Fan,
Peng, B.; Galley, M.; He, P.; Cheng, H.; Xie, Y.; Hu, Y.;
Y.; Zhao, V. Y.; Lao, N.; Lee, H.; Juan, D.-C.; et al. 2022.
Huang,Q.;Liden,L.;Yu,Z.;Chen,W.;etal.2023. Check
Rarr: Researching and revising what language models say,
your facts and try again: Improving large language models
usinglanguagemodels. arXivpreprintarXiv:2210.08726.
with external knowledge and automated feedback. arXiv
Guo, T.; Chen, X.; Wang, Y.; Chang, R.; Pei, S.; Chawla, preprintarXiv:2302.12813.
N.V.;Wiest,O.;andZhang,X.2024.Largelanguagemodel
Team, G.; Anil, R.; Borgeaud, S.; Wu, Y.; Alayrac, J.-B.;
based multi-agents: A survey of progress and challenges.
Yu, J.; Soricut, R.; Schalkwyk, J.; Dai, A. M.; Hauth, A.;
arXivpreprintarXiv:2402.01680.
etal.2023. Gemini:afamilyofhighlycapablemultimodal
Hatalis,K.;Christou,D.;Myers,J.;Jones,S.;Lambert,K.; models. arXivpreprintarXiv:2312.11805.
Amos-Binks, A.; Dannenhauer, Z.; and Dannenhauer, D.
Tesfatsion,L.2023.Agent-basedcomputationaleconomics:
2023. Memory Matters: The Need to Improve Long-Term Overviewandbriefhistory. Artificialintelligence,learning
MemoryinLLM-Agents. InProceedingsoftheAAAISym- andcomputationineconomicsandfinance,41–58.
posiumSeries,volume2,277–280.
Touvron,H.;Lavril,T.;Izacard,G.;Martinet,X.;Lachaux,
Hong,S.;Zheng,X.;Chen,J.;Cheng,Y.;Wang,J.;Zhang, M.-A.; Lacroix, T.; Rozie`re, B.; Goyal, N.; Hambro, E.;
C.; Wang, Z.; Yau, S. K. S.; Lin, Z.; Zhou, L.; et al. 2023. Azhar, F.; et al. 2023. Llama: Open and efficient founda-
Metagpt: Meta programming for multi-agent collaborative tionlanguagemodels. arXivpreprintarXiv:2302.13971.
framework. arXivpreprintarXiv:2308.00352.
Wang,J.;Jain,S.;Zhang,D.;Ray,B.;Kumar,V.;andAthi-
Hua,W.;Fan,L.;Li,L.;Mei,K.;Ji,J.;Ge,Y.;Hemphill,L.; waratkun,B.2024.ReasoninginTokenEconomies:Budget-
andZhang,Y.2023. Warandpeace(waragent):Largelan- Aware Evaluation of LLM Reasoning Strategies. arXiv
guage model-based multi-agent simulation of world wars. preprintarXiv:2406.06461.
arXivpreprintarXiv:2311.17227. Wu, J. J.; and Fard, F. H. 2024. Benchmarking the Com-
Jiang, A. Q.; Sablayrolles, A.; Roux, A.; Mensch, A.; municationCompetenceofCodeGenerationforLLMsand
Savary, B.; Bamford, C.; Chaplot, D. S.; Casas, D. d. l.; LLMAgent. arXivpreprintarXiv:2406.00215.
Hanna,E.B.;Bressand,F.;etal.2024. Mixtralofexperts. Wu, Q.; Bansal, G.; Zhang, J.; Wu, Y.; Zhang, S.; Zhu, E.;
arXivpreprintarXiv:2401.04088. Li,B.;Jiang,L.;Zhang,X.;andWang,C.2023. Autogen:Enabling next-gen llm applications via multi-agent conver-
sationframework. arXivpreprintarXiv:2308.08155.
Yang,A.;Yang,B.;Hui,B.;Zheng,B.;Yu,B.;Zhou,C.;Li,
C.;Li,C.;Liu,D.;Huang,F.;etal.2024. Qwen2technical
report. arXivpreprintarXiv:2407.10671.
Yuan, S.; Chen, J.; Fu, Z.; Ge, X.; Shah, S.; Jankowski,
C.R.;Xiao,Y.;andYang,D.2023. Distillingscriptknowl-
edge from large language models for constrained language
planning. arXivpreprintarXiv:2305.05252.
Zhang,K.;Zhao,F.;Kang,Y.;andLiu,X.2023. Memory-
augmented llm personalization with short-and long-term
memorycoordination. arXivpreprintarXiv:2309.11696.
Zhang, Y.; Yang, S.; Bai, C.; Wu, F.; Li, X.; Li, X.;
and Wang, Z. 2024a. Towards Efficient LLM Grounding
for Embodied Multi-Agent Collaboration. arXiv preprint
arXiv:2405.14314.
Zhang, Y.; Yuan, S.; Hu, C.; Richardson, K.; Xiao, Y.; and
Chen, J. 2024b. Timearena: Shaping efficient multitasking
languageagentsinatime-awaresimulation. arXivpreprint
arXiv:2402.05733.
Zhu, D.; Chen, J.; Shen, X.; Li, X.; and Elhoseiny, M.
2023. Minigpt-4: Enhancing vision-language understand-
ing with advanced large language models. arXiv preprint
arXiv:2304.10592.Appendix
ExperimentalEnvironment
AllexperimentsareconductedusinganNVIDIAA100-80GTensorCoreGPU,utilizingTier5APIsforbothChatGPT-4oand
ChatGPT-4omini5.
SupplementaryRelatedWork
Management of LLM-based Agents Research on the management of LLM-based agents is limited. Popular LLM-based
multi-agent systems, such as MetaGPT (Hong et al. 2023), AgentVerse (Chen et al. 2023b), and AutoGen (Wu et al. 2023),
typically divide tasks into smaller sub-tasks and allocate multiple agents to complete them. However, their approaches to
planningaresequential,lackingstrategicmanagement.Incontrast,AIOS(Meietal.2024)introducesanLLMagentoperating
system that provides module isolation and integrates LLM and OS functions. It employs various managers, including Agent
Scheduler,ContextManager,MemoryManager,StorageManager,ToolManager,andAccessManager,toeffectivelyhandle
numerousagents.However,AIOSmanuallyorganizesdifferentapplications,suchasamathproblem-solvingagentandatravel
planningagent,ratherthanmultipleagentswithinthesameapplication.ThisapproachrepresentsadifferenttypeofSOPandis
notapplicabletolarge-scaleLLM-MAsystems,asitisimpracticalforhumanstowriteeverySOPandpromptforeachagent
whenthescalereachesthousandsorevenmillions.
GobangGameExperimentSetupandResult
Setup WeuseChatGPT-4oAPIforthisexperiment.The‘temperature’parameterissetto0.
Cost Thetotalcostis$6.9.
Results First,theBossagentreceivesthefollowinginitialhand-writtenmeta-prompt:
1 You are Bob, the leader of a software development club. Your club’s current goal is to
develop a Gobang game with a very strong AI, no frontend, and can be executed by
running ’main.py’. You are now recruiting employees and assigning work to them. For
each employee(including yourself), please write a prompt. Please specify his name(one
word, no prefix), his job, what kinds of work he needs to do. You MUST clarify all his
possible collaborators’ names and their jobs in the prompt. The format should be like
(The example is for Alice in another novel writing project):
2
3 <employee name="Alice">
4 You are Alice, a novelist. Your job is to write a single chapter of a novel with 1000
words according to the outline (outline.txt) from Carol, the architect designer, and
pass it to David (chapter_x.txt), the editor. Please only follow this routine. Your
collarborators include Bob(the Boss), Carol(the architect designer) and David(the
editor).
5 </employee>
6
7 Please note that every employee is lazy, and will not care anything not mentioned by your
prompt. To ensure the completion of your project, the work of each employee should be
**non-divisable**, detailed in specific action(like what file to write. Only txt and
python files are supported) and limited to a simple and specific instruction. All the
employees (including yourself) should cover the whole SOP (for example, first deciding
all the features to develop is recommended). Speed up the process by adding more
employees to divide the work.
8
9 After the designation process, please specify an employee’s name to initiate the whole
project, in the format <beginner>Name</beginner>.
Inonetrial,themodelgeneratesthefollowingresponse:
1 <employee name="Bob">
2 You are Bob, the leader of the software development club. Your job is to decide all the
features to develop for the Gobang game and write them down in a file named ’features.
txt’. Your collaborators include Alice (the game designer), Carol (the AI developer),
David (the game logic developer), and Eve (the integrator).
3 </employee>
4
5 <employee name="Alice">
5https://platform.openai.com/docs/guides/rate-limits/usage-tiers?context=tier-five6 You are Alice, a game designer. Your job is to design the game rules and user interactions
based on the features listed in ’features.txt’ from Bob, and write them down in a
file named ’game_design.txt’. Your collaborators include Bob (the leader), Carol (the
AI developer), David (the game logic developer), and Eve (the integrator).
7 </employee>
8
9 <employee name="Carol">
10 You are Carol, an AI developer. Your job is to develop the AI for the Gobang game based on
the game design in ’game_design.txt’ from Alice, and write the AI code in a file
named ’ai.py’. Your collaborators include Bob (the leader), Alice (the game designer),
David (the game logic developer), and Eve (the integrator).
11 </employee>
12
13 <employee name="David">
14 You are David, a game logic developer. Your job is to develop the game logic for the
Gobang game based on the game design in ’game_design.txt’ from Alice, and write the
game logic code in a file named ’game_logic.py’. Your collaborators include Bob (the
leader), Alice (the game designer), Carol (the AI developer), and Eve (the integrator)
.
15 </employee>
16
17 <employee name="Eve">
18 You are Eve, an integrator. Your job is to integrate the AI code from ’ai.py’ by Carol and
the game logic code from ’game_logic.py’ by David, and write the integration code in
a file named ’main.py’ to ensure the Gobang game can be executed by running ’main.py’.
Your collaborators include Bob (the leader), Alice (the game designer), Carol (the AI
developer), and David (the game logic developer).
19 </employee>
20
21 <beginner>Bob</beginner>
Then,ourprogramutilizestheseinitialpromptsasthesystemmessagetocreateagents,withanadditionalhand-writtenprompt:
1 Your club’s current goal is to develop a Gobang game with a very strong AI, no frontend,
and can by executed by running ’main.py’. The project should be executable in files.
2
3 You MUST use exactly <talk goal="Name">TalkContent</talk> format to talk to others, like:
4
5 <talk goal="Alice">Alice, I have completed ’a.txt’. Please check it for your work and talk
to me again if needed. </talk>.
6
7 Otherwise, they will not receive your message, and the conversation will terminate. "Name"
should only be ONE specific employee. If there are more than one talk goal, please
use multiple <talk></talk>, and they will move on IN THE SAME TIME.
8
9 You must use function calls in JSON for file operations.
10
11 Leave a remarkable TODO wherever there is an unfinished task. Please keep updating your
TODO list until everything is done. In that case, you should clear your TODO list txt
file(write nothing into it) and output "TERMINATE" to end the project.
The initial prompt and the additional prompt are the only prompts that are written by hand, showcasing our framework’s
autonomy.
Then, Bob, the beginner, will be activated first. Other agents will be activated after receiving a message. After activation,
eachagentwillupdateitsownTODOlist,utilizefunctioncallstocompleteitstasks,ortalktootheragents,untilitclearsits
TODOlistandmarksitstaskas’Done’.Ifanagentwantstotalktoothers,thetalkcontentwillbeaddedtothecorresponding
agentssimultaneously,andtheywillbecalledinparallel.
Weprovidethefollowingfunctioncallsforagents:
1 {
2 "name": "exec_python_file",
3 "description": "Execute a Python file and get the result. Cannot detect bugs. Be
sure to review the code first. If the program requires user input, please use
this function first, and then use ’input’ function to pass your input.",
4 "parameters": {
5 "type": "object",6 "properties": {
7 "filename": {
8 "type": "string",
9 "description": "The filename of the Python file to be executed."
10 }
11 }
12 }
13 },
14 {
15 "name": "input",
16 "description": "Input a string to the running Python code. Only available after
exec_python_file is called.",
17 "parameters": {
18 "type": "object",
19 "properties": {
20 "content": {
21 "type": "string",
22 "description": "The string to be input."
23 }
24 }
25 }
26 },
27 {
28 "name": "read_file",
29 "description": "Read the content of a file. Return file content and file hash. To
modify a file, please first read it, then write it(using the same hash)." if
written_files else "No existing files are available. All the files are empty
.",
30 "parameters": {
31 "type": "object",
32 "properties": {
33 "filename": {
34 "type": "string",
35 "description": "The filename to be read."
36 }
37 }
38 },
39 "required": [
40 "filename"
41 ]
42 },
43 {
44 "name": "write_file",
45 "description": f"Write raw content to a file. If the file exists, only overwrite
when overwrite = True and hash value (get it from read_file) is correct. ",
46 "parameters": {
47 "type": "object",
48 "properties": {
49 "filename": {
50 "type": "string",
51 "description": "The filename to be written."
52 },
53 "content": {
54 "type": "string",
55 "description": r"The content to be written. Use \n instead of \\n for
a new line."
56 },
57 "overwrite": {
58 "type": "boolean",
59 "description": "Optional. Whether to overwrite the file if it exists.
Default is False. If True, base_commit_hash is required."
60 },
61 "base_commit_hash": {
62 "type": "string",
63 "description": "Optional. The hash value of the file to be modified(get it from read_file). Required when overwrite = True."
64 }
65 }
66 },
67 "required": [
68 "filename",
69 "content"
70 ]
71 },
72 {
73 "name": "add_agent",
74 "description": "Recruit an agent to the conversation as your subordinate. Return
the real name. To add multiple agents, please call this function multiple
times. After that, you MUST talk to them using the <talk goal=\"Name\">Content
</talk> format. ",
75 "parameters": {
76 "type": "object",
77 "properties": {
78 "name": {
79 "type": "string",
80 "description": "The name of the agent to be added. Do not use space.
To ensure the uniqueness of the name, the real name will be
returned later. Please use names like EcoTester7x"
81 },
82 "description": {
83 "type": "string",
84 "description": "The description of the agent, for your reference."
85 },
86 "initial_prompt": {
87 "type": "string",
88 "description": ’’’
89 The initial prompt and memory of that agent. Please specify his name(
one word, no prefix), his job, what kinds of work he needs to do.
You MUST clarify all his possible collaborators’ EXACT names and
their jobs in the prompt, and all the files he can write. The
format should be like (The example is for Alice in another novel
writing project):
90 You are Alice, a novelist. Your job is to write a single chapter of a
novel with 1000 words according to the outline (outline.txt) from
Carol, the architect designer, and pass it to David (chapter_x.txt
), the editor. Please only follow this routine. Your
collarborators include Bob(the Boss), Carol(the architect designer
) and David(the editor).
91 Please note that every agent is lazy, and will not care anything not
mentioned by your prompt. To ensure the completion of the project,
the work of each minister should be non-divisable(please cover
all the ministries concerning all the aspects of the country),
detailed in specific action(like what file to write. Only txt
files are supported) and limited to a simple and specific
instruction(For instance, instead of "align with the overall
national policies", please specify those policies).
92 ’’’
93 }
94 }
95 },
96 "required": [
97 "name",
98 "description",
99 "initial_prompt"
100 ]
101 },
102 {
103 "name": "talk",
104 "description": "Leave a message to specific agents for feedback. They will reply
to you later on.",105 "parameters":{
106 "type": "object",
107 "properties": {
108 "messages": {
109 "type": "string",
110 "description": "All the messages to be sent. The format must look like
: <talk goal=\"Name\">TalkContent</talk><talk goal=\"Name\">
TalkContent</talk>"
111 }
112 }
113 },
114 "required": [
115 "messages"
116 ]
117 },
118 {
119 "name": "TERMINATE",
120 "description": "End your current conversation. Please ensure all your tasks have
been done."
121 }
Thecommunicationcontentandfunctioncallresultsareaddeddirectlyintothecorrespondingagent’smemory.Eachfunction
call is implemented according to its description, and can be found in our source code. In this experiment, we disable the
add agentfunctionforefficiency.
Thememoryofeachagentisimplementedbyachromavectordatabase6.Itreturnsthelastmessage’smostrelevantmessage,
aswellasthesixlatestmessages(inthisexperiment),uponeachmemoryretrieval.
Inourexperiment,theframeworksuccessfullyproducesarunnableGobanggamewithanaiveAIuponthefirsttrial,whose
interfaceisshowninFigure5.Thistrialtakes800secondsand$6.9tocomplete.Thecompletelogandprogramofthistrial
canbefoundinourgithubrepository.ThismayvaryasLLM’soutputisunstable.
Figure5:InterfaceofGobangdemoproducedbyMegaAgent
Human-writtenSOPforGobangGame
This is the human-written SOP for the Gobang Game, intended to compare its performance with that of the MegaAgent-
generatedSOP.
1 <employee name="Bob">
2 You are Bob, the boss of the software development team. You are responsible for monitoring
the progress of the project. You must ensure that the project can be executed by
running the main.py file in the end. Your team members are Alan(responsible for the
6https://www.trychroma.com/game logic design), Alice(responsible for board.py), Charlie(responsible for main.py),
David(responsible for ai.py), and Emily(responsible for testing)
3 </employee>
4
5 <employee name="Alan">
6 You are Alan, an architect designer. Your job is to design the game logic of the Gobang
game, and possible implementation of AI. You need to write the game logic in design.
txt and pass it to your teammates. Your collaborators include Bob(the Boss), Alice(
responsible for board.py), Charlie(responsible for main.py), and David(responsible for
ai.py).
7 </employee>
8
9 <employee name="Alice">
10 You are Alice, a software developer. Your job is to implement the board.py file according
to the design from Alan in design.txt. Your collaborators include Bob(the Boss), Alan(
responsible for the game logic design), Charlie(responsible for main.py), David(
responsible for ai.py), and Emily(responsible for testing).
11 </employee>
12
13 <employee name="Charlie">
14 You are Charlie, a software developer. Your job is to implement the main.py file according
to the design from Alan in design.txt. Ensure it can cooperate with board.py(by Alice
) and ai.py(by David). You can also write the test.py file for testing. Your
collaborators include Bob(the Boss), Alan(responsible for the game logic design),
Alice(responsible for board.py), David(responsible for ai.py), and Emily(responsible
for testing).
15 </employee>
16
17 <employee name="David">
18 You are David, a AI developer. Your job is to implement a naive ai.py file, just making
random moves. Try to make the AI as simple and quickly as possible. Your collaborators
include Bob(the Boss), Alan(responsible for the game logic design), Alice(responsible
for board.py), Charlie(responsible for main.py), and Emily(responsible for testing).
19 </employee>
20
21 <employee name="Emily">
22 You are Emily, a tester. Your job is to test the correctness and efficiency of the Gobang
game. You need to write the test.py file for testing. You need to ensure that the game
can be executed correctly by running the main.py file. You need to test throughly
until the game ends. Your collaborators include Bob(the Boss), Alan(responsible for
the game logic design), Alice(responsible for board.py), Charlie(responsible for main.
py), and David(responsible for ai.py).
23 </employee>
24
25 <beginner>Bob</beginner>
ComparisonofGobangGameExperimentwithotherLLM-MASystems
WeconductthesameGobanggametaskexperimentonstate-of-the-artLLM-MAsystemsasofJuly2024.
AutoGenSetupandResult WetestAutoGenv1.0.16basedonitsmulti-agentcodingdemo.WeonlyfillintheAPIkeyand
change its prompt to: Develop a Gobang game with an AI , and leave everything else unchanged. We do not allow runtime
humaninput.
AsshowninFigure6andFigure7,ItturnsoutthatAutoGengeneratesaprogramendingwith# To be continued..
afterabouttwominutes,andgetsstuckwhentryingtoexecuteit.ThepossiblereasonforitsfailureisthatitsSOPistoosimple,
anddoesnotincludeenoughcommunication(likecodereview)betweenagents.
We try three times, which all end with similar results. In another one trial, as shown in Figure 8 and Figure 9, AutoGen
successfullyproducesanAIwithmini-maxalgorithm,butnopruning.Thisisimpossibletoexecuteinalimitedtime,asthe
statespaceofGobanggameisverylarge.Wetryanotherprompt:DevelopaGobanggamewithaverystrongAI,nofrontend,
andcanbeexecutedbyrunning’main.py’,andgetsimilarresults.
Bythetimeitgetsstuck,AutoGenhascost$0.1and120seconds.SinceAutoGencannotcompletethistask,weareunable
tocounttheoverallcost.
MetaGPTSetupandResult WetestMetaGPTv0.8.1byfeedingtheprompt:DevelopaGobanggamewithanAI.Wefill
intheAPIkeyandleaveeverythingelseunchanged.ItproducesresultslikeFigure10,anditsexecutiontimeisaroundeightFigure6:CodeProducedbyAutoGen
Figure7:ExecutionResultofAutoGenFigure8:CodeProducedbyAutoGeninAnotherTrial
Figure9:ExecutionResultofAutoGeninAnotherTrial.AIwillkeepthinkingforalmostinfinitetime.minutes.Wetrythreetimes,andfindnoneofthemcanproduceanAImove.Themajorerrorsare:
• The code is not executable, and raises an error. The possible reason is that MetaGPT does not have external tools to
executeanddebugtheproducedcode.
• TheproducedprogramisnotaGobanggame(forexample,atic-tac-toegameinstead).Thepossiblereasonforfailure
isthatitsSOPistoosimple,andtherequirementforcommunicationbetweenagentsisnotsufficient.
• AIfallsintoaninfiniteloop.ThepossiblereasonisthatMetaGPTdoesnothaveexternaltoolstoexecuteanddebugthe
producedcode,andthecurrentChatGPTAPIisnotcapableofdevelopingtheAlphaBetaalgorithmwithouterrorsbyitself.
Figure10:ExecutionResultoftheCodeProducedbyMetaGPT
CAMELSetupandResult WeusetheCAMELv0.1.6.0JupiterNotebookdemoinColab.WefillintheAPIkey,changethe
taskpromptto:DevelopaGobanggamewithanAI,andleaveeverythingelseunchanged.Wetrythreetimes.Itturnsoutthat
CAMELcanonlyproducecodesegments.Forexample,inonetrial,asshowninFigure11,CAMELforgetstowriteui.py,
whichisincludedingame.py.Thepossiblereasonforthisisthatitsplanningandcontextualabilityisweak.Thetotalcostof
onetrialis$0.76.
AgentVerseSetupandResult WetestAgentVersev0.1.8.1basedonitstasksolving/pythoncalculatorscenario.
WefillintheAPIkey,changethemax turnparameterfrom3to10toallowmoreroundsforbetterresults,andmodifythe
taskdescriptionto:developaGobanggamewithanAIusingPython3.Weleaveeverythingelseunchangedandtrythreetimes.
Wefindthat,inthefirstandsecondtrial,theagentkeepsrejectingtheresultforallthetenrounds,asshowninFigure12;as
forthethirdtrial,althoughtheagentacceptstheresult,thecodeasshowninFigure13stillpresentsmanyplaceholders,and
cannotbeexecuted.Giventhattenroundssignificantlyexceedthedefaultsetting,weconcludethatAgentVerseisunlikelyto
successfully complete the Gobang task even with additional rounds and opportunities. One trial costs about $8.07, and 1980
seconds.
Figure11:AnexampleofCAMEL’soutput.Itforgottowriteui.pyinthistrial.Figure12:ArejectedtrialofAgentVerseaftertenrounds.
Figure13:AnacceptedtrialofAgentVerse.Thecodestillcontainsmanyplaceholders,andisnotexecutable.Tosumup,ourMegaAgentframeworkislikelytobethefirstandonlyLLM-MAsystemtosolvetheGobangtasksuccess-
fully.
Industry-WiseNationPolicySimulationSetupandResult
Setup WeusetheChatGPT-4ominiAPIforthisexperiment.The‘temperature’parameterissettodefault.Thememoryof
eachagentreturnsthemostrelevantmessage,aswellastenlatestmessagesinthisexperiment.Inthisexperiment,wedisable
theexec python filefunctionforefficiency,whichwouldnotbeusedevenifenabled.
Cost Thetotalcostofthisexperimentis$3.3.
Results TheBossagentreceivesthefollowinginitialhand-writtenmeta-prompt:
1 You are NationLeader, the leader of a pioneering nation. You want to develop the best
detailed policy for your cutting-edge country in ’policy_{department}.txt’. You are
now recruiting ministers and assigning work to them. For each possible minister,
please write a prompt. Please specify his name(no space), his job, what kinds of work
he needs to do. Note that each of them can recruit subordinates and do tests on them
based on your policy. You MUST clarify all his possible collaborators’ names and their
jobs in the prompt. The format should be like (The example is for Alice in another
novel writing project):
2
3 <employee name="MinisterName">
4 You are MinisterName, the {job_title} of {specific_department}. Your job is to develop a
comprehensive policy document (’{file_name}.txt’) according to the guidelines provided
in ’policy_{department}.txt’. You will collaborate with {collaborator1_name} (the {
collaborator1_role}), {collaborator2_name} (the {collaborator2_role}), and pass the
final document to {collaborator3_name} (the {collaborator3_role}). You can recruit
lots of citizens for testings. Ensure adherence to the specified routine only. Your
collaborators include {list_of_collaborators}.
5 </employee>
6
7 Also, write a prompt for NationLeader (yourself). Please note that every minister is lazy,
and will not care anything not mentioned by your prompt. To ensure the completion of
your project, the work of each minister should be non-divisable(please cover ALL the
ministries concerning ALL the aspects of the country), detailed in specific action(
like what file to write. Only txt files are supported) and limited to a simple and
specific instruction. All the minister (including yourself) should cover the whole SOP
to develop a policy. They should simultaneously create the citizens and test on them.
Speed up the process by adding more ministers to divide the work.
Inonetrial,themodelgeneratesthefollowingresponse:
1 ‘‘‘xml
2 <employee name="MinisterEducation">
3 You are MinisterEducation, the Minister of Education. Your job is to develop a
comprehensive policy document (’policy_education.txt’) according to the guidelines
provided in ’policy_education.txt’. You will collaborate with MinisterTraining (the
Minister of Workforce Development), MinisterHealth (the Minister of Health), and pass
the final document to MinisterFinance (the Minister of Finance). You can recruit lots
of citizens for testing educational programs. Ensure adherence to the specified
routine only. Your collaborators include MinisterTraining, MinisterHealth, and
MinisterFinance.
4 </employee>
5
6 <employee name="MinisterHealth">
7 You are MinisterHealth, the Minister of Health. Your job is to develop a comprehensive
policy document (’policy_health.txt’) according to the guidelines provided in ’
policy_health.txt’. You will collaborate with MinisterEducation (the Minister of
Education), MinisterFinance (the Minister of Finance), and pass the final document to
MinisterInfrastructure (the Minister of Infrastructure). You can recruit lots of
citizens for testing health initiatives. Ensure adherence to the specified routine
only. Your collaborators include MinisterEducation, MinisterFinance, and
MinisterInfrastructure.
8 </employee>
9
10 <employee name="MinisterFinance">11 You are MinisterFinance, the Minister of Finance. Your job is to develop a comprehensive
policy document (’policy_finance.txt’) according to the guidelines provided in ’
policy_finance.txt’. You will collaborate with MinisterHealth (the Minister of Health)
, MinisterEducation (the Minister of Education), and pass the final document to
MinisterEconomy (the Minister of Economy). You can recruit lots of citizens for
testing financial literacy programs. Ensure adherence to the specified routine only.
Your collaborators include MinisterHealth, MinisterEducation, and MinisterEconomy.
12 </employee>
13
14 <employee name="MinisterEconomy">
15 You are MinisterEconomy, the Minister of Economy. Your job is to develop a comprehensive
policy document (’policy_economy.txt’) according to the guidelines provided in ’
policy_economy.txt’. You will collaborate with MinisterFinance (the Minister of
Finance), MinisterTrade (the Minister of Trade), and pass the final document to
MinisterInnovation (the Minister of Innovation). You can recruit lots of citizens for
testing economic initiatives. Ensure adherence to the specified routine only. Your
collaborators include MinisterFinance, MinisterTrade, and MinisterInnovation.
16 </employee>
17
18 <employee name="MinisterTrade">
19 You are MinisterTrade, the Minister of Trade. Your job is to develop a comprehensive
policy document (’policy_trade.txt’) according to the guidelines provided in ’
policy_trade.txt’. You will collaborate with MinisterEconomy (the Minister of Economy)
, MinisterInnovation (the Minister of Innovation), and pass the final document to
MinisterInfrastructure (the Minister of Infrastructure). You can recruit lots of
citizens for testing trade policies. Ensure adherence to the specified routine only.
Your collaborators include MinisterEconomy, MinisterInnovation, and
MinisterInfrastructure.
20 </employee>
21
22 <employee name="MinisterInnovation">
23 You are MinisterInnovation, the Minister of Innovation. Your job is to develop a
comprehensive policy document (’policy_innovation.txt’) according to the guidelines
provided in ’policy_innovation.txt’. You will collaborate with MinisterTrade (the
Minister of Trade), MinisterEconomy (the Minister of Economy), and pass the final
document to MinisterTechnology (the Minister of Technology). You can recruit lots of
citizens for testing innovative solutions. Ensure adherence to the specified routine
only. Your collaborators include MinisterTrade, MinisterEconomy, and
MinisterTechnology.
24 </employee>
25
26 <employee name="MinisterTechnology">
27 You are MinisterTechnology, the Minister of Technology. Your job is to develop a
comprehensive policy document (’policy_technology.txt’) according to the guidelines
provided in ’policy_technology.txt’. You will collaborate with MinisterInnovation (the
Minister of Innovation), MinisterInfrastructure (the Minister of Infrastructure), and
pass the final document to MinisterEnvironment (the Minister of Environment). You can
recruit lots of citizens for testing technological advancements. Ensure adherence to
the specified routine only. Your collaborators include MinisterInnovation,
MinisterInfrastructure, and MinisterEnvironment.
28 </employee>
29
30 <employee name="MinisterInfrastructure">
31 You are MinisterInfrastructure, the Minister of Infrastructure. Your job is to develop a
comprehensive policy document (’policy_infrastructure.txt’) according to the
guidelines provided in ’policy_infrastructure.txt’. You will collaborate with
MinisterHealth (the Minister of Health), MinisterTechnology (the Minister of
Technology), and pass the final document to MinisterEnvironment (the Minister of
Environment). You can recruit lots of citizens for testing infrastructure projects.
Ensure adherence to the specified routine only. Your collaborators include
MinisterHealth, MinisterTechnology, and MinisterEnvironment.
32 </employee>
33
34 <employee name="MinisterEnvironment">
35 You are MinisterEnvironment, the Minister of Environment. Your job is to develop acomprehensive policy document (’policy_environment.txt’) according to the guidelines
provided in ’policy_environment.txt’. You will collaborate with MinisterTechnology (
the Minister of Technology), MinisterInfrastructure (the Minister of Infrastructure),
and pass the final document to MinisterEducation (the Minister of Education). You can
recruit lots of citizens for testing environmental policies. Ensure adherence to the
specified routine only. Your collaborators include MinisterTechnology,
MinisterInfrastructure, and MinisterEducation.
36 </employee>
37
38 <employee name="NationLeader">
39 You are NationLeader, the leader of the nation. Your job is to oversee the development of
all comprehensive policy documents (’policy_{department}.txt’) according to the
guidelines provided in ’policy_{department}.txt’. You will ensure that each minister
collaborates effectively with their respective teams and adheres to the specified
routines. You will review the final documents submitted by each minister and ensure
they are aligned with the nation’s vision. Your ministers include MinisterEducation,
MinisterHealth, MinisterFinance, MinisterEconomy, MinisterTrade, MinisterInnovation,
MinisterTechnology, MinisterInfrastructure, and MinisterEnvironment. Ensure that all
policies are developed efficiently and that citizens are recruited for testing across
all departments.
40 </employee>
41 ‘‘‘
42 <beginner>NationLeader</beginner>
Everyagentiscreatedwithanadditionalhand-writtenprompt:
1 Your nation’s current goal is to develop the best detailed policy for your cutting-edge
country in ’policy_{department}.txt’. The policy should be devided into smaller parts.
After the policy is drafted, if you are a minister, you may recruit, and test on no
more than 5 citizens(by talking to them), revising these files according to citizens’
feedbacks. Please focus on the completion and quality of the policy, detailed in
specific laws and actions.
2
3 You MUST use only function calls to work and communicate with other agents. Do not output
directly! For amendments to the policy, please talk to the corresponding minister,
instead of the tester.
4
5 Leave a remarkable TODO wherever there is an unfinished task. Please keep updating your
TODO list(todo_yourname.txt) until everything is done. In that case, you should clear
your TODO list txt file(write nothing into it) and output "TERMINATE" to end the your
part.
After that, NationLeader spontaneously engages in conversations with the minister agents. Each minister then utilizes the
add agentfunctioncalltodrafttheirpoliciesandcreatecitizenagentstotestandrefinethesepolicies.Citizentestersdiscuss
theirfeedbackamongthemselvesandalsocommunicatewiththeirsuperiorstoprovidefeedback.Moreover,ministersengage
indiscussionswithoneanothertoenhancecooperationacrossministries.
Thefilesystemmanageseachagent’stodolist,recordsthecitizens’feedback,andmaintainsthemostrecentversionofeach
ministry’spolicy.
Forexample,atodolistforacitizentestermightlooklike:
1 - Specify the frequency and scope of health impact assessments.
2 - Include specific targets and timelines for air quality standards.
3 - Add metrics for success in active transportation promotion.
4 - Include incentives for businesses to support active transportation.
5 - Outline specific safety measures for transportation safety.
6 - Include a plan for regular safety audits of public transportation systems.
7 - Mention accessibility considerations in urban space design.
8 - Include partnerships with local health organizations for mental health initiatives.
9 - Emphasize community involvement in the planning process.
Followingthehealthtesters’discussions,thefeedbackontheeducationpolicymightappearasfollows:
1 # Feedback on Infrastructure Policy Draft
2
3 ## General Observations
4 - The policy provides a comprehensive framework for infrastructure development, with a
strong emphasis on health, technology, and environmental sustainability.5
6 ## Health Infrastructure
7 ### Accessibility
8 - The focus on improving access to healthcare facilities through public transport and
active transportation is commendable. However, it would be beneficial to include
specific metrics or targets for accessibility improvements.
9
10 ### Health Impact Assessments
11 - The inclusion of health impact assessments is crucial. It is recommended to specify the
types of health outcomes that will be measured and how these assessments will
influence project planning and design.
12 - Consider establishing a timeline for conducting these assessments to ensure they are
integrated into the project lifecycle.
13
14 ### Stakeholder Engagement
15 - Engaging health professionals and community members is essential. It may be useful to
outline specific methods for this engagement, such as surveys, public forums, or focus
groups.
16
17 ## Technology Integration
18 - The integration of technology in infrastructure projects is well-addressed. However, it
would be beneficial to include examples of innovative technologies that could be
utilized to enhance health outcomes.
19
20 ## Environmental Considerations
21 - The environmental section is robust, but it should explicitly connect how sustainable
practices can positively impact public health, such as reducing pollution and
promoting healthier living environments.
22
23 ## Conclusion
24 - Overall, the policy is well-structured and aligns with national goals. Further detailing
in specific areas, particularly around health metrics and stakeholder engagement,
will enhance its effectiveness.
25
26 ## Recommendations
27 1. Include specific metrics for accessibility improvements in healthcare.
28 2. Specify health outcomes to be measured in health impact assessments.
29 3. Outline methods for stakeholder engagement in health assessments.
30 4. Provide examples of innovative technologies that can improve health outcomes.
31 5. Connect sustainable practices to public health benefits more explicitly.
Andthefinalversionofthehealthpolicymightbepresentedas:
1 # Health-Related Aspects of Urban Development Policy
2
3 ## 1. Health Impact Assessments
4 - Conduct health impact assessments for all urban development projects exceeding a
specified budget threshold (to be defined).
5 - Assessments should be conducted at the planning stage and include evaluations of
potential health risks and benefits.
6 - Frequency of assessments to be determined based on project size and scope.
7
8 ## 2. Accessibility Guidelines
9 - Ensure all urban designs adhere to accessibility guidelines for individuals with
disabilities.
10 - Include specific metrics for evaluating accessibility improvements over time, such as
the percentage of public spaces meeting accessibility standards.
11
12 ## 3. Collaboration with Health Organizations
13 - Outline specific roles and responsibilities for local health organizations in community
health initiatives.
14 - Establish regular communication channels between urban planners and health organizations
to ensure alignment of goals.
15
16 ## 4. Safety Measures17 - Implement regular safety audits for public transportation systems to assess the
effectiveness of safety measures such as surveillance cameras and emergency call
buttons.
18 - Develop a plan for continuous improvement based on audit findings, including a timeline
for conducting safety audits and implementing improvements.
19
20 ## 5. Community Health Initiatives
21 - Promote community health initiatives in collaboration with local health organizations,
focusing on preventive care and health education.
22 - Engage community members in the planning process to ensure their health needs are
addressed.
23 - Expand on the community engagement process in health initiatives to include diverse
populations and ensure their voices are heard.
24
25 ## 6. Monitoring and Evaluation
26 - Establish a framework for monitoring and evaluating the health-related aspects of urban
development policies over time.
27 - Include metrics for success, such as reductions in health disparities and improvements
in community health outcomes.
28 - Enhance evaluation metrics for community health initiatives to include specific targets
for health outcomes and community engagement levels.
29
30 ## 7. Mental Health Support
31 - **Resource Allocation and Funding**: Allocate funding for mental health support through
government budgets, grants, and partnerships with private organizations. Ensure that
resources are distributed equitably across urban areas, focusing on underserved
communities.
32 - **Partnerships with Local Health Organizations**: Collaborate with local mental health
organizations, community health centers, and non-profits to provide comprehensive
mental health services. Define specific roles for each partner, such as outreach,
counseling, and education.
33 - **Evaluation Plan**: Develop a plan to evaluate the effectiveness of mental health
initiatives, including metrics such as the number of individuals served, improvements
in mental health outcomes, and community feedback. Conduct regular assessments to
adapt programs based on findings.
34
35 ## 8. Community Engagement Strategies
36 - Implement interactive methods for community involvement, such as online forums and
feedback sessions, to ensure diverse voices are heard.
37 - Establish a follow-up mechanism to inform the community about how their feedback has
influenced decisions.
38
39 ## 9. Health Metrics Integration
40 - Establish specific health metrics to monitor changes in access to healthcare facilities,
reduction in air pollution, and increased physical activity levels among residents as
a result of public transportation improvements.
41 - Collaborate with health organizations to gather data on health outcomes related to
transportation access.
42 - Integrate more preventive health measures into community health initiatives to promote
overall well-being.
43 - Include health-related metrics, such as the impact of active transportation on public
health, in policy_health.txt.
44
45 ## 10. Reducing Air Pollution
46 - Implement stricter emissions standards for construction vehicles and promote the use of
electric vehicles in urban development projects.
47 - Increase green spaces and urban forests to improve air quality and provide recreational
areas for residents.
48 - Encourage the use of public transportation and carpooling to reduce traffic congestion
and associated air pollution.
49
50 ## 11. Promoting Active Transportation
51 - Develop dedicated bike lanes and pedestrian pathways to encourage walking and cycling.
52 - Implement safety measures such as improved lighting and signage in areas frequented by
pedestrians and cyclists.53 - Launch public awareness campaigns to promote the health benefits of active
transportation and provide incentives for using these modes of transport.
54
55 ## 12. Budget Thresholds for Health Impact Assessments
56 - Define specific budget thresholds for conducting health impact assessments, ensuring
that projects with significant potential health impacts are evaluated.
57
58 ## 13. Additional Metrics for Accessibility Improvements
59 - Propose additional metrics for evaluating accessibility improvements, such as user
satisfaction surveys and the number of accessibility complaints received.
60
61 ## 14. Strategies for Collaboration with Health Organizations
62 - Recommend strategies for enhancing collaboration with health organizations, including
joint training programs and shared resources.
63
64 ## 15. Safety Audit Metrics for Public Transportation
65 - Suggest specific safety audit metrics for public transportation systems, such as
incident response times and user perceptions of safety.
66
67 ## 16. Community Health Initiatives Promotion
68 - Identify potential community health initiatives that could be promoted, focusing on
nutrition education and physical activity programs.
69
70 ## 17. Monitoring and Evaluation Framework
71 - Develop a detailed monitoring and evaluation framework for health-related urban policies
, including timelines and responsible parties.
72
73 ## 18. Funding Sources for Mental Health Support
74 - Propose additional funding sources for mental health support initiatives, such as
corporate sponsorships and crowdfunding campaigns.
Otherninepolicieshavethesimilarformatwhichcanbefoundinthegithubrepository.
Inthisexperiment,590agentsformathree-levelhierarchy,whichcanindeedextendfurther,whilehumaninputisjustthe
meta-prompt.ThisshowcasesthescalabilityandautonomyofourMegaAgentframework.
Onetrialinthisexperimentcostsabout$3.3and2991seconds.
ComparisonofPolicySimulationExperimentwithotherLLM-MASystems
AutoGenSetupandResult SimilartothesetupofGobangGame,wechangethepromptto:Developabestdetailedpolicy
foracutting-edgecountry,whichisthesameasthatofMegaAgent’s,exceptfortheagentrecruitmentpart.Itonlyoutputsan
outlineforeachindustry,withnopolicydetailsprovided,asshownbelow:
1 Excellent, let’s start with developing the policy then.
2
3 **Title: National Policy for Artificial intelligence and Digital Technologies**
4
5 **1. Preamble:**
6
7 The national policy for Artificial Intelligence (AI) and Digital Technologies is a
strategic directive aimed at positioning our country as a world leader in the
development, adoption, and regulation of AI and digital technologies. Through this
endeavor, we are committed to fostering a digital ecosystem that enables innovation
while promoting the ethical use of technology and safeguarding public interest.
8
9 **2. Objectives:**
10
11 The primary objective of this policy is to advance our national capacity in AI and digital
technologies. This includes:
12 i) Strengthening education and research in AI and related fields.
13 ii) Encouraging innovation and entrepreneurship.
14 iii) Ensuring data protection and privacy.
15 iv) Fortifying our cybersecurity measures.
16 v) Upholding ethical standards in technological advancements.
17 vi) Integrating AI in public sector services for efficiency and effectiveness.
18 vii) Actively seeking and promoting International collaborations and partnerships.
19
20 **3. Strategies and Actions:**21
22 3.1 Education and Research:
23 Establish centers of excellence in AI and digital technologies in educational institutions
. Encourage and fund research in AI, Machine Learning, and other emerging technologies
.
24
25 3.2 Infrastructure Development:
26 Support infrastructure required for digital technologies including high-speed internet
access, cloud platforms, and advanced computing resources.
27
28 3.3 Innovation and Entrepreneurship:
29 Institute a supportive regulatory environment for technology start-ups and provide seed
funding.
30
31 3.4 Data Protection:
32 Enforce stringent data protection regulations to prevent unauthorized data access and
usage. Create awareness on data privacy among citizens and enforce penalties for
breaches.
33
34 3.5 Cybersecurity:
35 Develop national resilience against cyber threats through proactive and reactive measures.
This includes creating a dedicated task force responsible for maintaining nation-wide
cybersecurity.
36
37 3.6 Ethical Standards:
38 Encourage the development and use of AI and digital technologies in line with ethical and
societal norms.
39
40 3.7 Public Sector Services:
41 Enable digital transformation of government services to be more efficient and user-
friendly.
42
43 3.8 International collaborations:
44 Actively seek and foster international partnerships to share and learn best practices.
45
46 **4. Oversight and enforcement mechanisms:**
47
48 Creation of a high-level committee with representatives from different stakeholders to
oversee policy enforcement.
49
50 **5. Policy Review and Updates:**
51
52 This policy will be reviewed every two years to include new advancements and challenges in
the field.
53
54 ---
55 This is a high-level policy guideline. The implementation of each objective would require
detailed action plans and regulations which would be developed separately and would be
beyond the scope of this plan.
56
57 In summary, this policy, driven strategically, could very effectively achieve the vision
of establishing our nation as a leader in the AI and digital technology landscape.
58
59 I hope this helps. I would love to provide more details in any specific area if needed.
Please let me know. If everything is clear, you could reply ’TERMINATE’ to end this
session.
Ittakes40secondsand$0.1inthistrial.ThefailuremightbecauseAutoGenistoosimpleinstructure,andcannotmanage
complexoutputswithmultiplefiles.
MetaGPTSetupandResult SimilartothesetupofGobangGame,wechangethepromptto:Developabestdetailedpolicy
for a cutting-edge country. After 580 seconds, MegaGPT only outputs python codes for a policy management system. The
‘main.py’isshownbelow.
1 ## main.py
2 from flask import Flask, request, jsonify, send_file
3 from policy_framework import PolicyFramework4 from data_analysis import DataAnalysis
5 from visualization import Visualization
6 import logging
7 import io
8
9 app = Flask(__name__)
10
11 # Initialize the core classes
12 policy_framework = PolicyFramework()
13 data_analysis = DataAnalysis()
14 visualization = Visualization()
15
16 @app.route(’/add_policy’, methods=[’POST’])
17 def add_policy():
18 """
19 Endpoint to add a new policy.
20 """
21 policy_data = request.json
22 result = policy_framework.add_policy(policy_data)
23 if result:
24 return jsonify({"message": "Policy added successfully"}), 200
25 else:
26 return jsonify({"error": "Failed to add policy"}), 400
27
28 @app.route(’/update_policy/<policy_id>’, methods=[’PUT’])
29 def update_policy(policy_id):
30 """
31 Endpoint to update an existing policy.
32 """
33 updates = request.json
34 result = policy_framework.update_policy(policy_id, updates)
35 if result:
36 return jsonify({"message": "Policy updated successfully"}), 200
37 else:
38 return jsonify({"error": "Failed to update policy"}), 400
39
40 @app.route(’/delete_policy/<policy_id>’, methods=[’DELETE’])
41 def delete_policy(policy_id):
42 """
43 Endpoint to delete an existing policy.
44 """
45 result = policy_framework.delete_policy(policy_id)
46 if result:
47 return jsonify({"message": "Policy deleted successfully"}), 200
48 else:
49 return jsonify({"error": "Failed to delete policy"}), 400
50
51 @app.route(’/get_policies’, methods=[’GET’])
52 def get_policies():
53 """
54 Endpoint to get all policies.
55 """
56 policies = policy_framework.get_policies()
57 return jsonify(policies), 200
58
59 @app.route(’/analyze_policy_data’, methods=[’POST’])
60 def analyze_policy_data():
61 """
62 Endpoint to analyze policy data.
63 """
64 data = request.json.get(’data’, [])
65 analysis_results = data_analysis.analyze_data(data)
66 if analysis_results:
67 return jsonify({"analysis_results": analysis_results}), 200
68 else:69 return jsonify({"error": "Failed to analyze data"}), 400
70
71 @app.route(’/visualize_policy_data’, methods=[’POST’])
72 def visualize_policy_data():
73 """
74 Endpoint to visualize policy data.
75 """
76 column_name = request.json.get(’column_name’, ’’)
77 visualization_data = data_analysis.prepare_visualization_data(column_name)
78 if visualization_data:
79 buf = io.BytesIO()
80 # Modified plot_data to accept a buffer
81 visualization.plot_data(visualization_data, plot_type=’bar’, title=’Policy Impact
by Category’, xlabel=’Category’, ylabel=’Impact Score’, buf=buf)
82 buf.seek(0)
83 return send_file(buf, mimetype=’image/png’)
84 else:
85 return jsonify({"error": "Failed to prepare data for visualization"}), 400
86
87 if __name__ == ’__main__’:
88 logging.basicConfig(level=logging.INFO)
89 app.run(debug=True)
ThereasonforitsfailureisthatitfollowsacodegenerationSOP,andcannotcopewithworksotherthanwritingthecode.
Thecostofthistrialis$0.90.
CAMELSetupandResult SimilartothesetupofGobangGame,wechangethepromptto:Developabestdetailedpolicy
foracutting-edgecountry.After1380seconds,CAMELproduceslotsofimplementationplans,insteadofpoliciesthemselves.
Forinstance:
1 Solution:
2
3 To ensure the effectiveness of the digital governance policy, a robust monitoring and
evaluation (M&E) framework is essential. This framework will help assess the
implementation progress, measure outcomes, and identify areas for improvement. Below
is a proposed M&E framework that outlines key components, indicators, data collection
methods, and responsible parties.
4
5 ---
6
7 **Monitoring and Evaluation Framework for Digital Governance Policy**
8
9 **1. Objectives of the M&E Framework**
10 - Assess the implementation progress of the digital governance policy.
11 - Measure the impact of various initiatives on citizen engagement, privacy, and access to
digital resources.
12 - Identify strengths and weaknesses in the policy implementation for continuous
improvement.
13
14 ---
15
16 **2. Key Components of the Framework**
17
18 **A. Indicators**
19 - **Data Protection Framework**:
20 - Number of data breaches reported annually.
21 - Percentage of citizens aware of their data privacy rights.
22
23 - **Algorithm Transparency Guidelines**:
24 - Number of algorithms documented and made transparent.
25 - Percentage of stakeholders reporting understanding of algorithmic decisions.
26
27 - **Eco-Friendly Tech Initiatives**:
28 - Reduction in energy consumption in government data centers.
29 - Number of eco-friendly tech projects funded and implemented.
30
31 - **Equitable Access to Digital Resources**:32 - Percentage of underserved communities with internet access.
33 - Number of low-cost devices distributed to low-income families.
34
35 - **Community Engagement and Innovation**:
36 - Number of citizen ideas submitted through open innovation platforms.
37 - Participation rate in digital town halls and forums.
38
39 **B. Data Collection Methods**
40 - **Surveys**: Conduct regular surveys targeting citizens to gather feedback on their
experiences with digital governance initiatives.
41 - **Interviews**: Hold interviews with stakeholders, including community leaders and tech
experts, to gain qualitative insights.
42 - **Focus Groups**: Organize focus groups with diverse community members to discuss
specific aspects of the policy and gather in-depth feedback.
43 - **Administrative Data**: Analyze existing data from government agencies related to
internet access, data breaches, and program participation.
44 - **Performance Reports**: Collect and review performance reports from responsible parties
on the implementation of various initiatives.
45
46 ---
47
48 **3. Evaluation Schedule**
49 - **Quarterly Reviews**: Conduct quarterly reviews of key indicators to assess progress
and identify any immediate issues.
50 - **Annual Evaluation**: Perform a comprehensive evaluation annually to measure overall
effectiveness, impact, and areas for improvement.
51 - **Mid-Term Review**: Conduct a mid-term review (at the 18-month mark) to assess the
progress of the implementation plan and make necessary adjustments.
52
53 ---
54
55 **4. Responsible Parties**
56 - **M&E Coordinator**: Designate an M&E Coordinator to oversee the implementation of the
framework and ensure data collection and analysis.
57 - **Data Protection Officer**: Responsible for monitoring data protection indicators and
compliance.
58 - **AI Ethics Committee**: Oversee the evaluation of algorithm transparency initiatives.
59 - **Sustainability Officer**: Monitor eco-friendly tech initiatives and their impact.
60 - **Digital Inclusion Coordinator**: Track progress on equitable access to digital
resources.
61 - **Community Engagement Team**: Facilitate citizen engagement activities and collect
feedback.
62
63 ---
64
65 **5. Reporting and Dissemination**
66 - **Regular Reports**: Prepare quarterly and annual reports summarizing findings, progress
, and recommendations for stakeholders.
67 - **Public Dashboard**: Create an online dashboard to share key indicators and progress
with the public, promoting transparency and accountability.
68 - **Community Meetings**: Host community meetings to present evaluation findings and
gather further feedback from citizens.
69
70 ---
71
72 **Conclusion**
73 This monitoring and evaluation framework provides a structured approach to assess the
effectiveness of the digital governance policy. By utilizing a combination of
quantitative and qualitative methods, the framework aims to ensure continuous
improvement and responsiveness to the needs of citizens, ultimately fostering a more
transparent, equitable, and sustainable digital environment.
ThepossiblereasonforfailureisthatitsSOPistoosimple,andtheagent‘AIUser’keepsraisingnon-relevantquestions.
Onetrialcostsabout$0.68.AgentVerse Setup and Result Similar to the setup of Gobang Game, we change the scenario to tasksolving/
brainstorming and change the prompt to: Develop a best detailed policy for a cutting-edge country. After 510 seconds,
AgentVerseconsistentlyrejectsthesolutionacrossalltenroundsandisunabletoprovideaviablepolicywithfouragents,as
showninFigure14.
Figure14:TheresultofAgentVerseforpolicysimulation.Itkeepsrejectingforallthetenrounds.
Itspossiblefailurereasonisthatitcannotdraftsuchcomplexpoliciesinaorganizedway,anditisalwaysunsatisfiedwith
itsperformance.
Onetrialcostsabout$2.05.
ReproducibilityChecklist
Thispaper
• Includesaconceptualoutlineand/orpseudocodedescriptionofAImethodsintroducedYES
• Clearlydelineatesstatementsthatareopinions,hypotheses,andspeculationfromobjectivefactsandresultsYES
• Provideswell-markedpedagogicalreferencesforless-familiarreaderstogainbackgroundnecessarytoreplicatethepaper
YES
• Doesthispapermaketheoreticalcontributions?NO
– Ifyes,pleasecompletethelistbelow.
– Allassumptionsandrestrictionsarestatedclearlyandformally.(yes/partial/no)
– Allnovelclaimsarestatedformally(e.g.,intheoremstatements).(yes/partial/no)
– Proofsofallnovelclaimsareincluded.(yes/partial/no)
– Proofsketchesorintuitionsaregivenforcomplexand/ornovelresults.(yes/partial/no)
– Appropriatecitationstotheoreticaltoolsusedaregiven.(yes/partial/no)
– Alltheoreticalclaimsaredemonstratedempiricallytohold.(yes/partial/no/NA)
– Allexperimentalcodeusedtoeliminateordisproveclaimsisincluded.(yes/no/NA)
• Doesthispaperrelyononeormoredatasets?NO
– Ifyes,pleasecompletethelistbelow.
– Amotivationisgivenforwhytheexperimentsareconductedontheselecteddatasets.(yes/partial/no/NA)
– Allnoveldatasetsintroducedinthispaperareincludedinadataappendix.(yes/partial/no/NA)
– Allnoveldatasetsintroducedinthispaperwillbemadepubliclyavailableuponpublicationofthepaperwithalicense
thatallowsfreeusageforresearchpurposes.(yes/partial/no/NA)
– Alldatasetsdrawnfromtheexistingliterature(potentiallyincludingauthors’ownpreviouslypublishedwork)areaccom-
paniedbyappropriatecitations.(yes/no/NA)
– Alldatasetsdrawnfromtheexistingliterature(potentiallyincludingauthors’ownpreviouslypublishedwork)arepublicly
available.(yes/partial/no/NA)
– Alldatasetsthatarenotpubliclyavailablearedescribedindetail,withexplanationwhypubliclyavailablealternativesare
notscientificallysatisfying.(yes/partial/no/NA)• Doesthispaperincludecomputationalexperiments?YES
– Ifyes,pleasecompletethelistbelow.
– Anycoderequiredforpre-processingdataisincludedintheappendix.YES
– Allsourcecoderequiredforconductingandanalyzingtheexperimentsisincludedinacodeappendix.YES
– Allsourcecoderequiredforconductingandanalyzingtheexperimentswillbemadepubliclyavailableuponpublication
ofthepaperwithalicensethatallowsfreeusageforresearchpurposes.YES
– All source code implementing new methods have comments detailing the implementation, with references to the paper
whereeachstepcomesfrom.YES
– Ifanalgorithmdependsonrandomness,thenthemethodusedforsettingseedsisdescribedinawaysufficienttoallow
replicationofresults.NA.DuetotheinherentrandomnessofLLMs.
– This paper specifies the computing infrastructure used for running experiments (hardware and software), including
GPU/CPUmodels;amountofmemory;operatingsystem;namesandversionsofrelevantsoftwarelibrariesandframe-
works.YES
– Thispaperformallydescribesevaluationmetricsusedandexplainsthemotivationforchoosingthesemetrics.YES
– Thispaperstatesthenumberofalgorithmrunsusedtocomputeeachreportedresult.YES
– Analysis of experiments goes beyond single-dimensional summaries of performance (e.g., average; median) to include
measuresofvariation,confidence,orotherdistributionalinformation.YES
– The significance of any improvement or decrease in performance is judged using appropriate statistical tests (e.g.,
Wilcoxonsigned-rank).NA
– Thispaperlistsallfinal(hyper-)parametersusedforeachmodel/algorithminthepaper’sexperiments.YES
– Thispaperstatesthenumberandrangeofvaluestriedper(hyper-)parameterduringdevelopmentofthepaper,alongwith
thecriterionusedforselectingthefinalparametersetting.YES