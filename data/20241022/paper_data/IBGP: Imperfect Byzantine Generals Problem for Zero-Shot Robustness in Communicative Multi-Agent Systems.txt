IBGP: Imperfect Byzantine Generals Problem for Zero-Shot
Robustness in Communicative Multi-Agent Systems
YihuanMao∗,YipengKang∗,PeilunLi,NingZhang,WeiXu,ChongjieZhang
*EqualContribution
maoyh20@mails.tsinghua.edu.cn,fringsoo@hotmail.com,peilun.li@confluxnetwork.org,
zhang.ning@wustl.edu,weixu@tsinghua.edu.cn,chongjie@wustl.edu
ABSTRACT models,theyarenotspecificallydesignedformessagesynchro-
Aslargelanguagemodel(LLM)agentsincreasinglyintegrateinto nization.Therefore,wecanreasonablyassumethatagentslack
ourinfrastructure,theirrobustcoordinationandmessagesynchro- areliablepredefinedbroadcastmoduletoensureconsistentmes-
nizationbecomevital.TheByzantineGeneralsProblem(BGP)isa sagingduringsynchronization.Discrepanciesmayarisebetween
criticalmodelforconstructingresilientmulti-agentsystems(MAS) theirmessagesandfinalactionsfortworeasons:(1)theagents’
underadversarialattacks.Itdescribesascenariowheremalicious outputsmaybeaffectedbyhallucinations,and(2)agentsmaybe
agentswithunknownidentitiesexistinthesystem-situationsthat, compromisedandactmaliciously.Overall,themessagesandac-
inourcontext,couldresultfromLLMagents’hallucinationsorex- tionsofgeneral-purposeagentsareoftenbasedonnaturallanguage
ternalattacks.InBGP,theobjectiveoftheentiresystemistoreach ratherthanpredefinedprotocols,makingabnormalbehaviorlikely
aconsensusontheactiontobetaken.TraditionalBGPrequires duringsynchronizationtasks.Maliciousagentscanleadtodisas-
globalconsensusamongallagents;however,inpracticalscenarios, trousconsequences;forinstance,tamperingwithvehicle-to-vehicle
globalconsensusisnotalwaysnecessaryandcanevenbeinefficient. (V2V)messagescanresultinmiscoordination,potentiallycausing
Therefore,thereisapressingneedtoexplorearefinedversionof significantpropertydamageandlossoflife.Thissecurityconcern
BGPthatalignswiththelocalcoordinationpatternsobservedin extendsbeyondautonomousvehiclestovariousapplicationsre-
MAS.WerefertothisrefinedversionasImperfectBGP(IBGP)in quiringreliablecoordination.Forinstance,variousapplications
ourresearch,aimingtoaddressthisdiscrepancy. necessitatethecoordinationofagentswithdifferentfunctionalities,
To tackle this issue, we propose a framework that leverages such as in video generation [3], software development [7], and
consensusprotocolswithingeneralMASsettings,providingprov- problem-solving[22].
ableresilienceagainstcommunicationattacksandadaptabilityto Traditionally,thisissuerelatestotheconsensusproblemindis-
changingenvironments,asvalidatedbyempiricalresults.Addition- tributedsystems,suchastheByzantineGeneralsProblem(BGP)
ally,wepresentacasestudyinasensornetworkenvironmentto [11],wheretheprimaryobjectiveistosynchronizecontentacross
illustratethepracticalapplicationofourprotocol. all benign nodes and achieve system-wide consistency, even in
thepresenceofnodefailures.Inthiscontext,aperfectprotocol
isessential.However,inthecoordinationofmulti-agentsystems,
KEYWORDS
consensusservesasameanstoachieveteamgoals,allowingforare-
Multi-agentSystems,Zero-shotRobustness,safety,ByzantineGen-
laxationofstringentrequirements;often,itsufficestosynchronize
eralsProblem
onlyaminimalnumberofbenignagents.
Forexample,inaPredator-Preyenvironment[18],wherepreda-
1 INTRODUCTION torsneedtocooperatetohunt,miscoordinationcouldbefatal,as
WiththeadvancementofAItechnology,theworldisenteringa asinglepredatormightbekilledbytheprey.However,aglobal
newerainwhichAIagentswillconstituteasignificantportion consensusisunnecessary,asnotallpredatorsneedtoparticipatein
ofourinfrastructure.Intheforeseeablefuture,spontaneouslyas- thehunt.Anotherexampleisthethresholdpublicgoodsgame[10]
sembledgroupsofheterogeneousAIagents—ofvarioustypesand inexperimentaleconomics,whichmirrorsglobalcooperationon
functions,developedbydifferentmanufacturers—willfrequently climateorenergyissues:agentscontributefundstoasharedpot,
interacttosolvetemporarydailytasks.Thecoexistenceandco- andpositiveutilityisonlyachievedwhencontributionsexceeda
ordinationofdiverseagentswillbecrucial,muchliketraditional threshold,necessitatingclosecollaboration.
humancoordination. Totacklethecoordinationchallengesinmulti-agentsystems,
Akeycategoryofcoordinationinvolvesthesynchronizationof wefirstformalizetheissue,referringtoitastheImperfectByzan-
messagesamongagents.Thisisexemplifiedinapplicationssuch tine Generals Problem (IBGP). While it shares similarities with
assensornetworks[14]andUAVcontrol[4].Whentheagents theclassicBGP,IBGPfundamentallydiffersinitscoordinationre-
areheterogeneous,suchasautonomousvehicles[26]withcom- quirements,emphasizingpartialconsensus.Wethenintroducea
munication modules driven by general-purpose large language protocolspecificallydesignedfortheIBGP.AsshowninFigure1,
ourIBGPprotocoldemandslessredundancyandaccommodatesa
higherpercentageofmaliciousagentscomparedtoexistingBGP
Proc.ofthe24thInternationalConferenceonAutonomousAgentsandMultiagentSystems
protocols.
(AAMAS2025),A.ElFallahSeghrouchni,Y.Vorobeychik,S.Das,A.Nowe(eds.),May19
–23,2025,Detroit,Michigan,USA.©2025InternationalFoundationforAutonomous IntherealmofAGI,theimplementationofourprotocoldoesnot
AgentsandMultiagentSystems(www.ifaamas.org).Thisworkislicencedunderthe
requireadditionaldevelopmentsteps;instead,itcanbeintegrated
CreativeCommonsAttribution4.0International(CC-BY4.0)licence.
4202
tcO
12
]AM.sc[
1v73261.0142:viXraFigure1:AnillustrationofthemotivationforproposingIBGP.(a)Agentscoordinateonataskthatrequiresfourparticipants.
(b)Thepresenceofmaliciousagentscapableofsendingmisleadingmessagesmayleadtothefailureofcoordinationamong
theoriginalfouragents.Asaresult,someredundancyisnecessarytoensuresafecoordinationthroughconsensusprotocols.(c)
TraditionalmethodsforachievingoverallconsensusinvolvedevelopingBGPprotocols,buttheseareinefficientandrequire
excessiveredundancyincoordinationcontextsbecausethey’respecificallydesignedforoverallconsensusscenarios.The
graphshowsthatBGPbecomesinfeasiblewhenmaliciousagentsexceed33%.(d)Wedefinethecoordinationproblemunder
communicativeattackasIBGPandproposetailoredprotocolsforit.Ourprotocolissuitableforcoordinationsettingsand
requireslessredundancy,accommodatingahigherpercentageofmaliciousagents(upto50%).Detailsabout(c)and(d)is
providedinAppendixA.6.
into agents through simple prompt instructions, leveraging the theByzantineGeneralsProblemthatisdesignedforpracticaluse
agents’ inherent capabilities. If an agent fails to understand or indistributedsystems.Rabin’swork[16]providedasolutionto
execute this protocol, or if it intentionally disrupts the process theByzantineGeneralsProblemthatdidnotrequireacentralized
followinganattack,itwillbeclassifiedasamaliciousnode.Aslong authorityoratrustedthirdparty.Instead,itintroducedtheideaof
asthenumberofsuchnodesremainslow,ourprotocolcancontinue arandomizedprotocolwhereeachnodechoosesarandomvalue
tofunctioneffectively.Experimentsdemonstratetheeffectiveness thatisusedtobreaktiesintheeventofconflictingmessages.The
ofourconsensusprotocolsinbothIBGPandmorepracticaltasks. randomizationensuresthatByzantinenodescannotpredicttheout-
Our technical contributions are two-fold: (i) we define IBGP, comeoftheprotocol,makingitmoredifficultforthemtointerfere
highlightingthechallengesofpartialcoordinationinMulti-Agent withtheconsensusprocess.
Systems,and(ii)wedeviseaninnovativeconsensusprotocolthat InthecontextofMASresearch,oneimportantresearchbranch
ensuressecurecoordination,validatedthroughtheoreticalanalysis of MAS involves learning a communications system to achieve
andpracticalexperimentation. acommongoal.Someuseexplicitcommunicationsystemswith
discreteorcontinuoussignals,mainlytoconveyinformativelocal
observations to each other, to deal with partial observation [8,
2 RELATEDWORK 21]. Some use communication for global value optimization [1,
TheByzantineGeneralsProblem[11]describesascenariowherea 9].Differentfromthesecategories,inMASresearch,consensus
groupofByzantinegeneralsmustagreeonacommonplanofac- referstoachievingaglobalagreementoveraparticularfeatureof
tion,eventhoughsomeofthegeneralsmaybetraitors.Thismodels interest[4–6,12–14,25].Ithasbeenwidelystudiedasitaffects
alargetypeofdistributedconsistencyproblemincomputerscience. communicationandcollaborationbetweenagents.However,very
Byzantineconsensusprotocolsinadistributednetworkcanbeused fewofthempaidattentiontoadversarialattacks.Recentlysome
toreachanagreementonasinglevalue,eveninthepresenceof researchershaveinvestigatedalgorithmstomitigatetheimpact
faultyormaliciousnodes.ImportantworksofByzantineconsensus ofmaliciousagents[20,23].However,theirmethodologieslack
protocolsincludePracticalByzantineFaultTolerance(PBFT)[2] zero-shotadaptionabilitytotheattackersandtheenvironment.
andRandomizedByzantineGenerals[16].PBFTisasolutionto𝑀 𝑖0 ∈{0,1},𝑎
𝑖
∈{0,1}
BGP IBGP
𝑛benignagents 𝑛benignagents,coordinationthreshold𝑘
𝑅= 1 1( (# #( (𝑎 𝑎𝑖
𝑖
= =1 1) )= =𝑛 0)) i if f# #( (𝑀 𝑀𝑖 𝑖0 0= =1 1) )= =𝑛 0,, 𝑅= 1 1( (# #( (𝑀 𝑀𝑖 𝑖0 0= =1 1, ,𝑎 𝑎𝑖
𝑖
= =1 1) )=≥ 0𝑘 )) ii ff ## (( 𝑀𝑀 𝑖𝑖 00 == 11 ))= <𝑛 𝑘,
,
 1(#(𝑎 𝑖 =1)=𝑛)+1(#(𝑎 𝑖 =1)=0) otherwise.  1(#(𝑀 𝑖0 =1,𝑎 𝑖 =1) ≥𝑘)+1(#(𝑀 𝑖0 =1,𝑎 𝑖 =1)=0) otherwise.
 
Table1:ThedifferenceofdefinitionbetweenBGPandIBGP.
3 IMPERFECTBYZANTINEGENERALS observation𝑀0 =1arepermittedtotakethecooperativeaction𝑎=
PROBLEM(IBGP) 1.ThetwopropertiesofAgreementandConsistencyareredefined
to align with the partial coordination prevalent in Multi-Agent
3.1 Preliminaries:BGP
Systems.Table1illustratesthedistinctionsbetweenIBGPandthe
InBGP,thereare𝑛benignagentsand𝑡 attackeragentscommu- originalBGP.
nicatingwitheachother.Theattackerscansendfalsemessages
todisturbcoordination.Eachagentbeginswithaninitialmessage Definition2. AsystemsolvesIBGPififitmeetsthefollowing
𝑀0 ∈{0,1}asitsinitialproposalandfinallymakesadecisionac- requirementsunderanyattack:
tion𝑎∈{0,1}.Generally,avalueof1indicatescooperation,while • Agreement:#(𝑀 𝑖0 =1,𝑎 𝑖 =1) ∈{0}∪[𝑘,𝑛].(Atleast𝑘agents
0indicatesgivingup.TheformaldefinitionofBGPisprovidedin thatobserve𝑀0 =1arerequiredtocooperate;otherwiseno
Definition1.Forclarity,wealsopresentanequivalentdefinition
agentshouldact.)
w rei wth ai rn dt fh ue nc co tin ot nex into tf hR ee lein ftfo pr oc re tm ioe nn ot fL Tea ar bn lein 1g ,, was hid ce hp oic ut te ld inb ey stt hh ee • Consistency:If#(𝑀 𝑖0 =1)=𝑛,then#(𝑀 𝑖0 =1,𝑎 𝑖 =1) ≥𝑘.(If
thenumberofavailableagentsissuper-sufficient,cooperation
optimalactionbasedoncertainobservations.
musthappen.)
Definition1. AsystemsolvesBGPifitmeetsthefollowingre- Similarly,mis-coordinationisdefinedasthesituation0<#(𝑀0
=
quirementsunderanyattack: 𝑖
1,𝑎 𝑖 = 1) < 𝑘,whereAgreement isviolated.Itmeansthatsome
• Agreement:𝑎1=𝑎2=···=𝑎 𝑛 ∈{0,1}.(All𝑛benignagents agentstrytocoordinatebutfail.JustlikeBGP,thegoalofIBGPis
mustagreeonthesameaction,either0or1.) toavoidmis-coordinationaltogether,andalthoughweuseRein-
• Consistency:If𝑀 10 = 𝑀 20 = ··· = 𝑀 𝑛0 = 𝑥,then𝑎1 = 𝑎2 = forcementLearningtoformulateBGPandIBGPinthefollowing
···=𝑎 𝑛 =𝑥.(Whenall𝑛agentshaveidenticalinitialobser- section,ourfocusisonrobustnessratherthanexpectedreturn.
vations,theiractionsmustalsobeidentical.)
Didacticexample. TounderstandthechallengeofIBGP,we
Alltheagents,includingboththeagentsandtheattackers,can
illustratethatasingle-rounddecisionprocessisinadequateforad-
communicatethroughacompletenetworkforafewrounds.Agents
dressingsuchissuesthroughadidacticexamplefeaturingaspecific
decidewhatmessagestosendattheendofeachroundafterreading
attackingpattern.
messagesfromotheragents.InBGP,theattackersaimtobreakthe
First,it’sobviousthatareasonablesingle-rounddecisionprocess
consensusofagents,buttheagentsareunawareoftheidentityof
foragent𝑖istotake𝑎
𝑖
=1ifthenumberofreceivedsignalsexceeds
thecommunicatingagents(benignormalicious).
agiventhreshold,i.e.,#(𝑀
·→𝑖
=1) ≥𝜆,where𝜆isthethresholdof
Mis-coordinationdescribesthesituationwhereAgreement is
thedecisionprocess.Forsimplicity,weassumethestrategyshares
violated,andresearchershavedesignedconsensusprotocolsproven
withallagents.
topreventmis-coordinationunderanycommunicativeattacks.
InFigure3,theIBGPwith𝑛 = 5,𝑡 = 1,𝑘 = 3includes5be-
nignagentsand1attacker.Figure3ashowsanexampleofmis-
3.2 IBGP coordinationwhenthethresholdofthesingle-roundprocessis
BGPservesasafundamentalconceptofextensiveresearchwithin setto𝜆 = 4.Thenumberofinitialactivehonestagents#(𝑀0 =
𝑖
theareaofDecentralizedSystems,embodyingthecrucialattributes 1) =3.Aftersendingmessages,agentssumupthereceivedmes-
ofagreementandconsistencywithinadecentralizedframework. sages,andsomeget3messageswhileothersget4messages.This
Nevertheless,thesepropertiesmaynotalwaysapplyinmanyMulti- results in that the agent who receives 3 messages give up and
AgentSystems(MAS),wherepartialcoordinationisacommonpat- causes mis-coordination. The example in Figure 3b shows that
ternratherthanuniversalcoordination.Forexample,inapredator- mis-coordinationcouldstillhappenevenifweraisethethreshold.
preyenvironment[19],onlyasubsetofpredatorsmayberequired Whenthethresholdissetto𝜆=5,thefailedexamplehappensina
tocollaborateinhuntingaparticularprey,ratherthaninvolving differentinitialization,wherethereare4activehonestagents.After
allpredatorsinthepursuit. sendingmessages,thesumofreceivedmessagesare4and5respec-
TocapturethiscoordinationpatternwithinMAS,weintroduce tively.Sincetheagentsreceiving4messagesgiveupandtheagents
IBGPinDefinition2,wheresuccessfulagreementnecessitatesthe receiving5messagesstilltrytocoordinate,themis-coordination
cooperation of only𝑘. Besides, only the agents with the initial happensagain.𝑀10 broadcast 𝑀11 𝑀21 𝑀31 Agent
…
1 input 𝑀𝑁1 𝑀1 𝑀11 𝑎1
𝑀20 broadcast 𝑀12 𝑀22 𝑀32 Agent
…
2 input 𝑀𝑁2 𝑀2 𝑀21 𝑎2
𝑀30 broadcast 𝑀13 𝑀23 𝑀33 Agent
…
3 input 𝑀𝑁3
#jMji=1
𝑀3 𝑀31
…
𝑎3
≥𝑘+λ𝑜𝑟𝑘 …
… … … …
𝑀N0 broadcast 𝑀1𝑁 𝑀2𝑁𝑀3𝑁 Agent …N input 𝑀𝑁𝑁 𝑀N 𝑀N1 𝑎N
Protocol Protocol Protocol
𝑴0 𝑴෩1 𝑴1 Round Round Round
Protocol Round 1 2 3 r
Terminate = 0 Terminate = 0 Terminate = 0 Terminate = 1
Figure2:Ageneralframeworkforconsensusprotocol.
(1) Theglobalrandomizerinitializesthenumberofroundsfrom
adistribution𝑟
𝑡𝑜𝑡
∼R.(Risthesampledistributionofthe
totalnumberofrounds𝑟 intheIBGPProtocol.𝑟 isn’t
𝑡𝑜𝑡 𝑡𝑜𝑡
revealeduntilthelastroundarrives.)
(2) Initialround:Eachagent𝑖broadcastsitsinitialproposal𝑀0
𝑖
toeachagents𝑗.
(3) Round𝑟 ∈ {1···𝑟 𝑡𝑜𝑡}:Eachagent𝑖 ∈ {𝑖|𝑀 𝑖𝑟−1 =1}broad-
casts𝑀 𝑖𝑟 =1(# 𝑗∈[𝑁](𝑀𝑟 𝑗→−1
𝑖
=1) ≥𝑘+𝜆).
(a)Anexampleofmis-coordinationwhen𝜆=4. (4) Decisionmakinground:Eachagent𝑖 ∈{𝑖|𝑀 𝑖𝑟𝑡𝑜𝑡 =1}select
action𝑎 𝑖 =1(# 𝑗∈[𝑁](𝑀𝑟 𝑗→𝑡𝑜𝑡 𝑖 =1) ≥𝑘).
Whenassigning𝜆=𝑡,wehavethefollowingtheoremwithits
proofinAppendixA.2:
Theorem1. (𝑘,𝑡)-protocolisrobustwithahighlevelofconfidence
1−max 𝑟{𝑝(𝑟
𝑡𝑜𝑡
=𝑟)}underanyattackonIBGP(t,k).
NotethattheiterativeroundsofIBGPcommunicationwon’t
bottlenecktheefficiencyofoursystem,becauseofthesimplicity
ofthecommunicationcomputation.There’sjustbasicpairwisebit
(b)Anexampleofmis-coordinationwhen𝜆=5.
communicationamongagentsandastraightforwardlineardecision-
Figure3:Examplesofmis-coordinationunderdifferent𝜆s, makingprocessforeachagent.Thissimplicitystandsincontrastto
themorecomplexprocessesfoundelsewhereintheMARLsystem.
showingthelimitationofsingle-rounddecisionprocess.
Additionally,inreal-worldmulti-agentcommunicationcontexts,
usingmultipleroundsofcommunicationforsendingonepieceof
contentistypicalandthecostisaffordable.
4 METHOD
Didacticexample. Weprovideadidacticexampletoillustrate
4.1 ConsensusProtocolforIBGP howtheprotocoloperates.Provingtherobustnessofamethod
TosolveIBGP,weproposeaconsensusprotocolasillustratedin requiresconsideringallpotentialscenarios,whichcanbespace-
Figure2.Thisprotocolemploysamulti-roundbroadcastpattern intensive,orrelyingonthemathematicalproofofTheorem1.There-
andincorporatestheconceptofanindependentglobalrandomizer fore,wefocusonhowtheprotocolpreventsthemis-coordination
(implementedsimilarlywith[16]).Ineachround,arandomized showninthedidacticexampleofIBGPinSection3.2.Acomprehen-
bitvariabledetermineswhetheritisthelastround(withavalue siveexplorationofallpossiblescenariosisdiscussedinAppendix
of1indicatingthefinalroundand0indicatingthattheprocess A.1.
shouldcontinue).Agentsbroadcasttheirproposalsanddealwith ThefollowinggameisanIBGPwith𝑛=5,𝑡 =1,𝑘 =3,including
thereceivedproposalsundertheeffectoftherandomizedbit.The 5benignagentsand1attacker,andweshowhowthe(𝑘,𝑡)-protocol
resultsserveastheproposalsforthenextroundorasthefinal worksunderdifferentinitializations.InFigure4a,theintialnumber
decisionsinthelastround.Thedefaultproposalsanddecisionsare ofactivehonestagents#(𝑀0 =1) =3.Thethresholdofasingle
𝑖
bothinitializedto0ifnotspecified.Theframeworkamountstothe roundisdynamicallydecidedbytheglobalrandomizer(from3and
(𝑘,𝜆)-protocollistedbelow: 4),andthereforetheagentreceiving3messagesisprobablybothto(a)Whenthenumberofinitialactivehonestagents#(𝑀 𝑖0=1)=3,theiterationdoesn’tcausefinalmis-coordination.
(b)Whenthenumberofinitialactivehonestagents#(𝑀 𝑖0=1)=4,theiterationdoesn’tcausefinalmis-coordination.
Figure4:Examplesoftheiterationsoftheprotocol.
continueorgiveup.Ifitcontinues,theactiveagentsremainsthe
same.Ifitgiveup(thethirdsubfigure),thenumberofactiveagents
decreasesto2,whichisatemporarymis-coordination.Luckily,
suchtemporarymis-coordinationonlylastsfor1round,andin
thenextround,allagentswillgiveupduetothefewerreceived
messages.Inconclusion,undertheiterativeprotocol,thetemporary
mis-coordinationcanonlyexistsforasingleround,andsincethe
realnumberofroundsisunknowntotheattacker,thesuccessful
attackcanonlyhappenwithalowprobability.InFigure4b,since
thethresholdis3or4,theywillalwayscoordinate.
4.2 IntegratingIBGPwithMulti-Agent Figure5:Thelearnableactionselectionwiththeconsensus
protocol.
ReinforcementLearning
TomanifesttheeffectivenessoftheIBGPconsensusprotocol,we
invokeitasacoordinationmoduleinthedecentralizedmulti-agent history𝜏
𝑖
∈T≡(Ω×𝐴)∗×Ω.Duringtheactionselectionprocess,
partially-observableMDP(Dec-POMDP)task.Thetaskconsistsof theagentdeciceswhethertoselectanormalactionorproposea
atuple𝐺=⟨𝐼,𝑆,𝐴,𝑃,𝑅,Ω,𝑂,𝑛,𝑡,𝛾⟩,where𝐼 isthefinitesetof𝑛+𝑡 coordinationconsensusonacertaintarget.
agentsinteractingandcommunicatingwitheachother.𝑛ofthe Forinstance,considerapredator-preygame,𝑜 encapsulatesthe
𝑖
agentsarebenign,and𝑡 ofthemaremaliciouswhosecommuni- statesofneighboringgridsrelativetoagent𝑖;and𝑎 includespos-
𝑖
cationchannels(insteadofactions)areattacked.InDec-POMDP, siblemovementslikegoup,godown,goleftandgoright,alongside
𝑆,𝐴,Ωarethestate,actionandobservationspace.𝑂istheobserva- theconsensus-awareactionproposetocatch.Withintheconsen-
tionfunction,and𝑃 isthetransitionfunctionoftheenvironment. susprocess,𝑀 𝑖0 =1if𝑎
𝑖
issettoproposetocatch,indicatingthe
𝑅istheglobalrewardfunction,and𝛾 ∈ [0,1)isthediscountfactor. intentiontopursuetheprey,asdepictedinFigure5byanagent
ThewholesystemistrainedbyQ-learning,wherethegoalisto emittingbothadashedgreenlineandasolidblueline.Incontrast,
collectivelymaximizetheglobalreturnE 𝑝[(cid:205) 𝑡∞ =0𝛾𝑡𝑅 𝑡]. 𝑀 𝑖0 =0underotheractions,meaningthatthere’snopropose,as
ThewholepipelineisshowninFigure5.Theconsensusprocess depictedinFigure5byanagentemittingbothasolidgreenlineand
serves as a subprocess within the broader POMDP framework. adashedblueline.Anagentwouldselectan𝑎 thatmaximizesits
𝑖
At each time step,𝑠 ∈ 𝑆 is the state of the environment. Each localQ-valuebasedon𝑜 𝑖.Whentheagent’sobservationindicates
agent𝑖 receivesapartialobservationofthestate𝑜 drawnfrom apotentialforcoordination(e.g.,𝑜 revealsproximitytotheprey),
𝑖 𝑖
Ω,accordingtotheobservationfunction𝑂(𝑠,𝑖).Thentheagent theactionproposetocatchischosenbythepolicynetwork,and
selectsanaction𝑎 from𝐴,basedonitslocalaction-observation 𝑀0switchesto1,participatingintheconsensusprocess.Ifagents
𝑖 𝑖• Predator-prey:Itismodifiedfromthewell-knownpredator-
preyenvironment[19],requiringseveralpredatorstohunt
thepreytogether.Wetestsingle-targetPredator-prey(4,1,2,1),
multi-targetPredator-prey(5,2,2,1),andlarge-scalePredator-
prey(20,4,2,2)andPredator-prey(20,1,4,2).
• Hallway:Itisintroducedin[21],requiringseveralagentsto
reachthedestinationsimultaneously.Besidestheenviron-
mentwiththeoriginalparametersHallway(3,1,2,1),wealso
testitsscalabilitywithmoreagentsandalargercoordination
thresholdinHallway(10,1,5,2).
• 4bane_vs_1hM:ItisbuiltontheSMACbenchmark(Star-
CraftMulti-agentChallenge)[17].4bane_vs_1hMisanen-
vironmentmodifiedfrom3bane_vs_1hM,whichisusedin
(a)4bane_vs_1hM previouscommunicativeMARLresearch.Weaddanagent
becauseoftheadditionalcommunicativeattack.Itrequires
theagents(3banelings)toattacktheenemysimultaneously;
otherwise,theenemywillhealitselfandnolongercanbe
killed.
• 3z_vs_1r:WealsocreateanewSC2environment,inwhich
two agents (zealots) are required to attack the enemy (a
roach)simultaneously.Iftheyfailtodoso,theenemy’slong-
distancefirepowerwillsuccessivelyeliminatetheagents,
resultingininsufficientdamagetodefeattheenemy.This
taskrequiresbothresilienceagainstattacksandefficiency.
Waitingforcoordinatedactionputstheagentsindanger
ofbeingkilledbytheenemy.Therefore,itisessentialto
findabalancebetweencoordinationwiththefewestagents
(b)3z_vs_1r
possible and defense against attacks. This task serves as
achallengingbenchmarkandhighlightsthepotentialfor
Figure6:Thescreenshotof2StarCraftIIenironments.
improvingefficiencyandrobustnesssimultaneously.
Weconductexperimentstodemonstratethezero-shotrobust-
reachconsensusoncatchafterthecommunicationaccordingto nessoftheIBGPprotocolintheenvironments.AlthoughtheIBGP
theprotocol,theagentwillthencatchtheprey.Ifagentsreach protocoldefineshowtocommunicate,theagentsstillneedtolearn
consensusonnotcatching,theagentswithcatchproposalsjust awell-performingpolicy,whichincludesdecisionsonhowtomove
giveupcooperativecatchingatthisstepanddonothing. andwhentoproposeaconsensus.Toevaluatethezero-shotrobust-
nessofalgorithms,wedefinetherobustnesspercentageastheratio
ofperformancewithattackers(duringthetestingphase)toperfor-
5 EXPERIMENTS
mancewithnoattackers(duringthetrainingphase).Specifically,
WhileTheorem1ensuresthattheproposedprotocolguarantees
wetrainattackers’communicationtoharmthebenignagents’per-
safecoordinationintheImperfectByzantineGeneralsProblem
formancetothegreatestextentinthetestingphase,thusdisplaying
(IBGP),itraisesintriguingquestions:(i)IstheIBGPprotocolappli-
zero-shotrobustnessagainstanyattackscheme.Ifthealgorithmis
cabletotheMARLsetting,asdiscussedinSection4.2,anddoesit
notrobustagainstcommunicativeattacks,theresultofthetesting
outperformbaselinesintermsofrobustness?(ii)Howcanweutilize
phasewillsignificantlydecay.
theprotocolinreal-worldapplications?InSection5.1,wecompare
Table2indicatestherobustnesspercentageoftheIBGPprotocol
theconsensus-basedmethod—integratingtheIBGPprotocolinto
inthefirstcolumn,whilethesecondcolumndisplaystheratio
theMARLpipeline—withexistingRL-basedapproachestoevaluate
of recursive training, which means that the training process of
robustnessunderattack.Toaddressthesecondquestion,Section
agentsandattackersisrepeated.Recursivetrainingisoneofthe
5.2presentsacasestudyinwhichweapplyaconsensus-based
contributionsofthealgorithmin[23].Thelasttwocolumnprovides
algorithmtoaddresstheSensorNetworkproblem.Implementation
acomparisonwithAME[20]andADMAC[24].
detailsandhyperparametersareincludedintheAppendixA.5.
AnalysisofTable2revealsthattheIBGPProtocolmaintainsits
performancefromtrainingtotestingphases.However,recursive
5.1 MainResults trainingisnotconsistentlyrobustwhentransitioningtotesting
Theexperimentincludesfourkindsofenvironments,denotedas insomeenvironments.Thisisreasonablesincethebaselinepaper
Env(𝑛,𝑚,𝑘,𝑡).Here,𝑛representsthenumberofbenignagents,𝑚 [23]prioritizesadaptiontoattackersratherthanzero-shotrobust-
isthenumberoftargets,𝑘isthecoordinationthreshold,and𝑡 is ness.TheAMEalgorithmperformswellinsomeenvironments
thenumberofattackers. duringtesting,althoughitexperiencesdegradationinperformanceIBGPProtocol Recursivetraining AME ADMAC
Predator-prey(4,1,2,1) 96.1±5.4% 0% 62.4±20.4% 25.6±13.2%
Predator-prey(5,2,2,1) 97.9±2.9% 3.7±3.5% 42.6±13.0% 14.0±7.7%
Predator-prey(20,4,2,2) 100.0±0% 0% 79.3±12.1% /
Predator-prey(20,1,4,2) 100.0±0% 16.5±16.4% 100.0±0% 54.1±20.3%
Hallway(3,1,2,1) 96.7±4.7% 0% 6.3±6.3% 6.4±4.8%
Hallway(10,1,5,2) 100.0±0% / 13.1±7.2% 7.4±10.4%
4bane_vs_1hM(4,1,3,1) 98.4±2.2% 20.4±6.4% 92.9±4.7% 64.5±13.6%
3z_vs_1r(3,1,2,1) 51.5±2.6% 6.2±0.8% / /
Table2:Thetableillustratestherobustnesspercentagesandtheirstandarddeviationofdifferentenvironmentsandalgorithms.
Ahigherrobustnesspercentageindicatesahigherlevelofresilienceagainstzero-shotcommunicativeattacks.Algorithmsthat
failtoconvergeduringtrainingaremarkedwith’/’.
if it is close to the target (𝑑𝑖𝑠𝑡(𝑠(𝑡),𝑝𝑜𝑠 𝑖) < 𝜂). 𝜖 is the noise
function. Theagents’ goalis tosafelysharethetarget position
amongthesensornetwork,whiletheattackersaimtobreakthe
system’srobustness.Wedenotetheagent’sbeliefonthestate(tar-
getposition)as𝑎 𝑖(𝑡),andtheconsistencyofthewholesystemas
𝑎1(𝑡)=𝑎2(𝑡)=···=𝑎 𝑛(𝑡).
Consensus-based algorithm. We propose a decentralized algo-
rithmbasedontheIBGPprotocolforthesensornetworkproblem.
Eachsensorisactivatedifitobservesthetargetorisinvolvedin
theprotocolandreachesanewconsensusonthetargetposition.
Sincetheobservedtargetpositionincludesanoiseterm,wefirst
discretizetheobservedpositiontoavoidobservationdisagreement
withothersensors.Whenasensorisactivated,itnotifiesitsneigh-
borhoodandproposesanIBGPprotocolonthenewtargetposition.
In the consensus, the agreement on the scope and value of the
protocolisguaranteedbyBGP-relatedprotocols,whichisnotthe
Figure7:ThesimulationresultoftheSensorNetworksProb-
emphasisofthispart.ByrecursivelyaccomplishingtheIBGPproto-
lem.
colsuntiltherearenomoreactivatingsensors,thesharingprocess
iscompleted,andtheentiresensornetworkagreesonthetarget
position.Thethreerecursivestepsarelistedbelow,andFigure8
inothers.SincetheAMEalgorithmisdesignedtoberobustthrough
showsthethreesteps.
itsnoveldesignoftakingthemajority,wethinkthattheperfor-
mancedecayisduetothefactthattheactioninthemajoritymay
(1) Firststep:Ineachtimestep𝑡,agent𝑖observesanewobserva-
bemultiple,makingattacksstillpossible.TheADMACalgorithm
tion𝑜 𝑖(𝑡)=𝑠(𝑡)+𝜖,where𝑠
𝑡
isthestate(thetruepositionof
alsoexhibitsalowlevelofrobustnessinourenvironments,likely
thetarget),and𝜖isanoiseterm.Theagentthendiscretizes
becauseitsreliabilityestimatorwastrainedonspecifictypesofat-
thissignaltoformanewbelief𝑎
𝑖,𝑡
=discretize(𝑜 𝑖(𝑡)).Ifthe
tacks,withonlyminordisturbancesevaluatedintheoriginalpaper.
newsignalupdatestheagent’sbeliefonthetargetposition,
However,inthiswork,wefocusonrobustnessagainstarbitrary
itproceedstothesecondstep.
attacks,whichleadstoADMACunderperforming.Insummary,pol-
(2) Secondstep:Theagentproposesaneighborhoodconsensus
icylearningwiththeIBGPProtocoliseffectiveinfosteringrobust
usingthe(1,1)-protocol.
coordinationagainstzero-shotcommunicativeattacks.
(3) Thirdstep:Ifotheragentsintheconsensusupdatetheirbe-
lief,theagentproposesaconsensusinitsownneighborhood.
5.2 ApplicationinSensorNetworks Thisprocessisoperatediterativelyuntiltherearenonew
Inthispaper,weaddressthesensornetworkproblemwithcom- consensusproposals.
municativeattacks,buildingonthecontinuoussensornetwork
problemdiscussedin[15].Webeginbydefiningthestate(position) InFigure7,thesimulationshowsthatthebeliefofallagentsis
ofthetargetas𝑠(𝑡),where𝑡 isthetime.Forsimplicity,weassume consistentwiththetruesignal.Asthetargetpositionchanges,the
aone-dimensionalstate𝑠(𝑡) ∈R,asmulti-dimensionalcasesare believedpositionmovesalongwithit,indicatingthatconsensus
extensionsofthis.Thesensornetworkconsistsof𝑛sensorslocated onthetargetpositionismaintainedthroughout.Moredetailscan
at𝑝𝑜𝑠1,𝑝𝑜𝑠2,···,𝑝𝑜𝑠 𝑛, with sensor𝑖 observing𝑜 𝑖(𝑡) = 𝑠(𝑡) +𝜖 befoundinAppendixA.5.4.Figure8:Thepipelineofapplyingaconsensus-basedalgorithmonthesensornetworkproblem.
6 CONCLUSION [16] Michael O. Rabin. 1983. Randomized byzantine generals. In 24th Annual
Inthisstudy,weintroducetheImperfectByzantineGeneralsProb-
SymposiumonFoundationsofComputerScience(sfcs1983).403–409. https:
//doi.org/10.1109/SFCS.1983.48
lem (IBGP) as a framework for multi-agent coordination in the [17] MikayelSamvelyan,TabishRashid,ChristianSchröderdeWitt,GregoryFarquhar,
presenceofcompromisedagents.Theconsensusprotocolwehave NantasNardelli,TimG.J.Rudner,Chia-ManHung,PhilipH.S.Torr,JakobN.
Foerster,andShimonWhiteson.2019. TheStarCraftMulti-AgentChallenge.
developedforIBGPeffectivelyensureszero-shotrobustness.While
CoRRabs/1902.04043(2019).arXiv:1902.04043 http://arxiv.org/abs/1902.04043
ouranalysisandexperimentsdemonstratesitspotentialapplicabil- [18] KyunghwanSon,DaewooKim,WanJuKang,DavidEarlHostallero,andYung
itytopracticaltasks,theproposedIBGPprotocolisonlyeffective Yi.2019. QTRAN:LearningtoFactorizewithTransformationforCoopera-
tiveMulti-AgentReinforcementLearning.InProceedingsofthe36thInterna-
inenvironmentswhereaspecifictargetexists,ratherthanarbi-
tionalConferenceonMachineLearning(ProceedingsofMachineLearningResearch,
traryRLenvironments.Infutureresearch,weintendtoaddressthis Vol.97),KamalikaChaudhuriandRuslanSalakhutdinov(Eds.).PMLR,5887–5896.
https://proceedings.mlr.press/v97/son19a.html
limitationbyexploringtheadaptabilityofageneralizedtrainable
[19] PeterStoneandManuelaVeloso.2000. Multiagentsystems:Asurveyfroma
frameworkforconsensusprotocolstomorecomplexandrealistic machinelearningperspective.AutonomousRobots8(2000),345–383.
settings. [20] YanchaoSun,RuijieZheng,ParisaHassanzadeh,YongyuanLiang,SoheilFeizi,
SumitraGanesh,andFurongHuang.2023. CertifiablyRobustPolicyLearn-
ingagainstAdversarialMulti-AgentCommunication.InTheEleventhInterna-
REFERENCES tionalConferenceonLearningRepresentations. https://openreview.net/forum?id=
dCOL0inGl3e
[1] WendelinBöhmer,VitalyKurin,andShimonWhiteson.2020.Deepcoordination [21] TonghanWang*,JianhaoWang*,ChongyiZheng,andChongjieZhang.2020.
graphs.InProceedingsofthe37thInternationalConferenceonMachineLearning. LearningNearlyDecomposableValueFunctionsViaCommunicationMinimiza-
[2] MiguelCastroandBarbaraLiskov.1999. PracticalByzantineFaultTolerance. tion.InInternationalConferenceonLearningRepresentations. https://openreview.
InProceedingsoftheThirdSymposiumonOperatingSystemsDesignandImple- net/forum?id=HJx-3grYDB
mentation(NewOrleans,Louisiana,USA)(OSDI’99).USENIXAssociation,USA, [22] QingyunWu,GaganBansal,JieyuZhang,YiranWu,ShaokunZhang,Erkang
173–186. Zhu,BeibinLi,LiJiang,XiaoyunZhang,andChiWang.2023.Autogen:Enabling
[3] XiaoranWu;ZienHuang;ChonghanYu;.[n.d.].AnimatingthePast:Reconstruct next-genllmapplicationsviamulti-agentconversationframework.arXivpreprint
TrilobiteviaVideoGeneration.([n.d.]). https://doi.org/10.12074/202410.00084 arXiv:2308.08155(2023).
[4] AliDorri,SalilSKanhere,andRajaJurdak.2018.Multi-agentsystems:Asurvey. [23] WanqiXue,WeiQiu,BoAn,ZinoviRabinovich,SvetlanaObraztsova,and
IeeeAccess6(2018),28573–28593. ChaiKiatYeo.2022.Mis-SpokeorMis-Lead:AchievingRobustnessinMulti-Agent
[5] Ming-CanFan,Hai-TaoZhang,andMiaomiaoWang.2014.Bipartiteflocking CommunicativeReinforcementLearning(AAMAS’22).InternationalFoundation
formulti-agentsystems. CommunicationsinNonlinearScienceandNumerical forAutonomousAgentsandMultiagentSystems,Richland,SC.
Simulation19,9(2014),3313–3322. [24] LebinYu,YunboQiu,QuanmingYao,YuanShen,XudongZhang,andJianWang.
[6] JunjieFuandJinzhiWang.2014.Adaptivecoordinatedtrackingofmulti-agent 2024.RobustCommunicativeMulti-AgentReinforcementLearningwithActive
systemswithquantizedinformation.Systems&ControlLetters74(2014),115–125. Defense.ProceedingsoftheAAAIConferenceonArtificialIntelligence38,16(Mar.
[7] SiruiHong,XiawuZheng,JonathanChen,YuhengCheng,JinlinWang,Ceyao 2024),17575–17582. https://doi.org/10.1609/aaai.v38i16.29708
Zhang,ZiliWang,StevenKaShingYau,ZijuanLin,LiyangZhou,etal.2023. [25] WenwuYu,GuanrongChen,MingCao,andJürgenKurths.2009.Second-order
Metagpt:Metaprogrammingformulti-agentcollaborativeframework. arXiv consensusformultiagentsystemswithdirectedtopologiesandnonlineardynam-
preprintarXiv:2308.00352(2023). ics.IEEETransactionsonSystems,Man,andCybernetics,PartB(Cybernetics)40,
[8] YipengKang,TonghanWang,andGerarddeMelo.2020. Incorporatingprag- 3(2009),881–891.
maticreasoningcommunicationintoemergentlanguage. AdvancesinNeural [26] MingZhou,JunLuo,JulianVillella,YaodongYang,DavidRusu,JiayuMiao,
InformationProcessingSystems33(2020),10348–10359. WeinanZhang,MontgomeryAlban,IMANFADAKAR,ZhengChen,Chongxi
[9] YipengKang,TonghanWang,QianlanYang,XiaoranWu,andChongjieZhang. Huang,YingWen,KimiaHassanzadeh,DanielGraves,ZhengbangZhu,Yi-
2022.Non-LinearCoordinationGraphs.AdvancesinNeuralInformationProcessing hanNi,NhatNguyen,MohamedElsayed,HaithamAmmar,AlexanderCowen-
Systems35(2022),25655–25666. Rivers,SanjeevanAhilan,ZhengTian,DanielPalenicek,KasraRezaee,Pey-
[10] DaikiKishishitaandHiroyukiOzaki.2020.Publicgoodsgamewithambiguous manYadmellat,KunShao,dongchen,BaokuanZhang,HongboZhang,Jianye
threshold.EconomicsLetters191(2020),109165. https://doi.org/10.1016/j.econlet. Hao,WulongLiu,andJunWang.2021. SMARTS:AnOpen-SourceScalable
2020.109165 Multi-AgentRLTrainingSchoolforAutonomousDriving.InProceedingsofthe
[11] LeslieLamport,RobertShostak,andMarshallPease.1982. TheByzantine 2020ConferenceonRobotLearning(ProceedingsofMachineLearningResearch,
GeneralsProblem. ACMTrans.Program.Lang.Syst.4,3(jul1982),382–401. Vol.155),JensKober,FabioRamos,andClaireTomlin(Eds.).PMLR,264–285.
https://doi.org/10.1145/357172.357176 https://proceedings.mlr.press/v155/zhou21a.html
[12] ShuaiLiu,LihuaXie,andHuanshuiZhang.2014.Containmentcontrolofmulti-
agentsystemsbyexploitingthecontrolinputsofneighbors.InternationalJournal
ofRobustandNonlinearControl24,17(2014),2803–2818.
[13] RezaOlfati-Saber.2006.Flockingformulti-agentdynamicsystems:Algorithms
andtheory.IEEETransactionsonautomaticcontrol51,3(2006),401–420.
[14] RezaOlfati-SaberandRichardMMurray.2004. Consensusproblemsinnet-
worksofagentswithswitchingtopologyandtime-delays.IEEETransactionson
automaticcontrol49,9(2004),1520–1533.
[15] R.Olfati-SaberandJ.S.Shamma.2005.ConsensusFiltersforSensorNetworks
andDistributedSensorFusion.InProceedingsofthe44thIEEEConferenceon
DecisionandControl.6698–6703. https://doi.org/10.1109/CDC.2005.1583238A APPENDIX/SUPPLEMENTALMATERIAL Howeverif𝑟 =𝑟1→2bycoincidence,itispossiblethatthemis-
coordinationhappens.Butsincethenumberofrounds𝑟 isran-
A.1 Diagram
domlydrawnbytheglobalrandomizer,whichisindependentof
Weprovidethediagramabouttheresultsunderallkindsofattack-
theattackers.Theattackercanonlyguessthefinalround,andthe
ingstrategiesinTable3,given𝑛 = 5,𝑡 = 1,𝑘 = 3.Itillustrates mis-coordinationprobabilityisatmostmax 𝑟{𝑝(𝑟
𝑡𝑜𝑡
=𝑟)}. □
that,nomatterwhattheattackis,theIBGPprotocolguarantees
robustnesswithhighprobability1−max 𝑟{𝑝(𝑟
𝑡𝑜𝑡
=𝑟)}
A.3 Multi-agentEnvironments
A.2 ProofofTheorem1 A.3.1 RobustnessinMulti-targetEnvironments. Inmulti-targeten-
vironmentsdefinedinTable4,theIBGPprotocolrunsindepen-
Proof. Beforestartingtheproof,wecomeupwithalemma.
dentlyforeachtarget.Ifthereare𝑚targets,theprotocolruns𝑚
timesforeachtarget,andthefinaldecisionisstillrobust.However,
Lemma1. Thenumberofactivatingagents#(𝑚 𝑖( :𝑟0) =1)decreases
thissolutionhasadrawback:theprotocolforeachtargetisascon-
monotonicallywhentheround𝑟0increases.
servativeasthesingle-agentsituation(still(𝑘,𝑡)-protocol),evenif
the𝑚islarge.Thismeansthat𝑡 attackershavefullinfluenceon
Lemma1istruebecauseonceanagentgiveup(i.e.,𝑚(·) =0),it
𝑖: eachtarget.Ideally,wewanttodividetheinfluenceofattackers
willneverbeactivatedagainbythedefinitionoftheprotocol.
acrossmultipletargets,asexcessiveconservativenesswouldresult
WeprovetherobustnessoftheIBGPProtocolbyenumerating
inlowefficiency.Toalleviatethisproblem,weproposeaddinga
allprobabilities.InIBGP,thereare3typesofinitialization:
newround,calleddispersiondefense,afterthefirstroundofthe
(1) #(𝑜 𝑖 =1) <𝑘(𝑖 ∈ [𝑛]) protocol.
(2) 𝑘 ≤#(𝑜 𝑖 =1) <𝑘+𝑡 (𝑖 ∈ [𝑛])
(3) #(𝑜 𝑖 =1) ≥𝑘+𝑡 (𝑖 ∈ [𝑛]) Dispersion defense. Acquire a list of 𝑞 random permutations
1)+Un 𝑡d <er 𝑘th +e 𝑡fi (r es vt ei nni it fia al li lza thti eon a, tti an ct kh ee rsse sc eo nn dd 1r to oun thd e,s ai gn ec ne t# s,(𝑜 it𝑖 i=
s
𝑝 ag1, e𝑝 n2 t, d· e· fi· n, e𝑝 s𝑞 th∈ e[ r𝑛 ec+ e𝑡 iv] e→ dm[ e𝑛 s+ sa𝑡 g] ef aro sm
𝑚
𝑖(t 𝑗1h )e =gl Mob aa jl or ra itn yd 𝑢o ∈m [𝑞iz ]e {r 𝑚. ˜E
𝑖(
𝑝1a 𝑢)c (h
𝑖)}.
stilllowerthanthethreshold),themessagesinthesecondround (𝑚˜(1) istheoriginalmessageinthefirstround.)
𝑚(2) = 0definitely.Andthefinalactionofeachagentmustbe The main idea of the dispersion defense is to disarrange the
𝑎=0. sentmessages,makingitdifficultforattackerstodeterminethe
Underthethirdinitialization,weprovebyinduction.Ifinround intendedreceiver.Toachievethis,arandompermutingprocessis
𝑟0,thenumberofactivatingagents#(𝑚 𝑖( :𝑟0) = 1) ≥ 𝑘 +𝑡,inthe addedafterthefirstround(wecallittheproposingroundforbetter
nextround𝑟0+1,thenumberofactivatingagentsstillsatisfies understanding).Inthedispersiondefense,thefunctionMajority{·}
#(𝑚(𝑟0+1) = 1) ≥ 𝑘 +𝑡.Therefore,sinceinthefirstround,the returnsthemajority(morethanhalf)ofallelementsandreturns0
𝑖:
propositionistrue,inthedecisionroundthenumberofactivating ifthereisnomajority.
agents is still greater than𝑘 +𝑡, and the activating agents will Apparently,thebenignagentsbroadcasttheirobservationsin
cooperatesafely. thefirstproposinground,andtheaddeddispersiondefensedoesn’t
Underthesecondinitialization,there’snofurtherconclusion changethemessagesfrombenignagents.However,theattackers
on the number of activating agents in the intermediate rounds. don’tknowthepermutation𝑝1,···,𝑝 𝑞 whensendingmessages
WedescribetheactivationstatusofeachroundbyCase1/Case2 inthefirstproposingroundandthuscannotadaptthemessage
definedasfollows. accordingtothereceiver.Asaresult,mis-coordinationonlyoccurs
onasmallratiooftargetswithhighprobability,asdemonstrated
• Case1:𝑘 ≤#(𝑚 𝑖( :𝑟0) =1) <𝑘+𝑡 inTheorem2.RefertoAppendixA.4.1forproofofTheorem2.
• Case2:#(𝑚(𝑟0) =1) ≤𝑘
𝑖:
Theorem2. Ina𝑚-targetenvironment,operatingwiththe𝑘+𝜆-
FromtheLemma1,theroundsswitchfromCase1toCase2only
3𝑡
protocolwillcauseatmost targetstomis-coordinate,withproba-
once.DenotetheroundthatswitchesfromCase1toCase2as 𝜆
round𝑟1→2.Wehavethefollowinglemma. bility1−(𝑚−3)𝑡·𝑘 𝑚𝑎𝑥𝑒𝑥𝑝(−2𝑞(1 6− 𝑛𝑡 +𝑡)2).(Naturalassumptions:
𝑓 ≪𝑛,𝑡 ≪𝑚)
Lemma2. If𝑟1→2exists,∀𝑟0 >𝑟1→2, #(𝑚 𝑖( :𝑟0) =1)=0.
Thereasonisthatsince#(𝑚 𝑖( :𝑟1→2) =1) ≤𝑘,intheround𝑟1→2+1, Proof. First,themainproblemofIBGP,themis-coordination
#(𝑚(𝑟1→2) =1)=0. (somevalidagentscoordinatebutotherdon’t),won’thappenwith
𝑖: highprobabilityduetothestructureofIBGPprotocol,evenifthe
Ifthelastround𝑟 happensinCase1,alltheactivatingagents
thresholdchanges.However,theproblemof𝜆<𝑡isthattheattack-
wouldact𝑎 = 1becausenomatterwhatmessagestheattackers
ersmaymisleadagentstocoordinateeveniftherearen’tenough
send,#(𝑚(𝑟0) =1)+#attackers≥𝑘.Ifthelastround𝑟 happensin
𝑖: validagents,whichwecallfalsecoordinationinthefollowingproof.
Case2,alltheactivatingagentswouldact𝑎=1becausenomatter
whatmessagestheattackerssend,#(𝑚(𝑟0) =1)+#attackers ≥𝑘.
If𝑑𝑖𝑠𝑡(𝐴𝑡𝑘,𝐴𝑡𝑘 𝑎𝑙𝑙−1) ≥𝑡−𝜆,bydefinition∀𝑖 ∈ [𝑛],
𝑖:
I #f (𝑚th 𝑖(e :𝑟)la =st 1r )ou =n 0d ,𝑟 th> ey𝑟 w1→ il2 l, as ci tn 𝑎ce =th 0e wn itu hm oub ter mo isf -a cc ot oiv rda it nin ag tioa ng .ents | 𝑗=𝑛+∑︁ 1..𝑛+𝑘𝑚 𝐴𝑡𝑘,𝑗→𝑖 − 𝑗=𝑛+∑︁ 1..𝑛+𝑘𝑚 𝐴𝑡𝑘𝑎𝑙𝑙−1,𝑗→𝑖| ≥𝑡−𝜆,(b)Attackingstrategiesthatcausesthenumberofactiveagents<𝑘+𝑡at
(a)Attackingstrategiesthatdirectlycausesthenumberofactiveagents<𝑘. round1.
If𝑟
𝑡𝑜𝑡
=1 If𝑟
𝑡𝑜𝑡
=1
If𝑟
𝑡𝑜𝑡
=2 If𝑟
𝑡𝑜𝑡
=2
If𝑟
𝑡𝑜𝑡
=3 If𝑟
𝑡𝑜𝑡
=3
(c)Attackingstrategiesthatcausesthenumberofactiveagents<𝑘+𝑡at (d)Attackingstrategiesthatcausesthenumberofactiveagents<𝑘+𝑡at
round2. round3.
If𝑟
𝑡𝑜𝑡
=1 If𝑟
𝑡𝑜𝑡
=1
If𝑟
𝑡𝑜𝑡
=2 If𝑟
𝑡𝑜𝑡
=2
If𝑟
𝑡𝑜𝑡
=3 If𝑟
𝑡𝑜𝑡
=3
Table3:Theresultsunderallkindsofattackingstrategies,witharandomizednumberofrounds𝑟 𝑡𝑜𝑡.
Single-targetIBGP Multi-targetIBGP
𝑜
𝑖
∈{0,1},𝑎
𝑖
∈{0,1} 𝑜
𝑖
∈{0,1,2,···,𝑚},𝑎
𝑖
∈{0,1,2,···,𝑚}
𝑛agents,1target 𝑛agents,𝑚targets
coordinationthreshold𝑘 coordinationthresholds𝑘1,𝑘2,···,𝑘
𝑚
𝑅= 1 1( (# #( (𝑜 𝑜𝑖
𝑖
= =1
1i if
f, ,𝑎
𝑎#
#𝑖
𝑖( (𝑜
𝑜=
=𝑖
𝑖1
1=
=)
)1
1=≥
)
)0𝑘
=
<))
𝑛
𝑘
𝑅= (cid:205)(cid:205) 𝑗𝑗 ∈∈ [[ 𝑚𝑚 ]] 11
ii
((
ff
##
##
(( 𝑜𝑜
(( 𝑜𝑜
𝑖𝑖
𝑖𝑖
==
==
𝑗𝑗 ,,
11
𝑎𝑎
))
𝑖𝑖
=
<==
𝑛
𝑘𝑗𝑗 𝑗)) =≥ 0𝑘 )𝑗)
 1 +1(# (( #𝑜 (𝑖
𝑜
𝑖= =1 o,
1
t𝑎 h,𝑖
𝑎
e𝑖= rw=1 i)
s1
e)≥ =𝑘 0)
)
 (cid:205) +1𝑗 (∈ #[𝑚 (𝑜] 𝑖1
=
o(#
t𝑗
h,( 𝑎𝑜 e𝑖𝑖 rw== is𝑗𝑗 e, )𝑎 =𝑖 = 0)𝑗) ≥𝑘 𝑗)
 
Table4:Thedifferenceofdefinitionbetweensingle-targetandmulti-targetIBGP.
whichmeansthat If#(𝑜
𝑖
=1) ≤𝑘−1(falsecoordinationmayhappen),thetotalvotes
anagentcanreceiveisatmost𝑘−1+𝜆,sothefalsecoordination
neverhappens. □
∑︁ 𝑚
𝐴𝑡𝑘,𝑗→𝑖
≤𝜆. A.3.2 TargetSelectioninMulti-targetenvironments. Inpractical
tasks, multiple targets are available for the agents. Luckily, the
𝑗=𝑛+1..𝑛+𝑘consensusisstillapplicabletoeachtarget,andthusthekeyproblem highestpossibletarget𝑠1 ∈𝑆
𝑔𝑟𝑒𝑒𝑑𝑦
isselected,if𝑠1 ∉𝑆 𝑜𝑝𝑡𝑖𝑚𝑎𝑙,it
istodecidewhichtargettoobtain.Iftheconsensusprotocolfor caninfluenceatmost𝑘
𝑚𝑎𝑥
othersetsin𝑆 𝑜𝑝𝑡𝑖𝑚𝑎𝑙.Butsince𝑠1is
eachtargetisconductedindependently,anagentattendingafailed ofthehighestreward,therewardof𝑠1isatleast1/𝑘 thereward
targetwillnotentertheconsensusofanothertarget,whichisa ofalltheinfluencedtargets.Similarly,therewardof𝑠2isalsoat
wasteifthesecondtargetactuallyhasenoughcooperators.We least1/𝑘
𝑚𝑎𝑥
therewardoftheinfluencedtargets(theinfluenced
proposeagreedytargetselectionalgorithmtohandlethisproblem. targetsaren’tdoublecounted).Therefore,thegreedyalgorithmis
a1/𝑘 𝑚𝑎𝑥-approximationoftheoptimalsolution. □
Algorithm1:GreedyTargetSelectionAlgorithm
A.4 AdaptiontotheDynamics
Input:thenumberofagents𝑛,thenumberoftargets𝑚,the
Inpracticaltasks,althoughthegoalisthesame,i.e.,tokeepaway
rewardsoftargets𝑟1,𝑟2,···,𝑟 𝑚,thecooperation
frommis-coordinationandgetrewards,therealrewardsandcosts
threshold𝑘1,𝑘2,···,𝑘 𝑚,theavailablesetofeach
target𝑠1,𝑠2,···,𝑠
𝑚
∈{0,1}𝑛 couldbecompletelydifferent.Asaresult,they’rebasicallydifferent
problems,however,wecouldstillmakeuseofthenicepropertyof
Output:selectedtargetsset𝑇
ourimperfectconsensusprotocol,asitisprobablysafeunderany
1
Sort𝑚targetsbythereward𝑖1,𝑖2,···,𝑖
𝑚
frombiggestto
attacks.
smallest;
Theoriginalthreshold𝑘+𝑡 canbeloosenedto𝑘+𝜆tobemore
2
Initializetheoccupiedagentset𝑈 =∅;
aggressive,i.e.,morelikelytosucceedwithalower#(𝑜
𝑖
=1),but
3
Initializetheselectedtargetset𝑇 =∅;
failwithsomeprobability.Buthowtochoose𝜆ishighlyrelated
4
for𝑗 =1···𝑚do
totheenvironmentdynamics,aswellastheattackers.Tobemore
5 if ||𝑠 𝑖𝑗 \𝑈|| ≥𝑘 𝑖𝑗 then detailed,wegivesomeexamplesbelow.
Add𝑖 to𝑇;
6 𝑗 (1) (Environmentdynamics)Insomeenvironments,thecostis
7
Addarbitrary𝑘
𝑖𝑗
agentsfrom𝑠
𝑖𝑗
\𝑈 to𝑇;
notnegativerewards,butthefactthatthefailingagents
8 end woulddie.It’simpossibletovaluethecostofdeathdirectly.
9 end (2) (Environmentdynamics)Thedynamicsisinitializedunder
someprobabilitydistribution.Thedistributionaffectsthe
Infact,theoptimaltargetselectionproblemisNP-Complete,
optimalpolicy.E.g.,if#(𝑜
𝑖
=1) >𝑘 withhighprobability,
aggressiveprotocolsuffices.
meaningthattheredoesn’texistanefficienttargetselectionalgo-
(3) (Attacker)Differentattackingpoliciesposedifferentlevels
rithmeveninthecentralizedsetting.Althoughitisunabletoobtain
ofchallenges.
theoptimalsolution,ourGreedyTargetSelectionAlgorithmserves
Tobetterillustratethefactthatenvironmentdynamicsandattack-
asa1/𝑘 𝑚𝑎𝑥-approximationoftheoptimalsolution.
erswouldinfluencetherewardandtheoptimalcommunicating
NP-completenessofthetargetselectionproblem. protocol.Weintroduceatypeofenvironmentandtrydifferent
thresholds under three kinds of challenging attackers. We also
Proof. Wefirstgiveastrictdefinitionofthetargetselection
comparetheworstsuccessrateunderdifferentthresholds.The
problem.
conclusionisthatinpracticaltasks,theoptimalprotocoldepends
TargetSelectionProblem. 𝑛agentsarepursuing𝑚targets,whose ontheactualsituation.
rewardsare𝑟1,𝑟2,···,𝑟 𝑚.Thecooperationthresholdsare𝜃1,𝜃2,···,𝜃 𝑚,
andtheavailablesetofeachtargetis𝑠1,𝑠2,···,𝑠
𝑚
∈{0,1}𝑛.The
𝜆=0 𝜆=1 𝜆=2
targetselectionproblemrequires𝜃 availableagentstocooperate
𝑖
ontarget𝑖toobtainthereward𝑟 . 𝑝 =0 0.460 0.312 0.162
𝑖
Wefindthatthesimplifiedtargetselectionproblemisequivalent 𝑝 =0.1 0.462 0.308 0.159
totheSetPackingproblem,whichisaclassicNP-completeproblem. 𝑝 =0.2 0.461 0.310 0.163
𝑝 =0.3 0.459 0.314 0.162
Simplified Target Selection Problem. 𝑛 agents are pursuing𝑚 𝑝 =0.4 0.459 0.316 0.166
targetswiththesamereward.Thecooperationthresholdis𝜃,and 𝑝 =0.5 0.456 0.331 0.183
theavailablesetofeachtargetis𝑠1,𝑠2,···,𝑠 𝑚 ∈{0,1}𝑛. 𝑝 =0.6 0.448 0.361 0.220
SetPackingProblem. Supposethere’safiniteset𝑆andalistof 𝑝 =0.7 0.445 0.404 0.266
𝑘se sts et𝑠 s1, t𝑠 h2 a, t· a·· re,𝑠 d𝑚 is. jT oih ne t.setpackingproblemaskswhetherthereexist 𝑝 𝑝 = =0 0. .8 9 0 0. .4 44 31 4 0 0. .4 44 54 4 0 0. .3 30 54 2
Thesimplifiedtargetselectionproblemisjustequivalenttothe 𝑝 =1 0.433 0.437 0.461
setpackingproblem,whichisNP-complete. □
Table6:Takingdifferent𝜆swhentheprobabilityoftheran-
domattackerdiffers.
Proofof1/𝑘 𝑚𝑎𝑥-approximation.
Proof. Denotetheselectedtargetsofthegreedyalgorithmand
the optimal algorithm as𝑆 𝑔𝑟𝑒𝑒𝑑𝑦,𝑆 𝑜𝑝𝑡𝑖𝑚𝑎𝑙. Consider the greedy A.4.1 AdaptiontotheAttacker. Theoptimal𝜆alsovarieswhen
selectionprocessfromthehighestrewardtothelowest.Whenthe theattackerchanges.Forexample,accordingtoTable6,whentheattackerisarandomattackerwithprobability0,0.1,0.2,···,1,the (1) Theglobalrandomizerinitializesthenumberofrounds𝑟
optimal𝜆varies. fromadistribution𝑟 ∼R
Inpracticalscenarios,theattackermayfollowadistributionthat (2) Firstround:Eachagentbroadcastsitsobservation𝑚 𝑖( :1) =𝑜
𝑖
d cao nes an do jut sp to ts he ea ns eig twni ofi rc ka ’n st ht ih dr de ea ntt lo ayo eu rr pc ao rn as men es teu rs s. .T Mhe or re efo spre e, cw ifie
-
(3) Round𝑟 𝑛𝑜𝑤 ∈ {2···𝑟}: Each agent𝑖 ∈ {𝑖|𝑚 𝑖(𝑟𝑛𝑜𝑤) = 1}
c thal ely r, ew que ir re el dax nu𝜆 mto beso rm ofe av va alu ile abs lm ea al gle er nt th sa #n (𝑜𝑡 𝑖.T =h 1is ),c ih na cn rg eae sr ie nd gu tc he es
broadcasts𝑚 𝑖( :2)
=00 𝑘 (cid:205)≤ 𝑗∈[(cid:205) 𝑛+𝑗 𝑡∈ ][𝑛 1+ (𝑡 𝑚]1
(
𝑗𝑖1( )𝑚 =( 𝑗𝑖1 1) )= <1 𝑘) <𝑘+𝜆 𝑖
likelihoodofsuccess.Weprovideaguarantee(Theorem3)forthe 1 (cid:205) 𝑗∈[𝑛+𝑡]1(𝑚( 𝑗𝑖1) =1) ≥𝑘+𝜆
𝑖
Tre ola bx ee gd inp ,r wot eoc do el fi, na ess tu hm ei dn ig stc ae nr ct eai bn ec to wn ed ei ntio twns oa ab to tau ct kt ih ne ga st ct hac ek me er ss ,. (4) Decisionmakingr ound:Eachagent𝑖 ∈ {𝑖|𝑚 𝑖(𝑟𝑛𝑜𝑤) = 1}
𝑑 (cid:205)𝑖𝑠 𝑗𝑡 =( 𝑛𝐴 +1𝑡𝑘 ..𝑛1 +,𝐴 𝑘𝑡 𝑚𝑘 𝐴2) 𝑡𝑘= 2,𝑗m →i 𝑖n |𝑒 }𝑛 .𝑣min 𝑖∈[𝑛]{|(cid:205) 𝑗=𝑛+1..𝑛+𝑘𝑚 𝐴𝑡𝑘1,𝑗→𝑖 −
selectaction𝑎 𝑖
=1
0
𝑘 (cid:205)≤ 𝑗∈[(cid:205) 𝑛+𝑗 𝑡∈ ][𝑛 1+ (𝑡 𝑚]1
(
𝑗𝑖1( )𝑚 =( 𝑗𝑖1 1) )= <1 𝑘) <𝑘+𝜆 𝑖
Theorem3. If𝑑𝑖𝑠𝑡(𝐴𝑡𝑘,𝐴𝑡𝑘 𝑎𝑙𝑙−1) ≥𝑡−𝜆,thenewprotocolwith 1 (cid:205) 𝑗∈[𝑛+𝑡]1(𝑚( 𝑗𝑖1) =1) ≥𝑘+𝜆 𝑖
athreshold𝑘+𝜆wouldnotfailwithhighprobability.(𝐴𝑡𝑘 𝑎𝑙𝑙−1is 
anattackerthatsends1allthetime.)
(𝑛,𝑘,𝑡 =6,4,2) 𝜆=0 𝜆=1 𝜆=2 varying𝜆
Proof. Forclarity,wefocusonlyonthenumberofinfluenced 𝑝 =0 0.052 0.005 0.000 0.000
targetsintheproof.Thesmallprobabilityoftheconsensusfailure 𝑝 =0.1 0.051 0.005 0.000 0.000
keepsthesame,sowedon’tcoverthispartinouranalysis. 𝑝 =0.2 0.051 0.005 0.000 0.001
Inthefirstproposinground,eachattacker𝑖sendmessages𝑚˜(1) 𝑝 =0.3 0.051 0.005 0.000 0.002
𝑚w agh e−e nr
|
t𝑈e s|t inh tae trr oge
te
aa
t ls
,re
|s
𝑈.t|𝑈
. |∀
≤| 𝑢t (a
∉
𝑛rg
𝑈
+e
,
𝑡t #s )/(s
𝑚
𝑛˜.t 3+𝑖.
?
𝑡∀
=
=𝑢
𝑢
3∈
)
.
<𝑈, 𝑛# 3+( 𝑡𝑚 .˜ 𝑖 S? in= ce𝑢 th) e≥ rea𝑛 r3+ e𝑡 𝑛a𝑖 +n: d
𝑡
𝑝 𝑝
𝑝
𝑝
= =
=
=0 0
0
0. .
.
.4 5
6
7
-0 0
0
0. .
.
.0 0
0
04 3
1
27 6
3
6
00 0
0
.. .
.
00 0 00 0
0
25 5
8
0
0 0
0
0. .
.
.0 0
0
00 0
0
00 0
0
2
0 0
0
0. .
.
.0 0
0
00 0
0
00 0
2
5
Foreachagent𝑗,denote#(𝑚˜ 𝑖?=𝑜 𝑗)=𝜏.Undersuch𝜏,
𝑝 =0.8 -0.068 0.030 0.004 0.008
𝑃(𝑚 𝑖( 𝑗1) =𝑜 𝑗)=𝑃(Majority 𝑢∈[𝑞]{𝑚˜ 𝑖( 𝑝1 𝑢) (𝑖)}=𝑜 𝑗) 𝑝 𝑝= =0 1.9 - -0 0. .1 10 99
1
-0 0. .0 03 81
7
00 .. 001 53
2
0 0. .0 02 53
0
𝑞
≤𝑃(#(𝑚˜ 𝑖( 𝑝1 𝑢) (𝑖) =𝑜 𝑗) ≥ 2) Avg -0.008 0.002 0.006 0.008
𝑞
=𝑃 𝐵𝑖𝑛𝑜𝑚𝑖𝑎𝑙(𝑞, 𝑛𝜏+ +𝑡 𝑡)(𝑋 ≥ 2) Table7:Optimal𝜆settingfordifferentattackersettings.
If 𝑛𝜏+ +𝑡
𝑡
< 1 2,𝑃(𝑚 𝑖( 𝑗1) =𝑜 𝑗) ≤ 𝑒𝑥𝑝(−2𝑞(1
2
− 𝑛𝜏+ +𝑡 𝑡)2) becauseofHo- Foreachagent𝑖0,wedefinethedistancebetweentwoattack-
effdingInequality. ingschemes,𝑑𝑖𝑠𝑡(𝐴𝑡𝑘1,𝐴𝑡𝑘2)=min 𝑒𝑛𝑣{(cid:205) 𝑗=𝑛+1..𝑛+𝑘𝑚 𝐴𝑡𝑘1,𝑗→𝑖0−
infl𝑃 u( e𝑚 nc𝑖( 𝑗 e1) db= y𝑜 a𝑗 t) tai cs ku ernd 𝑗e ur ns dto eo rd 𝜏.a Fs orth ae tap rr go eb ta 𝑢b ,il 𝑃it (y ∃t 𝑗h ∈at [𝑛ag ],e 𝑚n 𝑖t
(
𝑗1𝑗 )i =s (cid:205) t nh oe𝑗 t= n f𝑛 ae+ iw1 l. w.𝑛 p+ ir t𝑘 o h𝑚 t ho𝐴 c igo𝑡 h𝑘 l2 w p,𝑗 r→ i oth b𝑖0 at} bh. irI lef its∀ yh .𝑖 o (∈ 𝐴ld 𝑡s[ 𝑘𝑛 𝑘 𝑎] 𝑙, + 𝑙𝑑 −𝜆𝑖 1𝑠 1𝑡 i, s( 𝑘𝐴 a+𝑡 n𝑘 𝜆 a𝑖 2, t𝐴 , ta·𝑡 c·𝑘 k·𝑎 e,𝑙 r𝑙 𝑘− t+1 h) a𝜆 t≥ 𝑛 sw e𝑡 no− du s𝜆 ld𝑖 1,
𝑜
𝑗
=𝑢) ≤𝑘 𝑚𝑎𝑥𝑃(𝑚 𝑖( 𝑗1) =𝑜 𝑗)isunderstoodastheprobabilitythat allthetime.)
target𝑢isinfluencedbyattacker𝑗. InTable7,wecomparetheperformanceofusingthesame𝜆and
If𝑜 𝑗 ∉ 𝑈,𝑃(∃𝑗 ∈ [𝑛],𝑚 𝑖( 𝑗1) = 𝑜 𝑗 = 𝑢) ≤ 𝑘 𝑚𝑎𝑥𝑒𝑥𝑝(−2𝑞(1 2 − Wva ery uin seg a𝜆 st io ngde lea -l taw ri gth etr ta an sd ko am ndat mta ec ak se urs rew ti hth ev aa vr ei ro au gs ep rr eo wba ab rdili it nie as.
𝑛 3+𝑡+𝑡
)2)≡𝜖. singlestep.Weseethatvarying𝜆leadstothemostadaptiveprotocol
𝑛+𝑡
Ifatargetmis-coordinate,theremustbemorethan𝜆attackersin- onaverage,indicatingthebenefitofmicroscopiccomplexity.
fluencingit.Therefore,ifmorethan3𝑡 targetsmis-coordinate,there
𝜆
mustbeatleast 3𝑡 ·𝜆influencingpairs.(Theinfluencepair(𝑖,𝑗) ∈ A.5 Implementationdetails
𝜆
[𝑡]×[𝑚]meansthatattacker𝑖influencetarget𝑗.)Buttheprobabil- A.5.1 Algorithms. Sincethispaperfocusonthecommunicative
ityupperboundofallinfluencingpairsis{1,1,···,1,𝜖,𝜖,···,𝜖}. attacksandalsocommunicativedefense,webuildouralgorithms
(cid:32)(cid:32)(cid:32)(cid:32)(cid:32) (cid:32)(cid:32)(cid:32)(cid:32)(cid:32) (cid:32)(cid:32)(cid:32)(cid:32)(cid:32) (cid:32)(cid:32)(cid:32)(cid:32)(cid:32)
(cid:124) (cid:123)(cid:122) (cid:125) (cid:124) (cid:123)(cid:122) (cid:125) basedonthecodebasein[21].Forsimplicity,weremoveallthe
3𝑡 (𝑚−3)𝑡 losses on communication learning except the downstream loss,
Sotheprobablityofmorethan 3𝑡 mis-coordinationislessthan
𝜆 making the codebase only a multi-agent QMIX algorithm with
(𝑚−3)𝑡𝜖. □
learnablecommunications.
ThefirstbaselineAME[20]publishesitscode,butisthecontinuous-
Thisconclusionalsogeneralizestovarying𝜆 valuesforeach
actionversion.Therefore,were-implementAMEinourcodefor
agentinAppendixA.4.2.
faircomparison.Thesecondbaseline[23]isnotopen-source,and
A.4.2 Varying𝜆foreachagent. Whendifferentagentshaveadif- oneofitscontributionsisbasedonanimpracticalassumptionthat
ferent𝜆 ,theprotocolisasfollows. thedisturbanceonmessagesisonlyasmallnoise.Soweimplement
𝑖recursivetraining,whichisitssecondcontribution,tocomparein A.5.3 Training-testingphasedetails. Tobetterillustratehowwe
theexperimentsection. evaluate the robustness of algorithms, we include the learning
OuralgorithmandAMEincludestwophases,thetrainingand curves(Figure10)offourenvironmentsinthemainresults(Section
testingphase.Intheexperiment,thetestingphasemeansthatwe 5.1).Tocomparethezero-shotrobustnessofalgorithms,wedisplay
freezetheagents’policyandcommunicationandtraintheattackers theexperimentresultsbycoloringthecurveinthetrainingphase
tosimulatetherealattackingscheme.Thetrainingphaselastsfor inblueandcoloringthecurveinthetestingphaseinorange.Also,
𝑡 stepsandthetestingphase(theattackerlearningphase)lasts thetestingphaseisactuallythetrainingprocessoftheattackers.
𝑡𝑟𝑎𝑖𝑛
for𝑡 steps.Andintherecursivetraining,werecursivelytrain Therefore,ifthealgorithmisn’trobustenoughagainstcommunica-
𝑡𝑒𝑠𝑡
theagentsandattackerswithafixedintervalofsteps𝑡. tiveattacks,thelearningcurveinthetestingphasewoulddecay
Thetraining/testingstepsandhyperparametersareshownin significantly.
Table8.Thestepsaren’ttunableparameters,asweadopttheproper TheleftcolumnshowsthelearningcurveoftheIBGPprotocol.
stepwherethelearningprocessisconverged.𝑟 isthemaximum Andthemiddlecolumnisthelearningcurveofrecursivetrain-
𝑚𝑎𝑥
roundsinIBGPProtocol,andthe𝑘 isthebuilt-inhyperparam- ing,meaningthatthetrainingprocessofagentsandattackersis
AME
eterinAMEalgorithms. repeated.Recursivetrainingisoneofthecontributionsofthealgo-
There’snoexactrequirementofcomputingsources,becausethe rithmin[23].WealsocomparetheAMEalgorithmin[20]shown
algorithmandenvironmentarenotcomputationallyintensive. intherightcolumn.
FromthelearningcurvesinFigure10,theIBGPProtocolmain-
A.5.2 Environment. Wemakemodificationstothepredator-prey tainstheperformancefromthetrainingphasetothetestingphase.
environmenttomakeiteasiertolearninthetrainingphase.Specif-
Buttherecursivetrainingfailstoberobustwhenswitchedtothe
ically, we use fixed preysso agents can coordinate in an easier
testingphase.TheAMEalgorithmperformswellinpartofthe
pattern.Weusethemapsize5inthemainresultsandmapsize10
environmentsinthetestingphasebutstillenduresaperformance
intheadaptionprocess,becausethemapsize10ismorechallenging
decayinthetestingphase.
andthe𝑘+𝑡 protocolwillnot100%succeedandhasapotentialto
improveintheadaptionprocess.Wealsoaddanauxiliaryreward A.5.4 Details of the Sensor Network problem. In Figure 11, the
basedonthedistancetothetargettoencourageexplorationin averagebeliefofallagentsisconsistentwiththetruesignal,and
Predator-prey(4,1,2,1) andPredator-prey(5,2,2,1) tomakethe thestandarddeviationisnearlyzero,indicatingthatallagentsshare
trainingphaseconvergetoagoodsolution. thesamebelief.
Thecorrectnessofthealgorithmisbecausethefollowingtheo-
rem.
Theorem4. Ifthereisatmostoneattackerinanyneighborhood
thatholdsconsensus,theconsensus-basedalgorithmisrobusttobroad-
castthesignal.(Assumptions:atleasttwoadjacentagentsobservethe
newsignal;eachneighborhoodcontainsmorethanthreeagents.)
TheproofofTheorem4isasfollows.
Proof. Onlythecorrectsignalcanpasstheconsensus,because
oftherobustnessoftheprotocol.Andeachagentisupdatedonly
once,sothealgorithmwillfinallyterminateateachtimestep𝑡.Due
totheconnectivityofthesensornetwork,thenewsignalwillalso
bebroadcastedtoalltheagents. □
Ancounterexamplewithouttheconsensus-basedalgorithm. Tobet-
terillustratewhytheconsensusprotocolisessentialinsuchSensor
Networkproblems,wegiveancounterexamplewherevanillabroad-
castingisusedtotransferthesignalinFigure12.Inthiscase,the
sensornetworkisina1-dimensionarray.Onceanewtargetisob-
servedatsomeposition,thesensorswithnewobservations(blue)
trytobroadcastthenewsignaloftargetposition.However,the
existenceoftheattackersendsfakemessagesandmayblockthe
broadcasting,causingin-consistencyofthewholesystem.
A.6 DetaileddescriptionaboutFigure1
Figure9:Thescreenshotof2StarCraftIIenironments.
Denotethewholenumberofagentsas𝑛,thepercentageofma-
licious agents as𝑟, and the coordination threshold as𝑘. The x-
WeattachthefiguresoftheStarCraftIIenvironment4bane_vs_1hM axisandy-axisare𝑟 and𝑛(1−𝑟)−𝑘.TherequirementofBGPis
and3z_vs_1rinFigure9. 𝑛>3(1−𝑟)+1duetothe𝑛>3𝑡+1requirement.TherequirementIBGPProtocol Recursivetraining AME
𝑡 𝑡 𝑟 𝑡 𝑡 𝑡 𝑘
𝑡𝑟𝑎𝑖𝑛 𝑡𝑒𝑠𝑡 𝑚𝑎𝑥 𝑡𝑟𝑎𝑖𝑛 𝑡𝑒𝑠𝑡 AME
Predator-prey(4,1,2,1) 1𝑒7 1𝑒7 5 1𝑒7 5𝑒6 5𝑒6 1
Predator-prey(5,2,2,1) 1𝑒7 1𝑒7 5 5𝑒6 5𝑒6 5𝑒6 1
Predator-prey(20,4,2,2) 8𝑒6 4𝑒6 5 1𝑒7 5𝑒6 5𝑒6 4
Predator-prey(20,1,4,2) 4𝑒6 4𝑒6 5 3𝑒6 5𝑒6 5𝑒6 4
Hallway(3,1,2,1) 1𝑒7 1𝑒7 5 3𝑒6 5𝑒6 5𝑒6 1
Hallway(10,1,5,2) 5𝑒5 5𝑒5 5 5𝑒6 5𝑒6 5𝑒6 4
4bane_vs_1hM(4,1,3,1) 1𝑒7 1𝑒7 5 3𝑒6 5𝑒6 5𝑒6 1
3z_vs_1r(3,1,2,1) 4𝑒6 4𝑒6 5 5𝑒6 5𝑒6 5𝑒6 1
Table8:Thetraining/testingstepsandhyperparametersusedintheexperiments.
ofIBGPis𝑛∗𝑟 >𝑘+𝑛∗(1−𝑟)duetotherequirementthatthe
numberofgoodagents>𝑘+𝑡.Figure10:Thelearningcurvesoffourenvironments,comparingIBGPProtocol,recursivetrainingandAME.Figure11:ThesimulationresultincludingmeanandstandarddeviationofSensorNetworksProblembasedonIBGPProtocol.
Figure12:Onecounterexampleofthevanillabroadcasting.