AsynchronousApproximateByzantineConsensus:
⋆
AMulti-hopRelayMethodandTightGraphConditions
LiweiYuana,HideakiIshiib
aCollegeofElectricalandInformationEngineering,HunanUniversity,Changsha410082,China
bDepartmentofComputerScience,TokyoInstituteofTechnology,Yokohama226-8502,Japan
Abstract
Westudyamulti-agentresilientconsensusproblem,wheresomeagentsareoftheByzantinetypeandtrytopreventthenormal
ones from reaching consensus. In our setting, normal agents communicate with each other asynchronously over multi-hop
relaychannelswithdelays.TosolvethisasynchronousByzantineconsensusproblem,wedevelopthemulti-hopweightedmean
subsequence reduced (MW-MSR) algorithm. The main contribution is that we characterize a tight graph condition for our
algorithmtoachieveByzantineconsensus,whichisexpressedinthenovelnotionofstrictlyrobustgraphs.Weshowthatthe
multi-hopcommunicationiseffectiveforenhancingthenetwork’sresilienceagainstByzantineagents.Asaresult,wealsoobtain
novelconditionsforresilientconsensusunderthemaliciousattackmodel,whicharetighterthanthoseknownintheliterature.
Furthermore, the proposed algorithm can be viewed as a generalization of the conventional flooding-based algorithms, with
lesscomputationalcomplexity.Lastly,weprovidenumericalexamplestoshowtheeffectivenessoftheproposedalgorithm.
Keywords: Byzantineconsensus;Asynchronousdistributedalgorithms;Cyber-security;Multi-hopcommunication.
1 Introduction (2013). To solve the asynchronous version of the prob-
lem, flooding-based algorithms were proposed in Abra-
hametal.(2004);Sakavalasetal.(2020).
Withconcernsforcyber-securitysharplyrisinginmulti-
agentsystems,consensusresilientinthepresenceofad-
In this paper, we study the asynchronous approximate
versarialagentshasgainedmuchattention(Vaidyaetal.
Byzantine consensus problem using mean subsequence
(2012); LeBlanc et al. (2013); Dibaji and Ishii (2017);
reduced(MSR)algorithms,whichareoftenusedforiter-
Mitra and Sundaram (2019); Tian et al. (2019); Yuan
ative fault-tolerant consensus algorithms (Azadmanesh
and Ishii (2021a)). The focus of this paper is resilient
and Kieckhafer (2002); Vaidya et al. (2012); Bonomi
consensusundertheByzantineagentsthatbehavearbi-
et al. (2019)). In MSR algorithms, normal nodes dis-
trarily,whichhasarichhistoryindistributedcomputing
card the most deviated states from neighbors to avoid
(Dolev(1982);Lynch(1996)).Dolevetal.(1986)intro-
beinginfluencedbypossibleextremevaluesfromadver-
duced the above so-called approximate Byzantine con-
saries.Moreover,graphrobustnessisfoundtobeatight
sensus problemforthecaseofcompletenetworks,where
graph condition for the network using MSR algorithms
thenon-adversarialnodesarerequiredtoachieveapprox-
(LeBlancetal.(2013);Abbasetal.(2017);Dibajietal.
imate agreement by converging to a relatively small in-
(2018);WangandIshii(2019);LuandYang(2023)).
tervalinfinitetime.Vaidyaetal.(2012),SuandVaidya
(2017) studied the same problem for synchronous net-
In this context, we focus on using multi-hop relay tech-
works with general topologies; see also LeBlanc et al.
niques to relax the heavy graph connectivity require-
⋆ ment for Byzantine consensus. Multi-hop communica-
This work was supported in the part by JSPS under
tion enables networks to have multiple paths for inter-
Grants-in-Aid for Scientific Research Grant No. 18H01460
actionsamongnodes(Lynch(1996);Goldsmith(2005)),
and22H01508.ThesupportprovidedbytheChinaScholar-
andhence,itiseffectiveforenhancingresilienceagainst
shipCouncilisalsoacknowledged.Thematerialinthispaper
waspartiallypresentedattheAmericanControlConference nodefailures.Inthesystemsandcontrolarea,thereare
(ACC2022),June8–10,2022,Atlanta,GA,USA. works analyzing the stability of the networked control
Emailaddresses: yuanliwei@hnu.edu.cn(LiweiYuan), systems with control inputs and observer information
ishii@c.titech.ac.jp(HideakiIshii). sentovermulti-hopnetworks(D’Innocenzoetal.(2016);
PreprintsubmittedtoAutomatica 13March2024
4202
raM
21
]AM.sc[
1v04670.3042:viXraTable1
Graphconditionsforresilientconsensusunderdifferentadversarymodelsandupdateschemes.
Synchronous Asynchronous
(2f+1)-robustwithl hops△
(f+1,f+1)-robustwithl hops⋆ (DibajiandIshii(2017)(forl=1);
f-total (LeBlancetal.(2013)(forl=1); YuanandIshii(2021b))
YuanandIshii(2021b)) AtighterconditioninCorollary14:
Malicious (f+1)-strictlyrobustwithl hops△
(2f+1)-robustwithl hops△ (2f+1)-robustwithl hops△
(LeBlancetal.(2013)(forl=1); (DibajiandIshii(2017)(forl=1);
f-local YuanandIshii(2021b)) YuanandIshii(2021b))
AtighterconditioninCorollary12: AtighterconditioninCorollary14:
(f+1)-strictlyrobustwithl hops△ (f+1)-strictlyrobustwithl hops△
(f+1)-strictlyrobustwithl hops⋆ (f+1)-strictlyrobustwithl hops⋆
f-total (Vaidyaetal.(2012)(forl=1);
(Sakavalasetal.(2020);Thiswork:Theorem13)
SuandVaidya(2017);Thiswork:Proposition10)
Byzantine
(f+1)-strictlyrobustwithl hops⋆ (f+1)-strictlyrobustwithl hops⋆
f-local
(Thiswork:Proposition10) (Thiswork:Theorem13)
Note that the notion of (strict) robustness is different under the f-total and f-local models (see Section 3). Here, △ means sufficient,
while⋆ meansnecessaryandsufficient.
Cetinkaya et al. (2018)). Multi-hop techniques are also model, the number of hops is limited, our approach is
used for consensus problems in recent years (Jin and more distributed in the sense that we only require each
Murray(2006);ZhaoandLin(2016);Ding(2021)).Re- normal node to know the local topology and neighbors’
cently,SuandVaidya(2017)introducedmulti-hopcom- valuesuptol hopsaway.
municationinMSRalgorithms,andtheysolvedthesyn-
chronous Byzantine consensus problem with a weaker Mostimportantly,ouralgorithmcanachieveByzantine
condition on network structures compared to that de- consensus under the f-local model, which is even more
rived under the one-hop case in Vaidya et al. (2012). adversarial than the f-total model in Su and Vaidya
Later, Sakavalas et al. (2020) studied the asynchronous (2017); Sakavalas et al. (2020); Yuan and Ishii (2021b).
Byzantineconsensusproblemusingaflooding-basedal- As we show in Section 6, our algorithm can tolerate
gorithm. However, strong assumptions were made in more Byzantine agents in the network than the above
Sakavalas et al. (2020). Specifically, their algorithm es- works for the f-total model. Such an advantage is be-
sentially requires each normal node to be aware of the causeoftheflexibilityofouralgorithmongenerall-hop
globaltopologyinformationandto“flood”itsownvalue communication. In contrast, the flooding algorithm in
until it is relayed to reach all nodes in the network. In Sakavalasetal.(2020)isrestrictedtothef-totalmodel
YuanandIshii(2021b),weextendedthenotionof(one- sinceaByzantinenodetherecanflooderroneousvalues
hop) graph robustness to the multi-hop case and pro- to all the nodes in the network. From a practical point
videdatightnecessaryandsufficientgraphconditionfor ofview,ourapproachoffersanadjustableoptionforthe
resilient consensus under the malicious model. Table 1 trade-off between an appropriate level of resilience and
summarizesrelatedresilientconsensusworks. an affordable cost of communication resources. Even in
the same network with Byzantine agents, our method
The contributions of this paper are outlined as follows. generally requires less relay hops to achieve Byzantine
First, we study the asynchronous Byzantine consensus consensuscomparedtoSakavalasetal.(2020).
problemusingthemulti-hopweightedMSR(MW-MSR)
algorithmproposedinourpreviouswork(YuanandIshii Lastly, this paper also provides novel insights into re-
(2021b)) for the malicious model. As a main contribu- silientconsensusunderthemaliciousmodel.Itturnsout
tion, we prove a tight necessary and sufficient condi- that the robust graph conditions known in the litera-
tion for our algorithm to achieve asynchronous Byzan- turecanbetightenedevenfortheone-hopsynchronous
tineconsensus,expressedbythenovelnotionofstrictly f-local model and asynchronous f-local/total model.
robust graphs with l hops. This condition requires more Moreover,weobtainatightersufficientgraphcondition
connectionsthantherobustnessnotioninYuanandIshii forthemulti-hopcaseinYuanandIshii(2021b),andwe
(2021b) since the Byzantine model is more adversarial also extend the results to the f-local model. These re-
thanthemaliciousmodel.ComparedtoSakavalasetal. sults are indicated in Table 1. The key contribution for
(2020),ouralgorithmismorelight-weightedandmakes these advances is that we prove the order between the
aweakerassumptionasmentionedearlier.Moreover,the differentgraphconditionsforthetwoadversarymodels
problem there is a special case of multi-hop paths with (Proposition11)forgenerall-hopcommunication.More-
unboundedlengthsinthispaper.Theirgraphcondition over,ourapproachcanbeeasilyextendedtomorecom-
also coincides with ours by setting the path length to plex multi-agent consensus systems, e.g., agents with
be the longest cycle-free one in the graph. Since in our secondorderdynamics(DibajiandIshii(2017))andre-
2silientconsensus-basedformationcontrolproblems. node i exchanges the messages m [k] = (x [k],P [k])
ij i ij
consisting of its state x [k] along each path P [k] with
i ij
Compared to the conference paper (Yuan and Ishii itsmulti-hopneighborjviatherelayingprocessinYuan
(2022a)),thecurrentpapercontainsthefollowingnovel andIshii(2021b).DenotebyV(P)thesetofnodesinP.
contents: the analysis of the synchronous MW-MSR
algorithmonthef-localByzantinemodel,therelations 2.2 UpdateRuleandThreatModels
between different graph conditions, a tighter condition
for the resilient consensus under the malicious model,
Consider a time-invariant directed network G = (V,E).
as well as novel simulations. We also present an event-
ThenodesetVispartitionedintothesetofnormalnodes
triggered scheme to our algorithm for the Byzantine
N and the set of adversary nodes A, where n = |N|
consensusprobleminYuanandIshii(2022b). N
and n = |A|. The partition is unknown to the normal
A
nodesatalltimes.
The rest of this paper is organized as follows. Sec-
tion 2 outlines preliminaries and the system model.
When there is no attack, we use the consensus update
Section 3 presents the notion and properties of strictly
ruleextendedfromOlfati-Saberetal.(2007),givenas
robust graphs with l hops. In Sections 4 and 5, we de-
rive conditions under which the MW-MSR algorithms
x[k+1]=x[k]+u[k], u[k]=−L[k]x[k], (1)
guarantee Byzantine consensus under synchronous and
asynchronous updates, respectively. Section 6 provides
numerical examples to demonstrate the efficacy of our wherex[k]∈Rn andu[k]∈Rn arethestatevectorand
algorithm.Lastly,Section7concludesthepaper. the control input vector, respectively. The power graph
Gl[k] at time k is determined by the messages used for
updatesbytheagents,i.e.,m [k]fori∈Vandj ∈Nl−.
ji i
2 PreliminariesandProblemSetting The adjacency matrix A[k] and the Laplacian matrix
L[k] at time k are determined accordingly. Considering
Inthissection,weintroducetheproblemsettingofthis possibleadversariesinA,normalnodesusetheresilient
paperandoutlineourresilientconsensusalgorithm. algorithmtobepresentedlaterforupdatingtheirvalues.
We introduce the threat models extended from those
2.1 NetworkModelunderMulti-hopCommunication
studiedinVaidyaetal.(2012),LeBlancetal.(2013).
ConsiderthedirectedgraphG =(V,E)consistingofthe
Definition1 (f-total/f-localset)Thesetofadversary
nodesetV ={1,...,n}andtheedgesetE ⊂V×V.Here,
nodesAissaidtobef-totalifitcontainsatmostf nodes,
theedge(j,i)∈E indicatesthatnodeicangetinforma-
i.e., |A| ≤ f. Similarly, it is said to be f-local (in l-hop
tionfromnodej.ThesubgraphofG =(V,E)inducedby
neighbors)ifanynormalnodeihasatmostf adversary
thenodesetH⊂V isthesubgraphG H =(V(H),E(H)), nodesasitsl-hopneighbors,i.e.,(cid:12) (cid:12)Nl−∩A(cid:12) (cid:12)≤f.
where V(H) = H, E(H) = {(i,j) ∈ E : i,j ∈ H}. i
An l-hop path from node i to i is a sequence of
1 l+1
distinct nodes (i ,i ,...,i ), where (i ,i ) ∈ E for Definition2 (Byzantinenodes)Anadversarynodei∈
1 2 l+1 j j+1
j = 1,...,l. Node i is reachable from node i . Let A is said to be Byzantine if it can arbitrarily modify its
l+1 1
Nl−bethesetofnodesthatcanreachnodeiviaatmost own value and relayed values and sends different state
i valuesandrelayedvaluestoitsneighborsateachstep.
l-hoppaths.LetNl+ bethesetofnodesthatarereach-
i
ablefromnodeiviaatmostl-hoppaths.Thel-thpower
The Byzantine model is well studied in computer sci-
of the graph G, denoted by Gl, is a multigraph with V
ence(Dolev(1982);Lynch(1996);Vaidyaetal.(2012)).
and a directed edge from node j to node i is defined by
Notethatthemalicious modelstudiedinLeBlancetal.
a path of length at most l from j to i in G. The adja-
(2013),DibajiandIshii(2017)isaweakerthreatmodel
cency matrix A = [a ] of Gl is given by α ≤ a < 1 if
ij ij as malicious nodes must send the same information to
j ∈Nl−andotherwisea =0,whereα>0isfixedand
(cid:80)n i
a
≤1.LetL=ij
[b ]betheLaplacianmatrix
theirneighbors,whichissuitableforbroadcastnetworks.
j=1,j̸=i ij ij Weshouldalsonotethatforthemulti-hopcommunica-
ofGl,whereb ii =(cid:80)n j=1,j̸=ia ij,b ij =−a ij fori̸=j. tioncase,themaliciousmodelisconsideredinYuanand
Ishii(2021b).
Next, we describe our communication model, inspired
bySuandVaidya(2017);YuanandIshii(2021b).Node As commonly done in the literature, we assume that
i cansendmessagesofitsowntoanl-hopneighbori each normal node knows the value of f and the topol-
1 l+1
via different paths. We represent a message as a tuple ogyinformationofthegraphuptol hops.Moreover,to
m = (w,P), where w = value(m) ∈ R is the message keep the problem tractable, we introduce the following
content and P = path(m) indicates the path via which assumption (Su and Vaidya (2017)). It is merely intro-
message m is transmitted. At time k ≥ 0, each normal ducedforeaseofanalysis.Infact,manipulatingmessage
3paths can be easily detected and hence does not create Algorithm1:MW-MSRAlgorithm
problems.WehaveshownhowthiscanbedoneinYuan
1)Ateachtimek,for∀i∈N:
andIshii(2021b),inspiredbySuandVaidya(2017).
Sendm [k]=(x [k],P [k])to∀j ∈Nl+.
ij i ij i
Receive m [k] = (x [k],P [k]) from ∀j ∈ Nl− and
Assumption3 Each Byzantine node i can manipulate ji j ji i
storetheminthesetM [k].
its state x [k] and the values in messages that they send i
i
Sort M [k] in an increasing order based on the mes-
orrelay,butcannotchangethepathP insuchmessages. i
sagevalues(i.e.,x [k]inm [k]).
j ji
2)Removeextremevalues:
2.3 ResilientAsymptoticConsensusandAlgorithm
(a)DefinetwosubsetsofM [k]:
i
M [k]={m∈M [k]:value(m)>x [k]},
i i i
Wedefinetheresilientconsensusnotionusedinthispa-
M [k]={m∈M [k]:value(m)<x [k]}.
per,whichisalsostudiedin,e.g.,LeBlancetal.(2013), i i i
SuandVaidya(2017),DibajiandIshii(2017). (b)GetR [k]fromM [k]:
i i
(cid:12) (cid:12)
if (cid:12)T∗(M i[k])(cid:12)<f then
Definition4 Ifforanypossiblesetsandbehaviorsofthe R [k]=M [k];
i i
adversaries and any state values of the normal agents, else
the following conditions are satisfied, then we say that Choose R [k] s.t. (i) ∀m ∈ M [k]\R [k], ∀m′ ∈
i i i
thenormalagentsreachresilientasymptoticconsensus: R i[k],value(m)≤value(m′) and(ii)(cid:12) (cid:12)T∗(R i[k])(cid:12) (cid:12)=
f.
(1) Safety:ThereexistsaboundedsafetyintervalS de- endif
termined by the initial values of the normal agents (c) Get R [k] from M [k] similarly, which contains
suchthatx i[k]∈S,∀i∈N,k ∈Z +. smallestmi essagevaluesi .
(2) Agreement: There exists a state x∗ ∈ S such that (d)R [k]=R [k]∪R [k].
lim k→∞x i[k]=x∗,∀i∈N. 3)Upi date:a i[i k]=1/(i |M i[k]\R i[k]|),
Next, we present the multi-hop weighted-MSR (MW- (cid:88)
x [k+1]= a [k]value(m). (2)
MSR)algorithmfromourpreviouswork(YuanandIshii i i
(2021b)) in Algorithm 1. The notion of minimum mes- m∈Mi[k]\Ri[k]
sage cover (MMC) (Su and Vaidya (2017)) is crucial in
Algorithm1,whichisdefinedasfollows.
values that may have been generated or tampered by
Definition5 For a graph G =(V,E), let M be a set of
f adversary nodes, respectively. Here, we focus on how
messagestransmittedthroughG,andletP(M)betheset
R [k] is determined (depicted in Fig. 1), as R [k] can
ofmessagepathsofallthemessagesinM,i.e.,P(M)= i i
be obtained in a similar way. When the cardinality of
{path(m) : m ∈ M}. A message cover of M is a set of
theMMCofsetM [k](instep2(a))isnomorethanf,
nodesT(M)⊂V whoseremovaldisconnectsallmessage i
paths, i.e., for each path P ∈ P(M), we have V(P)∩ node i simply takes R i[k] = M i[k]. Otherwise, node i
T(M)̸=Ø.Inparticular,aminimummessagecoverof will check the largest q :=f +1 values of M [k], and if
i
Misdefinedby theMMCofthesevaluesisofcardinalityf,thenitwill
check the first q = q +1 values of M [k]. This proce-
i
T∗(M)∈arg min |T(M)|. dure will continue until for the first q values of M [k],
i
T(M):CoverofM the MMC of these values is of cardinality f +1. Then
R [k] is taken as the first q −1 values of M [k]. After
InAlgorithm1,normalnodeicantrimawaythelargest i i
sets R [k] and R [k] are determined, in step 3, node i
and smallest values from exactly f nodes within l hops i i
excludes the values in these sets and updates its value
away. Clearly, as the number l of hops grows, the can-
usingtheremainingvaluesinM [k]\R [k].
didatenodesincreaseandthetrimmingstep2becomes i i
more complicated. The reason is that in the multi-hop
setting,eachnoderelaysthevaluesfromdifferentneigh- Inthispaper,themaingoalistocharacterizethecondi-
bors, node i can receive more than one value from one tions on the network structure that guarantee approxi-
direct neighbor at each step. For more details of Algo- mateasynchronousByzantineconsensususingtheMW-
rithm1,werefertoYuanandIshii(2021b). MSR algorithm. Before proceeding to such an analy-
sis, in Section 3, we introduce the important notion of
To characterize the number of the extreme values from strictlyrobustgraphs.InSection4,wefirstconsiderthe
exactlyf nodesfornodei,thenotionofminimummes- caseofsynchronousupdates.Then,inSection5,wecon-
sage cover (MMC)is designed.Intuitivelyspeaking, for sider the more realistic situation using multi-hop tech-
normalnodei,R [k]andR [k]arethelargestsizedsets niques,whichistheasynchronousupdateswithtimede-
i i
of received messages containing very large and small laysinthecommunicationamongagents.
4(a) (b)
Fig. 2. (a) Node i has two independent paths originating
from the outside of V and do not go through the nodes in
1
the set F ={j}. (b) Node i has only one independent path
sharingthesameproperty.
say that G is (r,s)-robust with l hops under the f-local
model.Whenitisclearfromthecontext,wejustsayG is
(r,s)-robustwithl hops.IfG is(r,1)-robustwithl hops,
itisalsodefinedasr-robustwithl hops.
Intuitivelyspeaking,foranysetF ⊂V,andfornodei∈
V to have the abovementioned property, there should
1
be at least r source nodes outside V and at least one
1
independent path of length at most l hops from each of
thersourcenodestonodei,wheresuchapathdoesnot
containanyinternalnodesfromthesetF.Inthemulti-
Fig.1.TheflowofdeterminingR [k].
i hop relay environment, the adversary agents can also
manipulatetherelayedvalues.Thus,therobustnesswith
3 StrictlyRobustGraphswithMulti-hopCom-
lhopsisdefinedwithrespecttosetF tocharacterizethe
munication
abilityofnodeireceivingtheoriginalvaluesofthemulti-
hopagents.Asanexample,nodei∈V inFig.2(a)has
1
Inthissection,weprovidethedefinitionofstrictlyrobust
r =2independentpathsofatmosttwohopsoriginating
graphs with l hops, which is the key graph condition to
from the nodes outside V with respect to set F ={j},
1
guaranteeByzantineconsensus.
whilenodeiinFig.2(b)doesnot.
3.1 TheNotionof(r,s)-RobustGraphswithl Hops Here,weprovidesomepropertiesofrobustgraphswith
l hops(YuanandIshii(2021b)).Notethatalltheprop-
The notion of robust graphs was first introduced in erties listed coincide with the ones of one-hop case in
LeBlanc et al. (2013), and it was proved that graph LeBlanc et al. (2013) when l = 1. Here, ⌈·⌉ denotes the
robustnessgivesatightgraphconditionforMSR-based ceilingfunction.
algorithms guaranteeing resilient consensus under the
malicious model. In Yuan and Ishii (2021b), we gener- Lemma7 If a graph G = (V,E) is (r,s)-robust with l
alizedthisnotiontothemulti-hopcase.Itsdefinitionis hops,thenthefollowinghold:
givenasfollows.
(1) Gis(r′,s′)-robustwithlhops,where0≤r′ ≤r,1≤
Definition6 A directed graph G = (V,E) is said to be s′ ≤s.
(r,s)-robustwithlhopswithrespecttoagivensetF ⊂V, (2) G is(r,s)-robustwithl′ hops,wherel≤l′.
ifforeverypairofnonemptydisjointsubsetsV ,V ⊂V,
1 2 (3) G is(r−1,s+1)-robustwithl hops.
atleastoneofthefollowingconditionsholds:
(4) G has a directed spanning tree. Moreover, if G is
undirected,thenitisr-connected.
(cid:12) (cid:12) (cid:12) (cid:12)
(1)Z Vr
1
=V 1;(2)Z Vr
2
=V 2;(3)(cid:12)Z Vr 1(cid:12)+(cid:12)Z Vr 2(cid:12)≥s, (5) r ≤ ⌈n/2⌉. Moreover, G is (r,s)-robust with l hops
ifitis(r+s−1)-robustwithl hops.
where Zr is the set of nodes in V (a = 1,2) that have
Va a
atleastrindependentpathsofatmostlhopsoriginating
3.2 TheNotionofr-StrictlyRobustGraphswithlHops
from nodes outside V and all these paths do not have
a
anynodesinsetF asintermediatenodes(i.e.,thenodes
in F can be source or destination nodes in these paths). To deal with the Byzantine model, we need to focus on
Moreover, if the graph G satisfies this property with re- thesubgraphconsistingofonlythenormalnodes.Define
spect to any set F satisfying the f-local model, then we suchasubgraphasthenormalnetwork asfollows.
54 SynchronousByzantineConsensus
Inthissection,weprovidetheanalysisoftheMW-MSR
algorithmundersynchronousupdates.
It is worth noting that Su and Vaidya (2017) investi-
gatedanMSR-basedalgorithmwithmulti-hopcommu-
nication under the f-total Byzantine model. They pro-
(a) (b) videdanecessaryandsufficientgraphconditionfortheir
algorithm toachievesynchronousByzantine consensus.
Fig.3.Bothundirectedgraphsarenot2-strictlyrobustwith
Whiletheirprooftechniquesaredifferent,thecondition
1hopbutare2-strictlyrobustwith2hopsunderthe1-local
canbeinterpretedbythenotionofstrictrobustnesswith
model.
l hopsaswell.Here,weextendtheproofforthef-local
model,whichcontainsthecaseofthef-totalmodel.Be-
Definition8 ForanetworkG =(V,E),definethenor-
sides, based on our proof scheme, we can provide the
malnetworkofG,denotedbyG ,asthenetworkinduced
N analysis of our algorithm applied in asynchronous up-
by the normal nodes, i.e., G = (N,E ), where E is
N N N dateswithdelaysnextinSection5;suchacaseisabsent
thesetofdirectededgesamongthenormalnodes.
inSuandVaidya(2017).
Fortheone-hopMSRalgorithminLeBlancetal.(2013), Denotethevectorsconsistingofthestatesofthenormal
the graph condition that the normal network is (f + nodes and those of the Byzantine nodes by xN[k] and
1)-robust is proved to be necessary and sufficient for xA[k], respectively. Then, we present the main result of
achieving resilient consensus under the f-total Byzan- thissectioninthefollowing.
tine model. However, in practice, the normal nodes are
notawareoftheidentityoftheByzantinenodes.Hence, Proposition10 Consider a directed graph G = (V,E)
theaboveconditioncannotbecheckedapriori.There- with l-hop communication, where each normal node up-
fore,wedefineourgraphconditionontheoriginalgraph dates its value according to the synchronous MW-MSR
topology as Vaidya et al. (2012), Su and Vaidya (2017) algorithmwithparameterf.Underthef-localByzantine
did and we formally introduce r-strictly robust graphs model, resilient asymptotic consensus is achieved with
withl hopsasfollows. safety interval S =
(cid:2) minxN[0],maxxN[0](cid:3)
if and only
ifG is(f +1)-strictlyrobustwithl hops.
Definition9 Let F ⊂ V and denote the subgraph of G
Proof: (Necessity)IfG isnot(f+1)-strictlyrobustwith
induced by node set H = V \F as G . Graph G is said
H l hops, then by Definition 9, there exists an f-local set
tober-strictlyrobustwithl hopswithrespecttoF ifthe
F such that G is not (f +1)-strictly robust with l hops
subgraph G is r-robust with l hops with respect to F in
H with respect to F. Suppose that F is exactly the set
graph G.2 If graph G satisfies this property with respect
of Byzantine agents, and the normal network G is not
to any set F satisfying the f-total/local model, then we N
(f +1)-robust with l hops w.r.t. this F. In such a case,
say that G is r-strictly robust with l hops (under the f-
there are nonempty, disjoint subsets V ,V ⊂ N such
total/localmodel). 1 2
thatanynodeinthetwosetshasatmostf independent
paths (only the node itself is common in these paths)
Robustness with l ≥ 2 hops and strict robustness with ofatmostlhopsoriginatingfromnormalnodesoutside
l≥1hopsdependonthechoiceofsetF.Thissetfurther of its respective set. Let the nodes in the two sets take
dependsonthethreatmodels.Weillustratehowmulti- the maximum and minimum values in the network, re-
hop relaying can improve strict robustness through ex- spectively. Suppose that the Byzantine nodes send the
amples. The graphs in Fig. 3 are not 2-strictly robust maximum and minimum values to the nodes in V and
1
with 1 hop, e.g., in Fig. 3(b), if we remove node 3, the V ,respectively.
2
remaining graph is not 2-robust. The two graphs are
however 2-strictly robust with 2 hops under the 1-local Considernodei∈V .Sincethecardinalityofthemini-
1
model.Notethattoverifythestrictrobustness,wemust mummessagecoverofthevalueslargerthanitself(val-
checkthatafterremovinganynodesetF being1-local, ues from the Byzantine nodes) is at most f, node i will
theremaininggraphis2-robustwith2hops. discard these values. We claim that the cardinality of
the minimum message cover of the values smaller than
itself (values from the normal nodes outside of V ) is
1
alsoatmostf.Thiscanbeprovedinthreecases:(i)All
2 Note that the removed node set F is still used to count
the incoming neighbors outside of V are direct neigh-
the robustness of the remaining graph G since strict ro- 1
H
bustnessisapropertyoftheoriginalgraphG.Moreover,the borsofnodei,(ii)alltheincomingneighborsoutsideof
currentdefinitionbringstheconnectionbetweenthenotions V 1 are l-hop (l ≥2) neighbors of node i, and (iii) situa-
ofrobustnessandstrictrobustness. tionsotherthan(i)and(ii).Forcase(i),itisclearthat
6this statement holds. For case (ii), either node i has at
mostf independentpathsfromthel-hop(l≥2)neigh-
bors outside of V , where the cardinality of the l-hop
1
neighborscanbelargerthanf;ornodeihasmorethan
f independent paths from the l-hop (l ≥ 2) neighbors
outside of V , where the cardinality of the l-hop neigh-
1
bors can be at most f. In either case, the cardinality of (a) (b) (c)
theminimummessagecoveroftheminimumvaluesisat
mostf.Forcase(iii),notethatthedirectneighborswill Fig.4.(a)3-robust.(b)2-strictlyrobust.(c)(2,2)-robust.
be part of the minimum message cover always. For the
schemes. Notably, there are three conditions under the
remaining l-hop neighbors outside, following the analy-
f-total/local model. We clarify the relations and order
sis for case (ii), we can conclude that the cardinality of
amongtheminthenextproposition.
the minimum message cover of the minimum values is
at most f. Thus, in all cases, node i discards the values
fromthenodesoutsideofV andkeepsitsvalue. Proposition11 For the following graph conditions on
1
any directed graph G = (V,E) under the f-total/local
Similar analysis applies when i ∈ V 2. Therefore, nodes model,wherel∈Z +:
inthesetwosetsneveruseanyvaluesfromoutsidetheir (A)G is(2f +1)-robustwithl hops,
respectivesetsandconsensuscannotbereached.
(B)G is(f +1)-strictlyrobustwithl hops,
(C)G is(f +1,f +1)-robustwithl hops,
(Sufficiency)BesidesthemethodusedinSuandVaidya
(2017),wecanprovethesufficiencypartusingtheanal- it holds that (A) ⇒ (B) and (B) ⇒ (C). Moreover,
ysis as shown in the proof of Theorem 13, which is for (C)⇏(B)and(B)⇏(A).
asynchronous updates, since synchronous updates form
onespecialcase. ■ Proof: ((A) ⇒ (B)) For a graph satisfying (A), take
a set F satisfying the f-total/f-local model. Select any
We must note that if G is (f +1)-strictly robust with nonemptydisjointsubsetsV ,V ⊂H,whereH=V\F.
1 2
l hops, then the normal network G N is guaranteed to Choose node i ∈ Z2f+1. Then, after removing nodes
be (f +1)-robust with l hops for any possible cases of V1
in the set F from V, at most f independent paths are
theadversarysetAunderthef-localmodel.Thelatter removed.Thus,itmustholdthati∈Zf+1inG .Hence,
condition is tighter than the former one, but it is not V1 H
G is(f+1)-robustwithlhops.Thisistrueforanyset
checkableinpracticesincetheidentitiesoftheadversary H
F.Therefore,(B)holds.
nodes in A are unknown. Thus, in Proposition 10, we
providethegraphconditiononGinsteadofthecondition
((B) ⇒ (C)) We show that ¬(C) ⇒ ¬(B). In a graph
onthenormalnetworkG .
N
satisfying ¬(C), for some nonempty disjoint subsets
V ,V ⊂ V, at most f nodes in V ,V have f +1 inde-
Weemphasizethatourresultisageneralizationofthose 1 2 1 2
pendent paths originating from the nodes outside. We
in the literature. As mentioned earlier, the work by Su
choose these f nodes as the set F. As a consequence,
and Vaidya (2017) is restricted to the f-total model.
noneoftheremainingnodesinV ,V hasf+1indepen-
On the other hand, Dolev (1982) has studied the undi- 1 2
dent paths originating from the nodes outside. Hence
rected networks case where the multi-hop communica-
thisG isnot(f +1)-robustwithl hops.
tionhasunboundedpathlengths.Infact,ourcondition H
is equivalent to the condition there: (i) n ≥ 3f +1 and
((C) ⇏ (B), (B) ⇏ (A)) We show these cases through
(ii) the graph connectivity is no less than 2f +1. We
counterexamplesinFig.4.SupposethatthesetF satis-
canestablishthecondition(i)bynoticingthatcomplete
fies1-localmodel.ThegraphinFig.4(c)is(2,2)-robust
networks have the largest robustness. By Lemma 7(2),
(satisfying (C)), but does not satisfy that any G is 2-
the robustness of such a graph after removing any f H
nodesisnogreaterthan⌈n−f⌉.Thus,ourresultimplies robustwhereH=V\F (notsatisfying(B)).Thegraph
2 in Fig. 4(b) satisfies that any G is 2-robust (satisfying
⌈n−f⌉ ≥ f +1, which is equivalent to n ≥ 3f +1. For H
2 (B)),butthisgraphisnot3-robust(notsatisfying(A)).
theconnectivitycondition(ii),notethatthegraphafter
Moreover,thisgraphneedsonemoreedgetobe3-robust
removinganyf nodesneedstobe(f +1)-robustwithl asindicatedinFig.4(a). ■
hops.Therefore,agraphsatisfying(f+1)-strictrobust-
nesswithl hopshasconnectivitynolessthan2f +1.
This proposition is of importance since it provides a
new characterization for resilient consensus under the
4.1 DiscussionsonDifferentGraphConditions f-local malicious model. We must first recall that for
synchronousupdatescheme,conditions(A)and(C)are
Table 1 summarizes graph conditions for resilient knowntobesufficientandnecessaryconditions,respec-
consensus under different threat models and update tively, to achieve resilient consensus under the f-local
7maliciousmodel(LeBlancetal.(2013);DibajiandIshii Sakavalasetal.(2020).However,inourasynchronyset-
(2017)).Ontheotherhand,wefoundearlierinthissec- ting, these issues do not arise, and node i will use the
tionthatcondition(B)isanecessaryandsufficientcon- most recently received values of all neighbors whenever
ditionforsynchronousByzantineconsensusunderthef- nodeichoosestoupdate.
localmodel.ItisclearthattheByzantinemodelincludes
the case of malicious agents. In view of Proposition 11,
5.1 ConsensusAnalysis
wehavenowestablishedatighterresultasshowninthe
followingcorollary.
Whencommunicationamongnodesissubjecttopossible
Corollary12 Consider a directed graph G = (V,E) timedelays,wecanwritethecontrolinputas
with l-hop communication, where each normal node up-
(cid:88)
dates its value according to the synchronous MW-MSR u [k]= a [k]xP[k−τP[k]], (3)
i ij j ij
algorithmwithparameterf.Underthef-localmalicious
j∈Nl−
model, resilient asymptotic consensus is achieved with i
safetyintervalS
=(cid:2) minxN[0],maxxN[0](cid:3)
ifGis(f+1)-
where xP[k] denotes the value of node j at time k sent
strictlyrobustwithl hopsandonlyifG is(f+1,f+1)- j
robustwithl hops. along path P, a ij[k] is the time-varying weight, and
τP[k] ∈ Z denotes the delay in this (j,i)-path P at
ij +
Note that condition (C) is a necessary and sufficient timek.Thedelaysaretimevaryingandmaybedifferent
conditionforthef-totalmaliciousmodel(LeBlancetal. in each path, but we assume the common upper bound
(2013);DibajiandIshii(2017);YuanandIshii(2021b)). τ in any normal path P (i.e., all nodes on path P are
normal)as
5 AsynchronousByzantineConsensus
0≤τP[k]≤τ, j ∈Nl−, k ∈Z . (4)
ij i +
In practice, normal nodes may not be synchronized nor
Hence, each node i ∈ N becomes aware of the value of
have access to the current values of all l-hop neighbors
eachofitsnormall-hopneighborj ineachnormal(j,i)-
simultaneously, especially when l is large. Therefore, in
pathP atleastonceinτ timesteps,butpossiblyatdif-
thissection,weanalyzetheasynchronousMW-MSRal-
ferenttimeinstants(DibajiandIshii(2017)).Notethat
gorithm under the f-local Byzantine model and show
thedelayboundneednotbeknownbynormalnodes.Fi-
our advantages over the conventional ones in terms of
nally,weoutlinetheasynchronousMW-MSRalgorithm
threatmodelsandcomputationalcomplexity.
asfollows.
Our asynchrony setting follows the approach generally
(1) At k ≥ 0, each node i ∈ N independently chooses
assumed in fault-free consensus works (Xiao and Wang
toupdateornot.
(2006); Lin and Jia (2009)), and those considering the
(2) If it chooses not to update, then x [k+1] = x [k]
maliciousmodel(e.g.,DibajiandIshii(2017)).Thatis, i i
anditdoesnottransmititsownmessage.
when a normal node updates, it uses the most recently
(3) Otherwise, it will use the most recently received
received values of its l-hop neighbors. Here, we briefly
highlighthowdelaysinasynchronousresilientconsensus valuesof∀j ∈N il−oneachl-hoppathtoupdateits
algorithms are handled in computer science area espe- valuefollowingsteps2and3inAlgorithm1.Then
cially through the notion of rounds commonly used in, ittransmitsitsnewmessageto∀j ∈Nl+.
i
e.g.,AzadmaneshandKieckhafer(2002);Abrahametal.
(2004); Sakavalas et al. (2020). There, each node labels If node i does not receive any value along some path P
its updated value with round r, representing the num- originatingfromj ∈Nl− (i.e.,thecrashmodel),thenit
i
ber of transmissions made so far. Moreover, if a normal considers this value on path P as one empty value and
nodewantstoupdateitsnextvaluewithroundr+1,it discardsthisvaluewhenitappliesAlgorithm1.
has to wait until receiving a sufficient number of values
labeled with the same round r. This may cause poten-
To proceed with our analysis, we introduce some nota-
tially large delays in making the (r +1)th update for
tions. Let D[k] be a diagonal matrix whose ith entry
some nodes. We note that the use of rounds can create
is given by d [k] =
(cid:80)n
a [k]. Then, let the matrices
furtherproblemsduetofollowingthefixedorderinthe i j=1 ij
A [k]∈Rn×n for0≤γ ≤τ,andL [k]∈Rn×(τ+1)n be
indices of rounds. That is, node i may receive the value γ τ
ofroundr+1beforetheoneofroundr fromitsneigh-
(cid:26)
bor.Thismayoccurevenalonganon-faultypath.Inthis a [k] ifi̸=j andτ [k]=γ,
A [k]= ij ij (5)
case,theolddatafromroundrwillbeusedeventhough γ 0 otherwise,
morerecentdataofroundr+1isavailableatthenode.
ThisisbecausetheFIFO(first-in-first-out)messagere- (cid:104) (cid:105)
ceiving mechanism is applied in Abraham et al. (2004), and L τ[k] = D[k]−A 0[k] −A 1[k] ··· −A τ[k] .
8Now,thecontrolinputcanbeexpressedas x∗ andx∗,respectively.Weprovebycontradictionthat
τ τ
x∗ =x∗. Assume that x∗ >x∗ and α lower bounds the
τ τ τ τ
uN[k]=−LN τ [k]z[k], (6) nonzeroentriesofΓ[k].Chooseϵ 0 >0smallenoughthat
uA[k]:arbitrary, x∗
τ
−ϵ
0
>x∗
τ
+ϵ 0.Fix
1w )h ne -r de imz[ ek n] si= ona[x l[k ve]T ctx o[k
r
f− or1] kT ≥··· 0x[ ak n−
d
τ L]
N
τT] [T k]is isa a( mτ a+
- ϵ<
(1ϵ −0α α(τ (τ+ +1) 1n )nN
N), 0<ϵ<ϵ 0. (10)
trix formed by the first n rows of L [k]. Here, z[0] =
N τ
[x[0]T0T ···0T]T.Then,theagentdynamicscanbewrit-
Definethesequence{ϵ }byϵ =αϵ −(1−α)ϵ, γ =
tenas γ γ+1 γ
x[k+1]=Γ[k]z[k]+(cid:104) 0 (cid:105) uA[k], (7) 0,1,...,(τ+1)n N −1.Sowehave0<ϵ γ+1 <ϵ γ forall
I γ.Inparticular,theyarepositivebecauseby (10),
nA
where Γ[k] is an n×(τ +1)n matrix given by Γ[k] =
[I
n
0]−[LN
τ
[k]T 0]T .Thesafetyintervalisgivenby
ϵ =α(τ+1)nNϵ
−(τ+1 (cid:88))nN−1
αm(1−α)ϵ
(τ+1)nN 0
S
=(cid:104) minzN[0],maxzN[0](cid:105)
. (8)
m=0
τ =α(τ+1)nNϵ −(1−α(τ+1)nN)ϵ>0.
0
Thefollowingisthemainresultofthispaper.Itprovides
Takek ∈Z suchthatx [k]<x∗+ϵandx [k]>x∗−ϵ
anecessaryandsufficientconditionfortheasynchronous ϵ + τ τ τ τ
fork ≥k .Suchk existsduetotheconvergenceofx [k]
MW-MSRalgorithmachievingByzantineconsensus. ϵ ϵ τ
andx [k].Thenwecandefinethetwodisjointsetsas
τ
Theorem13 ConsideradirectedgraphG =(V,E)with
Z (k +γ,ϵ )={j ∈N :x [k +γ]>x∗ −ϵ },
l-hop communication, where each normal node updates 1τ ϵ γ j ϵ τ γ
its value according to the asynchronous MW-MSR al- Z 2τ(k ϵ+γ,ϵ γ)={j ∈N :x j[k ϵ+γ]<x∗
τ
+ϵ γ}.
gorithm with parameter f. Under the f-local Byzantine
modelfortheadversarialnodes,resilientasymptoticcon- Weshowthatoneofthembecomesemptyinfinitesteps,
sensusisachievedwiththesafetyintervalgivenby (8)if which contradicts the assumption on x∗ and x∗ being
τ τ
andonlyifG is(f +1)-strictlyrobustwithl hops. thelimits.ConsiderZ (k ,ϵ ).Duetothedefinitionof
1τ ϵ 0
x [k] and its limit x∗, one or more normal nodes are in
τ τ
Proof: The necessity part follows from Proposition 10. theunionofthesetsZ (k +γ,ϵ )for0≤γ ≤τ+1.We
1τ ϵ γ
For sufficiency, we first show that the safety condition claimthatZ (k ,ϵ )isinfactnonempty.Toprovethis,
1τ ϵ 0
holds. For k = 0, by (8), we have x [0] ∈ S ,∀i ∈ it is sufficient to show that if a normal node j is not in
i τ
N. For k = 1, ∀i ∈ N, the right-hand side of (7) Z (k +γ,ϵ ),thenitisnotinZ (k +γ+1,ϵ )for
1τ ϵ γ 1τ ϵ γ+1
becomes convex combinations of values in the interval γ =0,...,τ. Suppose that node j satisfies x [k +γ]≤
j ϵ
[minzN[0],maxzN[0]] = S . Thus, x [1] ∈ S ,∀i ∈ N. x∗−ϵ .Thevaluesgreaterthanx [k +γ]areignoredin
τ i τ τ γ τ ϵ
Next,fork ≥1,definetwovariablesby step2ofAlgorithm1.Thus,itsnextvalueisboundedas
x
[k]=max(cid:0) xN[k],xN[k−1],...,xN[k−τ](cid:1)
, x [k +γ+1]≤(1−α)x [k +γ]+α(x∗ −ϵ )
x
ττ [k]=min(cid:0) xN[k],xN[k−1],...,xN[k−τ](cid:1)
.
(9) j ≤ϵ
(1−α)(x∗
τ
+ϵ)+α(τ
x∗
τϵ
−ϵ γ)
τ γ
(11)
≤x∗ −αϵ +(1−α)ϵ=x∗ −ϵ .
τ γ τ γ+1
For k ≥ 2, from step 2 of Algorithm 1, we obtain
x
[k+1]≤max(cid:0) xN[k],xN[k−1],...,xN[k−τ](cid:1)
,∀i∈
i Thus, node j is not in Z (k + γ + 1,ϵ ). Then,
N.Also,forτ′ =1,2,...,τ,itholdsthat 1τ ϵ γ+1
|Z (k +γ,ϵ )| is nonincreasing for γ = 0,...,τ +1.
1τ ϵ γ
Similarly,Z (k ,ϵ )isnonemptytoo.
x
[k+1−τ′]≤max(cid:0) xN[k],xN[k−1],...,xN[k−τ](cid:1)
,
2τ ϵ 0
i
Since G is (f + 1)-strictly robust with l hops under
∀i∈N.Hence,x [k]isnonincreasingintimeas
τ the f-local model, G must be (f + 1)-robust with l
N
x τ[k+1]=max(cid:0) xN[k+1],xN[k],...,xN[k+1−τ](cid:1) h Do ep fis niw ti. or n.t. 6A
,
w. hT eh ru es V, ∃i is∈ onV ea o, fsu thc eh nt oh na et mi p∈ tyY dVf isa+ j1 oinin
t
a
≤max(cid:0) xN[k],xN[k−1],...,xN[k−τ](cid:1)
=x τ[k]. sets Z 1τ(k ϵ,ϵ 0) and Z 2τ(k ϵ,ϵ 0). Suppose that i ∈ Y Vf a+1
and V = Z (k ,ϵ ). By the argument above, node
a 1τ ϵ 0
We can similarly prove that x [k] is nondecreasing in i’s normal neighbors outside Z (k ,ϵ ) will not be in
τ 1τ ϵ 0
time.Thus,wehaveshownthesafetycondition. Z (k +γ,ϵ )for0≤γ ≤τ.Bystep2ofAlgorithm1,
1τ ϵ γ
one value of these neighbors upper bounded by x∗ −ϵ
τ τ
Fromabove,x [k]andx [k]aremonotoneandbounded, willbeusedintheupdatesofnodeiatanytime(e.g.,at
τ τ
and thus both of their limits exist and are denoted by time k +τ) since node i can only remove the smallest
ϵ
9valuesofwhichthecardinalityoftheMMCisf.Thus, that (2f +1)-robustness with l hops is a sufficient con-
dition(seeTable1)while(f+1,f+1)-robustnesswith
x [k +τ +1]≤(1−α)x [k +τ]+α(x∗ −ϵ ). l hops is a necessary condition; see, e.g., LeBlanc et al.
i ϵ τ ϵ τ τ
(2013),DibajiandIshii(2017)fortheone-hopcaseand
By (11), we have x [k + τ + 1] ≤ x∗ − ϵ . Yuan and Ishii (2021b) for the multi-hop case. There-
i ϵ τ τ+1
If V = Z (k ,ϵ ), then node i goes outside of fore,thefollowingcorollarygivesatightergraphcondi-
a 1τ ϵ 0
Z (k +τ +1,ϵ ) after τ +1 steps. Consequently, tionforasynchronousresilientconsensusunderthema-
1τ ϵ τ+1
|Z (k +τ +1,ϵ )|<|Z (k ,ϵ )|.Likewise,ifV = liciousmodelinviewofProposition11andTheorem13.
1τ ϵ τ+1 1τ ϵ 0 a
Z (k ,ϵ ), then |Z (k +τ +1,ϵ )| < |Z (k ,ϵ )|.
2τ ϵ 0 2τ ϵ τ+1 2τ ϵ 0
Since|N|=n ,wecanrepeatthestepsaboveuntilone Corollary14 Consider a directed graph G = (V,E)
N
ofZ (k +τ+1,ϵ )andZ (k +τ+1,ϵ )remains with l-hop communication, where each normal node up-
1τ ϵ τ+1 2τ ϵ τ+1
emptyindefinitely,andittakesnomorethan(τ+1)n datesitsvalueaccordingtotheasynchronousMW-MSR
N
steps. This contradicts the assumption that x∗ and x∗ algorithmwithparameterf.Underthef-local/totalma-
τ τ
arethelimits.Therefore,weobtainx∗ =x∗. ■ liciousmodel,resilientasymptoticconsensusisachieved
τ τ
withsafetyinterval (8)ifG is(f+1)-strictlyrobustwith
5.2 ComparisonwithConventionalMethods l hops and only if G is (f +1,f +1)-robust with l hops
(underthecorrespondingmodelsoff-local/total).
Inthispart,weoutlineouradvantagesovertheconven-
tionalworks.Theyarehighlightedinthefollowingfour 5.2.2 AdvantagesinComputationalComplexity
aspects: (i) Our algorithm does not use “rounds” that
cancausepossiblylargedelaysinconsensusforming;(ii) Finally, we highlight that our MW-MSR algorithm is
we consider the f-local model; (iii) our graph condition more light weighted and efficient in terms of computa-
istightandgeneralizestheonesintheliteratureforboth tionalcomplexityincomparisonwiththeflooding-based
synchronousandasynchronouscases;(iv)thealgorithm algorithminSakavalasetal.(2020).
iscomputationallymoreefficient.
To show this, we first outline the structure of the algo-
5.2.1 Advantages in Threat Models and Graph Condi- rithm in Sakavalas et al. (2020). Intuitively, the algo-
tions rithmtherecanbedividedintotwoparts:Verificationof
the received values and the MSR algorithm (called Fil-
In what follows, we discuss further details about these terandAveragealgorithm).Morespecifically,eachnode
advantages. Specifically, the f-total model in Su and isrequiredtosenditsvaluetotheentirenetworkatthe
Vaidya (2017), Sakavalas et al. (2020) can be viewed as beginningofeachasynchronousround.Theninthever-
a special case of the f-local model, and thus the condi- ification part, for each possible set of Byzantine nodes
tionstatedinTheorem13isalsosufficientforthef-total F (satisfyingthef-totalmodel),eachnormalnodeire-
Byzantinemodel.Weemphasizethatthef-localmodel ceives values from the neighbors and for each received
is more suitable for a large scale network because it lo- value, it verifies if this value is consistent in the paths
cally focuses on each node with a small f-total model. excluding the nodes in set F. Then node i has to wait
Ifthelocationsofadversarynodesarespreadinamore for enough verified values with round r as the input for
uniform way over the network, then the total tolerable theFilter-and-Averageparttoobtainitsnewvalue.
numberofadversariescanbeverylarge.However,with
thesamenumberofadversarynodes,thef-totalmodel TheFilter-and-AveragealgorithmandourMW-MSRal-
requiresmuchmoreconnectionsinthenetwork.Seethe gorithm are similar, but the main difference is that the
exampleinFig.3(b)andthesimulationinSection6. former algorithm uses verified values with round r as
inputs and the MW-MSR algorithm uses the most re-
Observe that the condition in Theorem 13 is the same centvaluesofl-hopneighborsoneachl-hoppath.Hence,
forthesynchronouscaseinSection4andSuandVaidya all the operations before the Filter-and-Average algo-
(2017), which indicates that it makes the system suffi- rithminthemainalgorithmforverificationinSakavalas
cientlyresilienttotheinfluenceofasynchronyandcom- etal.(2020)areadditionalintermsofcomputation.Be-
municationdelays.ItalsoappearedinTsengandVaidya sides,theverificationalgorithmthereshouldbeexecuted
(2015),Sakavalasetal.(2020)forsynchronousandasyn- for each possible set F, i.e., at least
(cid:0)n(cid:1)
executions of
f
chronousschemes,respectively,whichstudythespecial themainalgorithmoneachnodeforeachasynchronous
case of unbounded path length l ≥ l∗, where l∗ is the round.Althoughthiscanbeexecutedinparallelthreads
lengthofthelongestcycle-freepathinthenetwork. (one F per thread), it still requires a huge amount of
computation resources and memory to verify and store
SimilartothediscussioninSection4.1,basedonTheo- the values from the nodes in the entire network. Even
rem13,wecanobtainatightresultfortheresilientcon- for the case of l ≥ l∗, the computational complexity of
sensus under the f-total/local malicious model for the the MW-MSR algorithm is less than the algorithm in
asynchronous update scheme. For this case, it is known Sakavalasetal.(2020).
1010 10
1 1
8 2 8 2
3 3
6 4 6 4
5 5
4 6 4 6
7 7
2 2
0 0
0 10 20 30 40 0 10 20 30 40
Time Time
Fig.5.Timeresponsesofthesynchronousone-hopW-MSR (a) Synchronousupdates.
algorithminthe7-nodenetworkofFig.3(a).
10
Why the verification part is essential in Sakavalas 1
8 2
et al. (2020) is partially because of their asynchrony 3
setting based on rounds and the verification can pre- 6 4
5
vent the duplication of messages of normal nodes with
4 6
the same round r. In contrast, in our asynchrony set- 7
ting, we need not check the correctness of the received 2
values and we simply use the most recent value for
0
each l-hop path (hence, no duplication). Thus, we can 0 10 20 30 40 50 60 70
fully utilize the ability of MW-MSR algorithm to filter Time
the extreme values that could possibly be manipu- (b) Asynchronousupdateswithdelays.
lated by Byzantine nodes. The trade-off is that we can Fig. 6. Time responses of the two-hop MW-MSR algorithm
only guarantee ∆x τ[k] = maxzN[k]−minzN[k] to be inthe7-nodenetworkofFig.3(a).
nonincreasing, while for the round based asynchrony,
∆x[r]=maxxN[r]−minxN[r]isguaranteedtobenon-
increasing. Besides, since our algorithm is iterative and
only requires values and topology information up to l algorithm in this network. Suppose that node 7 manip-
hopsaway, ouralgorithmismoredistributedcompared ulatesallthevalues(includingitsownvalueandthere-
tothatinSakavalasetal.(2020). layed values) sent to node 1 as the same value sent to
node1intheone-hopcase.Fortheothernodesreceiving
values from node 7, the situations are similar. Observe
6 NumericalExamples
inFig.6(a)thatByzantineconsensusisindeedachieved
withtwo-hopcommunication.
Inthissection,wecarryoutsimulationstoillustratethe
efficacyoftheproposedMW-MSRalgorithms.Through
theexample,wealsodemonstrateouradvantagesintol-
Next,weperformsimulationsfortheasynchronoustwo-
eratingmoreByzantineagentsunderthesamenetwork
hop MW-MSR algorithm under the same attack. Let
settingcomparedtotheflooding-basedalgorithm.
the normal nodes update in an asynchronous periodic
sense, which means that for nodes 1, 2, 3, 4, 5, and
6.1 SimulationinaSmallNetwork:LargerRelayRange
6, they update in every 1, 2, 5, 6, 4, 3 steps, respec-
ImprovesStrictRobustness
tively (all nodes update once at k = 0). The time de-
laysforthevaluesfromone-hopneighborsandtwo-hop
Considerthe7-nodenetworkinFig.3(a).Thisgraphis neighbors are set as 0 and 1 step, respectively. Thus,
not 2-strictly robust with one hop, but is 2-strictly ro- in the current setting, we can choose τ = 7. The re-
bustwith2hops.Supposethatnode7isByzantineand sults of the asynchronous two-hop algorithm are pre-
iscapabletosendsixdifferentvaluestoitssixneighbors. sented in Fig. 6(b). Observe that Byzantine consensus
Let the initial normal states be xN[0] = [1 2 4 9 8 9]T. is achieved although delays have some effects and the
We start with the synchronous case. For this case, ac- convergence takes more time than the synchronous al-
cording to Vaidya et al. (2012), LeBlanc et al. (2013), gorithm.Wecanalsonoticethattheconsensuserrorfor
the current graph does not meet the condition for 1- z[k],i.e.,∆x [k]=maxzN[k]−minzN[k]isnonincreas-
τ
total Byzantine model. As shown in Fig. 5, consensus ing while ∆x [k] is not. This observation also verifies
0
amongnormalnodescannotbereachedinthisnetwork the theoretical results in Theorem 13. We finally note
withone-hopcommunication.Here,theByzantinenode that the flooding algorithm in Sakavalas et al. (2020)
7 transmits six different values indicated by red dashed can achieve asynchronous Byzantine consensus in this
linesinFig.5(a). network. However, it is achieved with 6-hop communi-
cation;thisisthelengthofthelongestcycle-freepathin
Then, we examine the synchronous two-hop MW-MSR thisnetwork,requiredfortheflooding-basedapproach.
11
seulav
etatS
seulav
etatS
seulav
etatS40 40
Normal Normal
Byzantine Byzantine
30 30
20 20
10 10
0 0
0 5 10 15 20 25 30 0 5 10 15 20 25 30
Time Time
Fig.7.Timeresponsesofthesynchronousone-hopW-MSR (a) Synchronousupdates.
algorithminthe17-nodenetworkofFig.3(b).
40
6.2 SimulationinaMedium-sizedNetwork:f-localver- Normal
Byzantine
susf-total 30
20
In this part, we perform further comparisons and show
that our algorithm for the f-local model can tolerate
10
more Byzantine agents than the flooding-based algo-
rithmforthef-totalmodelfromSakavalasetal.(2020). 0
Forthispurpose,weapplyouralgorithminthe17-node 0 5 10 15 20 25 30
Time
network in Fig. 3(b). As mentioned in Section 3.2, this
graph is not 2-strictly robust with one hop, but is 2- (b) Asynchronousupdateswithdelays.
strictlyrobustwith2hopsunderthe1-localmodel. Fig. 8. Time responses of the two-hop MW-MSR algorithm
inthe17-nodenetworkofFig.3(b).
Assume that nodes 1 and 15 are Byzantine. Node 15
transmitsfourdistinctvaluestoitsneighborswhilenode
thebeginningofSection5.2.1,ifthelocationsofByzan-
1 maintains a constant value (indicated in red dashed
tine nodes are well spread in the network, then the
linesinFig.8).Lettheinitialstatesofthenormalagents
total tolerable number of Byzantine nodes can be very
fall within the range of (0,40). According to the results
large. This is because the erroneous influences from
inVaidyaetal.(2012);LeBlancetal.(2013),thisgraph
Byzantine nodes are also bounded by the relay range.
fails to satisfy the criteria for either the 1-local or the
However,thissituationclearlyexceedsthecapabilityof
1-total Byzantine model even for synchronous updates.
the flooding-based algorithm in Sakavalas et al. (2020),
Consequently, in Fig. 8(a), Byzantine consensus is not
where a Byzantine node can have erroneous influences
achieved by the one-hop MW-MSR algorithm, which
onallthenodesinthenetwork.
is equivalent to the algorithms in Vaidya et al. (2012);
LeBlancetal.(2013).
Then, we perform simulations for the synchronous and
7 Conclusion
asynchronous two-hop MW-MSR algorithm under the
same attacks, respectively. The results for the syn-
chronous algorithm are given in Fig. 8(b) and Byzan- We have solved the approximate Byzantine consensus
tine consensus is achieved. Next, let the normal nodes problem under asynchronous updates with time delays
update asynchronously with delays in communication. intheagents’communication.Ourapproachisbasedon
Observe that Byzantine consensus is also achieved as themulti-hopweightedMSRalgorithm.Wehavespecifi-
showninFig.8(c),althoughthefinalstageofconsensus callyprovidedatightnecessaryandsufficientgraphcon-
takes longer due to the communication delays. These ditionforthenetworkusingtheMW-MSRalgorithmfor
simulations clearly verifies the effectiveness of the pro- Byzantineconsensus.Itisexpressedusingthenotionof
posedalgorithm. r-strictly robust graphs with l hops. An important im-
plication of our results is that under the f-total/local
Asacomparison,theflooding-basedalgorithm(Sakavalas Byzantinemodel,thegraphconditionremainsthesame
et al. (2020)) for the f-total model cannot solve the even if the algorithm becomes asynchronous and the
Byzantine consensus under the same attack scenario. communication is subject to time delays. Our analysis
The reason is that for their algorithm to tolerate two hasledustotighterrobustgraphconditionsforthecase
Byzantine agents, the minimum in-degree of the graph of the malicious model than those known in the litera-
needs to be at least 2f + 1 = 5, which is apparently tureaswell.Moreover,ouralgorithmisiterativeandre-
not satisfied in the 17-node network. Actually, our al- quiresonlylocalinformationandtopologyforeachnode,
gorithmcanachieveByzantineconsensuseveninlarger andhenceitismorelight-weightedanddistributedcom-
networks with more Byzantine nodes. As discussed in paredtotheconventionalflooding-basedalgorithms.
12
seulav
etatS
seulav
etatS
seulav
etatSReferences Pease,M.,Shostak,R.andLamport,L.(1980). Reachingagree-
mentinthepresenceoffaults,J.ACM27(2):228–234.
Sakavalas,D.,Tseng,L.andVaidya,N.H.(2020). Asynchronous
Abbas, W., Laszka, A. and Koutsoukos, X. (2017). Improving Byzantine approximate consensus in directed networks, in
networkconnectivityandrobustnessusingtrustednodeswith Proc.ACMSymp.PrinciplesofDist.Comp.,pp.149–158.
applicationtoresilientconsensus,IEEETrans.ControlNetw. Schenato, L. and Fiorentin, F. (2011). Average TimeSynch: A
Syst.5(4):2036–2048. consensus-basedprotocolforclocksynchronizationinwireless
Abraham, I., Amit, Y. and Dolev, D. (2004). Optimal resilience sensornetworks,Automatica47(9):1878–1886.
asynchronous approximate agreement, in Proc. International Su, L. and Vaidya, N. H. (2017). Reaching approximate Byzan-
ConferenceOnPrinciplesOfDistributedSystems,pp.229–239. tineconsensuswithmulti-hopcommunication,Inf.andCom-
Azadmanesh,M.H.andKieckhafer,R.M.(2002). Asynchronous putation255:352–368.
approximate agreement in partially connected networks, Int. Tian, E., Wang, Z., Zou, L. and Yue, D. (2019). Chance-
J.ParallelDistrib.Syst.Netw.5(1):26–34. constrained H∞ control for a class of time-varying systems
Bonomi, S., Del Pozzo, A., Potop-Butucaru, M. and Tixeuil, S. with stochastic nonlinearities: The finite-horizon case, Auto-
(2019).ApproximateagreementundermobileByzantinefaults, matica107:296–305.
TheoreticalComputerScience758:17–29. Tseng, L. and Vaidya, N. H. (2015). Fault-tolerant consensus
Bullo,F.,Cort´es,J.andMartinez,S.(2009). DistributedControl in directed graphs, in Proc. ACM Symp. Principles of Dist.
of Robotic Networks: A Mathematical Approach to Motion Comp.,pp.451–460.
CoordinationAlgorithms,PrincetonUniversityPress. Vaidya, N. H., Tseng, L. and Liang, G. (2012). Iterative ap-
Cetinkaya,A.,Ishii,H.andHayakawa,T.(2018). Aprobabilistic proximate Byzantine consensus in arbitrary directed graphs,
characterizationofrandomandmaliciouscommunicationfail- inProc.ACMSymp.PrinciplesofDist.Comp.,pp.365–374.
uresinmulti-hopnetworkedcontrol,SIAMJournalonControl Wang, Y. and Ishii, H. (2019). Resilient consensus through
andOptimization56(5):3320–3350. event-basedcommunication,IEEETrans.ControlNetw.Syst.
Dibaji, S. M. and Ishii, H. (2015). Consensus of second-order 7(1):471–482.
multi-agentsystemsinthepresenceoflocallyboundedfaults, Xiao, F. and Wang, L. (2006). State consensus for multi-agent
Syst.ControlLett.79:23–29. systems with switching topologies and time-varying delays,
Dibaji,S.M.andIshii,H.(2017). Resilientconsensusofsecond- InternationalJournalofControl79(10):1277–1284.
orderagentnetworks:Asynchronousupdateruleswithdelays, Yang, S., Tan, S. and Xu, J. (2013). Consensus based approach
Automatica81:123–132. for economic dispatch problem in a smart grid, IEEE Trans.
Dibaji, S. M., Ishii, H. and Tempo, R. (2018). Resilient ran- PowerSyst.28(4):4416–4426.
domized quantized consensus, IEEE Trans. Autom. Control Yuan, L. and Ishii, H. (2021a). Secure consensus with dis-
63(8):2508–2522. tributed detection via two-hop communication, Automatica
Dimarogonas, D. V. and Johansson, K. H. (2010). Stability 131:109775.
analysis for multi-agent systems using the incidence matrix: Yuan,L.andIshii,H.(2021b).Resilientconsensuswithmulti-hop
Quantizedcommunicationandformationcontrol,Automatica communication,inProc.IEEEConf.Dec.Control,pp.2696–
46(4):695–700. 2701. Also, arXiv:2201.03214, submitted for journal publica-
Ding,M.(2021). Ananalysisofmulti-hopiterativeapproximate tion.
Byzantineconsensuswithlocalcommunication,inProc.IEEE Yuan,L.andIshii,H.(2022a).AsynchronousapproximateByzan-
SymposiumonComputersandCommunications,pp.1–6. tineconsensusviamulti-hopcommunication,inProc.Ameri-
D’Innocenzo, A., Smarra, F. and Di Benedetto, M. D. (2016). canControlConf.,pp.755–760.
Resilientstabilizationofmulti-hopcontrolnetworkssubjectto Yuan, L. and Ishii, H. (2022b). Event-triggered approximate
maliciousattacks,Automatica71:1–9. Byzantine consensus with multi-hop communication, in Proc.
Dolev, D. (1982). The Byzantine generals strike again, Journal IEEEConf.Dec.Control,pp.7078–7083.
ofalgorithms3(1):14–30. Zhao, C., He, J. and Chen, J. (2018). Resilient consensus with
Dolev, D., Lynch, N. A., Pinter, S. S., Stark, E. W. and Weihl, mobiledetectorsagainstmaliciousattacks,IEEETrans.Signal
W.E.(1986).Reachingapproximateagreementinthepresence andInf.Proc.overNetw.4(1):60–69.
offaults,J.ACM33(3):499–516. Zhao, Z. and Lin, Z. (2016). Global leader-following consensus
Fischer, M. J., Lynch, N. A. and Paterson, M. S. (1985). Im- of a group of general linear systems using bounded controls,
possibilityofdistributedconsensuswithonefaultyprocess,J. Automatica68:294–304.
ACM32(2):374–382.
Goldsmith, A. (2005). Wireless Communications, Cambridge
UniversityPress.
Jin, Z. and Murray, R. M. (2012). Multi-hop relay protocols
forfastconsensusseeking,inProc.IEEEConf.Dec.Control,
pp.1001–1006.
Kadowaki,Y.andIshii,H.(2014). Event-baseddistributedclock
synchronizationforwirelesssensornetworks,IEEETrans.Au-
tom.Control60(8):2266–2271.
LeBlanc, H. J., Zhang, H., Koutsoukos, X. and Sundaram, S.
(2013). Resilient asymptotic consensus in robust networks,
IEEEJ.Sel.AreasCommun.31(4):766–781.
Lin, P. and Jia, Y. (2009). Consensus of second-order discrete-
timemulti-agentsystemswithnonuniformtime-delaysanddy-
namicallychangingtopologies,Automatica45(9):2154–2158.
Lu, A. Y. and Yang, G. H. (2023). Distributed secure state
estimationforlinearsystemsagainstmaliciousagentsthrough
sortingandfiltering,Automatica151:110927.
Lynch,N.A.(1996). DistributedAlgorithms,MorganKaufmann.
Mitra, A. and Sundaram, S. (2019). Byzantine-resilient dis-
tributedobserversforLTIsystems,Automatica108:108487.
Nedic,A.andOzdaglar,A.(2009).Distributedsubgradientmeth-
odsformulti-agentoptimization,IEEETrans.Autom.Control
54(1):48–61.
Olfati-Saber,R.,Fax,J.A.andMurray,R.M.(2007).Consensus
andcooperationinnetworkedmulti-agentsystems,Proc.IEEE
95(1):215–233.
13