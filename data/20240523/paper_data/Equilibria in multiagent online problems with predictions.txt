Equilibria in multiagent online problems with
predictions
GabrielIstrate
FacultyofMathematicsandComputerScience
UniversityofBucharest
Academiei14,Sector1,Bucharest011014,Romania
gabriel.istrate@unibuc.ro
CosminBonchis¸
DepartmentofComputerScience
WestUniversityofTimis¸oara
Bd. V.Pârvan4,cam. 047
Timis¸oara,RO-300223,Romania
cosmin.bonchis@e-uvt.ro
VictorBogdan
DepartmentofComputerScience
WestUniversityofTimis¸oara
Bd. V.Pârvan4,cam. 047
Timis¸oara,RO-300223,Romania
victor.bogdan@e-uvt.ro
Abstract
Westudythepowerof(competitive)algorithmswithpredictionsinamultiagent
setting. Tothisextentweintroduceamultiagentversionoftheski-rentalproblem.
Inthisproblemagentscancollaboratebypoolingresourcestogetagrouplicense
forsomeasset. Ifthelicensepriceisnotmetagentshavetorenttheassetindividu-
allyforthedayataunitprice. Otherwisethelicensebecomesavailableforeverto
everyoneatnoextracost. Ourmaincontributionisabest-responseanalysisofa
single-agentcompetitivealgorithmthatassumesperfectknowledgeofotheragents’
actions(butnoknowledgeofitsownrentingtime). Wethenanalyzethesetting
whenagentshaveapredictorfortheirownactivetime,yieldingatradeoffbetween
robustnessandconsistency. Weinvestigatetheeffectofusingsuchapredictorin
anequilibrium,aswellasthenewequilibriaformedinthisway.
1 Introduction
Agreatdealofprogresshasbeenmaderecentlyinalgorithmicsbyinvestigatingtheideaofaugment-
ingclassicalalgorithmsbypredictors[MV21],oftendevisedusingMachineLearningmethods. Such
predictionscanbeinstrumentalinmanypracticalcontexts: e.g. intheareaofsatisfiabilitysolving
portfolio-basedalgorithms[XHHLB08]provedsodominantthattheyeventuallyledtochangesto
therulesoftheannualSATcompetition. Dually,theoreticaladvancesinalgorithmswithpredictions
haveimpactedresearchdirectionssuchastheoryofonlinealgorithms[PSK18,Ban20,GP19],data
structures [Mit18, FV20, LLW22], streaming algorithms [JLL+20, CEI+22], and even, recently,
(algorithmic) mechanism design [XL22, ABG+22, GKST22, IB22, BGTZ23, CK24]. The great
dynamismofthistheoryissummarizedbytheAlgorithmwithPredictionswebpage[LM22]which,
Preprint.Underreview.
4202
yaM
02
]TG.sc[
1v37811.5042:viXraas of April 2024 contains 192 papers. Some new ideas include distributional advice [DKT+21],
privatepredictions[ADKV22],redesigningMLalgorithmstoprovidebetterpredictions[AGP20],
theuseofmultiplepredictors[AGKP22],ofpredictorportfolios[DIL+22],uncertainty-quantified
predictions[SHC+23],costlypredictions[DNS23]orheterogeneouspredictors[MLH+23].
Conspicuously absent from this list is any attempt of investigating the issue of supplementing
algorithmsbypredictionsinmulti-agentsettings. Areasonforthisomissionis,perhaps,thefact
thattheintroductionofmultipleagentsturnstheproblemfromanoptimizationproblemintoagame-
theoreticproblem,anditlessclearwhattherelevantmeasuresofqualityofasolutionareinsucha
setting. Adualreasonisthatpredictionsmayinteract(nontrivially)withindividualoptimization:
eachagentmaytrytopredicteveryotheragent,thesepredictionsmightbeincorporatedintoagent
behaviors,agentsmightattempttopredicttheotheragents’predictions,andsoon. Athirdandfinal
reasonisthatwesimplydon’thavecrisp,naturalexamplesofproblemsamenabletoananalysisin
theframeworkofalgorithmwithpredictionswithmultipleagents.
1.1 OurContributions
Inthispaperwetake(preliminary)stepstowardsthecompetitiveanalysisofonlineproblemswith
predictionsinmultiagentsettings. Wewillworkin(andextend)theframeworkofonlinegames
[EN16].Inthissettingagentsneedtomakedecisioninanonlinemannerwhileinteractingstrategically
with other agents. They have deep uncertainty about their own behavior and, consequently, use
competitiveanalysis[BEY05]todefinetheirobjectivefunction.Sinceweareworkinginamultiagent
setting,theperformanceofagents’algorithmswillbeevaluatedinthecontextof(Nash)equilibriaof
suchgames. Wefurtherextendthisbaselinesettingbyaugmentingagentcapabilitieswithpredictors
[PSK18]. Agentsmaychoosethedegreeofconfidenceinfollowingthesuggestionsofthepredictor.
This usually results [PSK18] in a risk-reward type tradeoff between two measures of algorithm
performance, consistency (the performance of the algorithm when the predictor is perfect) and
robustness(theperformancewhenthepredictorisreallybad).
Ourmaincontributionisthedefinitionandanalysisofamultiagentversionofthewell-known
ski-rentalproblem[BEY05]. Weinvestigatethisproblemunderseveralsettingsofagentknowledge
onthebehaviorofotheragents,andquantifytheeffectofpredictionsontheequilibriumbehavior.
Theplanofthepaperisasfollows: inSection2wedefinethemainproblemweareinterestedin(as
wellasthatofageneralizationoftheordinaryski-rentalproblemthatwillbeusefulinitsanalysis).
InSection3weinvestigateacaseweconsiderasabaseline: thatofanagentwhichisaprophet(that
is,itcanpredictperfectlythebehaviorofallotheragents)butstillhasdeepuncertaintyconcerning
thenumberofdaysitwillbeactive. Wegive(Section4)analgorithmforsuchanagentdisplayinga
tradeoffbetweenrobustnessandconsistency. Wetheninvestigate(Sections5and6)theimpactof
usingsuchanalgorithmincompetitiveratioequilibria,aswellasthenew,approximateequilibria
withpredictionsthatarisethisway.
2 Preliminaries
Givenasequencea=(a ) wewilldenote,abusingnotation,byargmin(a)boththesetofall
n n≥1
indices i ≥ 1 such that a = min{a : n ≥ 1} and the smallest index of an element in this set.
i n
Alsodefinelargmin(a)toreturnthelargestindexofanelementinargmin(a). Anticipatingits
eventualuse,foragivensequencep = (p ) ,infiniteortruncatedatacertainindexn,wewill
i i≥1
defineM (p)=min(P :i≥1), whereP =i−1+p .
∗ i i i
We assume knowledge of standard concepts in the competitive analysis of online algorithms, at
theleveldescribede.g. in[BEY05]. Wewilldenotethecompetitiveratioofanonlinealgorithm
A as c = sup cost(A(x)) . Ω represents the set of all legal input sequences. By forcing
A x∈Ωcost(OPT(x))
somewhatthelanguage,werefertothequantityontheright-handsideasthecompetitiveratioof
algorithmAoninputx,denotedc (x). Wewillalsodenotebyc (p)theoptimalcompetitive
A OPT
ratioofanalgorithmoninputp. ThisnotationimplicitlyassumestheexistenceofaclassAofonline
algorithmsfromwhichAisdrawn, hencec (p) = inf(c (p) : A ∈ A).Anonlinealgorithm
OPT A
withpredictionsbasesitsbehaviornotonlyonaninputp∈ΩbutalsoonapredictorX(cid:98) forsome
unknowninformationX fromsome"predictionspace"P. Weassumethatthereexistsametricd
onP thatallowsustomeasure(aposteriori)thequalityofthepredictionbythepredictionerror
2η = d(X,X(cid:98)). This allows us to benchmark the performance of an an online algorithm A with
predictionsonaninstancepasfollows: insteadofasingle-argumentfunctionc (p)wewillusea
A
two-argumentfunctionc (p,z). Thesecondargumentisanon-negativerealnumber. Informally,
A
c (p,z)willbethelargestcompetitiveratioofanonlinealgorithmAoninstancep,giventhatthe
A
predictorerrorηisatmostz.
Definition2.1. Anonlinealgorithmwithpredictionsisγ-robustoninputpiffc (p,z)≤ 1 −1+
A γ
γc (p)forallzandβ-consistentifc (p,0)≤β. Iftheguaranteesholdforeveryinputpwewill
OPT A
simplyrefertothealgorithmasγ-robustandβ-consistent.
Thedefinitionisavariationonadefinitionin[PSK18].Itoffersslightlyweakerrobustnessguarantees
thantheonein[PSK18]. This,however,seemsunavoidablefortechnicalreasons.
Consider now a competitive online game [EN16]. A strategy profile for such a game is a set of
onlinealgorithmsW =(W ,W ,...,W ),oneforeachplayer. GivenstrategyprofileW,denoteby
1 2 n
BR (W)thesetofstrategyprofilesderivedfromW wherethei’thagentplaysabest-response(i.e.
i
analgorithmminimizingitscompetitiveratio)totheotheragentsplayingW. Abusingnotation,we
willalsowriteBR (W)foranarbitrarystrategyprofileinthisset. Acompetitiveratioequilibrium
i
isastrategyprofile(W ,W ,...,W )suchthateachW isabest-responsetotheprogramofthe
1 2 n i
otheragents. Werelaxthisdefinitionasfollows:
Definition 2.2. Given an n-person competitive online game Γ and vector γ = (γ ,...,γ ) ∈
1 n
[1,∞)n,aγ-approximatecompetitiveratioequilibriumisastrategyprofileW =(W ,W ,...W )
1 2 n
ofΓsuchthatforall1≤i≤nc (W)≤ 1 −1+γ c (Br (W)).
Wi γi i i i
Westressthatinthepreviousdefinitionagentstrategiesareonlinealgorithms. Hence,actually
implementingacompetitiveratioequilibriumrequiresverystrongassumptions: tocomputeitsbest
response,agivenagentneedstoknowthe(future)behaviorofotheragents;thisneeds,ofcourse,to
betrueforeveryagent. Formalizingthisapparentlycircularscenarioisnoteasy. Fortunately,there
aremultiplesolutionstothisproblemintheliteratureonrationalityandknowledgeingametheory.
Forinstanceonemodelassumesthatthatplayerbehavioraretranslucent tootheragents[HP18].
Anotherideaistouse(conditional)commitments[KKLS10]asinformation-sharingdevices. Finally,
playersmaybeabletosimulatethebehaviorofotherplayers[KOC23].
Themostrelevanttoourcase(andtheonethatwewillassume)isperhapstheframeworkofopen-
sourcegametheory[CO23]. Inthisframeworkagentsareabletoseethesourcecodeoftheir
peersandcanimplementconditionalstrategiesbasedonthesesourcecodes. Open-sourcegame
theoryisperhapsbestexemplifiedbytheconceptofprogramequilibrium,firstproposedin[Ten04]
asasolutiontocooperationparadoxessuchasPrisonersDilemma. Aprogramequilibriumissimply
a set of programs such that every program is a best response to the other programs (i.e. a Nash
equilibriumintheextendedgamewhereactionsarereplacedbyprograms). Foradditionalresultsin
thislineofresearchsee[LFY+14,Oes19]. Apracticalimplementationofprogramequilibriawas
suggestedin[MT09]: agentssubmittheirstrategiesascomputerprogramstobeexecutedontheir
behalfbyashared,trustedmediator. Theresultingequilibriumconceptwascalledin[MT09]strong
mediatedequilibrium. Westressagainthatallthesetechnicalcomplicationsariseonlyifwewant
topracticallyimplementagentequilibriumplaying,notforanalyzingequilibria. Thisissimilar
tothejustificationofNashequilibria,whichonlyoffersconditionalguaranteessuchas"iftheother
agentsplaythestrategyprofiles thenitisoptimalformetoplayactions ".
−i i
Themainproblemwewillstudyinthispaperisthefollowingmultiagentski-rentalproblem:
Definition2.3(MultiagentSkiRental). nagentsareinitiallyactivebutmaybecomeinactive. Active
agentsneedaresourcefortheirdailyactivity. Eachday,activeagentshavetheoptionto(individually)
renttheresource, atacostof1$/day. Theycanalsocooperateinordertotobuyagrouplicense
that will cost B > 1 dollars. For this, each agent i may pledge some amount w > 0 or refrain
r
frompledging(equivalently,pledge0).1 IfthesumofpledgesisatleastBthenthegrouplicenseis
acquired,2andtheuseofthelicensebecomesfreeforallremainingactiveagentsfromthatmoment
on. Otherwise(wecallsuchpledgesinconsequential)thepledgesarenullified. Instead,everyactive
agentmust(individually)renttheresourcefortheday. Agentsarestrategic,inthattheycareabout
1Weassumethatbothpledgesw andthepriceBareintegers.
r
2Oneissuethatneedsclarificationisthatofthesumeachagentpays,shouldthelicensebeoverpledged.We
assumethatagentspaytheirpledgedsums.
3theiroverallcosts. Theyarefaced,ontheotherhand,withdeepuncertaintyconcerningthenumber
ofdaystheywillbeactive.3 Sotheychooseinsteadtominimizetheircompetitiveratio,ratherthan
minimizingtheirtotalcost.
Allalgorithmsinthispaperwillbedeterministic. Severalclassesarerelevanttoourpurposes:
- Apredictionlessalgorithmisafunctionf :N→N. f(t)representstheamountpledgedbythe
agentattimet. Apredictionlessalgorithmusesnoinformation: itdoesnotemployanypredictions
(aboutself-behaviororthebehaviorofothers).
- Attheotherendofthescaleconcerningalgorithminformation,weconsideratwo-predictormodel.
Specifically,weassumethateveryagentisendowedwithtwopredictors: aselfpredictorforits
ownactivity, andoneforthetotalpledgesofotheragents, calledothers’predictor.4 Formally,
analgorithmwith(selfandothers)predictionsisafunctionf(k,T(cid:98),p (cid:98)). Herek ≥1isaninteger,
T(cid:98)≥1isapredictionofthetrueactivetimeoftheagent,andp (cid:98):N→{0,...,B}isaprediction
ofthetotalamountpledgedbytheotheragentsonanygivenday.
- An algorithm with predictions is simple if whenever T(cid:99)1,T(cid:99)2 < M ∗(p (cid:98)) or T(cid:99)1,T(cid:99)2 ≥ M ∗(p (cid:98)) then
f(k,T(cid:99)1,p (cid:98))=f(k,T(cid:99)2,p (cid:98)). InotherwordsallthatmattersforthepredictioniswhetherT(cid:98)>M ∗(p (cid:98)).
- Analgorithmwithpredictionsisrationalifforeveryk,T(cid:98),p (cid:98),itholdsthatf(k,T(cid:98),p (cid:98)) ∈ {0,B−
p(k)}. Thatis,theagenteitherpledgesjustenoughtobuythelicense(accordingtotheothers’
(cid:98)
predictor)orrefrainsfrompledging.
- Finally,wewillconsiderdeterministicalgorithmswithotherspredictions(only),f(k,p)withtwo
(cid:98)
arguments: adaykandapredictorforothers’behaviorp:N→{0,...,B}. f(k,p)istheamount
(cid:98) (cid:98)
pledgedbyalgorithmondaykifthesetofpredictionsisp.
(cid:98)
WedeferpracticallyallproofstotheAppendix.
3 Equilibriainthepledgingmodel(withoutandwithpredictions)
Inthissectionwestudyequilibriumconceptsforalgorithmswithpredictionswhere,tocomputebest
responses,agentsknowthetotalsumpledgedbyallotheragentsateverystageofthegame. In
termsofthetwopredictormodelabovethisamountstoassumingthatforeveryagentiitsothers’
predictorp isperfect. Thoughhardlyplausible,thisscenariocanbejustifiedinseveraldistinctways:
(cid:98)i
- firstofall,note(asexplainedintheprevioussection)thatthisinformationisnotreallyneededif
allwewantistocharacterizeresultingequilibriainourgame: predictionscouldbeinterpretedas
beliefsthathappentobetrue. If,ontheotherhand,wewant(asitisthecaseinpractice)thatthe
agentsthemselvesbeabletocomputetheirbestresponsestrategiesthenanassumptionsuchasthe
oneaboveseemsnecessary.
- second,thesituationanagentfacesissimilartothatoftheagentinNewcomb’sproblem[CS85],a
problemthathasattractedsignificantinterestinDecisionTheoryandPhilosophy: inNewcomb’s
problem the daemon knows what the agent will do and can act on it. In our case, from the
agent’sperspectiveit’stheotheragentsthatbehavethisway. Soonecouldsaythatwhatweare
studyingwhendefininggame-theoreticequilibriawithpredictionsistoinvestigategametheory
with Newcomb-like players. Notions of equilibria for players with such behaviors have been
recentlyinvestigated[Fou20].
- finally,inthesettingof[PSK18]thequalityofanalgorithmwithonepredictorismeasuredbytwo
quantities,robustnessandconsistency,quantifyingitperformanceunderworst-caseandperfect
predictions,respectively. Whenusingtwopredictors,thecombinationofworst-caseandperfect
predictorsseemstorequirefournumbers. Theanalysisinthispaper,whichconcentratesonthe
casewheretheothers’predictorisperfect,providestwoofthesefournumbers,correspondingto
thecasewheretheothers’predictorisperfect.
3Weassumethatactivedaysformaninitialprefixofthetimeline.Thatis,onceanagenthasbeeninactiveon
agivendayitwillcontinuetobeinactiveforever.
4Notethatmultiagentgameswhereagentsattempttopredicttheaggregatebehavioroftheotherplayershave
beenstudiedbefore:anexampleisthecaseofso-calledminoritygameinEconophysics[DCZ04]
4Theorem3.1. (a). Ineverycompetitiveratioequilibriumforpredictionlessalgorithmsthelicense
getsboughtonadayr.
(b). Considernpredictionlessalgorithmsspecifiedbyfunctions(f ,f ,...,f ),andfor1≤i≤n
1 2 n
(cid:80)
letM =min(k−1+max(B− f (k),0):1≤k ≤B).
i j̸=i j
Then(f ,f ,...,f )isacompetitiveratioequilibriumifandonlyif:
1 2 n
(i). Thereexistsrs.t.
(cid:80)n
f (r) ≥ B. W.l.o.g. denotebyrthesmallestsuchday. Then,in
j=1 j
fact,(cid:80)n
f (r)=B.
j=1 j
(cid:80)
(ii). foralli(ifany)suchthat f (r)=Bandr ≤M +1itholdsthatinfactr =M +1
j̸=i j i i
andf (r)=0.
i
(cid:80)
(iii). forallisuchthatthereexistsk ≤min(r,M )with f (k)=B−1either(k =r =
i j̸=i j
(cid:80)
M andf (r)=1)or(k =M =r−1,f (r−1)=0,and f (k)=B,f (r)=0).
i i i i j̸=i j i
(iv). forallotheriandallj ̸=r,(cid:80) f (j)≤B+j−1−min(j,M )fi(r)+r−1.
k̸=i k i min(r,Mi)
(c). All competitive ratio equilibria of rational algorithms with (perfect) others’ predictors are
as follows: on some day r ≤ 2B −1 agents in some subset S ⊆ [n] pledge amounts (w ) ,
i i∈S
(cid:80)
w = B,suchthat1 ≤ w andforalli ∈ S,(w −1)·min(B,r−1+w ) ≤ r(B−1)if
i∈S i i i i
r ≤B,andr−1+w ≤2B−1ifB+1≤r ≤2B−1. Agentsdon’tpledgeatanyothertimes.
i
(d). Intheequilibriadescribedatpoint(c)thecompetitiveratioofagenti∈S is1+ wi−1 ifr ≤B,
r
r+wi−1 ifB+1 ≤ r ≤ 2r−1. Thecompetitiveratioofanagenti ̸∈ S is1ifr ≤ B+1, r−1 if
B B
B+1≤r ≤2B−1.
Proof. Considerthefollowingsingle-agentgeneralizationofclassicalski-rental:
Definition3.2(SkiRentalWithKnownVaryingPrices). Asingleagentisfacingaski-rentalproblem
wherethebuyingpricevariesfromdaytoday(asopposedtothecostofrenting,whichwillalways
be1$). Wedenoteby0≤p ≤Bthecostofbuyingskisexactlyondayi,andletP =i−1+p
i i i
bethetotalcostifbuyingexactlyondayi(includingthecostofrentingonthepreviousi−1days).
Finally,letp=(p ) . Wetruncatepatthefirstisuchthatp =0(suchaniwillbecalledafree
i i≥1 i
day). Calladayisuchthatp =1abargainday.
i
Wereturntothemulti-agentskirental,takingthesingleagentperspectiveandinvestigatingthebest
responsetotheotheragents’behavior. Sincetheagentlearns(viatheothers’predictor)whatthe
otheragentswillpledge(andisonlyunsureaboutthenumberofdaysitwillbeactive),itknowshow
muchmoneyitwouldneedtocontributeonanygivendaytomakethegrouplicensefeasible. This
effectivelyreducestheproblemofcomputingabestresponsetothatofsolvingaski-rentalproblem
withknownvaryingprices,asdescribedinDefinition3.2.
Definition 3.3. Given p = (p ) and t ≥ 1 let M (p) = min{P : 1 ≤ i ≤ t,P defined}
i i≥1 t i i
and i (p) = min{j : P = M (p)}. We have 1 ≤ M (p) ≤ M (p), hence the sequence
t j t t+1 t
(M (p)) has the limit M (p) as t → ∞. Let i = i (p) = min{i : P = M (p)}. i (p) is
t ∗ ∗ ∗ i ∗ ∗
the first day where the absolute minimum total cost of ownership M (p) is reached, should we
∗
committobuying. Sequencei (p)isincreasingandstabilizestoi (p)ast → ∞. Finally,define
t ∗
k(p)=min{t:min(P ,...,P )≤t),Q =min{P :i≥t}andq =min{p :i≥t}.
1 t t i t i
Observation3.4. Ift≥i (p)thenitisoptimaltobuyondayi (p),orrent(whicheverischeaper).
∗ ∗
TheoptimalcostisOPT =min(t,M (p)). Ift<i (p)thenitisoptimaleithertobuyondayi (p)
t ∗ ∗ t
orrent(whicheverischeaper). TheoptimalcostisOPT =min(t,P (p))=min(t,P ,...P )
t it 1 t
Infact,wecansaymore:
Lemma3.5. SupposethereisnofreedayondayM (p)+1andnobargaindayondayM (p).
∗ ∗
Thenk(p)=P =M (p),andOPT =tift<M (p),OPT =M (p)ift≥M (p).
i∗(p) ∗ t ∗ t ∗ ∗
Example3.6. Forclassical,fixed-costski-rental,P =B+i−1,k(p)=M (p)=B,i (p)=1.
i ∗ ∗
5Thefollowingresultdescribestheoptimaldeterministiccompetitivealgorithmsforthislatterproblem.
HowtouseTheorem3.7toderiveTheorem3.1isdescribedintheAppendix.
Theorem3.7. OptimalcompetitivealgorithmsinSkiRentalwithKnownVaryingPricesare:
(a). if a free day exists on day d = M (p)+1 or a bargain day exists on day d = M (p), then
∗ ∗
the agent that waits for the first such day, renting until then and acting accordingly on day d is
1-competitive. Theonlyother1-competitivealgorithmexistswhenthefirstbargaindayb=M (p)is
∗
followedbythefirstfreedayf =M (p)+1;thealgorithmrentsonalldays,waitingfordayf.
∗
(b). Supposecase(a)doesnotapply. Thatis,thedailypricesarep ,p ,...,p ...,1 < p ≤ B
1 2 n i
for1 ≤ i ≤ M (p),p ≥ 1. Thennodeterministicalgorithmcanbebetterthanc (p)-
∗ M∗(p)+1 OPT
competitive,wherec OPT(p) := min(P rr : r ≤ M ∗(p),Q MM ∗∗ (( pp ))). Allalgorithmsthatbuyonaday
thatbelongstoargmin({ OP Pr Tr :1≤r ≤M ∗(p)}∪{ MP ∗r (p) :r ≥M ∗(p),P r =Q M∗(p)})arethe
onlyonesthatachievethisratio.
(c.) Moregenerally,ifcase(a)doesnotapplyandλ≥1thentheonlydeterministicalgorithmsthat
areλ-robustonsequenceparethosethatbuyatatimersuchthat OPP Tr
r(p)
≤ λ1 −1+λ·c OPT(p).
Definition3.8. Givenasequenceofpricesp=(p ) forthesingleagentski-rentalproblemwith
i i≥1
varyingprices, letr = r (p)andr = r (p)bedefinedasr = largmin({r : P = M (p)}),
0 0 1 1 0 r ∗
r 1 =argmin({ OP Pr Tr :1≤r ≤M ∗(p)}∪ { MP ∗r (p) :r ≥M ∗(p),P r =Q M∗(p)}).
4 Analgorithmwithpredictionsinthepledgingmodelwithfullinformation.
Wenowturntosettingswithpredictions. Wewillgiveanalgorithmwithpredictionsfortheski-rental
problemwithvaryingprices,andthenapplyittothemultiagentski-rentalproblem.Inthesingle-agent
casetherelevantresultsarethosein[PSK18](improvedin[Ban20]),aswellasthelowerbounds
provedindependentlyin[GP19,ADJ+20,WZ20]. Wewillassumethateachagentiisactivefor
T
i
days,andhasanestimatorT(cid:98)i forT i. Ingeneral,thefactthatoneagentmakeserrorsinitsown
predictionmayinfluencetheperformanceofotheragents.Inthebaselinemodelofthissection(which
wecallthepledgingmodelwithfullinformation)wewillassumethatagentsknowthebehaviorof
allotheragents. Intheopen-sourceframeworkthiscouldbeimplementedbyassumingthatagents
canaccessnotonlythecodesofotheragents’programs,butoftheirpredictorsaswell.
Thenicefeatureofthis(unrealistic)baselinemodelisthatindividualagentdeviationsfromoptimum
are effectively decoupled, and depend on agent error in its own estimator T(cid:98)i only. Denote η
i
=
|T
i
−T(cid:98)i|. Of course, for every agent i we can characterize its performance in a strategy profile
(W ,W ,...,W )(whereagentiusesalgorithmW )bytwosuchnumbers,γ andc ,which(in
1 2 n i i i
thissection)dependonW only,becausetheagentknowswhattheotheragentswillplay. Wewill
i
adoptasingle-agentperspective,droppingindexiandwritingηinsteadofη .
i
Definition4.1. AsimplealgorithmwithpredictionsAfortheski-rentalproblemwithvaryingprices
isspecifiedbyfunctionsf ,f ,withf (p)≤r (p),andworksasfollows:(1). ifpcontainsabargain
1 2 1 1
dayi = M ∗(p)orafreedayi = M ∗(p)+1,thenthealgorithmAwaitsforit. (2). ifT(cid:98) ≥ M ∗(p)
thenAbuysondayf (p)≤r (p). (3). elsethealgorithmbuysondayf (p)∈N∪{∞}.
1 1 2
Theorem4.2. Onaninputpthesimplealgorithmwithpredictionsspecifiedbyfunctionsf ,f is
1 2
(a). γ-robustfornoγ,iff 2(p)=∞. (b). max( MPf ∗1 (( pp) ),P ff 22 (( pp )))-consistentiff 2(p)<M ∗(p), MPf ∗1 (( pp)
)
otherwise,andmax( OPP Tf f1 1( (p p) )(p), OPP Tf f2 2( (p p) )(p))-robust,whenf 2(p)<∞.
Wenowapplythepreviousresulttotheproblemofcreatingalgorithmswithfiniterobustnessand
consistencyguarantees. First,notethatblindlyfollowingthepredictordoesnothavetheseproperties:
Theorem4.3. Algorithm2(seeAppendix)issimpleand1-consistentbutitisr-robustfornor >0.
Algorithm1belowoffersbetterrobustnessguarantees. Notethatforeveryλ∈(0,1]thealgorithmis
simpleaccordingtoDefinition4.1. Thenextresultshowsthatitisλ-robust. Asforconsistency,we
6cannotgiveanabsoluteupperboundindependentofp. Neverthelesswewillshowlater(Lemma4.6)
that for every sequence p the consistency of the algorithm improves as λ decreases. Later on
(Section 6) we will experimentally analyze the consistency of Algorithm 1, by investigating the
dependencyofitsaveragecompetitiveratioonthepredictionerrorη:
Algorithm1Analgorithmdisplayingarobustness-consistencytradeoff.
Input: (p,T)
Predictor: T(cid:98)≥1,aninteger.
ifweareinCase(a)ofTheorem2then
actaccordingly
else
chooser =r (p,λ)tobethefirstday≥⌈(1−λ)(r −1)+λr ⌉suchthatP −λOPT =
2 2 0 1 r2 r2
min(P −λOPT :t≥⌈(1−λ)(r −1)+λr ⌉);ifP >P letr =r
t t 0 1 r2 r1 2 1
chooser 3 =r 3(λ,p)sothat OPP Tr r3 3(p) ≤λ−1+ λ1c OPT(p)minimizingtheratio P rr 33
if(T(cid:98)≥M (p)) then
T(cid:98)
buyondayr (possiblynotbuyingatallifr >T)
2 2
else
buyondayr (possiblynotbuyingatallifr >T)
3 3
Theorem4.4. Thecompetitiveratioofalgorithm1oninput(p,T),predictionT(cid:98),isc A(p,T;T(cid:98))≤
λ − 1 + λ1c OPT(p). On the other hand, if T = T(cid:98) (i.e. η = 0) then c A(p,T;T) ≤
max( MP ∗r (2 p),P rr 33)ifr 3 ≤M ∗(p),c A(p,T;T)≤ MP ∗r (2 p), otherwise.
Example4.5. InthecasewhenP =B+t−1forallt(i.e. classicalski-rental,whichhasasingle
t
inputp)wehavei = 1,P = r = M (p) = B andP −t = B−1forallt ≥ 1. Bythefact
∗ i∗ 1 ∗ t
thati ∗ = r 0 = 1andLemma4.6,itfollowsthatr 2 = ⌈λB⌉. MP ∗r (3 p) = 1+ r3 B−1,sotomake(for
r 3 ≥B) MP ∗r (3 p) ≤λ−1+ λ1c OPT(p)=λ−1+ λ12B B−1 weneedr 3+B−1≤B(λ−1)+ 2B λ−1.
Thelargestvalue(whichminimizestheratio P rr 33)isr
3
=⌊Bλ+(2B−1)( λ1 −1)⌋. Inthiscaseour
Algorithm1isasmallvariationonAlgorithm1in[PSK18]: sinceweprovedthatr =⌈λB⌉)we
2
canseethatouralgorithmperformsidenticallytoAlgorithm1of[PSK18]inthecaseT(cid:98)≥M (P),
T(cid:98)
butitmaybuyslightlyearlier/laterintheoppositecase. Ontheotherhandouralgorithmhasthe
sameconsistency/robustnessguaranteesasthoseavailableforthislatteralgorithm. Indeed,the
robustnessboundwas(bydesign)identicaltothatofAlgorithm1of[PSK18]. Asforconsistency,
weshowthatBλ+(2B−1)(1 −1)>B. Indeedthisisequivalentto(2B−1)1−λ >B(1−λ),
λ λ
or 1 > B , which is trivially true, since B > 1 and λ ≤ 1. So r > B = M (p). Since
λ 2B−1 3 ∗
MP ∗r (2
p)
= B+⌈λ BB⌉−1 ≤ B(1 B+λ) =1+λ,theconsistencyguaranteeis,thereforec A(p,T,T)≤1+λ
thesameastheonefrom[PSK18]fortheirAlgorithm1.
Notethatforagivensequencep,theconsistencyguaranteesgiveninTheorem4.4areincreasingas
afunctionofλ. Thatis,decreasingλmakesthealgorithmmoreconsistent. Inparticularforevery
fixedinputpAlgorithm1becomesoptimalforsmallenoughvaluesofλ:
Lemma 4.6. (a). For 0 ≤ λ 1 < λ 2 ≤ 1 P r2(λ1,p) ≤ P r2(λ2,p)and P rr 33 (( λλ 11 ,, pp )) ≤ P rr 33 (( λλ 22 ,, pp )). (b). If
λ< M∗(p)1
−r0+1
andT(cid:98)≥M ∗(p)thenAlgorithm1buysondayr 0.
5 Usingalgorithmswithpredictionsincompetitiveratioequilibria
As an application, we quantify the value of predictions when employed in the competitive ratio
equilibria. Specifically,consideraprogramequilibriumascharacterizedinTheorem3.1. Suchan
equilibriumcanbeimplementedbymakingallagentsuseAlgorithm1withλ=1,whichamountsto
best-responding. Wewanttogaugehowcanthecompetitiveratioofagivenagentkimproveifthe
agentusesa(correct)predictioninanequilibrium. First,notethatifk ̸∈S thenpredictiondoesnot
helpagentk,sinceitalreadyplaystheoptimalstrategy. Assume,therefore,thatsomeagentk ∈S
actuallydoestakeintoaccountthepredictor,usingAlgorithm1withparameterλ ∈(0,1),instead
k
7ofsimplybest-respondingwithλ =1. Crucially,assumethatthisbehavioris,however,invisible
k
toallotheragents,whostillbelievethatλ =1.
k
Theorem5.1. Assumek ∈ S. Then,usingAlgorithm1withλ ∈ (0,1]inthecompetitiveratio
k
equilibriafromTheorem3.1is 1 -robustand1+β -consistent,whereβ isgiveninTable1.
λk k,λ k,λ
Table1: Valuesofconsistencyparameterβ fromTh:
k,l
Case Condition Consistency
r =1 w =1orw ≥2,λ≤ wk(wk−1) 0
k k r(B−1)
r =1 w ≥2,λ> wk(wk−1). w −1
k r(B−1) k
2≤r ≤M ∗(p) wk rλ−1 + (λ− λ1)2 ≤1− B1,B r+ +⌈ wλ kr −⌉− 11 <1 max(⌈λr B⌉−1,wk r−1)
2≤r ≤M ∗(p) B r+ +⌈ wλ kr −⌉− 11 <1,wk rλ−1 + (λ− λ1)2 >1− B1 ⌈λr B⌉−1
2≤r ≤M ∗(p) wk rλ−1 + (λ− λ1)2 ≤1− M∗1 (p),r+w k−1≤B wk r−1
2≤r ≤M ∗(p) M ∗(p)[wk rλ−1 + (λ− λ1)2 ]>B−1,r+w k−1≤B 0
M ∗(p)<r ≤2B−1 B+⌈λr⌉−1<r+w k−1 wk r−1
M ∗(p)<r ≤2B−1 otherwise r+w Bk−1 −1
6 Experimentalevaluation
Theorem5.1quantifiestheperformanceofanagentusingAlgorithm1withdifferentvaluesofλin
onlytwoscenarios: perfectpredictorsrespectivelytheworstpossiblepredictor. Inthesequelwe
experimentallyinvestigatetheperformanceofAlgorithm1inmorerealistic,intermediateregimes
oftheerrorparameterµ. Thesettingisinspiredbytheonein[PSK18]. However, giventhatwe
areworkinginamultiagentsetting,weneedtoperformtheexperimentsunder(atleast)twovery
differenthypotheses:thefirstscenarioteststheperformanceofAlgorithm1simplyasanalgorithmfor
ski-rentalwithvaryingprices. Toaccomplishsuchatask,thesequenceofpricesseenbyagentkmay
bearbitrary. ThesecondscenarioissimilartotheoneconsideredinTheorem5.1: namely,assume
thatagentsplayoneoftheequilibriadescribedinTheorem3.1andinvestigatetheperformanceofan
agentthatdeviatesfromequilibriumbehaviorbyemployingAlgorithm1withadifferentλ.
Aswiththeexperimentsin[PSK18],wewillassumethatB = 100,T israndomlychoseninthe
interval[1,4B],T(cid:98)=T +ϵ,whereϵisnormallydistributedwithaverage0andstandarddeviation
σ. ThedifferencebetweenthetwosetsofexperimentsliesinthesequenceofpricesAlgorithm1is
facing: Inthefirstcasepricesfluctuaterandomlyintheinterval[B−⌊zB⌋,B]forsome0≤z ≤1.
Wewilltestthreevaluesforz: z =0(classicalskirental),z =0.5,andz =0.1. Inthesecondcase
pricescorrespondtoanequilibrium: thatisP =r−1+w forsomer ≤B,P =j−1+Bfor
r k j
j ̸= r,withw satisfyingcondition(w −1)·min(B,r−1+w ) ≤ r(B−1). Thealgorithm
k k k
Figure1: (a,b,c). Averagecompetitiveratioforski-rentalwithvaryingpricesunderrandomnoise.
(a). z=0(b). z=0.5(c). z=1. Ineachcase1000sampleswereusedforeveryvalueofthestandard
deviation. Weusedtwovaluesofparameterλ: λ = 1(blue)andλ = 0.2(orange). (d). Average
consistencyforski-rentalwithvaryingpricescorrespondingtoequilibrium(r = 75,w = 70)in
Theorem3.1(c).
performsreasonablywellunderrandomnoise: Figures1(a,b,c)showsthisinthreescenarios. The
resultsarequalitativelysimilarwiththosefrom[PSK18]forallvaluesofz. Ontheotherhand,when
8testingouralgorithmonequilibriafromTheorem3.1(c)itisnotpossibletoprovidemeaningful
comparisonsbetweendifferentequilibria:theirrobustnessguarantee(1+wk r−1)dependson(w k,r)).
Thismakesadirectcomparisonmeaningless. Onecancompare,however,theperformanceofthe
algorithm (with various values of λ) on individual (fixed) equilibria. The story is slightly more
complicated (for some equilibria our algorithm seems to be able to find quasi-optimal solutions
forallerrorregimes;seesectionBoftheAppendix). However,theprevailingqualitativebehavior
istheexpectedone: forλ < 1thelessuncertaintythereisintheerrorparameterϵthebetterthe
performanceofthealgorithmis. Ontheotherhandloweringλmakesthealgorithmbetterthanthe
algorithmwithoutpredictions(blue)whentheerrorissmall(butworsewhentheerrorislarge).
AsampleillustrationoftheseconclusionsisprovidedinFigure1(d),correspondingtotheequilibrium
with r = 75 and w = 70. Each point is the average of 1000 samples, with the blue curve
k
correspondingtoλ=1andtheorangecurvetoλ=0.2.
7 Equilibriawithpredictions
Notethat inthe example oftheprevioussection thefact thatagent k usesa predictorbreaks the
equilibriadescribedinTheorem4.4: agentk will,ingeneral,buyearlier/laterthandayr. Ifthis
happens, the remaining agents in S will not succeed in buying the license by pledging on day r
(which they do, because they believe that λ = 1). If the other agents knew about k’s deviation
k
theycouldhaveadjustedtheirstrategies. Thisdiscussionmotivatesthedefinitionageneralizationof
competitiveratioequilibriainspiredbytheparadigmofbest-responsewithpredictions. Specifically,
inanNashequilibriumeachagentbest-responds. Whenusinganalgorithmwithpredictionanagent
maytradeoffrobustness(i.e. optimizingthecompetitiveratio)forconsistency(i.e. optimizingthe
competitiveratiowhenthepredictionsarecorrect).
Definition 7.1. Suppose λ ,...,λ ,µ ,...,µ ∈ [1,∞) ∪ {∞}. A strategy profile
1 n 1 n
W = (W ,W ,...,W ) is a program equilibrium with predictions with parameters
1 2 n
(λ ,...,λ ,µ ,...,µ ) for multiagent ski-rental if: (i). For every set of individual predictions
1 n 1 n
T(cid:99)1,...,T(cid:99)n,W isa(λ 1,λ 2,...,λ n)approximatecompetitiveratioequilibrium. (ii). EveryW
k
is
µ -consistent. Thatis,forallactualrunningtimes(T ,T ,...,T )wehavec(W ,T ,T ) ≤ µ .
k 1 2 n k k k k
AnequilibriumissimpleifalltheprogramsW aresimple.
k
ItispossibleinprincipletouseTheorem4.2tocompletelydescribeapproximateequilibriawith
predictionsforsimplerationalprograms.Theresultingconditionsare,however,cumbersome.Instead,
weshowthefollowingsimplerresult,reminiscentofTheorem3.1:
Theorem 7.2. (a). In every program equilibrium with predictions with parameters
(λ ,...,λ ,µ ,...,µ )suchthatmin(λ )<∞thelicensegetseventuallyboughtirrespectiveof
1 n 1 n i
thepredictionsT(cid:99)1,...,T(cid:99)nthenagentsreceive. Thatis,thereexistsT 0suchthatinanyrunsuchthat
T >T holdsforatleastanagenti,thelicensegetsboughtnolaterthandayT .
i 0 0
(b). Ineveryrunofaprogramequilibriumwithpredictionswithparameters(λ ,...,λ ,µ ,...,µ )
1 n 1 n
such that each W is a simple, rational online algorithm with others’ predictions the following
i
(cid:80)
is true: on some day r agents in some subset S ⊆ [n] pledge amounts (w ) , w ≥ B,
i i∈S i∈S i
w
i
≥ 1,suchthat,foralli ∈ S, wk r−1 ≤ λ kMB ∗− (p1
)
+λ
k
+ λ1
k
−2,ifr ≤ M ∗(p),r+w
k
−1 ≤
λ (2B−1)+(λ + 1 −2)·B,ifr >M (p). Agentsneverpledgeamounts>0beforedayr.
k k λk ∗
(c). Thecompetitiveratioofagenti∈S ontherundescribedatpoint(b). is1+min( B−1 ,wk−1)
M∗(p) r
ifr ≤M (p),and min(M∗(p)+B−1,r+wk−1) ifr >M (p).
∗ M∗(p) ∗
8 ConclusionsandFurtherDirections
Ourmaincontributionhasbeenthedefinitionofaframeworkfortheanalysisofcompetitiveonline
games with predictions, and the analysis of a multi-agent version of the well-known ski-rental
problem. Ourresultsleavemanyissuesopen. Themostimportantoneisthedefinitionofarealistic
modeloferrorfortheothers’predictor. Howtodefinean"errorparameter"forsuchamodel
isnotentirelyclear,sincewhatwewanttomeasureistheerrorinestimatingasequenceofprices
P . Also,issuesofinteractionbetweenpredictionandoptimizationsimilartothoseinNewcomb’s
t
9problem have to be clarified. There exists, on the other hand, a huge, multi-discipline literature
thatdealswithlearninggame-theoreticequilibria. Insuchasetting,anequilibriumarisesthrough
repeatedinteractions(see,e.g. [KL93,You04,NFD+23]). Applyingsuchresultstothesettingwith
predictionsand,generally,allowingpredictionstobeadaptive(i.e. dependonpreviousinteractions)
islefttofurtherresearch. Alsointeresting(anddeferredtosubsequentwork)istheissueofobtaining
tradeoffsbetweenparametersofapproximateequilibria(similarto[GP19,ADJ+20,WZ20]forthe
one-agent case). This amounts, in the setting of Theorem 7.2, to deciding for which parameters
(λ ,...,λ ,µ ,...,µ )dosuchapproximateequilibriaexist. Next: [EN16]defineavariationon
1 n 1 n
themodelofcompetitiveequilibria;insteadofallowingagentstousearbitraryprograms,theylookfor
asingleonlinealgorithmP thatminimizesthecompetitiveratio,giventhateveryoneusesalgorithm
P. ThismakesthemodelaformofKantianoptimization[Roe19,Ist21]. Itisinterestingtostudy
onlinealgorithmswithpredictionsinsuchasetting. Finally,apromisingdirectionisadaptingsome
oftheideasfromtheMinoritygame: inthisgameanagentcanonlyobservethenetaggregateeffect
of past play (whether the bar was crowded or not in any of the past M days). Agents base their
subsequentactionontherecommendationsofaconstantnumberof"predictors"(initiallydrawn
randomlyfromthesetofbooleanfunctionsfrom{0,1}M to{0,1}). Theyrank(andfollow)these
predictorsbasedontheirrecentsuccess. Thisyieldsaninterestingemergentbehavior: agents"learn"
thethresholdatwhichthebarbecomescrowded,theaveragenumberofbar-goersfluctuatesaround
N/2. Moreimportantly,whenthepredictionwindowM issufficientlysmallthefluctuationsinthe
numberofbar-goersarelargerthanthoseforthenormaldistribution,indicating[JJH03]aformof
"systemlearning": aconstantfractionoftheagentsuseacommonpredictorthatisabletopredictthe
systembehavior. Whethersomethinglikethiscanbeaccomplishedfortheothers’predictorinour
two-predictormodelisinteresting(andopen).
10References
[ABG+22] Priyank Agrawal, Eric Balkanski, Vasilis Gkatzelis, Tingting Ou, and Xizhi Tan.
Learning-augmentedmechanismdesign: Leveragingpredictionsforfacilitylocation.
ProceedingsofEC’22,pages497–528,2022.
[ADJ+20] SpyrosAngelopoulos,ChristophDürr,ShendanJin,ShahinKamali,andMarcRenault.
Onlinecomputationwithuntrustedadvice.In11thInnovationsinTheoreticalComputer
ScienceConference(ITCS2020).SchlossDagstuhl-Leibniz-ZentrumfürInformatik,
2020.
[ADKV22] KareemAmin,TravisDick,MikhailKhodak,andSergeiVassilvitskii. Privatealgo-
rithmswithprivatepredictions. arXivpreprintarXiv:2210.11222,2022.
[AGKP22] KeertiAnand,RongGe,AmitKumar,andDebmalyaPanigrahi. Onlinealgorithms
withmultiplepredictions. InKamalikaChaudhuri,StefanieJegelka,LeSong,Csaba
Szepesvari,GangNiu,andSivanSabato,editors,Proceedingsofthe39thInternational
ConferenceonMachineLearning,volume162ofProceedingsofMachineLearning
Research,pages582–598.PMLR,17–23Jul2022.
[AGP20] KeertiAnand,RongGe,andDebmalyaPanigrahi. CustomizingMLpredictionsfor
onlinealgorithms. InInternationalConferenceonMachineLearning,pages303–313.
PMLR,2020.
[Ban20] SoumyaBanerjee. Improvingonlinerent-or-buyalgorithmswithsequentialdecision
making and ML predictions. Advances in Neural Information Processing Systems,
33:21072–21080,2020.
[BEY05] AllanBorodinandRanEl-Yaniv. Onlinecomputationandcompetitiveanalysis. Cam-
bridgeUniversityPress,2005.
[BGTZ23] Eric Balkanski, Vasilis Gkatzelis, Xizhi Tan, and Cherlin Zhu. Online mechanism
designwithpredictions. Technicalreport,arXiv.org/cs.GT/2310.02879,2023.
[CEI+22] Justin Y Chen, Talya Eden, Piotr Indyk, Honghao Lin, Shyam Narayanan, Ronitt
Rubinfeld,SandeepSilwal,TalWagner,DavidWoodruff,andMichaelZhang. Triangle
andfourcyclecountingwithpredictionsingraphstreams. InInternationalConference
onLearningRepresentations,2022.
[CK24] IoannisCaragiannisandGeorgiosKalantzis.Randomizedlearning-augmentedauctions
withrevenueguarantees. arXivpreprintarXiv:2401.13384,2024.
[CO23] VincentConitzerandCasparOesterheld. FoundationsofcooperativeA.I. InProceed-
ingsoftheAAAIConferenceonArtificialIntelligence,volume37,pages15359–15367,
2023.
[CS85] RichmondCampbellandLanningSowden. Paradoxesofrationalityandcooperation:
Prisoner’sdilemmaandNewcomb’sproblem. U.B.C.Press,1985.
[DCZ04] M.MarsiliD.ChalletandY-C.Zhang.MinorityGames:InteractingAgentsinFinancial
Markets. OxfordUniversityPress,2004.
[DIL+22] MichaelDinitz,SungjinIm,ThomasLavastida,BenjaminMoseley,andSergeiVassil-
vitskii.Algorithmswithpredictionportfolios.InAliceH.Oh,AlekhAgarwal,Danielle
Belgrave,andKyunghyunCho,editors,AdvancesinNeuralInformationProcessing
Systems,2022.
[DKT+21] IliasDiakonikolas,VasilisKontonis,ChristosTzamos,AliVakilian,andNikosZarifis.
Learning online algorithms with distributional advice. In Marina Meila and Tong
Zhang,editors,Proceedingsofthe38thInternationalConferenceonMachineLearning,
volume139ofProceedingsofMachineLearningResearch,pages2687–2696.PMLR,
18–24Jul2021.
[DNS23] MarinaDrygala,SaiGaneshNagarajan,andOlaSvensson. Onlinealgorithmswith
costly predictions. In Francisco Ruiz, Jennifer Dy, and Jan-Willem van de Meent,
editors,ProceedingsofThe26thInternationalConferenceonArtificialIntelligence
and Statistics, volume 206 of Proceedings of Machine Learning Research, pages
8078–8101.PMLR,25–27Apr2023.
11[EN16] RoeeEngelbergandJosephSeffiNaor. Equilibriainonlinegames. SIAMJournalon
Computing,45(2):232–267,2016.
[Fou20] GhislainFourny. Perfectpredictioninnormalform: Superrationalthinkingextended
tonon-symmetricgames. JournalofMathematicalPsychology,96:102332,2020.
[FV20] PaoloFerraginaandGiorgioVinciguerra. Learneddatastructures. InRecentTrendsin
LearningFromData,pages5–41.Springer,2020.
[GKST22] VasilisGkatzelis,KostasKollias,AlkminiSgouritsa,andXizhiTan. Improvedpriceof
anarchyviapredictions. InProceedingsofEC’22,pages529–557,2022.
[GP19] SreenivasGollapudiandDebmalyaPanigrahi. Onlinealgorithmsforrent-or-buywith
expertadvice. InInternationalConferenceonMachineLearning,pages2319–2327.
PMLR,2019.
[HP18] JosephYHalpernandRafaelPass.Gametheorywithtranslucentplayers.International
JournalofGameTheory,47(3):949–976,2018.
[IB22] GabrielIstrateandCosminBonchis¸. Mechanismdesignwithpredictionsforobnoxious
facilitylocation. arXivpreprintarXiv:2212.09521,2022.
[Ist21] GabrielIstrate. Game-theoreticmodelsofmoralandother-regardingagents. Proceed-
ingsofTARK’21,ElectronicProceedingsinTheoreticalComputerScience335,page
213,2021.
[JJH03] NeilFJohnson,PaulJefferies,andPakMingHui.Financialmarketcomplexity.Oxford
UniversityPress,2003.
[JLL+20] TanqiuJiang,YiLi,HonghaoLin,YisongRuan,andDavidP.Woodruff. Learning-
augmenteddatastreamalgorithms. InInternationalConferenceonLearningRepresen-
tations,2020.
[KKLS10] AdamTaumanKalai,EhudKalai,EhudLehrer,andDovSamet. Acommitmentfolk
theorem. GamesandEconomicBehavior,69(1):127–137,2010.
[KL93] EhudKalaiandEhudLehrer. RationallearningleadstoNashequilibrium. Economet-
rica: JournaloftheEconometricSociety,pages1019–1045,1993.
[KOC23] VojtechKovarik,CasparOesterheld,andVincentConitzer. Gametheorywithsimula-
tionofotherplayers. InProceedingsofIJCAI,pages2800–2807,2023.
[LFY+14] PatrickLaVictoire,BenjaFallenstein,EliezerYudkowsky,MihalyBarasz,PaulChris-
tiano,andMarcelloHerreshoff. Programequilibriumintheprisoner’sdilemmavia
Löb’s theorem. In Workshops at the Twenty-Eighth AAAI Conference on Artificial
Intelligence,2014.
[LLW22] Honghao Lin, Tian Luo, and David Woodruff. Learning augmented binary search
trees. InKamalikaChaudhuri, StefanieJegelka, LeSong, CsabaSzepesvari, Gang
Niu,andSivanSabato,editors,Proceedingsofthe39thInternationalConferenceon
MachineLearning,volume162ofProceedingsofMachineLearningResearch,pages
13431–13440.PMLR,17–23Jul2022.
[LM22] Alexander Lindermayr and Nicole Megow. Algorithms with predictions webpage,
2022. accessedApril2024.
[Mit18] MichaelMitzenmacher. AmodelforlearnedBloomfiltersandoptimizingbysand-
wiching. AdvancesinNeuralInformationProcessingSystems,31,2018.
[MLH+23] JessicaMaghakian,RussellLee,MohammadHajiesmaili,JianLi,RameshK.Sitara-
man, and Zhenhua Liu. Applied online algorithms with heterogeneous predictors.
In Andreas Krause, Emma Brunskill, Kyunghyun Cho, Barbara Engelhardt, Sivan
Sabato,andJonathanScarlett,editors,InternationalConferenceonMachineLearning,
ICML2023,23-29July2023,Honolulu,Hawaii,USA,volume202ofProceedingsof
MachineLearningResearch,pages23484–23497.PMLR,2023.
[MT09] Dov Monderer and Moshe Tennenholtz. Strong mediated equilibrium. Artificial
Intelligence,173(1):180–195,2009.
[MV21] M.MitzenmacherandS.Vassilvitskii. Algorithmswithpredictions. Chapter29in[?],
2021.
12[NFD+23] AdhyyanNarang,EvanFaulkner,DmitriyDrusvyatskiy,MaryamFazel,andLillianJ.
Ratliff. Multiplayerperformativeprediction: Learningindecision-dependentgames.
JournalofMachineLearningResearch,24(202):1–56,2023.
[Oes19] CasparOesterheld. Robustprogramequilibrium. TheoryandDecision,86(1):143–159,
2019.
[PSK18] ManishPurohit,ZoyaSvitkina,andRaviKumar. ImprovingonlinealgorithmsviaML
predictions. AdvancesinNeuralInformationProcessingSystems,31,2018.
[Roe19] John E Roemer. How We Cooperate: A Theory of Kantian Optimization. Yale
UniversityPress,2019.
[SHC+23] Bo Sun, Jerry Huang, Nicolas Christianson, Mohammad Hajiesmaili, and Adam
Wierman. Onlinealgorithmswithuncertainty-quantifiedpredictions. arXivpreprint
arXiv:2310.11558,2023.
[Ten04] MosheTennenholtz. Programequilibrium. GamesandEconomicBehavior,49(2):363–
373,2004.
[WZ20] AlexanderWeiandFredZhang.Optimalrobustness-consistencytrade-offsforlearning-
augmentedonlinealgorithms. AdvancesinNeuralInformationProcessingSystems,
33:8042–8053,2020.
[XHHLB08] LinXu,FrankHutter,HolgerHHoos,andKevinLeyton-Brown. Satzilla: portfolio-
basedalgorithmselectionforSAT. JournalofArtificialIntelligenceResearch,32:565–
606,2008.
[XL22] ChenyangXuandPinyanLu. Mechanismdesignwithpredictions. Proceedingsof
IJCAI’22,pages571–577,2022.
[You04] HPeytonYoung. Strategiclearninganditslimits. OxfordUniversityPress,2004.
13A Appendix. ProofsofTheoreticalResults
A.1 ProofofLemma3.5
Bythedefinitionofk(p),wehavemin(P ,P ,...,P ) > k(p)−1andM (p) = min(P :
1 2 k(p)−1 ∗ i
i≥1)≤min(P ,...,P )≤k(p).
1 k(p)
IfM (p) = k(p)thentheresultfollows. SoassumethatM (p) < k(p). Wewillshowthatthis
∗ ∗
hypothesisleadstoacontradiction.
LemmaA.1. i (p)≤k(p).
∗
Proof. Bythehypothesisifi ≤ M (p)+1thenp ≥ 1andifi ≤ M (p)thenp ≥ 2. Sincefor
∗ i ∗ i
i≥k(p)+2wehaveP ≥i−1≥k(p)+1(alsofori=k(p)+1,providedk(p)+1isnotafreeday)
i
itfollowsthatunderthislatterhypothesisM (p)=min(P :i≥1)=min(P :i≤k(p))≤k(p).
∗ i i
Soifdayk(p)+1isnotafreedaytheni (p)≤k(p).
∗
Assumenowthatk(p)+1isafreeday,thatisP =k(p). SinceP >k(p)forr >k(p)+1,
k(p)+1 r
itfollowsthat
M (p)=min(P :i≥1)=min(P ,...,P )≤k(p).Soi (p)≤k(p)inthiscaseaswell.
∗ i 1 k(p) ∗
The conclusion of Lemma A.1 is that min(P ,...,P ) = M (p). If we had i (p) < k(p)
1 k(p) ∗ ∗
then M (p) = P = min(P ,...,P ) > k(p)−1, so M (p) < k(p) < M (p)+1, a
∗ i∗(p) 1 k(p)−1 ∗ ∗
contradiction. We infer the fact that i (p) = k(p), so k(p)−1 ≤ P = M (p), i.e. k(p) ≤
∗ k(p) ∗
M (p)+1. Infactwehavek(p)≤M (p)exceptpossiblyinthecasewhenwehaveequalityinthe
∗ ∗
previouschainofinequalities,implyingthefactthatk(p)isafreeday.
Wenowdealwiththislastremainingcase. WehaveM (p) = P = k(p)−1. Butthiswould
∗ k(p)
contradictthehypothesisthatnofreedayd ≤ M (p)+1exists(sinced = M (p)+1 = k(p)is
∗ ∗
suchaday).
ThesecondpartofLemmaA.1. followsimmediately: ifT <M (p)thenT <k(p)henceitisbetter
∗
torentthentobuy. IfT ≥ M (p)thenitisoptimaltobuyondayi (p) = M (p) ≤ T,atprice
∗ ∗ ∗
M (p).
∗
A.2 ProofofTheorem3.7
Proof(.a). Supposethatafreedayf showsupbeforeanybargainday(andnolaterthandayM (p)).
∗
Thealgorithmthatjustwaitsforthefreedayis1-competitive: ifT <f thenitisoptimaltorent,
and the agent does so. If T ≥ f then it is optimal to get the object for free on day f, and the
algorithmdoesso.
If,ontheotherhandabargainbdayshowsuprightbeforeafreeday(andnolaterthandayM (p))
∗
then the algorithm that just rents waiting for the bargain day when it buys is 1-competitive: if
T <bthenitisoptimaltorent,andtheagentdoesso. IfT ≥bthenitisoptimaltogettheobject
ondayb,andthealgorithmdoesso.
(b). Essentiallythesameproofasfortheclassicalskirental: weneedtocompareallalgorithmsA that
r
buyondayr,togetherwiththealgorithmA thatalwaysrents.
R
ConsideralgorithmA thatbuysondayr. LetuscomputethecompetitiveratioofA . Denoteby
r r
T thenumberofactualdays.
LemmaA.2. AlgorithmA r is OP Pr Tr-competitive.
Proof. ForT = r thecompetitiveratioofalgorithmA r isindeed OP Pr Tr. Weneedtoshowthat
thisis,indeed,theworstcase,bycomputingthecompetitiveratioofalgorithmA foranarbitrary
r
activetimeT.
Case1: T ≤M (p). Then,byLemmaA.1,OPT =T.
∗ T
- Ifr ≤T thenthecompetitiveratiois Pr ≤ Pr = Pr .
T r OPTr
14- IfT <r ≤M (p)thenthecompetitiveratiois T =1.
∗ T
- Ifr >M (p)thenthecompetitiveratiois T =1.
∗ T
Therefore,forT ≤M ∗(p)theworstcompetitiveratioofA r is OP Pr Tr.
Case2: T >M (p). Then,byLemmaA.1,OPT =M (p).
∗ T ∗
- IfM ∗(p)≤r ≤T thenthecompetitiveratiois MP ∗r
(p)
= OP Pr Tr.
- Ifr ≤M ∗(p)<T thenthecompetitiveratiois MP ∗r
(p)
≤ P rr = OP Pr Tr.
- Ifr >T >M (p)thenthecompetitiveratiois T ≤ r = r .
∗ M∗(p) M∗(p) OPTr
Tofindtheoptimalalgorithmwehavetocomparethevariousratios OP Pr Tr.Notethatforr ≥M ∗(p)
onlythealgorithmsA suchthatP =Q arecandidatesfortheoptimalalgorithm,sincethe
r r M∗(p)
numeratorofthefraction OP Pr
Tr
isM ∗(p).
ThereforeanoptimalalgorithmA hascompetitiveratio
T
P Q
c (p)=min( r :1≤r ≤M (P), M∗(p) )
OPT r ∗ M (p)
∗
Wemustshowtheconverse,thatforeveryT thatrealizestheoptimumthealgorithmA isoptimal.
T
Thisisnotselfevident,since,e.g. onsomesequencespdayT couldbepreemptedbyafreedayd,
sothealgorithmwouldneverreachdayT forbuying.
Thereisonecasethatmustreceivespecialconsideration: supposeoneoftheoptimalalgorithms
involveswaitingforthefirstfreedayd>M (p)+1,i.e. Q =d−1. Weclaimthatthereis
∗ M∗(p)
nodayd′ >dsuchthatP =Q (i.e. disthelastoptimalday;therecanbeotheroptimal
d′ M∗(p)
daysafterM (p)+1butbefored). ThereasonisthatP ≥ d′−1 > d−1 = Q . Soall
∗ d′ M∗(p)
optimalstrategiesarerealizable.
ExampleA.3. Foranexamplethatshowsthatthesecondtermisneeded,considerasituationwhere
B =100,p =...=p 00=100,butp =p =...=2. Theoptimalalgorithmwillbuyon
1 1 101 102
day101,i.e. beyonddayM (p)=100.
∗
A.3 ProofofTheorem3.1,givenTheorem3.7
(a). Assumeotherwise: supposethat(W ,W ,...W )wasaprogramequilibriumwherethelicense
1 2 n
never gets bought. This is because pledges on any day never add up to the licensing cost B.
Considertheperspectiveofagent1. Itwillneverhaveafreeday, henceitsbestresponseisto
pledgetherequiredamountonitsoptimalday/firstbargainday(ifitexists),attheneededcost.
(b).(i). Tohaveacompetitiveratioequilibrium,everyagenti = 1,...,nhastoplayabest-response
intheski-rentalproblemwithvaryingpricespi = (p ) , p = max(B −(cid:80) f (j),0).
j j≥1 j k̸=i k
Notethat,strictlyspeaking,theagentisabletomakeinconsequentialpledgesondaysj ̸= r:
this departs from the parallel with ski-rental with varying prices, but does not affect agents’
competitive ratio anyway, since the license doesn’t get bought. By point (a). the license is
bought on a day r. So
(cid:80)n
f (r) ≥ B. In fact
(cid:80)n
f (r) = B: if it were not the case
j=1 j j=1 j
thenanyparticipatingagentcouldloweritspricepaidondayr(henceitscompetitiveratio)by
pledgingjustenoughtobuythelicense. Finally,notethat(bydefinition)foreveryi=1,...n,
M =M (pi).
i ∗
(ii.) Considersuchanagenti. Thehypothesisimpliesthefactthatitwillhaveafreedayonday
r ≤M +1. Soitisoptimal(1-competitive)fortheagentinottopledgeanypositiveamounts
i
andsimplywaitforitsfreeday. Thereforef (r)=0(seeFootnote4inthemainpaper). Infact,
i
itisequallyoptimalfortheagenttomakeinconsequentialpledgesbeforedayr,astheydon’t
leadtogettingthelicense.
15(iii). Considersuchanagenti. Thehypothesisimpliesthefactthatithasabargaindayonaday
k ≤min(r,M ). Thentheagent’soptimallycompetitivestrategyistopledgeondayk. Given
i
thatthelicenseisboughtondayr,itiseitherthecasethatthefirstsuchdayisk = r orthat
k =r−1andrisafreedayforagenti. Inthiscasetheagentdoesn’thavetopledgeonday
r−1sinceitgetsthelicenseforfreeondayr.
(iv). Considernowanagentisuchthatf (r)>1. Fromtheagent’sperspectiveP =j−1+B−
i j
(cid:80) f (j). InparticularM (pi)≤P ≤B.
k̸=i k ∗ 1
Theagenthasnofree/bargaindays. Wehavetoshowthatdayr isanoptimaldaytobuyfor
agentr.
(cid:80)
Indeed, first consider j ̸= r, j ≤ M . By the assumption we have f (j) ≤ B −1−
i k̸=i k
j (f (r)−r−1)andj = OPT ,henceP = j−1+B−(cid:80) f (j) ≥ j−1+B−
OPTr i j j k̸=i k
(B−1)+ j (f (r)+r−1)= OPTj ·(r+f (r)−1)= OPTj ·P forj <r.
OPTr i OPTr i OPTr r
Similarly,onecanshowthatifj >M i =M ∗(p)then OP Pr Tr ≤ MP ∗j (p) = OP Pj Tj.
Henceitisoptimalfortheagenttopledgeondayr,andtheagentdoesso.
(c). Firstofall,itiseasytoseethatthestrategyprofilesmentionedintheresultareNashequilibria: to
provethiswehavetosimplyshowthateveryagentusestheoptimalcompetitivealgorithm,given
thebehaviorofotheragents.
Consider first an agent i ̸∈ S. It will have a free day on day r. Given that (from the agent’s
perspective)p =Bforj ̸=r,p =0,sowehaveM (p)=min(j−1+B :j ̸=r,r−1+p )=
j r ∗ r
min(B,r−1). Ifr ≤B+1thenitisoptimal(1-competitive)fortheagentinottopledgeany
positiveamountsandsimplywaitforitsfreeday, whichrealizesminimalcostM (p)(andthe
∗
agent does so). If r > B = M (p) then to find the optimal action we have to compare ratios
∗
Pj forj ≤M (p),togetherwiththecost QM∗(p). Giventheconcreteformofsequence(p )we
j ∗ M∗(p) j
have Pj = 1+ B−1 forj ≤ B,theminimalratiobeingobtainedforj = B. Ontheotherhand
j j
P =s−1+B ≥2B−1ifs≥B,s̸=r,whileP =r−1. Aslongasr ≤2B,theminimal
s r
costisattainedatr,while Pr = r−1 ≤ 2B−1. Soifr ≤2B thenitisoptimaltowaitforthe
OPTr B B
freedayr,andtheagentdoesso.
Considernowanagenti ∈ S. Fromtheagent’sperspectivep = B forj ̸= r,p = w ,sowe
j r i
haveM (p)=min(j−1+B :j ̸=r,r−1+w )=min(B,r−1+w ). Also,notethatnone
∗ i i
ofthedaysdifferentfromdayrisafree/bargainday,sinceB >1.
Ifw =1andr ≤BthenM (p)=min(B,r)=r. Sotheagentagenthasabargaindayonday
i ∗
r ≤M (p). Furthermore,dayr+1isnotafreeday(p =B)soitisoptimalfortheagentto
∗ r+1
buyondayr,andtheagentdoesso.
If,ontheotherhandw >1orw =1andr >Bthenwehavetoshowthatdayrisanoptimal
i i
daytobuyforagenti.
– Case1: w i >1andr ≤M ∗(p). Wehave OP Pr Tr =1+ wi r−1 ifr ≤M ∗(p).
Ifj <r ≤M ∗(p)thenB−1≥w i−1and P jj =1+ B− j1. Theinequality P jj ≥ P rr follows
fromthesetwoinequalities.
If, on the other hand r < j ≤ M ∗(p) ≤ B then, since w i −1 ≤ r MB ∗− (p1 ), we have P rr ≤
1+ B−1 ≤1+ B−1 = Pj. Finally,ifj >M (p)≥rthensincew −1≤r B−1 ,wehave
M∗(p) j j ∗ i M∗(p)
P rr = 1+ wi r−1 ≤ 1+ MB ∗− (p1
)
≤ j M+ ∗B (− p)1 = OP Pj Tj. Henceifr ≤ M ∗(p)thenitisoptimalfor
theagenttopledgeondayr,andtheagentdoesso.
– Case2: w =1andr >B.
i
In this case M (p) = B. To compute the optimal algorithm we have to compare Pj for
∗ j
j =1,...,Bwith
QM∗(p).
M∗(p)
Ononehand,sincej ≤B <r, Pj =1+ B−1 ≥1+ B−1.
j j B
OntheotherhandQ =min(2B−1,r). So QM∗(p) =min(1+ B−1, r). Forr ≤2B−1it
B M∗(p) B B
isoptimalfortheagenttopledgeondayr,andtheagentdoesso.
– Case3: w >1andr >B.
i
16Indeed,P =j−1+Bforj ̸=r,P =r−1+w =r.Soforj ̸=rwehave Pj =1+B−1
j r i OPTj j
ifj ≤B, Pj =1+ j−1 ifB <j ̸=r. Ontheotherhand Pr = r−1+1 = r. Aslongas
OPTj B OPTr B B
r ≤2B−1, Pr ≤ Pj .
OPTr OPTj
Conversely,assumethat(W ,W ,...,W )isaprogramequilibriumsuchthatthelicensegets
1 2 n
boughtondayr. IfthetotalpledgesondayrwerelargerthanBtheoneoftheagentspledgingon
dayrcouldloweritspledge,thereforeloweringitscompetitiveratio. LetS bethesetofagents
(cid:80)
whosepledgesarepositiveonthatday. Bythepreviousdiscussionwehave w =B.
i∈S i
Assumenowthatsomeagentwaspledgingonadifferentdaythanr. Theneitherthispledgeis
inconsequentialoritistoolate. Thefirstalternativecannothappen: eachagentpledgestheamount
neededtocompletethesumpledgedbyotheragentsuptoB. Sothepledgeislate. Inthiscasethe
agenthasafreedaybythetimeitwouldbeoptimaltopledge,soitwouldbeoptimaltorefrain
frompledging.
Considernowanagentk ∈S thatispledgingondayr. Therearetwopossibilities:
- Dayrisabargaindayfork. Thatisw =1.
k
- Dayr isanoptimaldayforagentk. Notethatthepricestheagentfacesarep = B ondays
i
i̸=r,p =w . Inorderforpledgingondayrtobeoptimal(withcompetitiveratioequalto
r k
Pr)wehavetohave
r
* P ii ≥ OP Pr
Tr
fori≤M ∗(p),i̸=r. Thatis1+ B− i1 ≥1+ wk r−1 ifr ≤M ∗(p),1+ B− i1 ≥
1+ Mwk ∗− (p1
)
ifr >M ∗(p). Let’streatthetwocasesseparately:
· r ≤M (p): Theinequalityistrueifi≤rsincew ≤B. Tomakethistrueforalldaysi,
∗ k
r <i≤M ∗(p)wealsohavetohave MB ∗− (p1
)
≥ wk r−1,thatis(w k−1)M ∗(p)≤r(B−1).
· r >M (p): Theinequalityistruesincew ≤B.
∗ k
* MP ∗(i p) ≥ OP Pr Tr for i ≥ M ∗(p). That is i M−1 ∗+ (pB ) ≥ r−1 r+wk if r ≤ M ∗(p), P i ≥ P r if
r >M ∗(p). Thefirstinequalityrequiresthat MB ∗− (p1
)
≥ wk r−1 (sincetheboundfori=M ∗(p)
istightest)i.e. (w −1)M (p)≤(B−1)r.
k ∗
ThesecondinequalityimpliesthatP =2B−1≥P =r+w −1,sinceM (p)=B.
M∗(p) r k ∗
Fromthisitfollowsthatr ≤2B−1.
d. AneasyapplicationofTheorem3.7.
A.4 ProofofTheorem4.2
Assumefirstthatpissuchthatf (p)=∞.
2
Consider a prediction when T(cid:98) < M ∗(p). e.g. T(cid:98) = 0. Since f 2(p) = ∞, for every T ≥ 1 the
algorithmwillrentforT steps. ForT ≥M (p)OPT =T. Thecompetitiveratiointhiscaseis
∗ T
T ,whichisunbounded.
M∗(p)
Assumenowthatf (p)<∞. Weanalyzethevariouspossiblecasesinthealgorithm. Someofthese
2
caseswillbecompatiblewiththehypothesisη = 0,i.e. withequalityT(cid:98) = T. Theircompetitive
ratioswillcontributetothefinalupperboundonconsistency. Therestoftheboundsonlycontribute
tothefinalupperboundonrobustness.
• Case1: T(cid:98) ≥ M T(cid:98)(P),T ≥ M ∗(P) ≥ f 1(p)(compatiblewithη = 0). ALG = P f1(p),OPT =
M (P).
∗
• Case2: T(cid:98) ≥ M T(cid:98)(P),T ≥ f 1(p) > M ∗(P)(compatiblewithη = 0). ALG = P f1(p),OPT =
M (P).
∗
• Case3: T(cid:98)≥M T(cid:98)(P),f 1(p)>T ≥M ∗(P)(compatiblewithη =0.) ALG=T ≤P f1(p)(since
T ≤f (p)−1≤P ),OPT =M (P).
1 f1(p) ∗
• Case4: T(cid:98)<M T(cid:98)(P),T <f 2(p)≤M ∗(P)(compatiblewithη =0.). ALG=T,OPT =T.
• Case5: T(cid:98) < M T(cid:98)(P),f 2(p) ≤ T < M ∗(P)(compatiblewithη = 0). ALG = P f2(p),OPT =
T ≥f (p).
2
17Algorithm2Analgorithmthatblindlyfollowsthepredictor.
Input: (p,T)
Predictor: T(cid:98)≥1,aninteger.
if(T(cid:98)≥min(P
i
:i≤T(cid:98)))then
buyonanydayi ≤T suchthat
1
P
i1
=min(P
i
:i≤T(cid:98))
else
keeprenting.
• Case6: T(cid:98)≥M T(cid:98)(P),T <f 1(p)≤M ∗(P). (incompatiblewithη =0.) ALG=T,OPT =T.
• Case 7: T(cid:98) ≥ M T(cid:98)(P), f 1(p) ≤ T < M ∗(P) (incompatible with η = 0). ALG = P f1(p),
OPT =T ≥f (p).
1
• Case8: T(cid:98) < M T(cid:98)(P),f 2(p),M ∗(P) ≤ T (incompatiblewithη = 0). ALG = P f2(p),OPT =
M (P).
∗
• Case 9: T(cid:98) < M T(cid:98)(P), f 2(p) > T, M ∗(P) ≤ T (incompatible with η = 0). ALG = T ≤
f (p)−1≤P ,OPT =M (P).
2 f2(p) ∗
Thecompetitiveratios(differentfrom1)compatiblewithη =0are:
P P
f1(p)
,
f2(p)
(1)
M (P) f (p)
∗ 2
The second bound is compatible, however, only when f (p) < M (p). Thus the algorithm is
2 ∗
max( MPf ∗1 (( Pp) ),P ff 22 (( pp )))-consistentwhenf 2(p)<M ∗(p), MPf ∗1 (( Pp) )-consistent,otherwise.
Theupperboundscompetitiveratios(differentfrom1)incompatiblewithη =0are:
P P
f1(p)
,
f2(p)
(2)
f (p) M (p)
1 ∗
Thusthealgorithmismax(Pf1(p),Pf2(p),Pf1(p),Pf2(p))-robust.
Sothefinalboundonrobustnessis
M∗(P) f2(p) f1(p) M∗(p)
max(
Pf1(p)
,
Pf2(p)
)=max(
Pf1(p)
,
Pf2(p)
)
min(f1(p),M∗(p)) min(f2(p),M∗(p)) OPTf1(p)(p) OPTf2(p)(p)
A.5 ProofofTheorem4.3
Proof. Thefirstpartisclear: onanyinput(P,T =T(cid:98))thealgorithmwillchoosetheoptimalaction.
For the second part, if T(cid:98) = 1 then the algorithm will rent for T days, while OPT pays at most
P ≤M. Sothecompetitiveratioisatleast T . MakingT →∞wegetthedesiredconclusion.
1 M
A.6 ProofofTheorem4.4
WefirstrevisitExample1inthepaper,addingtoitsomeextraquantitiesfromthealgorithm:
Example A.4. In the classical, fixed-cost case of ski-rental, P = B +i−1. We have k(p) =
i
M ∗(p)=B,i ∗(p)=1,i ∗(p)=1irrespectiveofthevalueofT(cid:98)andr 1(p)=B.
Westartbyprovingsomeusefulauxiliaryresults. First,intheconditionsofExample1inthepaper
wehadr (p)≤r (p)≤M (p). Thisgeneralizes,althoughnotcompletely:
0 1 ∗
LemmaA.5. Ifthereisnofreedayf ≤M (p)+1thenwehaver (p)≤r (p).
∗ 0 1
Proof. Clearlyr ≤ M (p): indeed,forallr ≥ M (p)+2wehaveP ≥ M (p)+1. Sinceday
0 ∗ ∗ r ∗
M (p)+1isnotfree,P ≥M (p)+1aswell. Theclaimfollows.
∗ M∗(p)+1 ∗
18Supposethatr <r . Then,bydefinitionofr ,P ≥P . But,bythedefinitionofr ,
1 0 0 r1 r0 1
P P
r1 ≤ r0 .
OPT OPT
r1 r0
Sinceweassumedthatr <r ≤M (p),thisyields
1 0 ∗
P P
r1 ≤ r0,
r r
1 0
hence
P r
1≤ r1 ≤ 1 <1, acontradiction.
P r
r0 0
Theonlyremainingpossibilityisthatr ≤r .
0 1
LemmaA.6. WehaveP =Q andP −λOPT =min(P −λOPT :i≥r ).
r1 r1 r1 r1 i i 1
Proof. Bytheoptimalityofr forthecompetitiveratio,foralli≥r wehave
1 1
P P
r1 ≤ i .
OPT OPT
r1 i
SoP /P ≤ OPT /OPT ≤ 1,whichshowsthatP ≤ P ,henceP = Q . Theinequality
r1 i r1 i r1 i r1 r1
OPT ≤OPT followsfromLemma4.6andthefactthatr ≤i.
r1 i 1
Asforthesecondinequality,wewrite
P P
r1 −λ≤ i −λ.
OPT OPT
r1 i
So P Pr1 i− −λ λO OP PT Tr i1 ≤ O OP PT Tr i1 ≤1fori≥r 1.
InconclusionP −λOPT ≤P −λOPT foralli≥r .
r1 r1 i i 1
CorollaryA.7. r inAlgorithm1inthemainpapersatisfiesr ≤r .
2 2 1
LemmaA.8. P rr 22 ≤ λ1c OPT(p)+λ−1.
Proof. Bythedefinitionofr wehaveP −λr ≤P −λr so
2 r2 2 r1 1
P P −λr P −λr r P −λr
r2 ≤λ+ r2 2 ≤λ+ r1 1 ≤λ+ 1 r1 1
r r r r r
2 2 2 2 1
r P 1 P 1P 1
≤λ+ 1 ( r1 −λ)=λ+ ( r1 −λ)= r1 +λ−1≤ c (p)+λ−1
λr r λ r λ r λ OPT
1 1 1 1
Wehaveusedinequalityr ≥(1−λ)(r −1)+λr ≥λr .
2 0 1 1
Wehavealsomadetheassumptionthat P rr 11 ≤c OPT(p). Infactc OPT(p)= OP Pr T1 r1,andOPT r1 =
min(r ,M (p))≤r ,sothisiscorrect.
1 ∗ 1
Wenowreturntotheproofofthemaintheorem.
Each upper bound for consistency/robustness has two terms. The ones containing r cannot be
2
improved (at least without changing the definition of r in Line 6 of Algorithm 2). But we can
2
choose r to optimize consistency, while still guaranteeing a 1+ 1(c (p)−1) upper bound
3 λ OPT
for robustness. Since P rr 22 ≤ λ − 1 + λ1c OPT(p), this amounts to minimizing P rr 33 subject to
OPP Tr r3
3(p)
≤λ−1+ λ1c OPT(p).
The robustness upper bound is thus at most λ − 1 + 1c (p). The consistency bound is
λ OPT
max(
Pr2 ,Pr3)(oronlythefirstterm,whicheveristhecase).
M∗(P) r3
19A.7 ProofofLemma4.6(a).
Proof. Firstinequality.
FirstnotethatM (p)doesnotdependonλ,butP maydoso. Forλ <λ wehave⌈(1−λ )(r −
∗ r2 1 2 1 0
1)+λ r ⌉≤⌈(1−λ )(r −1)+λ r ⌉,so,bythedefinitionofr wehavethatr (λ )isacandidate
1 1 2 0 2 1 2 2 2
inthedefinitionofr (λ ),so
2 1
P −λ OPT ≤P −λ OPT (3)
r2(λ1) 1 r2(λ1) r2(λ2) 1 r2(λ2)
• IfOPT =r (λ)forλ∈{λ ,λ },thistranslatesto
r2(λ) 2 1 2
P −λ r (λ )≤P −λ r (λ ). (4)
r2(λ1) 1 2 1 r2(λ2) 1 2 2
If we could prove that r (λ ) ≤ r (λ ) then it would follow that P ≤ P . Assume,
2 1 2 2 r2(λ1) r2(λ2)
therefore,that
r (λ )>r (λ ). (5)
2 1 2 2
Becauseofthisrelationandthedefinitionoffunctionr wehave
2
P −λ r (λ )≤P −λ r (λ ). (6)
r2(λ2) 2 2 2 r2(λ1) 2 2 1
Butthen
(10)
P −λ r (λ )=P −λ r (λ )+(λ −λ )r (λ ) ≤ P −λ r (λ )+
r2(λ1) 2 2 1 r2(λ1) 1 2 1 1 2 2 1 r2(λ2) 1 2 2
+(λ −λ )r (λ )≤≤P −λ r (λ )+(λ −λ )r (λ )+(λ −λ )r (λ )=
1 2 2 1 r2(λ2) 2 2 2 2 1 2 2 1 2 2 1
(11)
P −λ r (λ )+(λ −λ )(r (λ )−r (λ )) < P −λ r (λ )
r2(λ2) 2 2 2 2 1 2 2 2 1 r2(λ2) 2 2 2
contradicting(6). Sor (λ )≤r (λ ),andtheinequalityP ≤P follows.
2 1 2 2 r2(λ1) r2(λ2)
• IfontheotherhandOPT =OPT =M (p)wegetagainP ≤P by(3).
r2(λ1) r2(λ2) ∗ r2(λ1) r2(λ2)
• TheremainingcaseiswhenoneofOPT ,OPT isM (p),theotherisnot.
r2(λ1) r2(λ2) ∗
AgainthecaseOPT =r (λ )≤M (p),OPT =M (p)yieldsdirectly,via(3),the
r2(λ1) 2 1 ∗ r2(λ2) ∗
conclusionP ≤P . SoassumethatOPT =M (p)andOPT =r (λ )≤
r2(λ1) r2(λ2) r2(λ1) ∗ r2(λ2) 2 2
M (p). Sor (λ )≤M (p)≤r (λ ).
∗ 2 2 ∗ 2 1
Becauseofthisrelationandthedefinitionoffunctionr wehave
2
P −λ OPT ≤P −λ OPT . (7)
r2(λ2) 2 r2(λ2) r2(λ1) 2 r2(λ1)
thatis
P −λ r (λ )≤P −λ M (p). (8)
r2(λ2) 2 2 2 r2(λ1) 2 ∗
Butthen
(10)
P −λ OPT =P −λ M (p)+(λ −λ )M (p) ≤ P −λ r (λ )+
r2(λ1) 2 r2(λ1) r2(λ1) 1 ∗ 1 2 ∗ r2(λ2) 1 2 2
(λ −λ )M (p)≤P −λ r (λ )+(λ −λ )r (λ )+(λ −λ )M (p)=P −
1 2 ∗ r2(λ2) 2 2 2 2 1 2 2 1 2 ∗ r2(λ2)
(11)
λ r (λ )+(λ −λ )(r (λ )−M (p)) < P −λ r (λ )
2 2 2 2 1 2 2 ∗ r2(λ2) 2 2 2
contradicting(8). Sotheproofofthefirstinequalityiscomplete.
Secondinequality.
Asforthesecondinequality,sinceλ <λ ≤1andc (p)≥1,wehave
1 2 OPT
(λ −λ )
λ −λ ≤ 2 1 c (p) (9)
2 1 λ λ OPT
1 2
Butthisisequivalenttoλ + 1 c (p)≤λ + 1 c (p),so
2 λ2 OPT 1 λ1 OPT
1 1
λ −1+ c (p)≤λ −1+ c (p) (10)
2 λ OPT 1 λ OPT
2 1
Thisshowsthatr 3(λ 2)isamongthecandidatesforr 3(λ 1). Butthismeansthat P rr 33 (( λλ 11 )) ≤ P rr 33 (( λλ 22 )).
20A.8 ProofofLemma4.6(b).
Proof. Chooseλsmallenoughsuchthatr ≥ (1−λ)(r −1)+λr ,thatisλ(r −r +1) ≤ 1.
0 0 1 1 0
Then⌈(1−λ)(r −1)+λr ⌉=r .
0 1 0
To show that for small values of λ we have r = r it is enough to show that for such values of
2 0
λwehaveP −λOPT ≤ P −λOPT forallr ≥ r . Weprovedabovethatr ≤ M (p)so,
r0 r0 r r 0 0 ∗
by Lemma 4.6, this is equivalent to P −λr ≤ P −λOPT for all r ≥ r This amounts to
r0 0 r r 0
λ(OPT −r )≤P −P . SinceOPT =min(r,M (p))≥r ,thetermontheleft-handsideis
r 0 r r0 r ∗ 0
non-negative. Ifitiszerothentheinequalityistrueforallvaluesofλ,sinceP ≥P =M (p). If,
r r0 ∗
ontheotherhandr <OPT thentomaketheinequalitytrue,giventhatOPT ≤M (p),isenough
0 r r ∗
thatλ< 1 .Wehaveusedherethefactthatforr >r wehaveP −P ≥1.Thisisbecause
M∗(p)−r0 0 r r0
r isthelargestvalueforwhichP =M (p).Henceforr >r wehaveP ≥M (p)+1=P +1.
0 r0 ∗ 0 r ∗ r0
Nowchoosingλ< 1 isenoughtosatisfybothconditions.
M∗(p)−r0+1
A.9 ProofofTheorem5.1
Fromtheperspectiveofagentktheproblemisaski-rentalproblemwiththefollowingcosts:p =w ,
r k
p =Bforj ̸=r. ThereforeP =r−1+w ,P =j−1+Bforj ̸=r.
j r k j
ApplyingAlgorithm2tothisinputsequenceyieldsthefollowingquantities:
- Ifr = 1thenM (p) = min(i−1+B : i ̸= r,r−1+w ) = min(B,w ) = w . Therefore
∗ k k k
i ∗ = r 0 = 1. To compute r 1 we need to compare P 11 = w k, P ii = 1+ B− i1 for i < w k and
QM∗(p)
=
Pwk.
M∗(p) wk
– If w = 1 then r = 1, so r = 1. c (p) = P = 1. To choose r we need that
k 1 2 OPT 1 3
P
r3
≤ OPT r3(λ − 1 + λ1), minimizing the ratio P rr 33. For j ≥ 2 P
j
= j − 1 + B so
P jj =1+ B− j1 >1. Sor 3 =1,since P 11 =1. Inthiscasethealgorithmalwaysbuysonday1
andis1-competitiveand1-robust.
– If w k ≥ 2 then since w k ≤ P ww kk = 1+ B w− k1 (equivalently wk B(w −k 1−1) ≤ 1) and 1+ B w− k1 <
1+ B− i1 fori<w k,wehaver 1 =1. Sor 2 =1,c OPT(p)=w k. Also MP ∗r (2 p) =1.
Theconditionforr 3reads OP Pr T3
r3
≤λ−1+ λ1w k. Since P ii =1+ B− i1,tofindr 3weattempt
togetthelargestpossiblevaluewhichsatisfiesthiscondition.
Firstofall,r 3 = 1works,sinceconditionreads w 1k ≤ λ−1+ w λk,or(w k −λ)( λ1 −1) ≥ 0
whichistrue,sinceλ∈(0,1].
If2 ≤ r 3 ≤ M ∗(p),r 3 ̸= r,thenconditionreads OP Pr T3
r3
= 1+ B r− 31 ≤ λ−1+ w λk. Thisis
actuallyalowerboundonr :
3
λ(B−1) λ(B−1)
M (p)=w ≥r ≥ =
∗ k 3 λ2−2λ+w λ2−2λ+c
k OPT
Soeitherr =w works(but,ofcourse,maynotbethelargestvalue)ifw ≥ λ(B−1) ,or
3 k k λ2−2λ+cOPT
novalue2≤r ≤w works.
3 k
Wenowsearchforr ≥M (p).ThismeanswecanassumethatOPT =w ,andthecondition
becomes r
−1+3
B ≤
w∗
(λ−1+ 1w ), equivalently r ≤
1−r3
B
+wk
(λ−1+ 1w ).
3 k λ k 3 k λ k
Togetavaluer ≥ M (p) = w weneedagainthatw (λ−2+ 1c ) ≥ B −1,thatis
3 ∗ k k λ OPT
w ≥ λ(B−1) .
k λ2−2λ+wk
Inconclusion,whenr =1andw ≥2wehave
k
(cid:26) 1−B+⌊w (λ−1+ 1w )⌋ ifw ≥ λ(B−1)
r
3
= k λ k k λ2−2λ+wk
1 otherwise.
Ofthesetwovaluesonlythesecondoneis<M (p). Hence,inthefirstcaser doesnotcontribute
∗ 3
towardstheconsistencybound,andtheconsistencyboundis1.
21- If2≤r ≤M ∗(p)thenM ∗(p)=min(B,r−1+w k),r
1
=r,c
OPT
=1+ wk r−1,and
(cid:26)
1 ifM (p)=B
i = ∗
∗ r otherwise.
(cid:26)
1 ifB <r−1+w
r = k
0 r otherwise.
(cid:26)
⌈λr⌉ ifB+⌈λr⌉−1<r−1+w
r = k
2 r otherwise.

1+ ⌈λr⌉−1 ifB+⌈λr⌉−1<r+w −1
MP r (2
p)
= r+w Bk−1B ifB+⌈λr⌉−1>r+wk k−1>B
∗  1 ifM (p)=r+w −1≤B)
∗ k
Let’slooknowforallther ’ssatisfyingtheconditioninthealgorithm,sothatwecanchoosethe
3
oneminimizingratio
Pr3.
Therearethreecases:
r3
(a). 1≤r <M (p),r ̸=r.
3 ∗ 3
(b). r ≥M (p),r ̸=r.
3 ∗ 3
(c). r =r ≤M (p).
3 ∗
Let’sdealwiththesecasesinturn:
(a). First,let’slookfor1≤r <M (p). Weneed:
3 ∗
P 1 1 w −1
r3 ≤λ−1+ ·c =λ−1+ ·(1+ k )
r λ OPT λ r
3
Forr
3
̸= r theconditionreads1+ B r− 31 ≤ λ−1+ λ1 ·(1+ wk r−1). WegetM ∗(p) ≥ r
3
≥
λ−1+( 1B ·(− 1+1) wk−1),sothiscaseispossibleonlyifM ∗(p)[wk rλ−1 + (λ− λ1)2 ] ≥ B −1,inwhich
λ r
caser 3 =M ∗(p),thelargestvalue,minimizesratio P rr 33 amongvalues≤M ∗(p).
(b). Wenowlookforr ≥M (p)satisfyingtheconditionfromthealgorithm:
3 ∗
Pr3 ≤λ−1+ 1(1+ wk−1),or
M∗(p) λ r
r −1+B 1 w −1
3 ≤λ−1+ (1+ k )
M (p) λ r
∗
yieldingM ∗(p)<r
3
≤1−B+M ∗(p)(λ−1+ λ1(1+ wk r−1)). Tohavesuchanr 3weneed
M ∗(p)[wk rλ−1 + (λ− λ1)2 ]>B−1.
(c). Wealsoneedtocheckconditionforr =r,thatis
3
P 1 1 w −1
r ≤λ−1+ c =λ−1+ (1+ k )
OPT λ OPT λ r
r
i.e.
w −1 1 w −1
1+ k ≤λ−1+ (1+ k ),
r λ r
that is (1+ wk−1)(1 −1)+(λ−1) ≥ 0. which is always true, since it is equivalent to
r λ
(1−λ)[1(1+ wk−1)−1]≥0.
λ r
Theconclusionisthatthelargestr iseither≥M (p)oritisequaltor,andistheonlyacceptable
3 ∗
value. Thatis,r isequalto:
3
(cid:40)
rifM ∗(p)[wk rλ−1 + (λ− λ1)2 ]≤B−1
1−B+⌊M ∗(p)(λ−1+ λ1(1+ wk r−1))⌋ifM ∗(p)[wk rλ−1 + (λ− λ1)2 ]>B−1.
and
Pr3
isequalto
r3

 1+ wk r−1 ifM ∗(p)[wk rλ−1 + (λ− λ1)2 ]≤B−1

1+ 1−B+⌊M∗(p)(λB −− 11
+ λ1(1+wk r−1))⌋
ifM ∗(p)[wk rλ−1 + (λ− λ1)2 ]>B−1
22Inthesecondcase,though,wehaver >M (p). Sointhiscaser ,byTheorem4.2,r doesnot
3 ∗ 3 3
contributetotheconsistencybound.
Puttingthingstogether,theconsistencyguaranteesforthecase2≤r ≤M (p)are
∗


11 ++m ⌈λa
r
B⌉x −( 1⌈λ ,r
B
i⌉ f− B1, +wk ⌈r− λ1 r) ⌉i −fM 1<∗(p r) +[wk
r
wλ− k1 −+ 1( aλ n−
λ
d1) M2 ] ∗≤ (pB )[w−
k
rλ−1 1,B ++ (λ⌈
−
λλ 1r )2⌉ ]− >1 B< −r 1+w k−1
 11+ ifMwk ∗r− (p1 )i [f wM
k
rλ−∗ 1(p +)[w (λk r −λ− λ11 )2+ ]>(λ B− λ1 −)2 ] 1≤ anB dr− +1 wan kd −r 1+ ≤w k B−1≤B
- IfM ∗(p) < r ≤ 2B−1thenM ∗(p) = B,r
1
= r,c
OPT
= r+w Bk−1,i
∗
= 1,r
0
= 1(sinceday
M (p)+1isnotafreeday)and
∗
(cid:26)
⌈λr⌉ ifB+⌈λr⌉−1<r−1+w
r = k
2 r otherwise.
P r2 =(cid:26) 1+ ⌈λr B⌉−1 ifB+⌈λr⌉−1<r+w k−1
M ∗(p) r+w Bk−1 otherwise.
Theconditionthatr hastosatisfyis
3
P r+w −1
r3 ≤λ−1+ k
OPT λB
r3
Firstwecheckthecaser =r. Sincer >M (p)itfollowsthatM (p)=Bandtheconditionto
3 ∗ ∗
satisfybecomes
r+w −1 1r+w −1
k ≤λ−1+ k
B λ B
i.e.
r+w −1
(1−λ)( k −1)≥0
λB
aconditionthatisclearlytrue. Sor > M (p),whichmeansthatr doesnotcontributetothe
3 ∗ 3
consistencybound.
Sointhiscasetheconsistencyguaranteeis
(cid:26) 1+ ⌈λr⌉−1 ifB+⌈λr⌉−1<r+w −1
B k
r+wk−1 otherwise.
B
A.10 ProofofTheorem7.2
(a). Assumeotherwise: supposethat(W ,W ,...W )wasaprogramequilibriumwhereforsome
1 2 n
combinationofpredictionsthelicensenevergetsbought. Thisisbecausepledgesonanydaynever
adduptothelicensingcostB. Considertheperspectiveofagenti. Itwillneverhaveafree/bargain
day. Tokeeptherobustnessundercontrolitwillneedtopledgetherequiredamountonadayr
suchthat
P 1 P
r ≤ −1+λ r1
OPT λ i r
r i 1
thatisr ≤P
r
≤M ∗(p)( λ1
i
−1)+M ∗(p)λ iP rr 11.
(b). Consideranarbitraryrunp. Supposekisanagentthatpledgesamountw tobuythegrouplicense
k
ondayr.Fromtheperspectiveofagentk,thesetofpricesitexperiencesintheassociatedski-rental
problemwithvaryingpricesisasfollows: P =r−1+w ifristhedaythealgorithmpledges
r k
on,P =j−1+B,otherwise. Thisisbecausetheagentsarerational: theydon’tpledgeunless
j
theirpledgeleadstobuyingthelicenseonthatday(andkisdifferentfromdayr).
ForsuchasequenceM (p)iseitherBorr−1+w andisreachedeitheronday1orondayr.
∗ k
Indeed,ifr = 1thenw ≤ B soM (p) = w = r−1+w = min(r−1+w ,B) = w . If
k ∗ k k k k
r > 1thenM (p) = min(B,r−1+w ),sinceB isthepricetheagentwouldhavetopayon
∗ k
day1. Therefore
(cid:26)
Bifr−1+w >B
M (p)= k
∗ r−1+w otherwise.
k
23(cid:26)
1ifM (p)=Borr =1
i = ∗
∗ rotherwise.
To determine r 1 note that P jj = 1+ B− j1 for j ̸= r,j ≤ M ∗(p), while OP Pr Tr = 1+ wk r−1 if
r ≤M ∗(p),while OP Pr
Tr
= r+ Mw ∗k (p− )1 ifr >M ∗(p). OntheotherhandQ
M∗(p)
=M ∗(p)+B−1
ifr ≤ M (p),Q = min(M (p)+B−1,r+w −1),otherwise. So
QM∗(p)
= min(1+
∗ M∗(p) ∗ k M∗(p)
MB ∗− (p1 ),r+ Mw ∗k (p− )1)ifr >M ∗(p),1+ MB ∗− (p1
)
otherwise.
Notethatthecaser =M ∗(p), M∗B (− p)1
−1
≤ wk r−1 isimpossible,sincew
k
≤B. So
– Ifr ≤M (p)then
∗


M ∗(p)ifM ∗(p)̸=r, MB ∗− (p1
)
< wk r−1
r
1
=

rifM ∗(p)̸=r, MB ∗− (p1
)
≥ wk r−1
M (p)ifM (p)=r
∗ ∗
– Ifr >M (p)then
∗


M ∗(p)ifM ∗(p)̸=r,1+ MB ∗− (p1
)
< r+ Mw ∗k (p− )1
r 1 =

rifM ∗(p)̸=r,1+ MB ∗− (p1 ) ≥ r+ Mw ∗k (p− )1
rifM (p)=r
∗
NotingthatM ∗(p)=r ⇒ MB ∗− (p1
)
≥ wk r−1,weinferthat
P (cid:26) 1+ B−1 if B−1 < wk−1 B−1 w −1
rr 11 =c opt(p)=
1+
M wk∗ r−(p 1) othM er∗ w(p is)
e
r =1+min(
M
∗(p), k
r
)ifr ≤M ∗(p),
and
(cid:40)
P
r1 =c (p)=
1+ MB ∗− (p1
)
ifB−1+M ∗(p)<r+w k−1
OPT opt r+wk−1 otherwise
1 M∗(p)
min(M (p)+B−1,r+w −1)
= ∗ k ifr >M (p),
M (p) ∗
∗
(thissolvespoint(c). ofthetheorem),Wewanttofindconditionssuchthatpledgingondayris
λ -robust. Forr ≤M (p)thisis
k ∗
w −1 1 B−1 w −1 1
k ≤ +λ c (p)−2=λ ·min( , k )+λ + −2
r λ k OPT k M (p) r k λ
k ∗ k
Sinceλ
k
≥1andw
k
≥1, wk r−1 ≤λ kwk r−1. Alsoλ k+ λ1
k
≥2.
Sowhenr ≤M ∗(p)allwehavetohaveis wk r−1 ≤λ kMB ∗− (p1
)
+λ k+ λ1
k
−2,theconditioninthe
Theorem.
Similarly,whenr >M (p)weneedtohave
∗
r+w −1 min(M (p)+B−1,r+w −1) 1
k ≤λ ∗ k +λ + −2
M (p) k M (p) k λ
∗ ∗ k
Again,oneoftheboundsistriviallytrue,soweneed:
r+w −1 2B−1 1
k ≤λ +λ + −2
M (p) k M (p) k λ
∗ ∗ k
or
1
r+w −1≤λ (2B−1)+(λ + −2)·B
k k k λ
k
(c).
24B Appendix. Furtherexperimentalinvestigationsforski-rentalproblems
arisingfromequilibria
Inthissectionwegivesomedetailsonthesomewhatmorecomplexbehavioralludedtointhemain
paper. Thisisnotmeanttobeacomprehensivestudy,onlygiveanideaofthetypicalbehaviorofour
algorithm.
Ourconclusions,inanutshell,areasfollows:
• Someequilibriaseemtobe"veryeasy",inthatthepredictionlessalgorithmisabletofind
optimal(1-competitive)solutionsformostinstances. Whenthishappensaddingprediction
doesnotseemtohelp.
• Ifthisisnotthecasethenthebehavioristheonedescribedinthemainpaper,characteristic
of"normal"equilibria.
• Increasing parameter w may turn an equilibrium from "very easy" to "normal". Such a
transitionhappenswhengoingfrom(r =75,w =19)to(r =75,w =20).
B.1 Verifyingthat(r =75,w =70)isanequilibrium
Inthissectionwecheckthatthepair(r =75,w =70)satisfiestheconditionsofTheorem3.1(c),so
itisindeedanequilibrium. Indeed,theright-handsideisr(B−1)=75∗99=7425. Ifw =70,
k
(w −1)·min(B,r+w −1)=69·min(100,75+70−1)=6900.So(w −1)·min(B,r+w −1)<
k k k k
r(B−1).
The worst-case robustness upper bound is 1+ wk−1 = 1+ 69 = 1.92. Note that the results in
r 75
Figure1(d). are(well)belowthisguarantee,sinceweareplottingaverage(ratherthanworst-case)
competitiveness.
B.2 Transitionfrom"easy"to"normal"equilibria: (r =75,w =19→20)asanexample.
WenowinvestigateanequilibriumwithslightlydifferentparametersfromtheonesinFigure1(d):we
stillkeepr =75butmakew =19. Thismakesr−w +1=93<100=B. Sotheconsistency
k k
worst-caseupperboundforλ=1is1+ 18 =1.24-consistent).
75
Inpracticethealgorithmisalmost1-consistentontheaverage. Thisseemstruebothforλ=1and
λ=0.2,andseemsindependentoftheerror(seeFigure2(a).)
Anexplanationisthatthereseemtobeveryfewcaseswheretheperformanceofthealgorithmis
not1. Evenwhentheerroris250,outof1000samplestherewereonly36suchsamplesforλ=1,
andonly27samplesforλ=0.2. Tothesesamplestheupperboundof1.24applies,buttheactual
competitiveratios(forvaluesofT whicharerandomnotworstcase)areevensmaller. Soitisnot
thatsurprisingthattheaveragecompetitiveratioisverycloseto1.
Asimilarpictureisobtainedifwedecreasew,e.g. (r =75,w =15).
If,instead,weincreasewthepicturechanges: nextwereportontheequilibrium(r =75,w =50).
Thepicturelooks(Figure2(d))moreliketheonefor(r =75,w =70).
Wethenstudythecase(r =75,w =30)(Figure2(c)). Stillthesamebehaviorasfor(r =75,w =
70). Similarlyfor(r =75,w =20)(Figure2(b)). Incontrast,forw =16,17,18,19thebehavior
issimilartothatofFigure2(a).
B.3 Lateequilibria: (r =125,w =75)and(r =125,w =15)asexamples.
In this section we report experimental results on several equilibria for which r > B. These are
(r =125,w =75)and(r =125,w =15). Theconditionthatverifiesthatthisisanequilibriumis
r+w −1≤2B−1. Thisconditionissatisfied:r+w −1=125+75−1=199=2×100−1=
i i
2B−1.
Despitebeingdifferent,"late"kindsofequilibria,comparedto(r =75,w =70)forwhichr ≤B,
nothingsubstantiallydifferentseemstohappen: theplotsaregiveninFigure3.
25Figure2: Benchmarkingthealgorithmonvariousequilibria(a). (r=75,w=19)(b). (r=75,w=20),(c).
(r=75,w=30)(d)(r=75,w=50).
Figure3: "Late"equilibria: (a)(r =125,w =75),(b)(r =125,w =15).
26