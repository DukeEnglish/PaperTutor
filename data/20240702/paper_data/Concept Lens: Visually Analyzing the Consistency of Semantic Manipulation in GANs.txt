©2024IEEE.Thisistheauthor’sversionofthearticlethathasbeenpublishedintheproceedingsofIEEEVisualization
conference.Thefinalversionofthisrecordisavailableat:10.1109/VIS54172.2023.00053
Concept Lens: Visually Analyzing the Consistency of Semantic
Manipulation in GANs
SangwonJeong* MingweiLi MatthewBerger
LawrenceLivermoreNationalLaboratory VanderbiltUniversity VanderbiltUniversity
ShusenLiu
LawrenceLivermoreNationalLaboratory
Figure1:ConceptLensaimstosupportusersinexploringandunderstandingthesemanticmanipulationsofferedbyGANlatent
spaces.ThedesignofConceptLensconsistsof(A)ahierarchicalencodingofconcepts,(B)ahierarchicalencodingofcodes,and
(C)agrid-basedviewthatshowsimagesgeneratedbycombinationsofcodes(rows)andconcepts(columns)selectedbyuser.
Nodesinthehierarchiescolor-encodetheconsistencyandmagnitudeofeditsmadebyconcepts.Inthisexample,conditionedona
groupofcodesat(F),thebluenode(D)indicatesconsistentedits(e.g.theadditionofspots),whilethepurplenode(E)suggests
inconsistentedits,shownasvariabilityinspeciesofanimals.
ABSTRACT IndexTerms: [HumanCenteredComputing]:Visualization—
AsapplicationsofgenerativeAIbecomemainstream,itisimportant
1 INTRODUCTION
tounderstandwhatgenerativemodelsarecapableofproducing,and
theextenttowhichonecanpredictablycontroltheiroutputs.Inthis Withrecentresearchadvancements[4,26,27],generativeAIhas
paper,weproposeavisualizationdesign,namedConceptLens,for garnered tremendous interest. For effective use of such models,
jointlynavigatingthedatadistributionofagenerativemodel,and however,twofactorsneedtobeconsidered:(1)themodel’sdatadis-
conceptmanipulationssupportedbythemodel.Ourworkisfocused tribution,e.g.,whatitiscapableofproducing,and(2)thelevel,and
onmodernvision-basedgenerativeadversarialnetworks(GAN),and type,ofcontrolthatauserhasonthegenerationprocess.Theseare
theirlearnedlatentspaces,whereinconceptdiscoveryhasgained oftencompetinginterests,e.g.,disentangledrepresentations[13,19]
significantinterestasameansofimagemanipulation.ConceptLens offersemanticcontrolsatvaryinglevelsofdetail,yetarelimited
isdesignedtosupportusersinunderstandingthediversityofapro- inmodelingdata,whilediffusion-basedmodels[26,27]generate
videdsetofconcepts,therelationshipbetweenconcepts,andthe highly realistic images but lack fine-grained controls, instead re-
suitabilityofconceptstogivesemanticcontrolsforimagegenera- quiring tedious prompt engineering. For this reason, generative
tion.Keytoourapproachisthehierarchicalgroupingofconcepts, adversarialnetworks(GANs)remainpopular,astheycangenerate
generatedimages,andtheassociatedjointexploration. Weshow highly realistic images [17] while offering a more direct way to
howConceptLenscanrevealconsistentsemanticmanipulationsfor manipulatetheoutput[24,35].InGANs,generatedimagescanbe
editingimages,whilealsoservingasadiagnostictoolforstudying uniquelyidentifiedbyacode—apointinthelatentspaceofaGAN.
thelimitationsandtrade-offsofconceptdiscoverymethods. Imagemanipulationcanbeachievedbymovingthecodealonga
directioninthelatentspace,andgeneratinganimageatthenew
Keywords: Generativemodel,ExplainableAI,Latentspace,Clus- location.
tering,Bivariatecolor Certaindirectionscarryconcepts,whereaddingtheconceptdi-
rectiontoacodeinducessemanticallymeaningfulchangetothe
*correspondinge-mail:sangwon.jeong@vanderbilt.edu generatedoutput. Numerousmethods[11,30,37]fordiscovering
conceptshavebeendeveloped,allwiththegoaloffindingsemantic
edits,e.g.changingthefacialexpressionofaperson.
Despite the progress made in concept discovery, it remains a
challengetoevaluateconceptgenerality. Adirectioncaninduce
1
4202
nuJ
82
]CH.sc[
1v78991.6042:viXra©2024IEEE.Thisistheauthor’sversionofthearticlethathasbeenpublishedintheproceedingsofIEEEVisualization
conference.Thefinalversionofthisrecordisavailableat:10.1109/VIS54172.2023.00053
aconsistentsemanticchange,butlimitedtoasubsetofthelatent GANravel[10],andDrava[33]introduceinteractivesystemsfor
space[5,14]. Forotherportionsofthelatentspace, eitheradif- exploringconceptsinlatentspacebyleveraginghumanannotation
ferent semantic change can occur, or simply no change is made. andfeedback. Thesemethodsareprimarilyfocusedonobtaining
Althoughsuchheterogeneityhasoftenbeenobserved[5],adeeper asingleconceptdirection,ratherthansummarizingandexploring
understandingofthisproblemremainsunexplored.Why,orwhynot, alargecollectionofconcepts.Recentwork[14]studiesthedisen-
certainportionsoflatentspacerespondtoconceptsinaconsistent tanglement[8]capabilitiesofconcepts,yetvisualanalysislimited
manner?Answeringthisquestioncanshedinsightonhowtobetter toasingleconcept. Anumberofvisualizationworksalsofocus
manipulatesemanticsinGANlatentspaces,whilealsouncovering onthecomparisonoflatentspaces,suchasembComp[12],which
potentialdatasetbiaseslearnedbygenerativemodels[1,16]. proposesavisualizationtocomparemultipleembeddingatthesame
WepresentConceptLens,avisualizationdesignforexploringand time,andEmbeddingComparator[3],whichstudiesboththeglobal
diagnosingconceptsinGANlatentspaces.ConceptLenssupports andlocalstructuresofdifferentlatentspaces.
theanalysisofarbitraryconcepts,e.g.whetheraconceptisidentified Hierarchical Clustering in VA: Hierarchical clustering and its
asaglobaldirection[11,30]oravectorfieldinthelatentspace[37], visualizations[15,21,28,34]sitsatthecoreofunderstandingtree-
andisdomain-agnostic,e.g.,wedonotrelyonabankofexternal likestructureddata.Expandabilityofthehierarchicalvisualization
conceptsforanalysis. Further,unlikerecentworksthatanalyzea allowsforon-demanddataexploration,contractabilitymakesita
smallsetoflatentdimensions[33], ConceptLensaimstorelate betteroverviewofaverylargedataset,suchasbiologicalorchemical
alarge(e.g. hundreds)setofconceptsinordertoprovideamore data[29],comparedtoaflattenedviewsuchasscatterplots. For
completepictureofaGAN’slatentspace. studyingrelationshipbetweenmultipledatasets,usingasingletree
Thegeneralityoftheproblemunderconsideration,andthescale havelimitations.Therefore,researchersdevelopedawaytovisualize
ofthedata,presentchallengesinanalyzingconcepts. Tothisend, aconjoinedspacetounderstandtwodistinctivedatasetswhether
weemployhierarchicalclusteringofbothconceptsandcodesasthe throughmerging[36]orseparatelypresentingthem[7,20].
basisforourexploration.Withinthedesign,thenestedhierarchies
ofconceptandcodeenableabi-hierarchyviewofgeneratedimages 3 DESIGNREQUIREMENTS
(seeFig.1). Thisdesignallowsonetonavigatethelatentspace
Wedefinetheobjectivesoftheproposedwork,andoutlinedesign
at multiple levels of detail, individually for concepts and codes,
requirements. Weareinterestedinstudyingthespaceofimages
andtherelationshipbetweenthem.Throughlinkedbrushingofthe
producedbyageneratornetworkofaGANmodel[18].Weassume
hierarchies,andameanstointeractivelysteerclusteringbasedon
asetofcodeshavebeensampledintheGAN’slatentspace,where
selectedcodes/directions,ConceptLenscanrevealgroupsofcodes
foreachcodewegenerateanimage,andsimilarlyasetofconcept
thatconsistentlyrespondtoagivensetofconcepts,andviceversa–
directionshavebeenproducedbyaconceptdiscoverymethod.These
whatconceptsleadtoconsistentsemanticchangesforaprovidedset
concept directions give users a way to control the output of the
ofcodes.Suchinformationcanbeutilizedtoelicitadvantagesand
generator. We call a concept consistent on given a set of codes,
limitationsofexistingconceptdiscoverymethods,improvesemantic
ifwhenapplyingtheconceptdirectiononecanobservethesame
manipulationquality,andultimatelyhelpthedevelopmentoffuture
semanticchangeintheoutput.
methods.
Ashasbeenstudiedinpriorworks[5,14],itischallengingfor
Wesummarizethecontributionsofourwork:
conceptdiscoverymethodstoensureconsistencyacrossallpossible
• Wepresentavisualizationdesignthatpermitsnavigatingthe codes. In some cases this can be easily explained, e.g., for face
varioustypesofsemanticsthatcanbemanipulatedinGANs. images,itisunrealistictoexpecta“beard”concepttoreadilyapply
to babies. In other instances, the root cause of inconsistency is
• Weintroduceabi-hierarchyvisualencodingtohelpusersrelate
more complicated to reason about, for instance owing to bias in
latentspacecodeswithconcepts.
the training data or limitation of the GAN. Relating a concept’s
• Weshowhowourdesign,termedConceptLens,allowsusers inconsistencywiththesemanticsofthelatentspaceisessentialfor
todiscoverconceptsthatofferconsistentsemanticmanipula- understandingconceptmanipulation,andGANsmorebroadly.
tions,aswellasdiagnoseconceptdiscoverymethodsandtheir Anothermajorchallengewithstate-of-the-artconceptdiscovery
potentialtrade-offs. methods[11,24,30,32,35,37,38]istheshearamountofconceptdi-
rectionstheycanproduce.Despitethelargequantity,theseconcepts
2 RELATEDWORKS are not labeled and often include many noisy and uninformative
ConceptDiscoveryMethods:Withrecentdevelopments[17,18] directions. Howtounderstand,explore,andsummarizethemre-
ofhigh-qualityGANmodels,increasingresearcheffortshavebeen mainsachallenge. Therefore,theprimarygoaloftheworkisto
dedicatedtotheunsuperviseddiscoveryandmanipulationofcon- address these challenges and support the exploration of consis-
cepts [11,24,30,32,35,37,38] in the generative output. Some tencyforalargenumberofdirection-basedmanipulationsinGANs.
of these methods [11,30] try to identify directions of large vari- Specifically,wesummarizethekeydesignrequirementsD1-D3for
anceintheinternalrepresentationofGANmodelstouncovercon- supportingourobjectives.
cepts,whereasothersrelyonexternalmodels[24]orlocalimage D1-Globalsummaryofcodesandconcepts: Sincealarge
spacemetrics[35,38]forconceptdiscovery. Thesemethodsare number of concepts will be generated when applying a concept
further distinguished by their representation of concepts, e.g. a discoverymethod,thesystemneedstosupportthesummarizationof
singlegloballineardirection[11,30],adirectionthatdependson allidentifiedconceptsaswellasthemanipulationresultsofapplying
the latent code [24,37], or representing a concept as a curve in themtoavarietyofcodes,i.e.,latentspacesamples.
thelatentspace[5,31]. Conceptdiscoverymethodsare,neverthe- D2-Estimateandcommunicateconsistency:Besidesumma-
less,imperfect,andthusitiscommontoevaluatesuchmethodson rizingtheexplorationspace,wealsoneedtoconveyhowsimilara
carefully-curateddatasets[8,23],whereintheevaluationispresented groupofrelatedconceptsare;andhowconsistentaconceptiswhen
asasetofsummarystatistics.However,quantitativemetricsalone applyingtodifferentsetsofcodes.
likelycannotprovidefulldetailoftheintricatebehaviorofsemantic D3-Focusedanalysisoflocalbehavior:Oncewehaveareli-
manipulation,whereasavisualanalyticssystemcanbevaluable. ablewaytoexpressconsistency,wecanfurtherourinvestigation
LatentSpaceVisualization:Afewexistingeffortshavebeenpro- throughthelocalbehaviorofconceptmanipulation,e.g.,contrasting
posedtostudylatentspacesusingvisualization.Despiteadopting differentregionsofthelatentspacebyhowtheyrespondtoagroup
differentapproaches,theLatentCartography[22],GANzilla[9], ofconcepts.
2©2024IEEE.Thisistheauthor’sversionofthearticlethathasbeenpublishedintheproceedingsofIEEEVisualization
conference.Thefinalversionofthisrecordisavailableat:10.1109/VIS54172.2023.00053
4 CONCEPTLENSDESIGN codehierarchy,wedirectlyusetheimagefeaturef G(w)ofacodew
tocomputedistances.
WedetailthevisualizationdesignofConceptLens,andhowour
MeasuringandVisualizingConsistencyAlthoughthebi-hierarchy
designaddressestherequirementspreviouslydiscussed.
viewofConceptLensaimstosupportfluidnavigationoftheGAN
SpatialArrangementofCodesandConcepts TheinputtoCon-
latentspace,additionalcontextisrequiredfortheuserinmaking
ceptLensisasetofcodes, andsetofconceptdirections, where
for each combination of code wn ∈Rd and direction dm ∈Rd, d chec ai ls leio nn gs eo bn ymwh eaa st ut ro ins gel aec nt oa tin od ne ox fp elo dr ite cf ou nrt sh ise tr e. nW cye foa rdd gr re os us psth ois
f
wesynthesizeanimagefromageneratornetworkdenotedG,e.g.
concepts,andgroupsofcodes.Specifictoasetofconceptsdenoted
G co( dw en w+ nα ,wdm ith)i ts hean scim ala ing ge oa fss to hc eia dt ie rd ecw tioit nh αdir ∈ec Rtio rn epd rm esea np tp il ni ged thto
e
S Dandagivencodewweformthefollowingcollectionofdistances:
levelofexpressionfortheconcept. Forevenmodest-sizedsetsof
codes(e.g. N=500)andconcepts(e.g. M=500), hundredsof
W(S D,w):={∥f G(w)−f G(w+αd)∥|d∈S D}. (2)
thousandsofimagescanresultfromthisprocess.Tobetterorganize
Eachelementinthissetmeasuresthefeature-spacedistancebetween
thedata,andallowforeffectivebrowsingatmultiplelevelsofdetail,
the original code (w) and its corresponding edit (w+αd). We
wefirstperformhierarchicalclusteringofcodesandconcepts,indi-
measurecodecoherencysimilarly,conditionedonasetofcodesS
vidually,yieldingtwohierarchies.Weuseagglomerativeclustering, C
andconceptd:
withcompletelinkage,andpermutetheorderingofleavesviathe
methodofBar-Josephetal.[2].Wevisuallyencodeeachhierarchy W(S C,d):={∥f G(w)−f G(w+αd)∥|w∈S C}, (3)
asanicicleplot[21],withtheconcept-specifichierarchyarranged
horizontally(Fig.1(A)),andthecode-specifichierarchyarranged Forconceptconsistency,themeanofthesetW(S D,w)givesa
vertically(Fig.1(B)). summary ofedit magnitude, e.g., how much did the concepts in
The center view (Fig. 1(C)) of Concept Lens is composed of S D change the code w? Likewise, the standard deviation of this
a series of Cartesian products between nodes in the concept hi- setindicatesvariabilityamongstconceptsintheiredits,e.g.,iftwo
erarchy and nodes in the code hierarchy, where each Cartesian concepts share a semantic change, but one is entangled with an
productislimitedtonodesatequaldepthinrespectivehierarchies. additionalsemantic,thenthiswillmanifestashighvariability.
Hierarchical grouping of concepts Foreachresultingconcept-code This measure of edit consis-
pair, a region of space is allo- tency, coupled with the aggre-
Generated images for all cated, and a rectangle is posi- gatedconceptdistanceusedfor
combinations of codes
and concepts tionedinthisspacewhosesize theclustering,servesasaproxy
isproportionaltonodecardinal- image edits from two separate concepts original image for semantic consistency (D2),
ity, e.g., its width proportional e.g., a cohesive group of concepts S D that yield edits of similar
to the number of concepts in a magnitudesuggestssemantic,predictablechangestoacode.Inthe
node,andheightproportionalto insetweshowanexampleoftwoconceptsthat,collectively,have
thenumberofcodesinanode–thisisdepictedintheinset. For moderateeditmagnituderelativetotheoriginalcode,butwhose
agivenpairofleafnodes,wethendisplayimagesintheallocated variabilityishigh,e.g.,shadows,andeyesclosing.
spaceforallcombinationsofitscodesandconcepts. Forthecaseofcodeconsistency,thesum-
Keytothisdesignisthesupportforuserstointeractivelyselect marystatisticsofthesetW(S ,d)indicate
C
subsetsofbothhierarchies,viaclickingorbrushing,filteringimages semanticconsistencyamongstasetofcodes
displayedinthecenterviewreflectingselectioninthehierarchies. for a given concept. The inset shows an
Brushinggivesasmoothnavigationofcodesandconcepts(D1):
examplewherein,forasingleconceptedit
pairsofleafnodesthathavealowestcommonancestor(LCA)deep (left), and the original codes (right), the
inthehierarchywillbepositionedclosetoeachother[2].Moreover, groupofcodesismeasuredashigheditmag-
toconveyhierarchydepth,thedesignintroducesgapsinthespac- nitude, e.g., eyes opening and body pose
ingbetweennodes,wherethegapbetweentwonodesisinversely concept edits original image change,whilethevariabilitybetweencodes
proportionaltotheirLCAdepth. Suchadesignsupportsusersin issmall,e.g.,themagnitudeofchangeisconsistentacrosscodes.
quicklyobtainingasummaryofthediversityofconcepts(D1),as
Wecolormaptheconsistencyofeditsoverallnodes,acrossboth
theycaneasilyselectconceptsoriginatingfromdistinctsubtrees,
hierarchies. Specific to the concept hierarchy, for a node with a
andimagesofconceptsfromthesesubtreeswillbedisplayed,with setofconceptsS D,wecomputethemeanandstandarddeviation
thehierarchycontextpreserved. ofW(S D,w)foreachcodew. Whenconsideringmultiplecodes,
Building the aforementioned hierarchies requires a choice of
weaveragethetwosummarystatisticsoverallcodes,andvisually
distancemeasuretorelatepairsofconcepts,andpairsofcodes.In
encodetheresultwithabivariatecolorscale(seeFig.1,top-left).
estimatingthesimilaritybetweenconcepts, weneedtotakeinto
Thisscaleisdesignedtosupportconsistencyanalysis(D2)byem-
consideration the variety of semantic shifts that can result from
phasizingextremes,duetohighsaturationandlowluminance,while
applying a concept to set of codes. To this end, we propose a
mid-rangesbetweenextremitiesaredeemphasizedvialowsatura-
measureofaggregatedconceptdistance.Specifically,forapairof
tion,attractinglessattention.Forinstance,red indicatesconcepts
conceptsdenoteddjandd k,adistancemeasureisaggregatedover
ofsmalleditmagnitudeandlowvariability,blue indicatesedits
allcodesvia:
thatarelargeinmagnitudeyetlowvariability,whilepurple indi-
1 N catesbothhigheditmagnitudeandhighvariability.Thedomainfor
D(dj,d k)=
N
∑∥f G(wn+αdj)−f G(wn+αd k)∥, (1) thescaleischosenbasedonthesamplemeanandstandarddeviation
n=1 ofeditconsistencycomputedontheentiredataset.
whereα controlsthestrengthoftheeditandf
G
computesafea- LocalizedAnalysisofConceptsConceptLensfurtherallowsusers
turevectorfromtheeditedcode;pleaseseeAppendixforfeature toanalyzeconsistencylimitedtosubsetsofcodes,aswellassubsets
choiceandimplementationdetails. Theintuitionbehindthispro- ofconcepts, tofacilitateamorelocalizedanalysisofdiscovered
posedmeasureisthattwoconceptsshouldbereportedassimilar concepts (D3). Specifically, given a user’s selection of nodes in
(lowdistance)iftheirrespectiveeditstoasinglecodearesimilar, thecodehierarchy,werecomputeeditconsistencybylimitingthe
summarizedoverall(N total)codes. ThedistanceDisprovided computationinEq.2tothesetofselectedcodes,andupdatethe
asinputforagglomerativeclusteringforconcepts.Forbuildingthe colorofnodesintheconcepthierarchy;asimilarprocessisdone
3
sedoc
fo gnipuorg
lacihcrareiH©2024IEEE.Thisistheauthor’sversionofthearticlethathasbeenpublishedintheproceedingsofIEEEVisualization
conference.Thefinalversionofthisrecordisavailableat:10.1109/VIS54172.2023.00053
Figure2:Theselectedconceptapplies“closedeyes”tomostcodes,
whileitdoesn’ttothetopselectioninthecodehierarchy. Thetop
groupiskittens,and,inourdataset,wefindthatkittensusuallydo
notclosetheireyes.Forthecatsinthebottomgroup,“closedeyes” Figure 3: Re-clustering the concept hierarchy according to a set
conceptiscombinedwith“mouthopen”. ofcloselyrelatedcodeshelpsrevealthemoreconsistentandhigh-
qualityconceptedit.Re-clusteringcanbeperformedbybrushinga
subsetofcodeinthecodehierarchy(1)andclickingontherecluster
in selecting directions, and updating the code hierarchy. This is button(2).Re-clustereddirectionsarepointedbythearrows.
designedtoprovidecontextforauserinwhatpotentialactionsto
take.Forinstance,ausermightselectasetofconcepts,andjudge
thegeneralsemanticscontainedtherein. Subsequently,thecolor- asthenodesencodedwithalavendercolor.Thissignalsthatcodes
encodingofthecodehierarchywillupdate,andfromhereauser inthisnodechangelesswhentheconceptisapplied.Here,wecan
mightwishtoseecertaingroupsofcodesthatareconsistent(blue) observethatcatsinthetopgroupdonotclosetheireyes,butthosein
orhavehighvariability(purple)(D3). thebottomgroupdo,suggestingthatthetopgroupislesssensitive
Wefurtherallowforthesteeringofagivenhierarchicalclustering tothe“closeeyes”directionrelativetoothercats.Wealsofindthe
(e.g.,concepts),basedonauser’sselectionoftheotherhierarchy bottomgroupcontainscatswiththeirmouthsopen,suggestiveofa
(e.g.,codes)(D3).Inthecaseofconcepts,foragivensetofcodes potentialdatasetbiasfororange-whitecoloredMaineCoons.
selectedbytheuser,werecomputeconceptsimilarityinEq.1,only RevealUnseenPatternviaOn-demandRe-clusteringRecallthe
summingoverthecodeselection. Theupdatedconcepthierarchy concepthierarchyitselfisbuiltbyaggregatingpairwisedistances
willthusbebetterorganizedfortheprovidedcodegrouping,albeitat overallcodes.Aconsequenceisthatthehierarchyisnotnecessarily
theexpenseofothercodes.However,weviewthisactionasameans optimalfortheexplorationofasmallgroupofcodes,ascovered
ofobtainingamorepreciserelationshipbetweenconcepts,givena intheprevioususecase. Wecanaddressthischallengethrough
limitedsetofcodesthatauserisinterestedin.Asimilarprocessis re-clustering. Onthehumanfacesdataset,weobserveagroupof
doneforsteeringthecodehierarchy,givenasetofconcepts. femaleswitheyeglasses(c.f. Fig.3).Uponselectingthegroupand
browsingtheoriginalconcepthierarchycomputedoverallcodes,
5 USECASES wefindmultiplesmallconceptclustersscatteredintheconcepthi-
erarchythatremoveeyeglassesfromfaces. Limitingthedistance
ExperimentSetupForourexperiments,weusetheStyleGAN2[18]
aggregationtofemalefaceswitheyeglasses,andre-clustering,we
generator,SeFA[30]asourconceptdiscoverymethod(targeting
findagroupoflargeedits(bluecolorednodeontheleftofthecon-
earlylayersinStyleGAN2),andconsiderseveralimagedomains:
cepthierarchy,Fig.3)thatremovetheeyeglasseswithoutmodifying
humanfaces,catfaces,facesofvariousanimals[6],andportrait
muchofthefaceidentities.Theoperationallowsustoeasilyidentify
artwork(seevideo).PleaseseetheAppendixfordetailsonexperi-
high-qualitysemanticmanipulationforafocusedgroupofcodes.
ments.
ExplorationviaGlobalSummaryAsafirststepinexploration,it
6 DISCUSSION
isnecessaryfortheusertogetageneralsenseofthetypesofimages
generated,theconceptsfoundbydiscoverymethod,andthequality Weintroduceavisualanalyticstoolforinvestigatingtheconsistency
oftheseconcepts.Bybrowsingthroughthehierarchy,theusercan ofsemanticsmanipulationforapplyingconceptdirectionsgenerated
identifythemostrepresentativecodesandconceptsbylookingat bystate-of-the-artconceptdiscoverymethods.Withbi-hierarchical
examples from higher levels of the tree. Moreover, through the visual encoding in Concept Lens, we showed that the proposed
bivariatecolorencodingintheicicleplot(Fig.1),ataglancethe approachadequatelyaddressesthescalabilitychallengethankstothe
usercandistinguishbetweenconsistentandinconsistentconcepts simplicityofrequiredinformation(collectionoforiginalandedited
aswellasconceptsenablinglargeedits. Theexampleshowsthe images). Furthermore,theapproachfacilitatesjointinvestigation
selectionoftwoconceptgroupsevaluatedononecodegroup.The betweenconceptandcode.Aspartoffutureworkweaimtoapply
top-left(purple)andtop-right(blue)conceptselectionsdifferintheir ConceptLenstoothertypesofGANconceptdiscoverymethods,e.g.
respectivelevelsofvariability,whilebothgivinglargeedits.Top-left StyleCLIP[24],andothergenerativemodels,e.g.diffusion-based
conceptsaremoreinconsistent,e.g.thisconceptgroupencodesthe methods[27].Moreover,weplantoevaluateourdesignwithusers
“fox”conceptalongwithvariationsofcolors,whereasthetop-right toassessitseffectivenessindiagnosingconcepts.
groupencodesonly“leopard”.
FocusedInvestigationofLocalBehaviorOnceusershaveobtained
ACKNOWLEDGMENTS
ahigh-levelunderstandingofthedatadistributionandthevariety ThisworkwasperformedundertheauspicesoftheU.S.Depart-
ofpossiblesemanticmanipulations,theycaninvestigatethelocal mentofEnergybyLawrenceLivermoreNationalLaboratoryunder
behaviorofconceptsinregardtoaspecificcodeorgroupofcodes. ContractDE-AC52-07NA27344.Thisworkwassupportedbythe
InFig.2,weseeselection(top)capturesa“closeeye”conceptfor LaboratoryDirectedResearchandDevelopment(LDRD)program
cats.Thisconceptholdsformostofthelatentspace,inlinewiththe underprojecttrackingcode23-ERD-029andreviewedandreleased
highconsistencymeasure.Nevertheless,thereareexceptionssuch underLLNL-CONF-848581.
4©2024IEEE.Thisistheauthor’sversionofthearticlethathasbeenpublishedintheproceedingsofIEEEVisualization
conference.Thefinalversionofthisrecordisavailableat:10.1109/VIS54172.2023.00053
REFERENCES parison. InComputerGraphicsForum.WileyOnlineLibrary,2023.
2
[1] B.AlBahar,J.Lu,J.Yang,Z.Shu,E.Shechtman,andJ.-B.Huang. [21] J.B.KruskalandJ.M.Landwehr. Icicleplots: Betterdisplaysfor
Posewithstyle:Detail-preservingpose-guidedimagesynthesiswith hierarchicalclustering. TheAmericanStatistician, 37(2):162–168,
conditionalstylegan.ACMTransactionsonGraphics(TOG),40(6):1– 1983.2,3
11,2021.2 [22] Y.Liu,E.Jun,Q.Li,andJ.Heer. Latentspacecartography:Visual
[2] Z.Bar-Joseph,D.K.Gifford,andT.S.Jaakkola. Fastoptimalleaf analysisofvectorspaceembeddings. InComputergraphicsforum,
orderingforhierarchicalclustering.Bioinformatics,17(suppl_1):S22– vol.38,pp.67–78.WileyOnlineLibrary,2019.2
S29,2001.3 [23] M.Montero,J.Bowers,R.PonteCosta,C.Ludwig,andG.Malhotra.
[3] A.Boggust,B.Carter,andA.Satyanarayan.Embeddingcomparator: Lostinlatentspace:Examiningfailuresofdisentangledmodelsatcom-
Visualizingdifferencesinglobalstructureandlocalneighborhoodsvia
binatorialgeneralisation.AdvancesinNeuralInformationProcessing
smallmultiples. In27thinternationalconferenceonintelligentuser Systems,35:10136–10149,2022.2
interfaces,pp.746–766,2022.2 [24] O.Patashnik,Z.Wu,E.Shechtman,D.Cohen-Or,andD.Lischinski.
[4] T.Brown,B.Mann,N.Ryder,M.Subbiah,J.D.Kaplan,P.Dhariwal,
Styleclip:Text-drivenmanipulationofstyleganimagery.InProceed-
A.Neelakantan,P.Shyam,G.Sastry,A.Askell,etal.Languagemodels
ingsoftheIEEE/CVFInternationalConferenceonComputerVision,
arefew-shotlearners. Advancesinneuralinformationprocessing pp.2085–2094,2021.1,2,4
systems,33:1877–1901,2020.1 [25] A.Radford,J.W.Kim,C.Hallacy,A.Ramesh,G.Goh,S.Agarwal,
[5] J.Choi,J.Lee,C.Yoon,J.H.Park,G.Hwang,andM.Kang.Donot G.Sastry,A.Askell,P.Mishkin,J.Clark,etal.Learningtransferable
escapefromthemanifold: Discoveringthelocalcoordinatesonthe visualmodelsfromnaturallanguagesupervision. InInternational
latentspaceofgans.arXivpreprintarXiv:2106.06959,2021.2 conferenceonmachinelearning,pp.8748–8763.PMLR,2021.6
[6] Y.Choi,Y.Uh,J.Yoo,andJ.-W.Ha. Starganv2: Diverseimage [26] A.Ramesh,P.Dhariwal,A.Nichol,C.Chu,andM.Chen.Hierarchical
synthesisformultipledomains.InProceedingsoftheIEEEConference text-conditionalimagegenerationwithcliplatents. arXivpreprint
onComputerVisionandPatternRecognition,2020.4 arXiv:2204.06125,2022.1
[7] C.CulyandV.Lyding.Doubletree:anadvancedkwicvisualization [27] C. Saharia, W. Chan, S. Saxena, L. Li, J. Whang, E. L. Denton,
forexpertusers.In201014thInternationalConferenceInformation K.Ghasemipour,R.GontijoLopes,B.KaragolAyan,T.Salimans,
Visualisation,pp.98–103.IEEE,2010.2 etal.Photorealistictext-to-imagediffusionmodelswithdeeplanguage
[8] C.EastwoodandC.K.Williams. Aframeworkforthequantitative
understanding.AdvancesinNeuralInformationProcessingSystems,
evaluationofdisentangledrepresentations.InInternationalConference 35:36479–36494,2022.1,4
onLearningRepresentations,2018.2 [28] W.Scheibel,M.Trapp,D.Limberger,andJ.Döllner. Ataxonomy
[9] N.EvirgenandX.Chen.Ganzilla:User-drivendirectiondiscoveryin oftreemapvisualizationtechniques. InVISIGRAPP(3:IVAPP),pp.
generativeadversarialnetworks. InProceedingsofthe35thAnnual 273–280,2020.2
ACMSymposiumonUserInterfaceSoftwareandTechnology,pp.1–10, [29] J.SeoandB.Shneiderman.Interactivelyexploringhierarchicalclus-
2022.2
teringresults[geneidentification].Computer,35(7):80–86,2002.2
[10] N.EvirgenandX.Chen.Ganravel:User-drivendirectiondisentangle- [30] Y.ShenandB.Zhou.Closed-formfactorizationoflatentsemanticsin
mentingenerativeadversarialnetworks.InProceedingsofthe2023 gans.InProceedingsoftheIEEE/CVFconferenceoncomputervision
CHIConferenceonHumanFactorsinComputingSystems,pp.1–15, andpatternrecognition,pp.1532–1540,2021.1,2,4,6
2023.2 [31] C.Tzelepis,G.Tzimiropoulos,andI.Patras.Warpedganspace:Find-
[11] E.Härkönen, A.Hertzmann, J.Lehtinen, andS.Paris. Ganspace: ingnon-linearrbfpathsinganlatentspace. InProceedingsofthe
Discoveringinterpretablegancontrols.AdvancesinNeuralInformation IEEE/CVFInternationalConferenceonComputerVision,pp.6393–
ProcessingSystems,33:9841–9850,2020.1,2 6402,2021.2
[12] F.Heimerl,C.Kralj,T.Möller,andM.Gleicher. embcomp: Visual [32] A.VoynovandA.Babenko.Unsuperviseddiscoveryofinterpretable
interactivecomparisonofvectorembeddings.IEEETransactionson directionsintheGANlatentspace. InInternationalConferenceon
VisualizationandComputerGraphics,28(8):2953–2969,2020.2 MachineLearning,pp.9786–9796.PMLR,2020.2
[13] I.Higgins,L.Matthey,A.Pal,C.Burgess,X.Glorot,M.Botvinick, [33] Q.Wang,S.L’Yi,andN.Gehlenborg.Drava:Aligninghumanconcepts
S.Mohamed,andA.Lerchner. beta-vae:Learningbasicvisualcon- withmachinelearninglatentdimensionsforthevisualexplorationof
ceptswithaconstrainedvariationalframework.InInternationalcon- smallmultiples.InProceedingsofthe2023CHIConferenceonHuman
ferenceonlearningrepresentations,2017.1 FactorsinComputingSystems,pp.1–15,2023.2
[14] S.Jeong,S.Liu,andM.Berger. Interactivelyassessingdisentangle- [34] L.WilkinsonandM.Friendly.Thehistoryoftheclusterheatmap.The
mentingans.InComputerGraphicsForum,vol.41,pp.85–95.Wiley AmericanStatistician,63(2):179–184,2009.2
OnlineLibrary,2022.2 [35] Z.Wu,D.Lischinski,andE.Shechtman.Stylespaceanalysis:Disen-
[15] B.Johnson.Treeviz:treemapvisualizationofhierarchicallystructured
tangledcontrolsforstyleganimagegeneration.InProceedingsofthe
information. InProceedingsoftheSIGCHIconferenceonHuman IEEE/CVFConferenceonComputerVisionandPatternRecognition,
factorsincomputingsystems,pp.369–370,1992.2 pp.12863–12872,2021.1,2
[16] C.E.Karakas,A.Dirik,E.Yalçınkaya,andP.Yanardag. Fairstyle: [36] W.Yang,X.Wang,J.Lu,W.Dou,andS.Liu. Interactivesteering
Debiasingstylegan2withstylechannelmanipulations. InComputer ofhierarchicalclustering. IEEETransactionsonVisualizationand
Vision–ECCV2022:17thEuropeanConference,TelAviv,Israel,Octo- ComputerGraphics,27(10):3953–3967,2020.2
ber23–27,2022,Proceedings,PartXIII,pp.570–586.Springer,2022. [37] O.K.Yüksel,E.Simsar,E.G.Er,andP.Yanardag.Latentclr:Acon-
2 trastivelearningapproachforunsuperviseddiscoveryofinterpretable
[17] T.Karras,S.Laine,andT.Aila.Astyle-basedgeneratorarchitecture
directions.InProceedingsoftheIEEE/CVFInternationalConference
forgenerativeadversarialnetworks.InProceedingsoftheIEEE/CVF onComputerVision,pp.14263–14272,2021.1,2
ConferenceonComputerVisionandPatternRecognition,pp.4401– [38] J.Zhu,Y.Shen,Y.Xu,D.Zhao,andQ.Chen.Region-basedsemantic
4410,2019.1,2
factorizationingans.arXivpreprintarXiv:2202.09649,2022.2
[18] T.Karras,S.Laine,M.Aittala,J.Hellsten,J.Lehtinen,andT.Aila.
AnalyzingandimprovingtheimagequalityofstyleGAN.InProceed-
ingsoftheIEEE/CVFConferenceonComputerVisionandPattern
Recognition,pp.8110–8119,2020.2,4,6
[19] H.KimandA.Mnih.Disentanglingbyfactorising.InInternational
ConferenceonMachineLearning,pp.2649–2658.PMLR,2018.1
[20] C.Krause,S.Agarwal,M.Burch,andF.Beck. Visuallyabstracting
eventsequencesasdoubletreesenrichedwithcategory-basedcom-
5©2024IEEE.Thisistheauthor’sversionofthearticlethathasbeenpublishedintheproceedingsofIEEEVisualization
conference.Thefinalversionofthisrecordisavailableat:10.1109/VIS54172.2023.00053
A EXPERIMENTALDETAILS
Weprovidemoredetailsonthedatausedinourexperiments. We
usedStyleGAN2[18]trainedonvaryingdomains,includingFFHQ-
datasetthatcontainshigh-qualityhumanfaces,catfaces,andfaces
ofvariousanimals.Formostexperimentswerandomlysampled400
codeswithinthelatentspaceofStyleGAN.Foreachcodew∈Rd
wegenerateacorrespondingimageG(w). Intheinterfacethese
imagesarepositionedtotherightofthebi-hierarchyview,serving
asareferencetocompareagainstimagesgeneratedbyconcepts.
Further,inmostexperimentswecompute400conceptdirectionsvia
SEFA[30].Animageassociatedwithcodewiseditedbyaconcept
directionbycomputingG(w+αd)forunit-normconceptdirection
d∈Rd.Theparameterα∈Rrepresentsthestrengthoftheconcept
appliedtothecode;inpractice,wesetα=5.
ToensurethatSEFAgivesadiversesetofconceptdirections,we
modifythemethodasfollows.Wefirstcollectweightmatricesof
affinetransformsfromStyleGANthatcorrespondtotransforming
codesfromlatentspacetolayer-specificstylespaces.Namely,we
gatherweightmatricesA
l
∈Rol×d whered isthedimensionality
ofinputspaceando oftheoutputspace,foragivenlayerl. We
l
limitourchoiceoflayerstoearlyinthegeneratornetwork,toensure
large,structuralchangestotheoutput,ratherthansmallcolorshifts
thatareusuallyassociatedwithlaterlayers. Moreover,toensure
diversityinconcepts,werandomlydroprowsoftheaffinematrices
A ltogiveA˜ l∈R(ol−r)×dwhereristhenumberofrowstodrop,and
stacktheresultingsetofmatricesacrossalllayersintoonematrix,
A˜ =[A˜ ]L . WethentakethesingularvaluedecompositionofA˜,
l l=1
andtakethetopk(typicallyk=20)rightsingularvectorsoflargest
singularvaluesasthesetofconceptdirections,thoughinpractice
weexcludetherightsingularvectorwithlargestsingularvalue,asit
tendstogivelargetransformationswithoutmeaningfulsemantics.
Thisprocessisrepeatedwithadifferentrandomsamplingofrows,
togivennewmatricesA˜,andinturnnewconceptdirections,untila
targetbudgetofconcepts(e.g.400)isobtained.
Lastly,imagefeaturesareextractedfromallimagesviaResNet
fine-tunedforCLIP[25]. Theseimagefeaturesareusedforcom-
putingpairwisedistancesforhierarchicalclustering,andconcept
andcodeconsistencymeasures(Eq. 1-3). ImagefeaturesF∈Rk,
wherekisthedimensionalityofimagefeaturespace,needfurther
processingforhierarchicalclustering. Imagefeaturescorrespond-
ingtoeverycodes,appliedbyeverydirectionsF∈RC×D×kneeds
centeringtoreducetheeffectofstartingpositionofcodesinthe
clusteringofwalkedcodes.ThisisdonebycomputingF−F¯ where
F¯=∑C
i
∑D
j
f i,j/C×D.Cosinepairwisedistanceofthesecentered
featuresareusedforagglomerateclusteringwithcompletelinkage.
6