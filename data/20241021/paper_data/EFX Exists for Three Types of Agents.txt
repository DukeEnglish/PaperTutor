EFX Exists for Three Types of Agents
VishwaPrakashH.V. PratikGhosal
ChennaiMathematicalInstitute IndianInstituteofTechnologyPalakkad
vishwa@cmi.ac.in pratik@iitpkd.ac.in
PrajaktaNimbhorkar NithinVarma
ChennaiMathematicalInstitute MaxPlanckInstituteforInformatics,Saarland
prajakta@cmi.ac.in nithvarma@gmail.com
Abstract
Inthispaper,westudytheproblemoffindinganenvy-freeallocationofindivisiblegoods
amongmultipleagents. EFX,whichstandsforenvy-freenessuptoanygood,isawell-studied
relaxationoftheenvy-freeallocationproblemandhasbeenshowntoexistforspecificscenarios.
Forinstance,EFXisknowntoexistwhenthereareonlythreeagents[9],andforanynumberof
agentswhenthereareonlytwotypesofvaluations[17].
Inthispaper,weshowthatEFXallocationsexistforanynumberofagentswhenthereareat
mostthreetypesofadditivevaluations.
1 Introduction
Fairdivisionofindivisibleresourcesisawell-researchedproblemattheintersectionoftheoretical
computer science and economics. The problem arises in a variety of practical settings, from
allocatingslotsorassetstodistributingaidorsharedgoods. Oneofthemostintuitivenotionsof
fairnessisenvy-freeness(EF)[12],whereeachindividualiscontentwiththeirsharecomparedto
others. However,whentheresourcesareindivisible-suchasphysicalobjects,housingunits,or
assetslikeartwork—achievingtrueenvy-freenessbecomesimpossibleinmanycases. WhileEF
providesanaturalmeasureoffairness,thecombinatorialnatureofindivisiblegoodsoftenrenders
EFallocationsunattainable,highlightingthenecessityformorenuancedfairnesscriteria.
OnesuchrefinementisEnvy-FreenessuptoanyGood(EFX),proposedbyCaragiannisetal.
[7],whichhasgainedprominenceduetoitsminimalrelaxationofEF.UnderEFX,anagentmay
envyanother,butsuchenvycanalwaysberesolvedbyremovinganysinglegoodfromtheenvied
agent’sbundle. Despiteitsapparentsimplicity,theexistenceofEFXallocationsforanarbitrary
numberofagentsremainsanunresolvedquestion. Thisistrueeveninmanyrestrictedsettings,
whereonlypartialresultsareknownforspecificcases[7,9,17,18,14,6].
To discuss EFX allocations in more detail, let us consider the formal framework for discrete
fairdivision. Here,wehaveaset𝒩 = {𝑎 ,𝑎 ,...,𝑎 }of𝑛agentsandasetℳ = {𝑔 ,𝑔 ,...,𝑔 }
1 2 𝑛 1 2 𝑚
of𝑚indivisiblegoods. Eachagent𝑎 ∈ 𝒩 hasavaluationfunction𝑣 : 2𝒩 → R thatquantifies
𝑖 𝑖 ≥0
the amount of utility derived by agent 𝑎 from any given subset of goods. We focus on additive
𝑖
valuations,whichimplythatthetotalvaluederivedbyasubsetofgoodsissimplythesumofthe
valuesoftheindividualgoodswithinthatsubset. Formally,foranysubset𝑆 ⊆ ℳ,thevaluation
1
4202
tcO
71
]TG.sc[
1v08531.0142:viXra∑︀
function can be expressed as: 𝑣 (𝑆) = 𝑣 ({𝑔}). An allocation 𝑋 = ⟨𝑋 ,𝑋 ,...,𝑋 ⟩ is a
𝑖 𝑔∈𝑆 𝑖 𝑎1 𝑎2 𝑎𝑛
partitionofthegoodsinto𝑛parts,calledasbundles,suchthatagent𝑎 receivesbundle𝑋 .
𝑖 𝑎𝑖
EFX Allocations: Given an allocation 𝑋, an agent 𝑎 envies agent 𝑎 if 𝑣 (𝑋 ) < 𝑣 (𝑋 ). This
𝑖 𝑗 𝑖 𝑎𝑖 𝑖 𝑎𝑗
envyiscalledweakenvyifitdisappearsafterremovinganysinglegoodfrom𝑋 . Otherwise,the
𝑎𝑗
envyisconsideredstrong. Anallocationissaidtobeenvy-freeuptoanygood(EFX)ifnoagent
hasstrongenvytowardsanyotheragent. ItisnotknownwhetherEFXallocationsalwaysexist
for𝑛agentswitharbitraryadditivevaluations. However, overtheyears, severalpartialresults
haveemerged. FollowingitsintroductionbyCaragiannisetal. [7],PlautandRoughgarden[18]
showedthatEFXallocationsexistintwospecificcases: (𝑖)whenthereareonlytwoagents,and
(𝑖𝑖)foranynumberofagents,providedallagentshaveidenticalvaluations. Mahara[17]extended
thistoshowthatEFXallocationalwaysexistswheneachagentisofoneoftwogiventypes,where
agentsofthesametypehaveidenticaladditivevaluations. Inabreakthroughpaper,Chaudhuryet
al. [9]showedthatEFXallocationsalwaysexistforinstanceswiththreeagents. Ghosaletal. [14]
extendedthisresultto𝑛agentswhen𝑛−2ofthemhaveidenticalvaluations.
1.1 OurContributions
TheexistenceofEFXallocationsforthreetypesofagentshasbeenanopenproblem(see,e.g.,[16]).
Inthiswork,weresolvethisbyprovidingaconstructiveproofofthefollowingtheorem.
Theorem1. EFXallocationalwaysexistsfor𝑛agentswhentherearethreetypesofagents,whereagentsof
thesametypehaveidenticaladditivevaluations.
1.2 RelatedWork
The literature on the fair division of indivisible goods is extensive. This section highlights the
worksmostrelevanttoourstudy-EFXallocationsofgoods;forfurtherdetails,wereferthereader
toarecentsurveybyAmanatidisetal. [2].
InadditiontothestudiesoncompleteEFXallocationsdiscussedabove,therehavebeenseveral
results on almost complete EFX allocations, where the objective is to minimize the number of
unallocatedgoods. AnotablecontributionbyChaudhuryetal. [10]showthatEFXallocationsexist
withatmost𝑛−1unallocatedgoods,ensuringthatnoagentenviesthesetofunallocatedgoods.
Followingthis,Bergeretal.[6]andMahara[16]showthatEFXallocationscanbeachievedwith
atmost𝑛−2unallocatedgoods. Moreover,theyshowthatforfouragents,EFXallocationscan
alwaysbecomputedwithatmostoneunallocatedgood.
Aninterestingconstraintistorestrictthenumberofpossiblevaluesagentscanhaveforthe
goods. Amanatidisetal. [3]showthatEFXallocationsexistforbi-valuedinstances,whereeach
agentassignsoneoftwopossiblevaluestoeachgood. GargandMurhekar[13]extendedthisresult
byshowingParetooptimalEFXallocationsalwaysexistsforbi-valuedinstances. Inarecentarticle,
Amanatidisetal. [4]showthatEFXallocationsexistfortri-valuedinstances.
TherehavebeenseveralmorestudiesonapproximatenotionsofEFXallocations. Anallocation
is said to be 𝛼-EFX, if for every pair of agents 𝑎 and 𝑎 , agent 𝑎 finds her bundle 𝑋 to be at
𝑖 𝑗 𝑖 𝑎𝑖
leastasvaluableas𝛼·𝑣 (𝑋 ∖𝑔)forany𝑔 ∈ 𝑋 . Chanetal. [8]showedtheexistenceof 1-EFX
𝑎𝑖 𝑎𝑗 𝑎𝑗 2
allocations. Followingthis,Amanatidisetal. [5]showedthat0.618-EFXallocationsalwaysexists.
Inarecentwork,Amanatidisetal.[4]showthat 2-EFXallocationsexistwhenthereareatmost
3
sevenagents.
22 Preliminaries
Let 𝒩 = {𝑎 ,𝑎 ,...,𝑎 } be a set of 𝑛 agents and ℳ = {𝑔 ,𝑔 ,...,𝑔 } be a set of 𝑚 indi-
1 2 𝑛 1 2 𝑚
visible goods. A discrete fair division instance is represented by the tuple ⟨𝒩,ℳ,𝒱⟩, where
𝒱 = ⟨𝑣 ,𝑣 ,...,𝑣 ⟩ comprises the valuation functions. For each agent 𝑎 ∈ 𝒩, the function
𝑎1 𝑎2 𝑎𝑛 𝑖
𝑣 : 2ℳ → R specifiestheutilitythatagent𝑎 derivesfromanygivensubsetofgoods.
𝑖 ≥0 𝑖
Weusethetermbundletodenoteasubsetofgoods. Anallocation𝑋 = ⟨𝑋 ,𝑋 ,...,𝑋 ⟩isa
𝑎1 𝑎2 𝑎𝑛
tupleof𝑛mutuallydisjointbundlessuchthatbundle𝑋 isassignedtoagent𝑎 forall𝑎 ∈ 𝒩. We
𝑎𝑖 𝑖 𝑖
⋃︀
sayanallocation𝑋 iscompleteif 𝑋 = ℳ.
𝑎𝑖∈𝒩 𝑎𝑖
Let𝑎 ∈ 𝒩; 𝑔 ∈ ℳ; 𝑆,𝑇 ⊆ ℳand𝑣 bethevaluationfunctionof𝑎 . Tosimplifynotation,we
𝑖 𝑎𝑖 𝑖
write𝑣 (𝑔)todenote𝑣 ({𝑔})anduse𝑆 ∖𝑔,𝑆 ∪𝑔 todenote𝑆 ∖{𝑔},𝑆 ∪{𝑔},respectively. Wealso
𝑎𝑖 𝑎𝑖
write𝑆 > 𝑇 todenote𝑣 (𝑆) > 𝑣 (𝑇)andsimilarlyfor< ,≥ ,≤ and= . Weusemin (𝑆,𝑇)
𝑎𝑖 𝑎𝑖 𝑎𝑖 𝑎𝑖 𝑎𝑖 𝑎𝑖 𝑎𝑖 𝑎𝑖
andmax (𝑆,𝑇)todenoteargmin 𝑣 (𝑌)andargmax 𝑣 (𝑌)respectively.
𝑎𝑖 𝑌∈{𝑆,𝑇} 𝑎𝑖 𝑌∈{𝑆,𝑇} 𝑎𝑖
Definition 1 (Pareto domination). An allocation 𝑌 Pareto dominates an allocation 𝑋, denoted by
𝑌 ≻ 𝑋,Ifforeveryagent𝑎 ∈ 𝒩 herbundlein𝑌 isatleastasgoodasherbundlein𝑋 andforatleastone
𝑖
agent,herbundlein𝑌 isstrictlybetterthantheonein𝑋. Formally,𝑌 ≻ 𝑋 if
∀𝑎 ∈ 𝒩,𝑌 ≥ 𝑋 and ∃𝑎 ∈ 𝒩,𝑌 > 𝑋
𝑖 𝑎𝑖 𝑎𝑖 𝑎𝑖 𝑗 𝑎𝑗 𝑎𝑗 𝑎𝑗
Given an allocation 𝑋 = ⟨𝑋 ,𝑋 ,...,𝑋 ⟩, we say that agent 𝑎 envies another agent 𝑎 if
𝑎1 𝑎2 𝑎𝑛 𝑖 𝑗
𝑋 > 𝑋 . Weoftenalsosaythatagent𝑎 enviesthebundle𝑋 . Foranallocation𝑋, theenvy
𝑎𝑗 𝑎𝑖 𝑎𝑖 𝑖 𝑎𝑗
relationamongtheagentsisgraphicallyrepresentedasfollows.
Definition2(EnvyGraph). Givenanallocation𝑋,let𝐸 = (𝒩,𝐸)beadirectedgraphwherethesetof
𝑋
agents𝒩 isthesetofverticesandforeverypair(𝑎 ,𝑎 )ofagents,(𝑎 ,𝑎 ) ∈ 𝐸 iffagent𝑎 enviesagent𝑎
𝑖 𝑗 𝑖 𝑗 𝑖 𝑗
undertheallocation𝑋.
Theenvyfromanagentcanbefurthercategorizedintostrongandweakenvyasfollows.
Definition3(Strongenvy). Givenanallocation𝑋,anagent𝑎 stronglyenviesanagent𝑎 if𝑋 <
𝑖 𝑗 𝑎𝑖 𝑎𝑖
𝑋 ∖𝑔 forsome𝑔 ∈ 𝑋 .
𝑎𝑗 𝑎𝑗
Anenvythatisnotstrongiscalledasaweakenvy. Giventhedefinitionsofstrongandweak
envies,anEFXallocationcanbedefinedasfollows.
Definition 4 (EFX). An allocation 𝑋 = ⟨𝑋 ,𝑋 ,...,𝑋 ⟩ is said to be envy free upto any good
𝑎1 𝑎2 𝑎𝑛
(EFX)ifnoagentstronglyenviesanyotheragent. Thatis:
∀𝑎 ,𝑎 ∈ 𝒩,∀𝑔 ∈ 𝑋 , 𝑋 ≥ 𝑋 ∖𝑔.
𝑖 𝑗 𝑎𝑗 𝑎𝑖 𝑎𝑖 𝑎𝑗
Non-degenerate instances [9, 1] An instance ℐ = ⟨𝒩,ℳ,𝒱⟩ is said to be non-degenerate if and
onlyifnoagentvaluestwodifferentbundlesequally. Thatis,∀𝑎 ∈ 𝒩 wehave𝑣 (𝑆) ̸= 𝑣 (𝑇)for
𝑖 𝑎𝑖 𝑎𝑖
all𝑆 ̸= 𝑇, where𝑆,𝑇 ⊆ ℳ. Akramietal. [1]showedthatitsufficestodealwithnon-degenerate
instanceswhenthereare𝑛agentswithgeneralvaluationfunctions, i.e., ifeachnon-degenerate
instancehasanEFXallocation,eachgeneralinstancehasanEFXallocation.
In the rest of the paper, we only consider non-degenerate instances. This implies that all
goods are positively valued by all agents as value of the empty bundle is assumed to be zero.
Non-degenerateinstanceshavethefollowingproperty.
3Proposition1. Givenanyallocation𝑋,foranytwoagents𝑎and𝑎′withidenticalvaluation,either𝑎envies
𝑎′ orviceversa.
Ifanagent𝑎 enviesabundle𝑆,wecandefineaminimallyenviedsubsetasfollows.
𝑖
Definition 5 (Minimally envied subset [11]). Given an allocation 𝑋, if an agent 𝑎 with bundle 𝑋
𝑖 𝑎𝑖
envies a bundle 𝑆, we call 𝑇 ⊆ 𝑆 a minimally envied subset of 𝑆 for agent 𝑎 if both the following
𝑖
conditionshold.
1. 𝑋 < 𝑇
𝑎𝑖 𝑎𝑖
2. 𝑋 ≥ 𝑇 ∖ℎ ∀ℎ ∈ 𝑇
𝑎𝑖 𝑎𝑖
For an agent 𝑎 and two subsets 𝑆,𝑇 ⊆ ℳ such that 𝑆 < 𝑇, we define 𝑅 as the minimally
𝑖 𝑎𝑖
enviedsubsetof𝑇 withrespectto𝑆,denoted𝑅 = MES (𝑇,𝑆),if𝑅isthesubsetof𝑇 thatwould
𝑎𝑖
beminimallyenviedby𝑎 assuming𝑆 isagent𝑎 ’sbundle. When𝑆 issameas𝑋 ,wesimplyrefer
𝑖 𝑖 𝑎𝑖
toMES (𝑇,𝑆)asMES (𝑇).
𝑎𝑖 𝑎𝑖
Definition6(Champion[10]). Let𝑋 beanallocationand𝑇 ⊆ ℳbeabundlesuchthatatleastoneagent
envies𝑇. Anagent𝑎 issaidtochampionthebundle𝑇 ifnoagentstronglyenviestheminimallyenvied
𝑖
subsetMES (𝑇,𝑋 ).
𝑎𝑖 𝑎𝑖
Definition7(𝑔-champion[10]). Givenapartialallocation𝑋 andanunallocatedgood𝑔,anagent𝑎 is
𝑖
saidto𝑔-championagent𝑎 if𝑎 championsthebundle𝑋 ∪𝑔. If𝑎 = 𝑎 ,wesayagent𝑎 self𝑔-champions.
𝑗 𝑖 𝑎𝑗 𝑖 𝑗 𝑖
Similartotheenvygraph𝐸 ,wecandefineachampiongraphwithrespecttoanunallocated
𝑋
goodasfollows.
Definition 8 (Champion Graph). Given a partial allocation 𝑋 along with an unallocated good 𝑔, a
championgraph,denotedby𝑀 = (𝒩,𝐸 ),isadirectedgraphwiththesetofagents𝒩 asthevertices
𝑋 𝑀
andforeverypairofagents𝑎 ,𝑎 ,theedge(𝑎 ,𝑎 ) ∈ 𝐸 if𝑎 𝑔-champions𝑎 .
𝑖 𝑗 𝑖 𝑗 𝑀 𝑖 𝑗
Throughoutthispaper,“championedges”refersto𝑔-championedgesforsomeunallocated
good 𝑔, unless otherwise specified. The following is a simple observation about the champion
graphs.
Proposition2. Foranypartialallocation𝑋 andcorrespondingchampiongraph𝑀 withrespecttoan
𝑋
unallocatedgood𝑔,𝑀 isalwayscyclic.
𝑋
Proof. Recallthateveryagentvalueseverygoodnon-zero. Foreachagent𝑎 ,as𝑎 envies𝑋 ∪𝑔
𝑖 𝑖 𝑎𝑖
over 𝑋 , some agent (possibly 𝑎 ) must 𝑔-champion 𝑎 . Thus, every agent has an incoming
𝑎𝑖 𝑖 𝑖
𝑔-championedge,making𝑀 cyclic.
𝑋
Pareto Improvements: Given an EFX allocation 𝑋, which is not necessarily complete, several
techniquescanbeappliedtofindnewEFXallocationsthatParetodominate𝑋. Wewilldiscuss
someofthesetechniquesbelow.
Firstly,wecaneliminateenvycycles.
Lemma1([15]). If𝑋 isanEFXallocationsuchthattheenvygraph𝐸 of𝑋 hasadirectedcycle,then
𝑋
thereexistsanotherEFXallocation𝑌 suchthat𝑌 ≻ 𝑋.
4Chaudhuryetal. generalizedthisideaasfollows.
Lemma 2 ([10]). Let 𝑋 be a partial EFX allocation. If there exists two agents 𝑎 and 𝑎 such that 𝑎
𝑖 𝑗 𝑖
𝑔-champions𝑎 and𝑎 isreachablefrom𝑎 intheenvygraph𝐸 ,thenthereexistsanotherEFXallocation
𝑗 𝑖 𝑗 𝑋
𝑌 such that 𝑌 ≻ 𝑋. Moreover, all the agents in the path from 𝑎 to 𝑎 , including 𝑎 and 𝑎 , get strictly
𝑖 𝑗 𝑖 𝑗
betterbundlesin𝑌.
Asacorollaryoftheabovelemma,wecanmakethefollowingtwoobservations.
Corollary1([10]). Let𝑋 beapartialEFXallocation. Ifatleastoneofthefollowingholds,thenthereexists
anotherEFXallocation𝑌 suchthat𝑌 ≻ 𝑋.
1. Envygraph𝐸 hasasinglesourcevertex.
𝑋
2. Thereexistsanagent𝑎 whoself𝑔-champions.
𝑖
Givenanallocation𝑋,ifagent𝑎 doesnotenvyagent𝑎 but𝑎 𝑔-champions𝑎 ,itfollowsthat
𝑖 𝑗 𝑖 𝑗
𝑔 ∈ MES (𝑋 ∪𝑔,𝑋 ). Inthiscase,wesaythatagent𝑎 decomposesthebundle𝑋 intotopand
𝑎𝑖 𝑎𝑗 𝑎𝑖 𝑖 𝑎𝑗
bottomhalves. Thetophalfisdefinedas𝑇 𝑎𝑎 𝑗𝑖 = MES 𝑎𝑖(𝑋 𝑎𝑗 ∪𝑔,𝑋 𝑎𝑖)∖𝑔, whilethebottomhalfis
given by 𝐵 𝑎𝑎 𝑗𝑖 = 𝑋 𝑎𝑗 ∖𝑇 𝑎𝑎 𝑗𝑖. This decomposition allows us to compare the top halves of different
agents’bundles,leadingtothefollowingobservation.
Proposition3. Consideranallocation𝑋. Supposeagent𝑎 𝑔-championsagent𝑎 anddoesnot𝑔-champion
𝑖 𝑗
𝑎 ℓ. Suppose agent 𝑎 𝑘, for 𝑘 ̸= 𝑖, 𝑔-champions agent 𝑎 ℓ. The bundle 𝑋 𝑎𝑖 is decomposed as 𝑇 𝑎𝑎 𝑗𝑖 and 𝐵 𝑎𝑎 𝑗𝑖.
Similarly,𝑋 𝑎
ℓ
isdecomposedinto𝑇 𝑎𝑎 ℓ𝑘 and𝐵 𝑎𝑎 ℓ𝑘. Then𝑇 𝑎𝑎 𝑗𝑖 > 𝑎𝑖 𝑇 𝑎𝑎 ℓ𝑘.
Proof. Agent𝑎 𝑖 𝑔-champions𝑎 𝑗 butnot𝑎 ℓ. Therefore,𝑇 𝑎𝑎 𝑗𝑖 ∪𝑔 > 𝑎𝑖 𝑋 𝑎𝑖 > 𝑎𝑖 𝑇 𝑎𝑎 ℓ𝑘 ∪𝑔,whichimplies
𝑇 𝑎𝑎 𝑗𝑖 > 𝑎𝑖 𝑇 𝑎𝑎 ℓ𝑘.
2.1 ThreeTypesofAgents
Givenaninstance⟨𝒩,ℳ,𝒱⟩ofdiscretefairdivision,wesaythattheagentsareofthreetypesifthe
setofagentscanbepartitionedas𝒩 = A⊎B⊎C ,whereagentsineachofthesetsA ,B ,andC have
identicalvaluationfunctions. Werefertotheseasthethreegroupsofagents. Inparticular,wedenote
the agents in group A as A = {𝑎 ,𝑎 ,𝑎 ,...,𝑎 }, all of whom have the same additive valuation
1 2 3 𝑝
function𝑣 . Similarly,theagentsingroupB = {𝑏 ,𝑏 ,...,𝑏 }andgroupC = {𝑐 ,𝑐 ,...,𝑐 }have
𝑎 1 2 𝑞 1 2 𝑟
identicaladditivevaluationfunctions𝑣 and𝑣 ,respectively. Let𝑝,𝑞 and𝑟bethenumberofagents
𝑏 𝑐
ingroupsA,B andC respectively. Thus,|𝒩| = 𝑛 = 𝑝+𝑞+𝑟.
Givenanallocation𝑋 foranon-degenerateinstancewiththreetypesofagents,foranytwo
agents𝑎 and𝑎 ofthesametype,weknowthateither𝑋 > 𝑋 or𝑋 < 𝑋 . Therefore,w.l.o.g.
𝑖 𝑗 𝑎𝑖 𝑎𝑗 𝑎𝑖 𝑎𝑗
weassumethatthebundlesaresortedamongtheagentsineachgroupandthereforetheagents
𝑎 ,𝑏 and 𝑐 have the least valued bundles of their respective groups. We call them the leading
1 1 1
agents,denotedby𝐿 = {𝑎 ,𝑏 ,𝑐 }. Throughoutthispaper,wewillmaintainthispropertyasan
1 1 1
invariantforeachEFXallocation.
Definition 9 (Ordering Invariant ). Let 𝑋 be an EFX allocation. For any group 𝑇 ∈ {A,B,C} with
valuation𝑣 ,if∃𝑖 > 𝑗 suchthat𝑣 (𝑋𝑖) < 𝑣 (𝑋𝑗)thenweinterchangethebundlesofthetwoagents. Thus,
𝑡 𝑡 𝑡 𝑡 𝑡
wemaintaintheinvariantthat𝑣 (𝑋𝑖) ≥ 𝑣 (𝑋𝑗)whenever𝑖 > 𝑗,foreachgroup𝑇 withvaluationfunction
𝑡 𝑡 𝑡 𝑡
𝑣 . Inparticular,theleadingagentwithineachgrouphastheminimumvaluedbundlewithinthatgroup.
𝑡
5Foraninstancewiththreetypesofagents,Proposition2canberefinedasfollows.
Proposition4. Givenaninstancewith3typesofagents,andanallocation𝑋,onlyleadingagentscanbe
thesourcesintheenvygraph𝐸 . Hence𝐸 hasatmost3sources. Moreover,thefollowinghold:
𝑋 𝑋
1. Ifanynon-leadingagent𝑥envies(respectively𝑔-champions)anotheragent𝑦,thentheleadingagent
inthegroupof𝑥alsoenvies(respectively𝑔-champions)𝑦.
2. Inthechampiongraph𝑀 ,theremustbeacycleoflengthatmost3,andthecycleinvolvesonlythe
𝑋
leadingagents.
Proof. BytheOrderingInvariant(Definition9),if𝑥envies𝑦,theleadingagentinthesamegroup
as𝑥hasthesamevaluationfunctionandasmallervaluedbundlethan𝑥. HencePart1follows.
To see Part 2, consider allocation of 𝑔 to each of the leading agents. From Proposition 4, we
knowthat𝑀 iscyclic. Ifaleadingagentself-𝑔-champions,then𝑀 hasacycleoflength1. Ifno
𝑋 𝑋
leadingagentself-𝑔-champions,thenbyPart1,noagentinanygroup𝑔-championstheleading
agentinthesamegroup. Sotheleadingagentofeachgroupmustbe𝑔-championedbyaleading
agentofanothergroup,therebycreatinga2-cycleora3-cycle.
2.2 ProgressMeasures
AcommonapproachtoprovingtheexistenceofEFXallocationsistobeginwithanempty,trivially
EFXallocation,anditerativelyextendit. Toensuretermination,variousprogressmeasureshavebeen
proposed. Paretodominanceisonesuchwell-studiedmeasure,whereeachpartialEFXallocation
Paretodominatesthepreviousone. Chaudhuryetal. [9]introducedthelexicographicimprovement
toprovetheexistenceofEFXforthreeagents.
ToproveTheorem1,weuseacombinationofParetodominanceandanewpotentialfunction
asdefinedbelow.
Definition10(Potentialfunction: ). Forany,possiblypartial,allocation𝑋,potentialof𝑋 isdefinedtobe
𝜑(𝑋) = min𝑣 (𝑋 )
𝑎𝑖∈A
𝑎 𝑎𝑖
Notethatthefunction𝜑iscompatiblewithParetodominance. Thatis,
Proposition5. Forallocations𝑋,𝑌,if𝑌 ≻ 𝑋,then𝜑(𝑌) ≥ 𝜑(𝑋).
If𝜑(𝑌) > 𝜑(𝑋),wesay𝑌 𝜑-dominates𝑋. WestartwithatriviallyEFXallocationanditeratively
findnewEFXallocationsthateitherParetodominateor𝜑-dominatethepreviousone. AsPareto
dominanceisapartialorderonthesetofallocations,and𝜑formsatotalorder,thisproceduremust
terminate.
GivenapartialEFXallocation𝑋,wediscussafewsimplemethodstoobtaina𝜑-dominating
EFXallocation.
Firstly,ifagent𝑎 istheonlysourceintheenvygraph𝐸 ,thenasacorollaryofLemma2,we
1 𝑋
geta𝜑-dominatingEFXallocation. Thisistrueasthebundlevalueofagent𝑎 strictlyincreases.
1
Corollary2. GivenapartialEFXallocation𝑋,if𝑎 istheonlysourcein𝐸 ,thenthereexistsanEFX
1 𝑋
allocation𝑌,possiblypartial,suchthat𝜑(𝑌) > 𝜑(𝑋).
We generalize this idea to cases where there is no actual cycle among the agents, but rather
amongthegroups. Wecallthisthe𝜑-improvingexchanges,asdiscussedinthefollowingsection.
62.3 𝜑-improvingexchanges
Similar to Pareto Improving Cycles in [6], we define 𝜑-improving exchanges for instances with
threetypesofagents. Thesearenotnecessarilycyclesamongtheagents,butrathercyclesamong
thegroups. Someexamplesofa𝜑-improvingexchangesaregiveninFigure1.
··· 𝑎1 𝑏1 𝑏𝑖··· ···𝑎1 𝑏1 𝑏𝑖 ···
ℎ
𝑔 𝑔
𝑐1 𝑐𝑗··· 𝑐1 ···
(a)⟨(𝑎 1,𝑏 𝑖),(𝑏 1,𝑐 𝑗),(𝑐 1,𝑎 1)⟩isa𝜑-improvingexchangein- (b)⟨(𝑎 1,𝑏 𝑖),(𝑏 1,𝑐 1),(𝑐 1,𝑎 1)⟩isa𝜑-improvingexchangein-
volvingtwocompatiblechampionedges. volvingone𝑔-championedge
··· 𝑎1 𝑏1 𝑏𝑖 ··· ··· 𝑎1
𝑔
𝑐1 𝑐𝑗 ···
𝑏1 𝑏𝑖···
(c)⟨(𝑎 1,𝑏 𝑖),(𝑏 1,𝑐 𝑗),(𝑐 1,𝑎 1)⟩isa𝜑-improvingexchangewith
onlyenvyedges (d)⟨(𝑎 1,𝑏 𝑖),(𝑏 1,𝑎 1)⟩isa𝜑-improvingexchange
Figure1: Someexamplesof𝜑-improvingexchanges
Definition11(𝜑-improvingexchange). GivenanEFXallocation𝑋,possiblypartial,a𝜑-improvingex-
changeinvolvingthreegroupsisatupleofedgeseitheroftheform⟨(𝑎 ,𝑏 ),(𝑏 ,𝑐 ),(𝑐 ,𝑎 )⟩or⟨(𝑎 ,𝑐 ),(𝑐 ,𝑏 ),(𝑏 ,𝑎 )⟩,
1 𝑖 1 𝑗 1 1 1 𝑗 1 𝑖 1 1
where𝑏 ∈ Band𝑐 ∈ C,suchthatthefollowingholds:
𝑖 𝑗
(i) everyedgeinthetupleiseitheranenvyedgeora𝑔-championedgeforsomeunallocatedgood𝑔.
(ii) Foranyunallocatedgood𝑔,thetuplecanhaveatmostone𝑔-championedge.
Similarly, a 𝜑-improving exchange involving two groups is a tuple of the form ⟨(𝑎 ,𝑏 ),(𝑏 ,𝑎 )⟩ (or
1 𝑖 1 1
⟨(𝑎 ,𝑐 ),(𝑐 ,𝑎 )⟩)suchthattheaboveconditionshold.
1 𝑗 1 1
Toperforma𝜑-improvingexchange,withineachgroup,thebundlethatisbeingenvied(orchampioned)
isgiventotheenvying(orchampioning)group. Withineachgroup,theincomingbundleisthenallocatedto
theagentwhowasbeingenvied(orchampioned)intheexchange. Iftheedgeisachampionedge,theMES
bundleistransferredinsteadofthewholebundle.
Performinga𝜑-exchangeonanEFXallocation𝑋 immediatelygivesa𝜑-dominantEFXallocation
𝑌. ThisisstatedinthefollowingLemma3.
Lemma 3. A 𝜑-improving exchange on an EFX allocation 𝑋 gives another EFX allocation 𝑌 such that
𝜑(𝑌) > 𝜑(𝑋).
Proof. ConsideranEFXallocation𝑋. A𝜑-improvingexchangein𝑋 caneitherinvolveagentsfrom
twogroups,orfromallthethreegroups.
7Ifitinvolvestwogroups,say⟨(𝑎 ,𝑏 ),(𝑏 ,𝑎 )⟩,weformanewallocation𝑌 byassigning𝑋 to
1 𝑖 1 1 𝑎1
𝑏 (orMES (𝑋 ∪𝑔)if(𝑎 ,𝑏 )isa𝑔-championedge)and𝑋 (orMES (𝑋 ∪ℎ)foranℎ-champion
𝑖 𝑏 𝑎1 1 𝑖 𝑏𝑖 𝑎 𝑏𝑖
edge)to𝑎 .
𝑖
Ifitinvolvesthreegroups,w.l.o.glet⟨(𝑎 ,𝑏 ),(𝑏 ,𝑐 ),(𝑐 ,𝑎 )⟩bea𝜑-improvingexchange. The
1 𝑖 1 𝑗 1 1
newallocation𝑌 isobtainedbytransferringthebundleof𝑏 to𝑎 ,thatof𝑐 to𝑏 ,andthebundle
𝑖 1 𝑗 1
of𝑎 to𝑐 . Ifanyofthesearechampionedges,weallocateMESbundlesaccordingly.
1 1
Thebundlesarethenre-sortedtorestoretheOrderingInvariant. Let𝑋(𝐴)bethesetofbundles
ofagentsinA intheallocation𝑋. Inallocation𝑌,thevalueoftheminimumvaluedbundleinA
increasessincethenewbundlesinA i.e. 𝑌(𝐴) = (𝑋(𝐴)∖{𝑋 )}∪{𝑋 },and𝑣 (𝑋 ) > 𝑣 (𝑋 ).
𝑎1 𝑏𝑖 𝑎 𝑏𝑖 𝑎 𝑎1
SothenewminimumvaluedbundleinA ismin{𝑋 ,𝑋 }.
𝑎2 𝑏𝑖
Nowweprovethat𝑌 isanEFXallocation. Foreachagent,thebundlein𝑌 iseitherthesame
asthatin𝑋,orabetterbundlethanthatin𝑋. Also,theexchangedbundlesareeitherthesame
bundlesasin𝑋 orareanMESof𝑔 addedtoabundlein𝑋. Therefore,theexchangedbundlesare
notstronglyenviedbyanyagent. Thisprovesthat𝑌 isalsoanEFXallocation.
2.4 Proofoutline
ToproveTheorem1,weshowthat,foranypartialEFXallocation𝑋,thereisanotherEFXallocation
𝑌 suchthateither𝑌 ≻ 𝑋 or𝜑(𝑌) > 𝜑(𝑋). Sincethenumberofallocationsisfinite,thisprocess
must terminate with a complete EFX allocation. The proof of Theorem 1 is organized into the
followingcaseconfigurations,whereineachconfiguration,weshowhowtoconstructtheallocation
𝑌.
1. Agent𝑎 isasourcein𝐸 : Thisisfurthersubdividedintothefollowingsub-cases:
1 𝑋
(a) Agent 𝑎 envies someone in B ∪ C . This configuration is considered in Lemma 7 and
1
Lemma8inSection4.
(b) Agent𝑎 enviesnooneinB∪C . Theexistenceof𝑌 isprovedinLemma9inSection5.
1
2. Agent 𝑎 is not a source in 𝐸 : This case is considered in Section 6. Two sub-cases arise, as
1 𝑋
mentionedbelow:
(a) Agent𝑎 enviessomeagentinB∪C . Inthiscase, theconstructionoftheallocation𝑌 is
1
showninLemma14.
(b) Agent𝑎 doesnotenvyanyagentinB∪C . ThiscaseisconsideredinLemma15.
1
Keyrecurringconfigurations. Inprovingthesecases,severalkeyconfigurationsarisefrequently,
whichhelpinconstructingthedesiredallocation𝑌.
First,weshowthatwhentherearethreesourcesintheenvygraph𝐸 ,wecanobtain𝑌,𝑌 ≻ 𝑋.
𝑋
ThisisshowninLemma6ofSection3.
Inmanyscenarios,weencounterallocationssuchthatthestrongenviesareconfinedwithin
groups, meaning there is no inter-group strong envy. We show that such envy can be resolved
withoutreducingthepotential𝜑. Thisisshownmoregenerallyinthefollowinglemma.
Lemma4(Resolvinginternalstrongenvies). Let𝑋 beanyallocation. Supposeanagent,say𝑎 ,strongly
𝑖
enviesaset𝑆 ofagentsonlywithinhergroup,i.e.,𝑆 ⊂ A. Then,thereexistsanotherallocation𝑌 suchthat
thefollowingconditionshold:
8(i) 𝜑(𝑌) = 𝜑(𝑋)
(ii) In𝑌,agent𝑎 doesnotstronglyenvyanyone.
𝑖
(iii) In𝑌,noagentin𝑆 stronglyenviesanyagent.
Proof. Let𝑎 ∈ 𝑆. So𝑎 stronglyenvies𝑎 . Thenwereplace𝑋 by𝑌 = MES (𝑋 ). Clearly𝑋
𝑗 𝑖 𝑗 𝑎𝑗 𝑎𝑗 𝑎𝑖 𝑎𝑗 𝑎𝑗
isnottheminimumvaluedbundleinA . So𝜑doesn’tchangebythisreplacement. Sincesucha
replacementisdoneforeach𝑎 ∈ 𝑆,𝑎 hasnostrongenvytowardsanyagentin𝑆. Since𝑎 didnot
𝑗 𝑖 𝑖
stronglyenvyanyoneinothergroupswithrespectto𝑋,andsincealltheagentsoutside𝑆 havethe
samebundlesin𝑋 and𝑌,𝑎 doesnotstronglyenvyanyoneoutside𝑆 either. Althoughagentsin
𝑖
𝑆,like𝑎 ,gotsmallerbundles,𝑌 > 𝑋 . So𝑎 doesnotstronglyenvyanyonewithrespectto𝑌
𝑗 𝑎𝑗 𝑎 𝑎𝑖 𝑗
as𝑎 doesnotstronglyenvyanyonewithrespectto𝑌.
𝑖
SinceLemma4appliestoanyofthethreegroups,wehavethefollowingcorollary.
Corollary3. If𝑋 isanallocationwherenoagentstronglyenviesanotheragentfromadifferentgroup,then
thereexistsanEFXallocation𝑌,possiblypartial,suchthat𝜑(𝑌) = 𝜑(𝑋).
Therearecaseswheretwooftheleadingagentschampioneachother,whileathirdagentenvies
neitherofthem,wherethefollowinglemmaapplies.
Lemma5. Let𝑋 beapartialEFXallocationwithanunallocatedgood𝑔 suchthatin𝑋,twooftheleading
agents(say,𝑏 and𝑐 )𝑔-championeachotherandnoneoftheleadingagentsenvythosetwoagents(𝑏 and
1 1 1
𝑐 ,inthiscase). Then,thereexistsanEFXallocation𝑌 suchthat𝑌 ≻ 𝑋. Moreover,thebundlesofboththe
1
leadingagentsinthe𝑔-championcyclearestrictlyimproved.
Proof. Withoutlossofgenerality,assumethatagents𝑏 and𝑐 𝑔-championeachother. Then,the
1 1
bundlesof𝑏 and𝑐 canbepartitionedintotopandbottompartsasfollows:
1 1
𝑇𝑐1 𝑇𝑏1
𝑋 = 𝑋
𝑏1 𝑐1
𝑎1 𝐵𝑐1 𝐵𝑏1
𝑏1 𝑐1
𝑎 𝑏 𝑐
1 1 1
Weconsideranewallocationbyexchangingthetwotophalvesasfollows:
𝑇𝑏1 𝑇𝑐1
𝑋′ = 𝑋 𝑐1 𝑏1
𝑎1 𝐵𝑐1 𝐵𝑏1
𝑏1 𝑐1
𝑎 𝑏 𝑐
1 1 1
FromProposition3,weknowthat𝑇 𝑏𝑐 11 > 𝑐1 𝑇 𝑐𝑏 11 and𝑇 𝑐𝑏 11 > 𝑏1 𝑇 𝑏𝑐 11. Therefore,bothagents𝑏 1 and
𝑐 arestrictlybetteroff. Now,considerthepotentialstrongenviesin𝑋′. Sincetheallocation𝑋 was
1
EFX,anystrongenviesin𝑋′ mustbetowards𝑏
1
or𝑐 1. As𝑇 𝑏𝑐 11 >
𝑐1
𝑇 𝑐𝑏 11,weknowthat
𝑋′ = 𝑇𝑐1 ∪𝐵𝑏1 > 𝑇𝑏1 ∪𝐵𝑏1 = 𝑋 > 𝑇𝑐1 ∪𝐵𝑐1 = 𝑋 > 𝑇𝑏1 ∪𝐵𝑐1 = 𝑋′
𝑐1 𝑏1 𝑐1 𝑐1 𝑐1 𝑐1 𝑏1 𝑏1 𝑏1 𝑐1 𝑏1 𝑏1
Therefore,noagentfromgroupC enviesagent𝑏 . Similarly,noonefromB enviesagent𝑐 . So,
1 1
theonlypossiblestrongenviesarefromagentsinA toeither2or3. Weknowthatifanyagentin
9A enviessomeagent𝑎* ∈ 𝒩,then𝑎 alsoenvies𝑎*. Sinceagent𝑎 enviedneither𝑏 nor𝑐 inthe
1 1 1 1
allocation𝑋,agent𝑎 canenvyatmostoneagentamong𝑏 and𝑐 in𝑋′. Withoutlossofgenerality,
1 1 1
assumethatagent𝑎 stronglyenviesagent𝑏 . Then,wereplace𝐵𝑐1 inagent𝑏 ’sbundlewith𝑔 to
1 1 𝑏1 1
getthefollowingallocation:
𝑇𝑏1 𝑇𝑐1
𝑌 = 𝑋
𝑐1 𝑏1
1 𝑔 𝐵𝑏1
𝑐1
𝑎 𝑏 𝑐
1 1 1
As 𝑇 𝑐𝑏 11 ∪𝑔 is a minimally envied subset, no agent strongly envies 𝑏 1. Since 𝑇 𝑐𝑏 11 ∪𝑔 >
𝑏1
𝑋 𝑏1,
shedoesnotenvyagent𝑐 . Furthermore,sinceagent𝑐 didnotself𝑔-championin𝑋,noagentin
1 1
C envyagent𝑏 . Finally,ifanyagentfromC∖𝑐 stronglyenvies𝑐 ,wereplace𝑐 ’sbundlewith
1 1 1 1
MESC(𝑌 𝑐1,𝑋 𝑐2),whichisstillbetterthan𝑋
𝑐1
foragent𝑐 1. Therefore,𝑌 isanEFXallocationsuch
that𝑌(𝐿) ≻ 𝑋(𝐿)and𝑌(𝒩 ∖𝐿) = 𝑋(𝒩 ∖𝐿).
3 Three sources in 𝐸
𝑋
Astheleadingagentsholdtheminimumvaluedbundleintheirrespectivegroups,theyenvyall
theagentsfromtheirowngroupandareneverenviedbyanyoneintheirowngroup. Weconsider
thecasewhennoleadingagentisenviedbyanyone. Thatis,𝑎 ,𝑏 and𝑐 arethesourcesin𝐸 .
1 1 1 𝑋
Lemma6. Let𝑋 beapartialEFXallocationwithatleastoneunallocatedgood𝑔. Ifthesetofleadingagents
𝐿 = {𝑎 ,𝑏 ,𝑐 } are sources in the envy graph 𝐸 , then there exists an allocation 𝑌 such that 𝑌 ≻ 𝑋.
1 1 1 𝑋
Furthermore,𝑌(𝐿) ≻ 𝑋(𝐿)and𝑌(𝒩 ∖𝐿) = 𝑋(𝒩 ∖𝐿).
Proofoverview: Inthiscase,weonlyupdatethebundlesoftheleadingagents,whiletheremain-
ingagentsretaintheiroldbundles. Aftertheupdate,eachleadingagentpreferstheirnewbundle
overtheiroldones. Additionally,theleadingagentsdonotenvythenewbundlesofotherleading
agents,evenwhencomparedtotheirownoldbundles. Thus,thenon-leadingagentsinagroup
(whokeeptheiroldbundles)donotstronglyenvyanyagentinothergroups. Asaresult,theonly
strongenviesthatremainarewithinthegroups,whichareresolvedusingLemma4. Therefore,the
newallocationweobtainisanEFXallocation. Furthermore,thenewbundlessatisfy𝑌(𝐿) ≻ 𝑋(𝐿)
and𝑌(𝒩 ∖𝐿) = 𝑋(𝒩 ∖𝐿).
Proof. FromProposition4,weknowthatthe𝑔-championgraph𝑀 mustcontainacycleoflength
𝑋
atmostthree,involvingagents𝑎 ,𝑏 ,and𝑐 . Ifanyoftheleadingagentsself𝑔-champions,using
1 1 1
Corollary1,wegetaPareto-dominatingEFXallocation𝑌. Ifthe𝑔-championcycleisoflength2,
thenbyapplyingLemma5,wegetourdesiredallocation. Therefore,assumethat𝑀 hasacycleof
𝑋
length3. Withoutlossofgenerality,assumethat(𝑎 ,𝑐 ),(𝑐 ,𝑏 )and(𝑏 ,𝑎 )are𝑔-championedges
1 1 1 1 1 1
in𝑀 asshowninFigure2. Sincetheseagentsdonotenvyeachother,the𝑔-championedgesbreak
𝑋
thebundleintotopandbottomhalvesasshownbelow.
𝑇𝑏1 𝑇𝑐1 𝑇𝑎1
𝑋(𝐿) =
𝑎1 𝑏1 𝑐1
𝐵𝑏1 𝐵𝑐1 𝐵𝑎1
𝑎1 𝑏1 𝑐1
𝑎 𝑏 𝑐
1 1 1
10Foreaseofnotation,wewillcall𝑇 𝑎𝑏 11,𝑇 𝑏𝑐 11,and𝑇 𝑐𝑎 11 as𝑇 𝑎,𝑇
𝑏
and𝑇 𝑐. Similarly,wecallthebottom
halves as 𝐵 ,𝐵 and 𝐵 . We now make the following observations regarding the relationships
𝑎 𝑏 𝑐
amongthesepartsofthebundles.
Firstly,agent𝑎 champions𝑐 ,butdoesnotself𝑔-champion. Therefore,𝑇 ∪𝑔 > 𝑇 ∪𝑔 =⇒
1 1 𝑐 𝑎 𝑎
𝑇 > 𝑇 . Similarly,as𝑎 doesnot𝑔-champion𝑏 ,wehave𝑇 ∪𝑔 > 𝑇 ∪𝑔 =⇒ 𝑇 > 𝑇 .
𝑐 𝑎 𝑎 1 1 𝑐 𝑎 𝑏 𝑐 𝑎 𝑏
As𝑇 > 𝑇 ,wehave𝑇 ∪𝐵 > 𝑇 ∪𝐵 = 𝑋 . As𝑎 doesnotenvy𝑐 ,weknowthat𝑋 =
𝑐 𝑎 𝑎 𝑐 𝑎 𝑎 𝑎 𝑎 𝑎1 1 1 𝑎1
𝑇 ∪𝐵 > 𝑇 ∪𝐵 . Bycombiningthesetwoinequalitiesweget𝑇 ∪𝐵 > 𝑇 ∪𝐵 =⇒ 𝐵 > 𝐵 .
𝑎 𝑎 𝑎 𝑐 𝑐 𝑐 𝑎 𝑎 𝑐 𝑐 𝑎 𝑎 𝑐
As𝑎 doesnotself𝑔-champion,wehave𝑇 ∪𝐵 > 𝑇 ∪𝑔 =⇒ 𝐵 > 𝑔. As𝑎 𝑔-champions
1 𝑎 𝑎 𝑎 𝑎 𝑎 𝑎 1
𝑐 butdoesnotenvy𝑐 ,wehave𝑇 ∪𝑔 > 𝑇 ∪𝐵 =⇒ 𝑔 > 𝐵 .
1 1 𝑐 𝑎 𝑐 𝑐 𝑎 𝑐
Analogousobservationscanbemadeforagents𝑏 and𝑐 . Thefollowingtablesummarizesthe
1 1
aboveobservationsforallthreeleadingagents:
Agent Observations
𝑎 : 𝑇 > 𝑇 ; 𝑇 > 𝑇 ; 𝐵 > 𝑔 > 𝐵 (1)
1 𝑐 𝑎 𝑎 𝑐 𝑎 𝑏 𝑎 𝑎 𝑎 𝑐
𝑏 : 𝑇 > 𝑇 ; 𝑇 > 𝑇 ; 𝐵 > 𝑔 > 𝐵 (2)
1 𝑎 𝑏 𝑏 𝑎 𝑏 𝑐 𝑏 𝑏 𝑏 𝑎
𝑐 : 𝑇 > 𝑇 ; 𝑇 > 𝑇 ; 𝐵 > 𝑔 > 𝐵 (3)
1 𝑏 𝑐 𝑐 𝑏 𝑐 𝑎 𝑐 𝑐 𝑐 𝑏
Furthermore,as𝑎 doesnotenvy𝑏 ,wehave𝑇 ∪𝐵 > 𝑇 ∪𝐵 . Therefore,if𝐵 < 𝐵 ,then
1 1 𝑎 𝑎 𝑎 𝑏 𝑏 𝑎 𝑎 𝑏
itmustbethecasethat𝑇 > 𝑇 . CombiningwithCondition1,if𝐵 < 𝐵 ,then𝑇 > 𝑇 > 𝑇
𝑎 𝑎 𝑏 𝑎 𝑎 𝑏 𝑐 𝑎 𝑎 𝑎 𝑏
and𝐵 > 𝐵 > 𝑔 > 𝐵 . Analogousobservationscanbemadeforagents𝑏 and𝑐 .
𝑏 𝑎 𝑎 𝑎 𝑎 𝑐 1 1
We have three predicates: 𝐵 < 𝐵 ,𝐵 < 𝐵 , and 𝐵 < 𝐵 . We have the following four
𝑎 𝑎 𝑏 𝑏 𝑏 𝑐 𝑐 𝑐 𝑎
possibilitiesbasedofhowmanyofthesepredicatesholdtrue.
Case1 All the predicates hold: That is, 𝐵 < 𝐵 ,𝐵 < 𝐵 , and 𝐵 < 𝐵 . We then have the
𝑎 𝑎 𝑏 𝑏 𝑏 𝑐 𝑐 𝑐 𝑎
followingupdatedinequalities:
Agent Observations
𝑎 : 𝑇 > 𝑇 > 𝑇 and 𝐵 > 𝐵 > 𝑔 > 𝐵 (4)
1 𝑐 𝑎 𝑎 𝑎 𝑏 𝑏 𝑎 𝑎 𝑎 𝑎 𝑐
𝑏 : 𝑇 > 𝑇 > 𝑇 and 𝐵 > 𝐵 > 𝑔 > 𝐵 (5)
1 𝑎 𝑏 𝑏 𝑏 𝑐 𝑐 𝑏 𝑏 𝑏 𝑏 𝑎
𝑐 : 𝑇 > 𝑇 > 𝑇 and 𝐵 > 𝐵 > 𝑔 > 𝐵 (6)
1 𝑏 𝑐 𝑐 𝑐 𝑎 𝑎 𝑐 𝑐 𝑐 𝑐 𝑏
We allocate 𝑇 ∪𝐵 to agent 𝑎 , 𝑇 ∪𝐵 to agent 𝑏 , and 𝑇 ∪𝐵 to agent 𝑐 . These bundles
𝑐 𝑏 1 𝑎 𝑐 1 𝑏 𝑎 1
correspondtothemostpreferredtopandbottomhalvesforeachagent(refertoConditions4,5,
and6). Therefore,allthreeagentsstrictlyimprove. Furthermore,accordingtoagent𝑎 ,wehave
1
𝑇 ∪𝐵 > 𝑇 ∪𝐵 = 𝑋 > 𝑇 ∪𝐵 = 𝑌 . Thatis,𝑎 doesnotenvy𝑏 evenwithrespecttoher
𝑐 𝑏 𝑎 𝑎 𝑎 𝑎1 𝑎 𝑎 𝑐 𝑏1 1 1
oldbundle𝑋 . Therefore,noagentinA envy𝑏 . Similarly,wehave𝑋 > 𝑇 ∪𝐵 = 𝑌 . Thatis,
𝑎1 1 𝑎1 𝑎 𝑏 𝑎 𝑏1
noagentfromA envies𝑏 . SimilarlywecanshowthatnoagentsfromeitherB or𝐶 envyanyof
1
𝑎 ,𝑏 or𝑐 . Ifanystrongenvyremains,itmustbeconfinedtoagentswithintheirrespectivegroups.
1 1 1
Hence,weapplyLemma4toresolvetheseenvies.
Case2 None of the three predicates holds: Thus 𝐵 > 𝐵 , 𝐵 > 𝐵 , and 𝐵 > 𝐵 . We then
𝑎 𝑎 𝑏 𝑏 𝑏 𝑐 𝑐 𝑐 𝑎
cyclicallyshiftthetophalvesofthesethreebundles,allocating𝑇 ∪𝐵 toagent𝑎 ,𝑇 ∪𝐵 toagent
𝑐 𝑎 1 𝑎 𝑏
𝑏 ,and𝑇 ∪𝐵 toagent𝑐 . Since𝑇 > 𝑇 and𝑇 > 𝑇 ,agent𝑎 strictlyimprovesanddoesnot
1 𝑏 𝑐 1 𝑐 𝑎 𝑎 𝑐 𝑎 𝑏 1
11envyeither𝑏 or𝑐 astheyreceivedlesspreferredtophalvesaccordingto𝑎 . Similarly, both𝑏
1 1 1 1
and𝑐 alsoexperienceimprovementsanddonotenvyanyagentsfrom{𝑎 ,𝑏 ,𝑐 }. Furthermore,
1 1 1 1
byapplyingtheinequalities1,2,and3wehave𝑇 > 𝑇 whichimplies𝑇 ∪𝐵 > 𝑇 ∪𝐵 = 𝑌 .
𝑏 𝑎 𝑎 𝑏 𝑏 𝑎 𝑎 𝑏 𝑏1
Alongwiththefactthat𝑎 didnotpreviouslyenvy𝑏 ,wehave𝑋 > 𝑋 > 𝑌 . Thereforeagent
1 1 𝑎1 𝑎 𝑏1 𝑎 𝑏1
𝑎 doesnotenvy𝑏 evenwithrespecttoheroldbundle𝑋 . Therefore,noagentinA envy𝑏 . In
1 1 𝑎1 1
ananalogouswaywecanshowthatnoneoftheagentsenvyanyof𝑎 ,𝑏 or𝑐 . Ifanystrongenvy
1 1 1
remains,itmustbeconfinedtoagentswithintheirrespectivegroups. Hence,weapplyLemma4to
resolvetheseenvies.
Case3 Oneofthethreepredicatesholds: Withoutlossofgenerality,assume𝐵 < 𝐵 ,𝐵 > 𝐵 ,
𝑎 𝑎 𝑏 𝑏 𝑏 𝑐
and𝐵 > 𝐵 .
𝑐 𝑐 𝑎
Wethenhave:
Agent Observations
𝑎 : 𝑇 > 𝑇 > 𝑇 and 𝐵 > 𝐵 > 𝑔 > 𝐵 (4)
1 𝑐 𝑎 𝑎 𝑎 𝑏 𝑏 𝑎 𝑎 𝑎 𝑎 𝑐
𝑏 : 𝑇 > 𝑇 ; 𝑇 > 𝑇 ; 𝐵 > 𝑔 > 𝐵 (2)
1 𝑎 𝑏 𝑏 𝑎 𝑏 𝑐 𝑏 𝑏 𝑏 𝑎
𝑐 : 𝑇 > 𝑇 ; 𝑇 > 𝑇 ; 𝐵 > 𝑔 > 𝐵 (3)
1 𝑏 𝑐 𝑐 𝑏 𝑐 𝑎 𝑐 𝑐 𝑐 𝑏
Weallocatethebundlesas: 𝑇 ∪𝐵 toagent𝑎 ,𝑇 ∪𝑔 to𝑏 and𝑇 ∪𝐵 toagent𝑐 .
𝑐 𝑎 1 𝑎 1 𝑏 𝑐 1
Firstly, for agent 𝑎 , we have 𝑇 ∪𝐵 > 𝑇 ∪𝐵 and 𝑇 ∪𝐵 > 𝑇 ∪𝑔. Therefore, agent 𝑎
1 𝑐 𝑎 𝑎 𝑎 𝑎 𝑎 𝑎 𝑎 𝑎 1
strictlyimprovesanddoesnotenvy𝑏 evenwithrespecttoheroldbundle. ThusnoagentinA
1
envy𝑏 . Furthermore,since𝑇 ∪𝐵 > 𝑇 ∪𝐵 > 𝑇 ∪𝐵 ,neitheragent𝑎 noranyotheragent
1 𝑐 𝑎 𝑎 𝑎 𝑎 𝑎 𝑏 𝑐 1
fromA envies𝑐 .
1
Secondly,as𝑇 ∪𝑔 istheMESbundle,agent𝑏 strictlyimproves,i.e.,𝑇 ∪𝑔 > 𝑇 ∪𝐵 . Given
𝑎 1 𝑎 𝑏 𝑏 𝑏
thecaseassumption𝐵 > 𝐵 ,wehave𝑇 ∪𝐵 > 𝑇 ∪𝐵 . Thus,noneoftheagentsfromB envy
𝑏 𝑏 𝑐 𝑏 𝑏 𝑏 𝑏 𝑐
𝑐 . As 𝑏 did not 𝑔-champion 𝑐 , we have 𝑇 ∪𝐵 > 𝑇 ∪𝑔. From Condition 2, we know that
1 1 1 𝑏 𝑏 𝑏 𝑐
𝑇 ∪𝑔 > 𝑇 ∪𝐵 . Therefore,as𝑇 ∪𝐵 > 𝑇 ∪𝐵 ,noagentinB envies𝑎 .
𝑐 𝑏 𝑐 𝑎 𝑏 𝑏 𝑏 𝑐 𝑎 1
Finally,As𝑇 > 𝑇 ,agent𝑐 alsohasstrictimprovement. Thatis,𝑇 ∪𝐵 > 𝑇 ∪𝐵 . Because
𝑏 𝑐 𝑐 1 𝑏 𝑐 𝑐 𝑐 𝑐
ofthecaseassumption𝐵 > 𝐵 ,wehave𝑇 ∪𝐵 > 𝑇 ∪𝐵 . AsnoagentinC previouslyenvied
𝑐 𝑐 𝑎 𝑐 𝑐 𝑐 𝑐 𝑎
𝑋 = 𝑇 ∪𝐵 , no agent in C envies 𝑎 in 𝑌. As 𝑐 or any other agent in C did not previously
𝑐1 𝑐 𝑐 1 1
𝑔-champion𝑎 ,theydonotenvy𝑏 whohasthebundle𝑇 ∪𝑔.
1 1 𝑎
Therefore, if any strong envy remains, it must be confined to agents within their respective
groups. Hence,weapplyLemma4toresolvetheseenvies.
Case4 Twooutofthethreepredicatesholdtrue: Withoutlossofgenerality,assume𝐵 < 𝐵 ,
𝑎 𝑎 𝑏
𝐵 < 𝐵 ,and𝐵 > 𝐵 . Wehavethefollowingobservations:
𝑏 𝑏 𝑐 𝑐 𝑐 𝑎
Agent Observations
𝑎 : 𝑇 > 𝑇 > 𝑇 and 𝐵 > 𝐵 > 𝑔 > 𝐵 (4)
1 𝑐 𝑎 𝑎 𝑎 𝑏 𝑏 𝑎 𝑎 𝑎 𝑎 𝑐
𝑏 : 𝑇 > 𝑇 > 𝑇 and 𝐵 > 𝐵 > 𝑔 > 𝐵 (5)
1 𝑎 𝑏 𝑏 𝑏 𝑐 𝑐 𝑏 𝑏 𝑏 𝑏 𝑎
Case4.1 T > T : Now,alongwiththeabovetwoobservations,wehave
c c a
𝑐 : 𝑇 > 𝑇 > 𝑇 and 𝐵 > 𝑔 > 𝐵 and 𝐵 > 𝐵 (6)
1 𝑏 𝑐 𝑐 𝑐 𝑎 𝑐 𝑐 𝑐 𝑏 𝑐 𝑐 𝑎
12Weallocate𝑇 ∪𝐵 to𝑎 ,𝑇 ∪𝐵 to𝑏 and𝑇 ∪𝑔 toagent𝑐 .
𝑐 𝑏 1 𝑎 𝑐 1 𝑏 1
Foragents𝑎 and𝑏 ,itisclearfromConditions4and5thattheyhavereceivedstrictimprove-
1 1
mentswithrespecttotheirpreviousbundlesandthattheydonotenvyanyonein{𝑎 ,𝑏 ,𝑐 }inthe
1 1 1
newallocation. Furthermore,from4weseethat𝑇 ∪𝐵 > 𝑇 ∪𝐵 = 𝑌 and𝑇 ∪𝐵 > 𝑇 ∪𝑔 = 𝑌 .
𝑎 𝑎 𝑎 𝑎 𝑐 𝑏1 𝑎 𝑎 𝑎 𝑏 𝑐1
Therefore,noagentfromA envieseither𝑏 or𝑐 . Similarly,using5wecanshowthatagentsinB
1 1
envyneither𝑎 nor𝑐 .
1 1
Foragent𝑐 ,weknowthat𝑇 ∪𝑔 > 𝑇 ∪𝐵 as𝑐 𝑔-championed𝑏 . ByapplyingCondition6,
1 𝑏 𝑐 𝑐 𝑐 1 1
we get 𝑇 ∪𝐵 > 𝑇 ∪𝐵 and 𝑇 ∪𝐵 > 𝑇 ∪𝐵 . Therefore, agent 𝑐 (or any other agent in C )
𝑐 𝑐 𝑐 𝑐 𝑏 𝑐 𝑐 𝑐 𝑎 𝑐 1
enviesneither𝑏 nor𝑎 . Therefore,anyremainingstrongenvymustberestrictedtoagentswithin
1 1
theirrespectivegroups. Consequently,weapplyLemma4toresolvetheseenvies.
Case4.2 T < T : Therefore,insteadofCondition6,wehavethefollowingobservation:
c c a
𝑐 : 𝑇 > 𝑇 > 𝑇 and𝐵 > 𝑔 > 𝐵 and𝐵 > 𝐵 (7)
1 𝑏 𝑐 𝑎 𝑐 𝑐 𝑐 𝑐 𝑐 𝑏 𝑐 𝑐 𝑎
In this case, we would like to allocate 𝑇 ∪ 𝐵 to 𝑎 , 𝑇 ∪ 𝐵 to 𝑏 and 𝑇 ∪ 𝐵 to agent 𝑐 .
𝑐 𝑎 1 𝑏 𝑏 1 𝑎 𝑐 1
However,inthisallocationagent𝑏 enviesagent𝑐 ,andthisenvycouldpotentiallybeastrong
1 1
envy. Therefore,weconsidertheMESbundle𝑆 = MES (𝑇 ∪𝐵 ,𝑋 ). Basedonwhetherornot
𝑏 𝑎 𝑐 𝑏1
agent𝑐 prefers𝑆 over𝑋 ,wehavethefollowingtwosub-cases:
1 𝑐1
Case4.2(a) S > X : Then,weallocatethebundlesasfollows. Agent𝑎 gets𝑇 ∪𝐵 ,𝑏 retains
c c1 1 𝑐 𝑎 1
𝑇 ∪𝐵 and𝑐 gets𝑆. FromCondition4wehave𝑇 ∪𝐵 > 𝑇 ∪B andfromthiscaseassumtion
𝑏 𝑏 1 𝑐 𝑎 𝑎 𝑎 𝑎
we know that 𝑆 > 𝑋 . Therefore agents 𝑎 and 𝑐 receive strict improvements while agent 𝑏
𝑐 𝑐1 1 1 1
retainsheroldbundle.
We know that 𝑋 > 𝑋 = 𝑌 Therefore, not agent from A envies 𝑏 . Furthermore, as
𝑎1 𝑎 𝑏1 𝑏1 1
𝐵 > 𝐵 (Condition4),weget𝑇 ∪𝐵 > 𝑇 ∪𝐵 > 𝑆. Thus,noagentfromA envies𝑐 .
𝑎 𝑎 𝑐 𝑎 𝑎 𝑎 𝑎 𝑐 𝑎 1
Thebundle𝑆 isanMESbundleofagent𝑏 . Therefore,agent𝑏 (oranyotheragentinB )does
1 1
notstronglyenvy𝑐 . FromCondition5,wehave𝑇 > 𝑇 . Therefore,𝑇 ∪𝐵 > 𝑇 ∪𝐵 . Since𝑏
1 𝑎 𝑏 𝑐 𝑎 𝑎 𝑏 𝑐 𝑎 1
didnotpreviouslyenvy𝑎 ,wealsohave𝑇 ∪𝐵 > 𝑇 ∪𝐵 . Bycombiningthesetwoinequalities,
1 𝑏 𝑏 𝑏 𝑎 𝑎
weget𝑇 ∪𝐵 > 𝑇 ∪𝐵 . Hence,𝑏 (andthereforenooneelsefromB )doesnotenvy𝑎 .
𝑏 𝑏 𝑏 𝑐 𝑎 1 1
We know that 𝑆 > 𝑋 = 𝑇 ∪𝐵 . From Case 4 assumption we have 𝐵 > 𝐵 . Therefore,
𝑐 𝑐1 𝑐 𝑐 𝑐 𝑐 𝑎
𝑆 > 𝑇 ∪𝐵 > 𝑇 ∪𝐵 . Therefore,noneoftheagentsinC envy𝑎 . As𝑐 oranyotheragentinC
𝑐 𝑐 𝑐 𝑎 𝑐 𝑎 1 1
didnotpreviouslyenvy𝑏 ,theydonotenvy𝑏 now.
1 1
Therefore,anyremainingstrongenvymustberestrictedtoagentswithintheirrespectivegroups.
Consequently,weapplyLemma4toresolvetheseenvies.
Case4.2(b) S < X : Then,weallocatethebundlesasfollows: Agent𝑎 gets𝑇 ∪𝐵 ,𝑏 gets𝑆
c c1 1 𝑐 𝑏 1
and𝑐 getsherMESbundle𝑇 ∪𝑔.
1 𝑏
AccordingtoagentsinA : ApplyingCondition4,𝑇 ∪𝐵 > 𝑇 ∪𝐵 > 𝑇 ∪𝐵 > 𝑆. Therefore,
𝑐 𝑏 𝑎 𝑎 𝑎 𝑎 𝑎 𝑐 𝑎
𝑎 ’sbundlestrictlyimprovedand𝑎 doesnotenvy𝑏 evenwithrespecttoheroldbundle. Thusno
1 1 1
agentinA envy𝑏 . Since𝑎 oranyoneelsefromA didnotpreviously𝑔-champion𝑏 ,Theydonot
1 1 1
envy𝑐 whohasthebundle𝑇 ∪𝑔.
1 𝑏
AccordingtoagentsinB : As𝑆 is𝑏 ’sMESbundle,𝑏 receivedastrictlybetterbundle. From
1 1
Condition5,weknowthat𝑇 > 𝑇 ,therefore,𝑆 > 𝑇 ∪𝐵 > 𝑇 ∪𝐵 . Thatis,𝑏 doesnotenvy
𝑏 𝑏 𝑐 𝑏 𝑏 𝑏 𝑏 𝑐 𝑏 1
13𝑎 ,evenwithrespecttoheroldbundle. Thus,noagentinB envy𝑎 . Since𝑏 didnotpreviously
1 1 1
self𝑔-champion,andnoneoftheagentsinB𝑔-championed𝑏 ,theydonotenvy𝑇 ∪𝑔 ofagent𝑐 .
1 𝑏 1
According to agents in C : 𝑇 ∪𝑔 is an MES bundle of agent 𝑐 . Therefore, 𝑐 received strict
𝑏 1 1
improvement. UsingCondition7,weknow𝐵 > 𝐵 . Therefore,𝑇 ∪𝐵 > 𝑇 ∪𝐵 . Thatis,𝑐
𝑐 𝑐 𝑏 𝑐 𝑐 𝑐 𝑐 𝑏 1
does not envy𝑎 , even with respect to herold bundle. Thus no agent inC envies 𝑎 . Fromthe
1 1
currentcaseassumption,thatis𝑆 < 𝑋 ,weknowthatnoagentinC envies𝑏 .
𝑐 𝑐1 1
Therefore,thecurrentallocationParetodominates𝑋 andanystrongenvythatremainsmust
berestrictedtoagentswithintheirrespectivegroups. Thus,weapplyLemma4toresolvethese
envies.
Corollary4. Let𝑋 beapartialEFXallocationwithatleastoneunallocatedgood𝑔. Ifthesetofleading
agents 𝐿 = {𝑎 ,𝑏 ,𝑐 } are all the sources in the envy graph 𝐸 , then there exists an EFX allocation 𝑌,
1 1 1 𝑋
possiblypartial,suchthatatleastoneofthefollowingholds:
1. 𝜑(𝑌) > 𝜑(𝑋)
2. 𝑌 ≻ 𝑋 and𝑎 isasourcein𝐸 and∀𝛼 ∈ (B∪C)∖𝐿if(𝑎 ,𝛼)isanedgein𝐸 then(𝑎 ,𝛼)isan
1 𝑌 1 𝑋 1
edgein𝐸 .
𝑌
Proof. GivenapartialEFXallocation𝑋 withthreesources,weapplyLemma6togetanallocation
𝑌 suchthat𝑌(𝐿) ≻ 𝑋(𝐿)and𝑌(𝒩 ∖𝐿) = 𝑋(𝒩 ∖𝐿). Ifagent𝑎 hasstrictlyimprovedin𝑌,then
1
condition1issatisfied.
Otherwise, agent 𝑎 must have retained the same bundle in 𝑌 as in 𝑋. As no agent envied
1
𝑎 in𝑋 whohadthesamebundleasin𝑌, theycontinuetonotenvy𝑎 in𝑌 as𝑌 ∖𝑎 ≻ 𝑋 ∖𝑎 .
1 1 1 1
Therefore𝑎 isasourcein𝑌. Additionally,ifagent𝑎 enviedsomeagentin(B∪C)∖𝐿in𝑋,then
1 1
𝑎 continuestoenvythesameagentin𝑌 as𝑌(𝒩 ∖𝐿) = 𝑋(𝒩 ∖𝐿).
1
4 agent 𝑎 envies someone in B ∪ C
1
Inthissectionweconsiderthecasewhenagent𝑎 isasourceandenviessomeagentfromB∪C .
1
If𝑎 envieseither𝑏 or𝑐 ,wehavethefollowinglemma.
1 1 1
Lemma7. Let𝑋 beapartialEFXallocationwithatleastoneunallocatedgood𝑔. If𝑎 isasourcein𝐸
1 𝑋
and𝑎 envieseither𝑏 or𝑐 ,thenthereexistsanEFXallocation𝑌 suchthat𝜑(𝑌) > 𝜑(𝑋).
1 1 1
Proof. Without loss of generality, assume that 𝑎 envies 𝑏 . If 𝑎 is the only source in 𝐸 , we
1 1 1 𝑋
immediately getour desiredallocation 𝑌 by applyingCorollary 2. Theremainingcase is when
there are two sources in 𝐸 . Thus, 𝑐 is also a source in 𝐸 . Given that some agent must 𝑔-
𝑋 1 𝑋
champion𝑎 ,wefirstconsiderthecasewhere𝑎 self𝑔-champions. Inthiscase,wecanimprove
1 1
𝑎 1’sbundlebyreplacing𝑋 𝑎1 withtheMESbundle𝑇 𝑎𝑎 11 ∪𝑔. Weget𝑌,𝜑(𝑌) > 𝜑(𝑋).
If,however,𝑏 𝑔-champions𝑎 ,then⟨(𝑎 ,𝑏 ),(𝑏 ,𝑎 )⟩isa𝜑-improvingexchange,thusweare
1 1 1 1 1 1
done. Theonlyremainingpossibilityisthat𝑐 𝑔-champions𝑎 . Wenowconsidercasesbasedon
1 1
who𝑔-champions𝑐 .
1
Case1 Agent𝑎 𝑔-champions𝑐 : Then𝑎 and𝑐 forma𝑔-championcycle. Notethatnoneofthe
1 1 1 1
leadingagentsenvy𝑎 or𝑐 astheyarebothsources. Inthiscase,wecanapplyLemma5toobtain
1 1
anallocation𝑌 suchthat𝜑(𝑌) > 𝜑(𝑋).
14Case2 Agent 𝑐 self 𝑔-champions: We compute a new Pareto-dominating EFX allocation by
1
replacing 𝑋 𝑐1 with the MES bundle 𝑇 𝑐𝑐 11 ∪𝑔. In this new allocation, 𝑎 1 continues to be a source
and still envies 𝑏 . We start again by applying Lemma 7 to this new allocation 𝑌. Since Pareto
1
dominanceisapartialorderandtherearefinitelymanypartialEFXallocations,thisproceduremust
terminatewithanallocation𝑍 suchthateither𝑍 isacompleteEFXallocation,or𝜑(𝑍) > 𝜑(𝑋).
Case3 Agent𝑏 𝑔-champions𝑐 : Seefigurebelowforanillustrationofthiscase.
1 1
𝑔
𝑎 1 𝑏 1 𝑐 1
𝑔
Weconsideranewallocationbyexchangingthetophalvesasfollows:
𝑇𝑏1 𝑇𝑐1
𝑐1 𝑎1
𝑌 = 𝑋
𝑏1 𝑔 𝐵𝑏1
𝑐1
𝑎 𝑏 𝑐
1 1 1
Observethatthebundlesofallthethreeagents𝑎 ,𝑏 ,and𝑐 havestrictlyimprovedandtherefore
1 1 1
𝜑(𝑌) > 𝜑(𝑋). WenowcheckifthenewallocationisindeedEFX.Iftherearenostrongenviesin
𝑌,wearedone. So,considerthecasewhenthereisatleastonestrongenvyin𝑌. Observerthat
ifthereareanystrongenviesin𝑌, theymustbetowardseither𝑎 or𝑏 or𝑐 . Weknowthatno
1 1 1
agentstronglyenvies𝑎 or𝑏 as𝑎 receivedanoldbundlefrom𝑋 and𝑌 wasanMESbundlein
1 1 1 𝑏1
𝑋. Furthermore,agent𝑏 1 doesnotenvy𝑐 1. Thisisbecause,fromProposition3wehave𝑇 𝑐𝑏 11 > 𝑏 𝑇 𝑎𝑐 11.
Therefore,𝑋 𝑐1 = 𝑇 𝑐𝑏 11∪𝐵 𝑐𝑏 11 > 𝑏 𝑇 𝑎𝑐 11∪𝐵 𝑐𝑏 11. Since𝑏 1didnotenvy𝑋 𝑐1 in𝑋,shedoesnotenvy𝑇 𝑎𝑐 11∪𝐵 𝑐𝑏 11
in 𝑌. Thus, the only possible strong envy is from agent 𝑎 or other agents in A , towards 𝑐 . We
1 1
knowthat𝑐 doesnotenvyeither𝑎 or𝑏 . However,𝑐 mightenvyoneoftheotheragents. We
1 1 1 1
considerthefollowingcasesbasedonpossibleenviesfromagent𝑐 intheallocation𝑌.
1
Case3.1 Agent𝑐 enviessome𝑎 ∈ A∖{𝑎 }: Then,weexchangethebundlesofagents𝑎 and𝑐 .
1 𝑖 1 𝑖 1
Notethattheremaynotbeenvyfrom𝑎 to𝑐 ,Butsince𝑎 envies𝑐 ,thebundleof𝑐 isbetterthan
𝑖 1 1 1 1
bundleof𝑎 accordingto𝑣 . Now,allthestrongenviesarewithinthegroups. Therefore,weapply
1 𝑎
Lemma3toresolvesuchenviesandobtainanewEFXallocation𝑍 suchthat𝜑(𝑍) = 𝜑(𝑌) > 𝜑(𝑋).
Case3.2 Agent𝑐 enviessome𝑏 ∈ B∖{𝑏 }: Inthiscase,wereallocateasfollows: assign𝑌 to𝑐 ,
1 𝑗 1 𝑏𝑗 1
𝑌 to𝑎 ,and𝑌 (whichissameas𝑋 )backto𝑏 . As𝑎 receivedabundlewhichwasstrongly
𝑐1 1 𝑎1 𝑏1 1 1
enviedbysomeagentinA ,𝑎 ’snewbundleisstrictlybetterthan𝑋 . Since𝑐 receivedthebundle
1 𝑎1 1
thatsheenvied,shealsoseesastrictimprovement.
However, the value of 𝑏 ’s bundle decreases. Recall that in the previous allocation 𝑋, we
1
establishedthat𝑋
𝑐1
>
𝑏
𝑇 𝑎𝑐 11∪𝐵 𝑐𝑏 11,therefore𝑏 1doesnotenvy𝑎 1. Furthermore,since𝑌
𝑏1
wasanMES
bundlerelativeto𝑋 ,agent𝑏 doesnotstronglyenvy𝑐 . Atthispoint,allremainingstrongenvies
𝑏1 1 1
areconfinedwithinthegroups. Therefore,weapplyLemma4toresolvetheseenvies,yieldinga
newEFXallocation𝑍 suchthat𝜑(𝑍) = 𝜑(𝑌) > 𝜑(𝑋).
Case3.3 Agent𝑐 doesnotenvyanyonefromA∪B: Let𝑆 ⊆ 𝑌 denotethesmallestsubsetof
1 𝑐1
𝑌 suchthat,accordingto𝑐 ’svaluation,𝑆 ispreferredoverthebundlesofallagentsinA∪B . If
𝑐1 1
15𝑎 doesnotstronglyenvy𝑆,thenweallocate𝑆 to𝑐 andresolveanyinternalstrongenvies. This
1 1
givesusthedesiredEFXallocationwhich𝜑-dominatesthepreviousone.
Suppose𝑎 stronglyenvies𝑐 evenwiththebundle𝑆. Then,let𝑆′ ⊂ 𝑆 beasmallestcardinality
1 1
subset of 𝑆 that 𝑎 weakly envies. Let 𝑇 = max {𝑋 | 𝑝 ∈ A∪B} be the best bundle among the
1 𝑐 𝑝
agentsinA∪B accordingtoagent𝑐 . 𝑇 caneitherbeabundlefromoneoftheagentsinA orfrom
1
B
.
Case3.3.1 T = Y forsomea ∈ A: Thenallocate𝑇 to𝑐 and𝑆′ to𝑎 . Wethenresolveinternal
a i i 1 𝑖
strong envies within the groups using Lemma 3, yielding a new EFX allocation 𝑍 such that
𝜑(𝑍) = 𝜑(𝑌) > 𝜑(𝑋).
Case3.3.2 T = Y for some b ∈ B In this case, we ask agent 𝑏 to select her most preferred
b j 𝑗
j
bundlefromtheagentsinA ,sayfromagent𝑎 . Wethenallocate𝑌 to𝑏 ,𝑌 to𝑐 ,and𝑆′ toagent
𝑖 𝑎𝑖 𝑗 𝑏𝑗 1
𝑎 . Weknowthatagent𝑏 doesnotstronglyenvyanyagentfromA∪C . Thus,weswapthebundles
𝑖 1
of𝑏 and𝑏 ,sothatnowagent𝑏 doesnotstronglyenvyanyonefromA∪C . Consequently,any
𝑗 1 𝑗
strongenvytowardsagentsinA∪C ,ifitexists,mustnowcomefromagent𝑏 .
1
In this allocation, agent 𝑐 does not envy any agent from A∪B because she chose her most
1
preferredbundle. Agent𝑎 ’spriorstrongenvytowards𝑐 isnowresolved. Additionally,agent𝑎
1 1 1
doesnotstronglyenvy𝑏 ,asshedidnotstronglyenvy𝑎 earlier. Therefore,𝑎 doesnotstrongly
1 𝑖 1
envyanyagentfromB∪C
.
Finally, agent 𝑏 does not envy any agent in A∖{𝑎 }, as 𝑏 (who has the same valuation as
1 𝑖 𝑗
𝑏 ) selected the best bundle from A . The bundle 𝑌 , which 𝑏 picked, is at least as valuable as
1 𝑎𝑖 𝑗
𝑌 = 𝑋 . Moreover,recallthatwithbundle𝑋 ,agent𝑏 didnotstronglyenvy𝑏 oranyagentin
𝑎1 𝑏1 𝑏1 1 𝑗
C inallocation𝑋. Therefore,inthenewallocation,withabundleatleastasvaluableas𝑋 ,agent
𝑏1
𝑏 1 doesnotstronglyenvyanyagentinC . Additionally,weknowthat𝑋 𝑐1 > 𝑏 𝑇 𝑎𝑐 11 ∪𝐵 𝑐𝑏 11 > 𝑏 𝑆′,so
agent𝑏 doesnotstronglyenvy𝑎 .
1 𝑖
Based on the above observations, agent 𝑏 does not strongly envy any agent from B ∪ A .
1
Therefore, we apply Corollary 3 to resolve any internal strong envies, resulting in a new EFX
allocation𝑍 suchthat𝜑(𝑍) = 𝜑(𝑌) > 𝜑(𝑋).
Lemma8. Let𝑋 beapartialEFXallocationwithatleastoneunallocatedgood𝑔. Ifagent𝑎 isasourcein
1
𝐸 andif𝑎 enviessomeagentfromB∪C,thenthereexistsanEFXallocation𝑌 such𝜑(𝑌) > 𝜑(𝑋).
𝑋 1
Proof. Agent𝑎 enviessomeagentinB∪C . If𝑎 envieseither𝑏 or𝑐 ,wecanapplyLemma7to
1 1 1 1
getanallocation𝑌 suchthat𝜑(𝑌) > 𝜑(𝑋). Thus,fortheremainderofthisproof,weconsiderthe
casewhereagent𝑎 enviessomeagentin(B∪C)∖{𝑏 ,𝑐 }.
1 1 1
Wenowconsidervariouscasesbasedonthenumberofsourcesintheenvygraph𝐸 .
𝑋
Case1 𝐸 hasthreesources: FromProposition4,weknowthatnoneotherthanleadingagents
𝑋
𝐿 = {𝑎 ,𝑏 ,𝑐 }arethesourcesin𝐸 . WeapplyCorollary4togetanallocation𝑌. If𝜑(𝑌) > 𝜑(𝑋),
1 1 1 𝑋
wearedone. Otherwise,becauseofCondition2ofCorollary4,weknowthat𝑌 ≻ 𝑋 and𝑌 satisfies
theconditionsrequiredtoapplyLemma8. So,weapplyLemma8on𝑌. SinceParetodominanceis
apartialorderandtherearefinitelymanypartialEFXallocations,thisproceduremustterminate
withanallocation𝑍 suchthateither𝑍 isacompleteEFXallocationor𝜑(𝑍) > 𝜑(𝑋).
Case2 Agent𝑎 isasinglesourcein𝐸 : ThenbyapplyingLemma2,wegetanallocation𝑌 such
1 𝑋
that𝜑(𝑌) > 𝜑(𝑋).
16Case3 𝐸 has two sources: Without loss of generality, assume that 𝑎 envies some agent 𝑏 ∈
𝑋 1 𝑖
B∖{𝑏 }. Furthermore,w.l.o.gassumethattherearenoself𝑔-champions. Weknowthatsomeagent
1
must𝑔-champion𝑎 .
1
Case3.1 Agent𝑏 𝑔-champions𝑎 : Then,⟨(𝑎 ,𝑏 ),(𝑏 ,𝑎 )⟩formsa𝜑-improvingcycles. Therefore,
1 1 1 𝑖 1 1
usingLemma3,wegetanewEFXallocation𝑌 suchthat𝜑(𝑌) > 𝜑(𝑋).
Case3.2 Agent𝑐 𝑔-champions𝑎 : Recallthatboth𝑏 and𝑐 cannotbesourcesin𝐸 becauseof
1 1 1 1 𝑥
Case 3 assumption. Furthermore, we have assumed that 𝑎 envies neither 𝑏 nor 𝑐 . Therefore,
1 1 1
either𝑏 envies𝑐 or𝑐 envies𝑏 .
1 1 1 1
Case3.2.1 Agent 𝑏 envies 𝑐 : Here ⟨(𝑎 ,𝑏 ),(𝑏 ,𝑐 ),(𝑐 ,𝑎 )⟩ is a 𝜑-improving cycle. Therefore,
1 1 1 𝑖 1 1 1 1
usingLemma3,wegetanewEFXallocation𝑌 suchthat𝜑(𝑌) > 𝜑(𝑋).
Case3.2.2 Agent𝑐 envies𝑏 : Inthiscase,weknowthatsomeonemust𝑔-championagent𝑐 .
1 1 1
Case3.2.2.1 𝑏 champions𝑐 : weconstructanewEFXallocation𝑌 bygivingthebundle𝑋 to𝑐
1 1 𝑏1 1
and 𝑇 𝑐𝑏 11 ∪𝑔 to agent 𝑏 1. Note that both agent 𝑏 1 and 𝑐 1 have strictly improved. Furthermore, as
𝑇 𝑐𝑏 11 ∪𝑔 isaminimallyenviedsubset,noagentstronglyenvies𝑏 1. As𝑋
𝑏1
wasnotstronglyenvied
in𝑋,itcannotbestronglyenviedin𝑌. Therefore,𝑌 isanEFXallocationsuchthat𝑌 ≻ 𝑋. Also
notethatagent𝑎 continuestoenvyagent𝑏 . Thus,allocation𝑌 satisfiestheconditionsrequired
1 𝑖
toapplyLemma8and𝑌 ≻ 𝑋. So,weapplyLemma8on𝑌. SinceParetodominanceisapartial
orderandtherearefinitelymanypartialEFXallocations,thisiterativeproceduremustterminate
withanallocation𝑍 suchthateither𝑍 isacompleteEFXallocationor𝜑(𝑍) > 𝜑(𝑋).
Case3.2.2.2 Agent𝑎 𝑔-champions𝑐 : Then,weexchangethetophalvesof𝑋 and𝑋 togeta
1 1 𝑎1 𝑐1
newallocation𝑌,wherethebundlesof𝑎 ,𝑏 and𝑐 areasfollows:
1 1 1
𝑇𝑎1 𝑇𝑐1
𝑐1 𝑎1
𝑌(𝐿) = 𝑋
𝐵𝑐1 𝑏1 𝐵𝑎1
𝑎1 𝑐1
𝑎 𝑏 𝑐
1 1 1
Applying Proposition 3, we know that 𝑇 𝑐𝑎 11 > 𝑎 𝑇 𝑎𝑐 11. Therefore, 𝑌 𝑎1 > 𝑎 𝑋 𝑎1 > 𝑎 𝑌 𝑐1. That
is, agent 𝑎 has strictly improved and no agent from A strongly envies 𝑐 in 𝑌. Analogously,
1 1
𝑌 > 𝑋 > 𝑌 . That is, agent 𝑐 has strictly improved and no agent from C strongly envies
𝑐1 𝑐 𝑐1 𝑐 𝑎1 1
𝑎 in𝑌. Sinceagent𝑏 wasenvyingneither𝑎 nor𝑐 in𝑋,𝑏 canenvyatmostoneof𝑎 ,𝑐 in𝑌.
1 1 1 1 1 1 1
Withoutlossofgenerality,assumethat𝑏
1
stronglyenvies𝑎 1. Wethenreplacethebottomhalf𝐵 𝑎𝑐1
1
of𝑎 with𝑔 toget𝑍. Thebundlesof𝑎 ,𝑏 ,and𝑐 in𝑍 areasfollows:
1 1 1 1
𝑇𝑎1 𝑇𝑐1
𝑐1 𝑎1
𝑍(𝐿) = 𝑋
𝑔 𝑏1 𝐵𝑎1
𝑐1
𝑎 𝑏 𝑐
1 1 1
As𝑇 𝑐𝑎 11 ∪𝑔 isaminimallyenviedsubset,noonestronglyenviesagent𝑎 1. Furthermore,𝑍 𝑎1 > 𝑎
𝑋 > , therefore agent 𝑎 is strictly better off compared to 𝑋 and 𝑎 does not strongly envy 𝑐 .
𝑎1 𝑎 1 1 1
Therefore,wehaveanEFXallocation𝑍 suchthat𝜑(𝑍) > 𝜑(𝑋).
175 Agent 𝑎 envies no one in B ∪ C
1
Here we consider a partial EFX allocation 𝑋, where agent 𝑎 is a source and 𝑎 does not envy
1 1
anyoneinB∪C
.
Lemma9. Let𝑋 beapartialEFXallocationwithatleastoneunallocatedgood𝑔. If𝑎 isasourcein𝐸
1 𝑋
and𝑎 enviesnoagentfromB∪C,thenthereexistsanEFXallocation𝑌 such𝜑(𝑌) > 𝜑(𝑋).
1
Proof. Weconsiderallpossiblecasesbasedonthenumberofsourcesin𝐸 .
𝑋
Case1. If𝑎 istheonlysourcein𝐸 ,weapplyCorollary2togetanEFXallocation𝑌 suchthat
1 𝑋
𝜑(𝑌) > 𝜑(𝑋).
Case2. Supposetherearethreesourcesin𝐸 . Thatis,𝐿 = {𝑎 ,𝑏 ,𝑐 }isthesetofsourcesin𝐸 .
𝑋 1 1 1 𝑋
WeapplyCorollary4on𝑋 togetanallocation𝑌,𝑌 ≻ 𝑋. If𝜑(𝑌) > 𝜑(𝑋),wearedone. Otherwise,
weknowthat𝑎 isasourcein𝑌. If𝑎 enviessomeagentinB∪C ,weapplyLemma8on𝑌 toget
1 1
anallocation𝑍,suchthat𝜑(𝑍) > 𝜑(𝑌) = 𝜑(𝑋). If𝑎 enviesnoagentinB∪C ,weapplyLemma9
1
on𝑌,as𝑌 satisfiesalltheconditionstoapplyLemma9and𝑌 ≻ 𝑋. SinceParetodominanceis
apartialorderandtherearefinitelymanypartialEFXallocations,thisiterativeproceduremust
terminatewithanEFXallocation𝑍 suchthateither𝑍 isacompleteallocationor𝜑(𝑍) > 𝜑(𝑋).
Case3. Therearetwosourcesin𝐸 . Weknowthat𝑎 isasource. Withoutlossofgenerality,let𝑏
𝑋 1 1
betheothersource. Therefore𝑐 isnotasourceandhenceitmustbeenviedbysomeleadingagent.
1
Since𝑎 doesnotenvyanyone,𝑏 envies𝑐 . Wenowconsiderthecasesdependingonwhichagent
1 1 1
𝑔-champions𝑏 .
1
Case3.1. Suppose agent 𝑏 self 𝑔-champions (see the figure below). We then construct a new
1
Pareto dominating EFX allocation 𝑌 by replacing 𝑋 with MES (𝑋 ∪𝑔). Since this is a strict
𝑏1 𝑏 𝑏1
improvementforagent𝑏 ,shecontinuestonotenvy𝑎 evenin𝑌. Nooneelseenvies𝑎 asthere
1 1 1
was no change in their bundles. Thus 𝑎 is a source in 𝑌. If 𝑎 envies 𝑏 , we apply Lemma 8 to
1 1 1
geta𝜑improvement. Otherwise,weapplyLemma9againon𝑌. AstherearefinitelymanyEFX
allocations,thisParetoimprovementcannotgoonforever.
𝑔
𝑎 1 𝑏 1 𝑐 1
Case3.2. If𝑐 𝑔-champions𝑏 (Seethefigurebelow),then(𝑏 ,𝑐 ,𝑏 )isaParetoimprovingcycle.
1 1 1 1 1
Eliminatingthiscyclegivesanallocation𝑌 suchthat𝑌 ≻ 𝑋 and𝑎 isasourcein𝐸 and𝑎 does
1 𝑌 1
not envy any agent in B∪C . We apply Lemma 9 again on 𝑌. As there are finitely many EFX
allocations,thisParetoimprovementcannotgoonforever.
𝑎 1 𝑏 1 𝑐 1
𝑔
Case3.3. If𝑎 𝑔-champions𝑏 ,thenwegiveanalgorithm(Algorithm1)togetanallocation𝑌 such
1 1
that𝜑(𝑌) > 𝜑(𝑋). Lemma13provesthecorrectnessofAlgorithm1.
185.1 Agent𝑎 isasource,𝑎 enviesnooneinB∪C but𝑔-champions𝑏
1 1 1
Inthissection,weconsiderthecasewhenwehaveapartialEFXallocation𝑋 withanunallocated
item𝑔,inwhich,agent𝑎 isasource,and𝑎 doesnotenvyanyoneinB∪C but𝑎 𝑔-champions𝑏 .
1 1 1 1
Seethefigurebelow.
𝑔
𝑎 1 𝑏 1 𝑐 1
ThepseudocodeforouralgorithmtohandlethiscaseispresentedasAlgorithm1. Ittakes𝑋 as
inputandoutputsanotherEFXallocation𝑌 suchthat𝜑(𝑌) > 𝜑(𝑋).
5.1.1 OverviewofAlgorithm1
Inthissection,wegiveanoverviewofthealgorithm. PleaserefertoAlgorithm1thepseudo-code.
High-level idea: Recall that 𝑎 does not envy 𝑏 but 𝑎 𝑔-champions 𝑏 with respect to the EFX
1 1 1 1
allocation𝑋. Sothebundle𝑇𝑎1 ∪𝑔 issuchthat𝑎 doesnotstronglyenvyanyoneafterreceiving
𝑏1 1
𝑇𝑎1 ∪𝑔 andinfact,thisholdforany𝑎 ,withrespectto𝑋. Further,𝑇𝑎1 ∪𝑔 > 𝑋 . Also,noone
𝑏1 𝑖 𝑏1 𝑎 𝑎1
stronglyenvies𝑇𝑎1 ∪𝑔 withrespectto𝑋. If𝑇𝑎1 ∪𝑔 canbeallottedto𝑎 ,andasuitablereplacement
𝑏1 𝑏1 1
bundle for 𝑏 can be found, then this will result in an EFX allocation with improved value of 𝜑.
1
ThisisroughlythegoalofAlgorithm1. Temporarily,weallot𝑇𝑎1 ∪𝑔 to𝑏 . Clearly,thestrongenvy
𝑏1 1
canonlybefrom𝑏 tootheragents. Thisinvariant,calledInvariant1,ismaintainedthroughout
1
Algorithm1.
Invariant1. Intheallocation𝑋,onlyagent𝑏 mayhavestrongenvytowardsothers.
1
Notation: AtthebeginningofAlgorithm1,define𝑂 ,thecomparisonsetforB ,asthesetofallthe
𝑏
bundlesallocatedtoagentsinA∪C ,togetherwith𝑇𝑎1∪𝑔.
DuringthecourseofAlgorithm1,some
𝑏1
ofthebundlesin𝑂 willbereplacedbyoneoftheirpropersubsets,calledavirtualbundle. Atany
𝑏
point in the algorithm, denote 𝑃 = max 𝑂 . Similarly, define 𝑂 , the comparison set for C as the
𝑏 𝑏 𝑐
bundlesbelongingtoagentsinA∪B . Define𝑄 = max (𝑂 ∪{𝑃}).
𝑐 𝑐
Case1 P ∈ {X | a ∈ A}∪{Ta1 ∪g}: SeeFigure2. If𝑃 = 𝑋 forsome𝑖,then𝑃 canbeallocated
a i i b1 𝑖
to𝑏 and𝑇𝑎1 ∪𝑔 to𝑎 ,followedbyinternalsortingofbundlesofgroupsA andB . Clearly,after
1 𝑏1 𝑖
receiving𝑃, 𝑏 hasnostrongenvytowardsanyagentinA∪C . Possiblestrongenvyfrom𝑏 to
1 1
otheragentsinB canberesolvedusingLemma4togetanEFXallocation. If𝑃 = 𝑋 then𝑎 gets
𝑎1 1
abetterbundlethan𝑋 , namely𝑇𝑎1 ∪𝑔, andhence𝜑improves. If𝑃 = 𝑋 for𝑖 ̸= 1, then𝑋
𝑎1 𝑏1 𝑎𝑖 𝑎1
stillremainstheminimumvaluedbundleingroupA . However,𝑎 envies𝑃 since𝑃 = 𝑋 > 𝑋 .
1 𝑎𝑖 𝑎 𝑎1
ThuswecanapplyLemma8togetanEFXallocationwithahighervalueof𝜑. Asimilarargument
appliesif𝑃 = 𝑇𝑎1 ∪𝑔.
𝑏1
𝑏 𝑞 ··· 𝑏 2 𝑏 1 𝑎 1 ··· 𝑎 𝑖 ··· 𝑎 𝑝
𝑇𝑎1 ∪𝑔
𝑏1
Figure2: Greenedgepointsto𝑃 =𝑋 =max 𝑂
𝑎𝑖 𝑏 𝑏
19Case2 P ⊆ X forsomeiandQ ∈ {X | a ∈ A}∪{Ta1 ∪g}: SeeFigure3. If𝑄 = 𝑋 forsome
c i a j j b1 𝑎𝑗
𝑗,asimilarimprovementin𝜑canbeobtainedbygiving𝑇𝑎1 ∪𝑔 to𝑎 ,𝑃 to𝑏 ,and𝑄to𝑐 . Note
𝑏1 𝑗 1 𝑖
thatthismightneedresolutionofintra-groupstrongenvies,whichcanbedonebyLemma4,and
alsosortingthebundlesinternallywithineachgroupsothattheleadingagentsretainminimum
valuedbundlesintheirrespectivegroups. Asimilar𝜑improvementcanbemadeif𝑄 = 𝑇𝑎1 ∪𝑔 by
𝑏1
usingLemma8.
𝑐 ··· 𝑐 ··· 𝑐
𝑟 𝑖 1
𝑎 1 ··· 𝑎 𝑗 ··· 𝑎 𝑝
𝑏 ··· 𝑏 𝑏
𝑞 2 1
𝑇𝑎1 ∪𝑔
𝑏1
Figure3: Greenedgepointsto𝑃 andcyanedgeto𝑄
Case3 Both the above conditions do not hold: It must be the case that either 𝑃 ⊆ 𝑋 and
𝑐𝑖
𝑄 = 𝑋 forsome𝑖,𝑗,𝑗 ̸= 1or𝑄 = 𝑃. However,evenintheformercase,wecannotsimplyswap
𝑏𝑗
𝑃 and𝑄between𝑐 and𝑏 ,sinceitisnotclearwhetherthisprocedurewillthenterminate.
𝑖 𝑗
Case3a Q = X forsomeb ∈ B∖{b }: Inthiscase,thebundle𝑋 in𝑂 isreplacedby𝑋 ∖ℎ,
b
j
j 1 𝑐𝑖 𝑏 𝑐𝑖
where ℎ is the least valued good in 𝑋 according to 𝑣 . Note that this operation does not alter
𝑐𝑖 𝑏
theactualallocation. Werefertothisupdateof𝑂 asavirtualupdate. Thealgorithmstartsanew
𝑏
iteration with this updated set 𝑂 . The idea is that the virtual update can happen at most once
𝑏
foreachbundleofgroupC . Atsomepoint,either𝑏 choosessuchavirtualbundleasmax 𝑂 ,or
1 𝑏 𝑏
A
choosessomebundleofgroup ,satisfyingCase1above.
Case3b Q = P = X : Then, agents 𝑏 and 𝑐 compete for 𝑃 with 𝑂 and 𝑂 as their respective
c i 1 𝑖 𝑏 𝑐
comparison sets. Each of 𝑏 and 𝑐 picks the minimum cardinality subsets, say 𝑃 and 𝑃 of 𝑃
1 𝑖 𝑏 𝑐
respectively, such that, given this subset, they will have no envy towards any bundle in their
respectivecomparisonsets. Wecall𝑐 tobethewinnerif|𝑃 | ≤ |𝑃 |,andwecall𝑃 asthewinning
𝑖 𝑐 𝑏 𝑐
subset.
Case3b(i) c is a winner and P ⊊ X : We then update the allocation 𝑋 by allocating 𝑃 to 𝑐 ,
i c c i 𝑐 𝑖
andaddingthegoodsin𝑋 ∖𝑃 totheset𝑈 ofunallocatedgoods. Bythedefinitionofawinning
𝑐𝑖 𝑐
subset, when𝑐 isgiven𝑃 , agent𝑐 canhavepossiblestrongenviestowardsonlytheagentsin
𝑖 𝑐 𝑖
C
. SuchstrongenviesareresolvedusingLemma4. Atthispoint,wehaveanewallocationthat
satisfiesInvariant1withastrictlylargernumberofunallocatedgoods. Therefore,thecomparison
sets𝑂 and𝑂 areupdatedtoreflectthenewallocation: 𝑂 ← {𝑋 | 𝛼 ∈ A∪C}∪{𝑇𝑎1 ∪𝑔},and
𝑏 𝑐 𝑏 𝛼 𝑏1
𝑂 ← {𝑋 | 𝛼 ∈ (A∪B)}. Thealgorithmthenproceedswithanewiteration.
𝑐 𝛼
20Case3b(ii) c isaloser,orP = P = X . Inthiscase,avirtualupdateisdone. Thatis,thebundle
i c b c i
𝑋 in𝑂 isreplacedby𝑋 ∖ℎ,whereℎistheleastvaluedgoodin𝑋 accordingto𝑣 . Thisdoes
𝑐𝑖 𝑏 𝑐𝑖 𝑐𝑖 𝑏
notaltertheactualallocation𝑋. Thealgorithmcontinueswiththemodifiedset𝑂 . AsinCase3a
𝑏
above,thiscannotgoonindefinitely.
Case3c P is a virtual bundle i.e. P ⊊ X for some c ∈ C: This is considered on Line 26 of
c i i
Algorithm1. Thiscanhappensince𝑂 mighthavesomevirtualbundlesfromearlieriterations.
𝑏
Thus𝑃 = 𝑋 ∖ℎ. Theneither𝑄 = 𝑃 or𝑄isabundlebelongingtogroupA orB . If𝑄 = 𝑃, we
𝑐𝑖
simplyallot𝑄to𝑐 andaddℎ = 𝑋 ∖𝑄tothesetofunallocatedgoods𝑈. If𝑄 = 𝑋 forsome𝑗,
𝑖 𝑐𝑖 𝑏𝑗
weallot𝑋 ∖ℎto𝑏 ,𝑋 to𝑐 ,andaddℎto𝑈. Inboththesecases,ℎgetsincludedinthepoolof
𝑐𝑖 𝑗 𝑏𝑗 𝑖
unallocateditemsandthepoolofunallocateditemsgrows. Weupdate𝑂 and𝑂 andstartanew
𝑏 𝑐
B
iteration. Also,itisensuredthatifanagentin doesnotenvyavirtualbundle,thenshewillnot
stronglyenvythecorrespondingrealbundle,thus𝑏 hasnostrongenvytowardsagentsinA∪C .
1
WewillproveitinLemma11later.
The correctness of Case 1 and Case 2 above is proved respectively in Part 1 and Part 2 of
Lemma10below.
Lemma 10. Let 𝑋 be a partial allocation with an unallocated good 𝑔, where all strong envies in 𝑋, if
any, originate from agent 𝑏 . Suppose agent 𝑎 is a source in 𝐸 , does not envy 𝑏 , but 𝑔-champions 𝑏 ,
1 1 𝑋 1 1
partitioning𝑋 as𝑋 = 𝑇𝑎1 ⊎𝐵𝑎1. Define:
𝑏1 𝑏1 𝑏1 𝑏1
𝑂 = {𝑋 | 𝛼 ∈ A∪C}∪{𝑇𝑎1 ∪𝑔}
𝑏 𝛼 𝑏1
𝑂 = {𝑋 | 𝛼 ∈ (A∪B)∖{𝑏 }}∪{𝑇𝑎1 ∪𝑔}
𝑐 𝛼 1 𝑏1
Ifeitherofthefollowingconditionsissatisfied,thenthereexistsanEFXallocation𝑌 (possiblypartial)such
that𝜑(𝑌) > 𝜑(𝑋).
1. Thereexistsabundle𝑃 ∈ {𝑋 | 𝛼 ∈ A}∪{𝑇𝑎1 ∪𝑔}suchthat, given𝑃, agent𝑏 doesnotstrongly
𝛼 𝑏1 1
envyanybundlein𝑂 ,
𝑏
2. Thereexistsabundle𝑃 ⊆ 𝑋 forsome𝑐 ∈ C,suchthatgiven𝑃,agent𝑏 doesnotstronglyenvyany
𝑐𝑖 𝑖 1
bundlein𝑂 ,andthereexistssomebundle𝑄 ∈ {𝑋 | 𝛼 ∈ A}∪{𝑇𝑎1 ∪𝑔}suchthatwith𝑄agent𝑐
𝑏 𝛼 𝑏1 𝑖
doesnotstronglyenvyanybundlein𝑂 ∪{𝑃}.
𝑐
Proof. (i) If𝑃 = {𝑇𝑎1 ∪𝑔},thenweallocate{𝑇𝑎1 ∪𝑔}to𝑏 . Weknowthatwith𝑃,agent𝑏 does
𝑏1 𝑏1 1 1
notstronglyenvyanyonefromA∪C
.
ResolveinternalenviesinB
,ifany,usingLemma4. Wenow
haveanEFXallocation𝑌 suchthatagent𝑎 envies𝑏 . Therefore,byapplyingLemma8on𝑌,we
1 1
getanEFXallocation𝑍 suchthat𝜑(𝑍) > 𝜑(𝑋).
If𝑃 = 𝑋 ,wethengive𝑃 toagent𝑏 and{𝑇𝑎1 ∪𝑔}toagent𝑎 . ResolveinternalenviesinB ,
𝑎1 1 𝑏1 1
ifany,usingLemma4. WenowhaveanEFXallocation𝑌 suchthat𝜑(𝑌) > 𝜑(𝑋).
Finally, if 𝑃 = 𝑋 for some 𝑎 ∈ A ∖ 𝑎 , then give 𝑃 to agent 𝑏 and {𝑇𝑎1 ∪ 𝑔} to agent 𝑎 .
𝑎𝑖 𝑖 1 1 𝑏1 𝑖
ResolveinternalenviesinB orA ,ifany,usingLemma4. WenowhaveaEFXallocation𝑌 such
thatagent𝑎 envies𝑏 . Therefore,byapplyingLemma8on𝑌,wegetanEFXallocation𝑍 such
1 1
that𝜑(𝑍) > 𝜑(𝑋).
21Algorithm1:MULTI-ROUND-COMPETITION
Input: AnEFXallocation𝑋 suchthat𝑎 𝑔-champions𝑏 and𝑎 doesnotenvy𝑏
1 1 1 1
Output: AnEFXallocation𝑌 suchthat𝜑(𝑌) > 𝜑(𝑋)
1 Allocate{𝑇 𝑏𝑎 11 ∪𝑔}toagent𝑏 1
2 Let𝑂 𝑏 ← {𝑋 𝛼 | 𝛼 ∈ A∪C}∪{𝑇 𝑏𝑎 11 ∪𝑔}andlet𝑂 𝑐 ← {𝑋 𝛼 | 𝛼 ∈ (A∪B)}
3 Let𝑈 bethesetofunallocatedgoodsin𝑋
4 whiletruedo
5 Let𝑃 ← max 𝑏𝑂 𝑏
6 if𝑃 ∈ {𝑋 𝑎𝑖 | 𝑎 𝑖 ∈ A}∪{𝑇 𝑏𝑎 11 ∪𝑔}then
7 ApplyLemma10(Part(𝑖)),obtaininganEFXallocation𝑌,suchthat𝜑(𝑌) > 𝜑(𝑋)
8 return𝑌
9 else // 𝑃 ⊆ 𝑋 𝑐𝑖 for some 𝑐 𝑖 ∈ C
10 Let𝑄 ← max 𝑐(𝑂 𝑐∪𝑃)
11 if𝑄 ∈ {𝑋 𝑎𝑖 | 𝑎 𝑖 ∈ A}∪{𝑇 𝑏𝑎 11 ∪𝑔}then
12 ApplyLemma10(Part(𝑖𝑖)),obtaininganEFXallocation𝑌,suchthat
𝜑(𝑌) > 𝜑(𝑋)
13 return𝑌
14 elseif𝑃 = 𝑋 𝑐𝑖 forsome𝑐 𝑖 ∈ Cthen
15 if𝑄 = 𝑃 then
16 𝑏 1 and𝑐 𝑖 competefor𝑃
17 if𝑐 𝑖 isawinnerandthewinningsubset𝑃 𝑐 ⊊ 𝑃 then
18 In𝑋,replace𝑋 𝑐𝑖 withthewinningsubset𝑃 𝑐 ⊊ 𝑋 𝑐𝑖
19 𝑈 ← 𝑈 ∪(𝑋 𝑐𝑖 ∖𝑃)
C
20 Resolveinternalstrongenviesin (Lemma4)
21 Update: 𝑂 𝑐 ← {𝑋 𝛼 | 𝛼 ∈ (A∪B)}and𝑂 𝑏 ← {𝑋 𝛼 | 𝛼 ∈ A∪C}∪{𝑇 𝑏𝑎 11∪𝑔}
22 else
23 In𝑂 𝑏,replace𝑋 𝑐𝑖 with𝑋 𝑐𝑖 ∖ℎ,whereℎ = min 𝑏𝑋 𝑐𝑖
24 elseif𝑄 ∈ {𝑋 𝑏𝑗 | 𝑏 𝑗 ∈ B∖{𝑏 1}}then
25 In𝑂 𝑏,replace𝑋 𝑐𝑖 with𝑋 𝑐𝑖 ∖ℎ,whereℎ = min 𝑏𝑋 𝑐𝑖
26 elseif𝑃 ⊊ 𝑋 𝑐𝑖 forsome𝑐 𝑖 ∈ Cthen
27 if𝑄 = 𝑃 then
28 In𝑋,replace𝑋 𝑐𝑖 with𝑃
29 else // 𝑄 = 𝑋 𝑏𝑗 for some 𝑏 𝑗 ∈ B∖{𝑏 1}
30 Modify𝑋: allocate𝑃 to𝑏 𝑗,𝑋 𝑏𝑗 to𝑐 𝑖
31 Resolve𝑏 𝑗 to𝑏 𝑘 ∈ B∖𝑏 1 strongenviesbyreplacing𝑋 𝑏 withMES 𝑏(𝑋 𝑏 ,𝑃);
𝑘 𝑘
C
32 Resolveinternalstrongenviesin (Lemma4)
33 𝑈 ← 𝑈 ∪(𝑋 𝑐𝑖 ∖𝑃)
34 Update: 𝑂 𝑏 ← {𝑋 𝛼 | 𝛼 ∈ A∪C}∪{𝑇 𝑏𝑎 11 ∪𝑔}and𝑂 𝑐 ← {𝑋 𝛼 | 𝛼 ∈ (A∪B)}
22(ii) Let𝑃 ⊆ 𝑋 forsomeagent𝑐 ∈ C . If𝑄 = {𝑇𝑎1 ∪𝑔},weallocate𝑃 to𝑏 and𝑄toagent𝑐 . Else
𝑐𝑖 𝑖 𝑏1 1 𝑖
if 𝑄 = 𝑋 for some 𝑎 ∈ A∖𝑎 we allocate 𝑃 to 𝑏 , 𝑄 to 𝑐 and {𝑇𝑎1 ∪𝑔} to agent 𝑎 . In either
𝑎𝑗 𝑗 1 1 𝑖 𝑏1 𝑗
case,weresolveinternalenviesinwithinthegroups,ifany,usingLemma4. WenowhaveaEFX
allocation𝑌 suchthatagent𝑎 envies𝑐 . Therefore,byapplyingLemma8on𝑌,wegetanEFX
1 𝑖
allocation𝑍 suchthat𝜑(𝑍) > 𝜑(𝑋).
If𝑄 = 𝑋 ,thenweallocate𝑃 to𝑏 ,𝑄to𝑐 ,and{𝑇𝑎1∪𝑔}toagent𝑎 . Resolveinternalenviesin
𝑎1 1 𝑖 𝑏1 1
withinthegroups,ifany,usingLemma4. WegetanEFXallocation𝑌 suchthat𝜑(𝑌) > 𝜑(𝑋).
Lemma 11. In Algorithm 1, if 𝑏 is allocated a virtual bundle from 𝑂 , then 𝑏 does not strongly envy
1 𝑏 1
anyonefromA∪C. Infact,thesameholdsforany𝑏 ∈ B.
𝑗
Proof. A virtual bundle appears in 𝑂 when Case 3a holds i.e. max 𝑂 = 𝑋 for some 𝑖 and
𝑏 𝑏 𝑏 𝑐𝑖
max 𝑂 = 𝑋 forsome𝑗 ̸= 1,orCase3b(ii)holds,when𝑃 = 𝑄 = 𝑋 andeither𝑏 hasasmaller
𝑐 𝑐 𝑏𝑗 𝑐𝑖 1
winningsubsetthan𝑐 i.e. |𝑃 | < |𝑃 |orbothhave𝑋 asthewinningsubseti.e. 𝑃 = 𝑃 = 𝑋 .
𝑖 𝑏 𝑐 𝑐𝑖 𝑏 𝑐 𝑐𝑖
When 𝑃 = max 𝑂 is a virtual bundle, then for any non-virtual i.e. real bundle 𝑆 ∈ 𝑂 , 𝑃 > 𝑆
𝑏 𝑏 𝑏 𝑏
andhence𝑏 doesnotenvytheagentholding𝑆. Foranyvirtualbundle𝑆 = 𝑋 ∖ℎ ∈ 𝑂 ,𝑆 ̸= 𝑃,
1 𝑐𝑖 𝑏
𝑃 > 𝑋 ∖ℎ for minimum valued item ℎ ∈ 𝑋 according to 𝑣 . Hence 𝑏 might envy the real
𝑏 𝑐𝑖 𝑐𝑖 𝑏 1
bundle𝑋 butitisnotastrongenvy. Since𝑏 and𝑏 havethesamevaluation𝑣 ,thelemmaholds
𝑐𝑖 𝑗 1 𝑏
forany𝑏 ∈ 𝐵.
𝑗
ToprovethecorrectnessofCase3,oneneedstoshowthatInvariant1ismaintainedaslong
asAlgorithm1remainsinCase3,andthatthealgorithmexitsfromCase3inafinitenumberof
iterations.
Lemma 12. At any point during the course of Algorithm 1, if Case 3 holds, then in a finite number of
iterations,thealgorithmexitsfromCase3,andfurther,Invariant1ismaintainedaslongasthealgorithm
remainsinCase3.
Proof. IneachiterationofAlgorithm1,wheneverCase3holds,eitherthepoolofunallocateditems
increasesorthenumberofvirtualbundlesin𝑂 grows. TheformerhappensincasesCase3b(i)
𝑏
and Case 3c whereas the later happens in cases Case 3a and Case 3b(ii). Since neither of these
can continue beyond a finite number of steps (at most as many steps as the number of items),
Algorithm1exitsCase3inafinitenumberofsteps.
It can be seen that Invariant 1 holds as long as Algorithm 1 continues in Case 3. When the
allocationismodifiedinCase3(Line30ofAlgorithm1),𝑏 ,𝑗 ̸= 1getsavirtualbundle𝑃 = 𝑋 ∖ℎ.
𝑗 𝑐𝑖
By Lemma 11, on allocating 𝑃, 𝑏 does not strongly envy anyone from A∪C . Similarly, by the
𝑗
choiceof𝑄,𝑐 doesnotstronglyenvyanyonefromA∪C . Noagentexceptpossibly𝑏 strongly
𝑖 1
envies𝑏 sincetheydidnotstronglyenvy𝑐 when𝑐 had𝑋 . Thepotentialstrongenviesfrom𝑏
𝑗 𝑖 𝑖 𝑐𝑖 𝑗
towardsotheragentsinB andfrom𝑐 tootheragentsinC areresolvedusingLemma4. Thusonly
𝑖
𝑏 mightstronglyenvy,andhenceInvariant1continuestohold.
1
ThefollowinglemmacompletesthecorrectnessproofofAlgorithm1.
Lemma13. Let𝑋 beapartialEFXallocationwithatleastoneunallocatedgood𝑔. Letagent𝑎 beasource
1
in𝐸 anddoesnotenvyagent𝑏 ,but𝑔-champions𝑏 . Then,with𝑋 asinput,Algorithm1terminateswith
𝑋 1 1
anEFXallocation𝑌 suchthat𝜑(𝑌) > 𝜑(𝑋).
23Proof. If Case 1 holds at any point, the algorithm, on Line 8 returns an EFX allocation 𝑌 with
𝜑(𝑌) > 𝜑(𝑋)byPart1ofLemma10. IfCase2holds,thenonLine13,anEFXallocation𝑌 with
𝜑(𝑌) > 𝜑(𝑋)isreturnedbyPart2ofLemma10. Sothealgorithmsuccessfullyterminateswhenever
oneofthesetwocaseshold.
NotethatthealgorithmterminatesifandonlyifitreachesLine8orLine13i.e. ifandonlyif
Case1orCase2hold. SothewhilelooponLine4cangoonaslongasthealgorithmcontinues
inCase3. AsprovedinLemma12,Case3canholdforonlyafinitenumberofiterations. Sothe
algorithmmustenterCase1orCase2inafinitenumberofiterations,andmustterminatewithan
EFXallocation𝑌 suchthat𝜑(𝑌) > 𝜑(𝑋).
FromLemma8andLemma9,wederivethefollowingcorollary.
Corollary5. Let𝑋 beapartialEFXallocationwithatleastoneunallocatedgood𝑔. If𝑎 isasourcein𝐸 ,
1 𝑋
thenthereexistsanEFXallocation𝑌 such𝜑(𝑌) > 𝜑(𝑋).
6 Agent 𝑎 is Not a Source in 𝐸
1 𝑋
When𝑎 isnotasourcein𝐸 ,someonemustenvy𝑎 . ByProposition4,oneof𝑏 or𝑐 mustenvy
1 𝑋 1 1 1
𝑎 . In addition to this, 𝑎 may or may not envy anyone from B∪C . In Lemma 14, we consider
1 1
thecasewhen𝑎 enviessomeonefromB∪C . Theothercasewhen𝑎 doesnotenvyanyonefrom
1 1
B∪C
isconsideredinLemma15. Ineachofthesecases, wegiveaconstructionofanotherEFX
allocationthathasahighervalueofthepotentialfunction.
Lemma14. Let𝑋 beapartialEFXallocationwithatleastoneunallocatedgood𝑔. If𝑎 isanotasourcein
1
𝐸 ,andif𝑎 enviessomeagentinB∪C,thenthereexistsanEFXallocation𝑌 suchthat𝜑(𝑌) > 𝜑(𝑋).
𝑋 1
Proof. since 𝑎 is not a source, either 𝑏 or 𝑐 must envy 𝑎 by Proposition 4. Without loss of
1 1 1 1
generality,assume𝑏 envies𝑎 .
1 1
1 Agent𝑎 enviessomeagent𝑏 ∈ B: Then,⟨(𝑎 ,𝑏 ),(𝑏 ,𝑎 )⟩isa𝜑-improvingexchange. Therefore,
1 𝑗 1 𝑗 1 1
usingLemma3wegetanewEFXallocation𝑌 suchthat𝜑(𝑌) > 𝜑(𝑋).
2 Agent𝑎 enviessome𝑐 ∈ C: If𝑐 envies𝑎 ,then⟨(𝑎 ,𝑐 ),(𝑐 ,𝑎 )⟩isa𝜑-improvingexchange.
1 𝑗 1 1 1 𝑗 1 1
Thuswearedone. Considerthecasewhen𝑐 doesnotenvy𝑎 . Weknowthatsomeleadingagent
1 1
must𝑔-champion𝑏 . Weconsiderallpossiblecasesbasedonwho𝑔-champions𝑏 .
1 1
2.1 Agent𝑏 self𝑔-champions: WemakeaParetoimprovementbyreplacing𝑋 withMES (𝑋 ∪
1 𝑏1 𝑏 𝑏1
𝑔,𝑋 ). Followingthis, thebundlesinB arere-sortedsothat𝑏 holdstheleastvaluablebundle.
𝑏1 1
Callthisallocation𝑌. Ifin𝑌,𝑏 doesnotenvy𝑎 ,then𝑎 isasourcein𝐸 . Therefore,applying
1 1 1 𝑌
Corollary5,wegetanewEFXallocation𝑍 suchthat𝜑(𝑍) > 𝜑(𝑌) = 𝜑(𝑋). Otherwise,if𝑏 envies
1
𝑎 in 𝑌, then we apply Lemma 14 again on 𝑌. As there are finitely many EFX allocations, this
1
Paretoimprovementcannotgoonforever.
2.2 Agent𝑎 𝑔-champions𝑏 : Then⟨(𝑎 ,𝑏 ),(𝑏 ,𝑎 )⟩isa𝜑-improvingexchange. Therefore,apply-
1 1 1 1 1 1
ingLemma3,wegetnewEFXallocation𝑌 suchthat𝜑(𝑌) > 𝜑(𝑋).
2.3 Agent𝑐 𝑔-champions𝑏 : Thenwehave⟨(𝑎 ,𝑐 ),(𝑐 ,𝑏 ),(𝑏 ,𝑎 )⟩asa𝜑-improvingexchange.
1 1 1 𝑗 1 1 1 1
Thus,wegetnewEFXallocation𝑌 suchthat𝜑(𝑌) > 𝜑(𝑋).
24Lemma15. Let𝑋 beapartialEFXallocationwithatleastoneunallocatedgood𝑔. If𝑎 isanotasourcein
1
𝐸 ,andif𝑎 enviesnoagentinB∪C,thenthereexistsanEFXallocation𝑌 suchthateither𝑌 ≻ 𝑋 or
𝑋 1
𝜑(𝑌) > 𝜑(𝑋).
Proof. Weknowthateither𝑏 or𝑐 mustenvy𝑎 . Withoutlossofgenerality,assume𝑏 envies𝑎 .
1 1 1 1 1
Someleadingagentmust𝑔-champion𝑏 . If𝑏 self𝑔-champions,thenwecanmakeParetoimprove-
1 1
ment,thuswearedone. If𝑎 𝑔-champions𝑏 ,wehavea𝜑-improvingexchange⟨(𝑎 ,𝑏 ),(𝑏 ,𝑎 )⟩.
1 1 1 1 1 1
Therefore,considerthecasewhenagent𝑐 𝑔-champions𝑏 .
1 1
We know that some leading agent must 𝑔-champion 𝑐 . If 𝑐 self 𝑔-champions, then we can
1 1
makeParetoimprovement. Suppose𝑏 𝑔-champion𝑐 . Ifeither𝑐 envies𝑏 or𝑏 envies𝑐 ,then
1 1 1 1 1 1
(𝑐 ,𝑏 ,𝑐 ) is a Pareto improving cycle, thus we make a Pareto improvement. If not, we have 𝑏
1 1 1 1
and𝑐 𝑔-championingeachotherand𝑎 enviesneither𝑏 nor𝑐 . WeapplyLemma5togetPareto
1 1 1 1
improvement.
Theonlycaseremainingiswhenagent𝑎 𝑔-champions𝑐 . Inthiscase,weask𝑐 topickthe
1 1 1
bestbundlefromagentsinA∪B
.
Case1 Agent𝑐 picksabundle𝑋 fromanagent𝑏 ∈ B: Then,weconstructanewallocation
1 𝑏𝑗 𝑗
𝑌,byallocating𝑋 𝑏𝑗 to𝑐 1,𝑇 𝑐𝑎 11 ∪𝑔 toagent𝑎 1,and𝑋 𝑎1 to𝑏 𝑗. Here,agent𝑎 1 strictlyimproves. In
thisnewallocation,noagentstronglyenviesanyof𝑎 ,𝑏 and𝑐 asthebundlesthattheseagents
1 𝑗 1
receivedareeitherMESbundlesorcompletebundlesintheoldallocation𝑋. Agent𝑏 doesnot
𝑗
stronglyenvyanyagentas𝑣 (𝑌 ) ≥ 𝑣 (𝑌 )andagent𝑏 doesnotstronglyenvyanyagent. As𝑎
𝑏 𝑏𝑗 𝑏 𝑏1 1 1
receivedastrictimprovement,shedoesnotstronglyenvyanyagent. Finally,weknowthat𝑐 does
1
notenvyanyagentfromB∪A asitchosethebestbundle. If𝑐 stronglyenviesanyagentinC ,we
1
resolvethemusingLemma4. Wenowhave𝜑(𝑌) > 𝜑(𝑋).
Case2 Agent𝑐 picksabundle𝑋 : Then,toconstructanewallocation𝑌,allocate𝑋 to𝑐 and
1 𝑎1 𝑎1 1
𝑇 𝑐𝑎 11 ∪𝑔 to𝑎 1. Again,notethatifthereareanystrongenviesin𝑌,theymustbefromagent𝑐 1 to
otheragentsinC . WeresolvesuchstrongenviesusingLemma4. Wehave𝜑(𝑌) > 𝜑(𝑋).
Case3 Agent𝑐 picks𝑋 ,𝑎 ∈ A∖{𝑎 }: Then,toconstructanewallocation𝑌,allocate𝑋 to𝑐
1 𝑎𝑗 𝑗 1 𝑎𝑗 1
and𝑇 𝑐𝑎 11 ∪𝑔 to𝑎 𝑗. Notethatagent𝑎 𝑗 doesnotstronglyenvyanyoneas𝑣 𝑎(𝑌 𝑎𝑗) > 𝑣 𝑎(𝑌 𝑎1) = 𝑣 𝑎(𝑋 𝑎1)
andagent𝑎 doesnotstronglyanyone. Ifthereareanystrongenviesin𝑌,theymustbefromagent
1
𝑐 tootheragentsinC . WeresolvesuchstrongenviesusingLemma4. In𝑌,agent𝑏 continuesto
1 1
envy𝑎 astheirbundlesdidnotchange. Agent𝑎 envies𝑐 as𝑎 previouslyenvied𝑎 . Therefore,
1 1 1 1 𝑗
weapplyLemma14on𝑌 togetanewallocation𝑍 suchthat𝜑(𝑍) > 𝜑(𝑌) = 𝜑(𝑋).
FromLemma14andLemma15,wegetthefollowingcorollary.
Corollary6. Let𝑋 beapartialEFXallocationwithatleastoneunallocatedgood𝑔. If𝑎 isanotasource
1
in𝐸 ,thenthereexistsanEFXallocation𝑌 sucheither𝑌 ≻ 𝑋 or𝜑(𝑌) > 𝜑(𝑋).
𝑋
Therefore, Lemma8andLemma9completestheproofofTheorem1. Hence, EFXexistsfor
threetypesofagents.
7 Conclusion
Inthispaper,weprovedtheexistenceofEFXallocationsforinstanceswiththreetypesofagents,
where agents of the same type have identical additive valuations. This result extends the prior
workonEFXallocationsforthreeagents[9]andfortwotypesofagents[17].
25The techniques developed in this work may provide insights into more general settings. A
naturaldirectionforfutureresearchistoextendtheseresultstoagentswithmoregeneralvalu-
ationfunctions,beyondtheadditivecase. AnotherlongstandingopenquestioniswhetherEFX
allocationscanbeguaranteedforinstancesinvolvingfourormoreagents.
Giventheprogressmadehere,weproposethefollowingconjectureasapotentialpathwayfor
furtherexploration:
Conjecture1. IfEFXallocationsexistfor𝑘 agentswithadditivevaluations,forsomeconstant𝑘,thenEFX
allocationsexistforanynumberofagentswithatmost𝑘 distincttypes.
Thisconjecture,ifproven,wouldbroadenthescopeofEFXallocations,particularlyinpractical
settingswherelargegroupsofagentssharesimilarpreferences.
26References
[1] H.Akrami,B.R.Chaudhury,J.Garg,K.Mehlhorn,andR.Mehta. Efxallocations: Simplifica-
tionsandimprovements,2022.
[2] G. Amanatidis, H. Aziz, G. Birmpas, A. Filos-Ratsikas, B. Li, H. Moulin, A. A. Voudouris,
andX.Wu. Fairdivisionofindivisiblegoods: Recentprogressandopenquestions. Artificial
Intelligence,322:103965,2023.
[3] G.Amanatidis,G.Birmpas,A.Filos-Ratsikas,A.Hollender,andA.A.Voudouris. Maximum
nashwelfareandotherstoriesaboutefx. TheoreticalComputerScience,863:69–85,2021.
[4] G.Amanatidis,A.Filos-Ratsikas,andA.Sgouritsa. Pushingthefrontieronapproximateefx
allocations. arXivpreprintarXiv:2406.12413,2024.
[5] G.Amanatidis,E.Markakis,andA.Ntokos. Multiplebirdswithonestone: Beating1/2for
efxandgmmsviaenvycycleelimination. TheoreticalComputerScience,841:94–109,2020.
[6] B. Berger, A. Cohen, M. Feldman, and A. Fiat. Almost full EFX exists for four agents. In
Thirty-SixthAAAIConferenceonArtificialIntelligence,AAAI2022,Thirty-FourthConferenceon
InnovativeApplicationsofArtificialIntelligence,IAAI2022,TheTwelvethSymposiumonEducational
AdvancesinArtificialIntelligence,EAAI2022VirtualEvent,February22-March1,2022,pages
4826–4833,VirtualEvent,2022.AAAIPress.
[7] I.Caragiannis,D.Kurokawa,H.Moulin,A.D.Procaccia,N.Shah,andJ.Wang. Theunreason-
ablefairnessofmaximumnashwelfare. ACMTrans.Econ.Comput.,7(3),sep2019.
[8] H.Chan, J.Chen, B.Li, andX.Wu. Maximin-awareallocationsofindivisiblegoods. arXiv
preprintarXiv:1905.09969,2019.
[9] B.R.Chaudhury,J.Garg,andK.Mehlhorn. Efxexistsforthreeagents. InProceedingsofthe
21stACMConferenceonEconomicsandComputation,EC’20,page1–19,NewYork,NY,USA,
2020.AssociationforComputingMachinery.
[10] B.R.Chaudhury,T.Kavitha,K.Mehlhorn,andA.Sgouritsa. Alittlecharityguaranteesalmost
envy-freeness. SIAMJournalonComputing,50(4):1336–1358,2021.
[11] B.R.Chaudhury,T.Kavitha,K.Mehlhorn,andA.Sgouritsa. Alittlecharityguaranteesalmost
envy-freeness. SIAMJ.Comput.,50(4):1336–1358,2021.
[12] D.Foley. Resourceallocationandthepublicsector. YaleEconomicEssays,7:45–98,1967.
[13] J. Garg and A. Murhekar. Computing fair and efficient allocations with few utility values.
TheoreticalComputerScience,962:113932,2023.
[14] P.Ghosal,V.P.H.V.,P.Nimbhorkar,andN.Varma. Efxexistsforfouragentswiththreetypes
ofvaluations,2023.
[15] R. J. Lipton, E. Markakis, E. Mossel, and A. Saberi. On approximately fair allocations of
indivisiblegoods. InProceedingsofthe5thACMConferenceonElectronicCommerce,EC’04,page
125–131,NewYork,NY,USA,2004.AssociationforComputingMachinery.
27[16] R.Mahara. ExtensionofadditivevaluationstogeneralvaluationsontheexistenceofEFX. In
P.Mutzel,R.Pagh,andG.Herman,editors,29thAnnualEuropeanSymposiumonAlgorithms,
ESA2021,September6-8,2021,Lisbon,Portugal(VirtualConference),volume204ofLIPIcs,pages
66:1–66:15.SchlossDagstuhl-Leibniz-ZentrumfürInformatik,2021.
[17] R.Mahara. ExistenceofEFXfortwoadditivevaluations. Discret.Appl.Math.,340:115–122,
2023.
[18] B.PlautandT.Roughgarden. Almostenvy-freenesswithgeneralvaluations. SIAMJournalon
DiscreteMathematics,34(2):1039–1068,2020.
28