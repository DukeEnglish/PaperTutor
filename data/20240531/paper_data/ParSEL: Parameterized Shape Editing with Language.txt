ParSEL: Parameterized Shape Editing with Language
ADITYAGANESHAN,BrownUniversity,USA
RYANYHUANG,BrownUniversity,USA
XIANGHAOXU,BrownUniversity,USA
R.KENNYJONES,BrownUniversity,USA
DANIELRITCHIE,BrownUniversity,USA
"Lengthen the drawers …" "Extend the roof radially"
"Lower the seat
while scaling the back"
"widen the
chair"
"Make the legs taller …" "Stretch the birdhouse "
"Bring the front
legs forward …"
(a) (b)
Fig.1. WeintroduceParSEL,asystemthatenablescontrollableeditingof3Dassetswithnaturallanguage.(a)Eachsubplotshowsaninput3Dasset(left),
editrequest(top)andtheparametriceditingcapabilityprovidedbyParSEL(right).(b)TheparametriceditsproducedbyParSELarecomposable,allowing
userstoexploreshapevariationsofnon-parametricmodelsasseamlesslyastheywouldwithparametricmodels.
Theabilitytoedit3Dassetsfromnaturallanguagepresentsacompelling CCSConcepts:•Computingmethodologies Computergraphics;
→
paradigmtoaidinthedemocratizationof3Dcontentcreation.However, Neuralnetworks;Naturallanguagegeneration.
whilenaturallanguageisofteneffectiveatcommunicatinggeneralintent,it
ispoorlysuitedforspecifyingprecisemanipulation.Toaddressthisgap,we AdditionalKeyWordsandPhrases:ShapeEditing,ParametricEditing,Large
introduceParSEL,asystemthatenablescontrollableeditingofhigh-quality LanguageModels,ComputerAlgebraSystems,Neuro-SymbolicMethods,
3Dassetsfromnaturallanguage.Givenasegmented3Dmeshandanediting ProgramSynthesis
request,ParSELproducesaparameterizededitingprogram.Adjustingthe
programparametersallowsuserstoexploreshapevariationswithaprecise 1 INTRODUCTION
controloverthemagnitudesofedits.Toinfereditingprogramswhichalign
withaninputeditrequest,weleveragetheabilitiesoflarge-languagemodels Creatinghighquality3Dassetsisalabourintensivetask,requiring
(LLMs).However,whilewefindthatLLMsexcelatidentifyinginitialedit yearsoftrainingandexperience.Theabilitytoeditexistinghigh
operations,theyoftenfailtoinfercompleteeditingprograms,andproduce quality3Dassetstocreatenewassetsgreatlylowersthisbarrier.
outputsthatviolateshapesemantics.Toovercomethisissue,weintroduce However,theprocessofmanuallymodifyinga3Dobject,e.g.byad-
AnalyticalEditPropagation(AEP),analgorithmwhichextendsaseed justingindividualverticesand/orfaces,isoftentedious.Toaddress
editwithadditionaloperationsuntilacompleteeditingprogramhasbeen thischallenge,anumberofeffortshaveexploredhowtodesign
formed.Unlikepriormethods,AEPsearchesforanalyticaleditingoperations
moreuse-friendlyandintuitiveshapeeditingtools[40,54].
compatiblewitharangeofpossibleusereditsthroughtheintegrationof
FollowingrapidadvancementsinthefieldofNaturalLanguage
computeralgebrasystemsforgeometricanalysis.Experimentallywedemon-
Processing,awealthofrecentmethodshaveexploredtechniquesfor
strateParSEL’seffectivenessinenablingcontrollableeditingof3Dobjects
editing3Dassetsfromnaturallanguage[1,14,34,42].Thisproffered
throughnaturallanguagerequestsoveralternativesystemdesigns.
paradigmisalluringfromtheperspectiveofaccessibility;specifying
Authors’addresses:AdityaGaneshan,adityaganeshan@gmail.com,BrownUniversity, editintentthroughnaturallanguagerequiresminimaltool-specific
USA;RyanYHuang,ryan_y_huang@brown.edu,BrownUniversity,USA;Xianghao training.Sofar,suchnaturallanguagebasededitingsystemshave
Xu,xianghao_xu@brown.edu,BrownUniversity,USA;R.KennyJones,russell_jones@
shownpromisingresultsforretexurizing3Dassets[20],stylizing
brown.edu,BrownUniversity,USA;DanielRitchie,daniel_ritchie@brown.edu,Brown
University,USA. 3Dshapes[34]andevenmodifyingshapegeometry[1].
4202
yaM
03
]VC.sc[
1v91302.5042:viXra2 • GaneshanandHuang,etal.
However,editingshapesinacontrolledmannerwithlanguage contrast,wesearchforanalyticaleditingfunctionscompatiblewith
ischallenging,particularlywhenperforminggeometricedits,i.e. arangeofpossibleusereditsusingasophisticatedCASsolver[32].
editsinvolvingsub-partmanipulationandspatialrearrangement. Furthermore,byintegratingLLMswithAEP,weaddressakeylimi-
Forinstance,considerascenariowhereauserintendstowiden tationofalleditpropagation-basededitingmethods[13,55]-the
achair.Naturallanguagecanbeusedtoeffectivelycommunicate requirementtomanualadjusttheshape’sstructuretosupportdif-
howtoedit:“scaletheseat,repositionthelegsandaddmoreback ferenteditingintents.ByleveragingLLMs,wedynamicallymodify
slats”.Yet,itisdifficulttoconveyhowmuchtoeditwithnatural theshape’sstructurebasedontheeditrequests,thusalleviatingthe
language.Termssuchas“moderatelywiden,”“greatlywiden”are needformanualadjustments.
inherentlysubjective,andnumericalspecification(“0.2units”)often WeevaluateParSEL’sabilitytoedit3Dobjectsfromlanguageby
may not align with the object’s scale. This leads us to a critical sourcing(shape,editrequest)pairsfromassetsinCoMPaT3D++[43]
insight:whilenaturallanguagecaneffectivelyconveytheeditintent,it andPartNet[37].OnpairsfromCoMPaT3D++,wecompareParSEL’s
ispoorlysuitedforconveyingtheeditmagnitude.Asaresult,systems hybridapproachforproducinganeditingprogramagainsttwoal-
thatdependexclusivelyonlanguageforshapeeditingareoften ternative formulations: (i) asking an LLM to directly author the
challengingtouseinpractice. program,and(ii)usingtheLLMandAEPtoinferfullprogramwith-
Tofacilitatecontrollableeditingof3Dassetsusingnaturallan- outdynamicallyalteringtheshapestructure.Wedesignaperceptual
guage,weintroduceParSEL:ParameterizedShapeEditingwith studytoassesshowwellthesevariantsaccomplishtheintended
Language,asystemwhereusersdefine"how"toeditwithlanguage taskandfindthatparticipantsgreatlyprefertheeditsproduced
and"howmuch"withadjustableparameters.Drawinginspiration by ParSEL. To provide further analysis on the design decisions
fromparametricmodelingsystems,ourapproachmergestheintu- behindParSEL,wecreateexpert-designededitingprogramsfor
itivenessoflanguagewiththeprecisionofparametriccontrol.Under PartNetpairs.Treatingthesemanualannotationsas‘ground-truth’,
thisparadigm,userscanseamlesslyexploreafamilyofshapevaria- weperformisolatedablationexperimentsontheLLMprompting
tionsbyadjustingparametersuntiltheyfindaneditthatmatches workflowandtheCASsolver.Wealsoinvestigatetwoextensions
theirintendedmagnitude.InFigure1(a),weshowcasequalitative ofourmethod.First,wedemonstratehowParSELcanaidincreat-
examplesofeditingvarious3Dshapesusingoursystem. ing(approximate)parametricmodelsofnon-parametricassetsby
ParSELtakesasinputasemanticallylabeled3Dmeshandauser composingaseriesofeditrequests(Figure1,(b)).Then,weexplore
editrequest.Asoutput,itexposesanadjustableparameterwhich howParSELcanproduceamultitudeofshapevariationsfroma
theusercaninteractwithtoflexiblyexploreshapevariations.We singleusereditingrequest.
geometricallyrealizetheseeditsbypropagatingpart-levelbounding Insummary,wemakethefollowingcontributions:
proxydeformationstotheunderlyingmeshgeometrywithcage- (1) WeintroduceParSEL:ParameterizedShapeEditingwith
baseddeformationmethods[24],whilesimultaneouslyadapting Language,anovelshapeeditingsystemwhichcombines
part-levelsymmetrygroups.Critically,toensurethatthegeometry theintuitivenessofnaturallanguagewiththeprecisionof
remainsconsistentunderarangeofparametervariations,werepre- parametriccontrol.
sentalleditoperationsasclosed-formanalyticalfunctionsofthe (2) WedesignaneurosymbolicmodulewhichcouplesaLLM
adjustablecontrolparameters.Inordertocreatesuchparameterized prompting workflow with CAS solvers to translate edits
editingfunctions,weintroduceacustomdomainspecificlanguage. expressedinnaturallanguageintoshapeeditingprograms.
ProgramsinourDSLspecifyhowtoedittheshapewithnumerical (3) Tosuccessfullysolvetheaboveinferencetask,weintroduce
parameters,andhowmuchtoeditwithalgebraicexpressionsofthe AnalyticalEditPropagationanalgorithmtosearchfor
controlparameters.OurDSLoffersmultiplebenefits,includingthe analytical editingfunctionstoextendpartialeditingpro-
abilitytoprovideafluid(solver-less)editexplorationexperienceto gramsbyconsideringinter-partgeometricrelationships.
theusers,evenonconsumerlaptops.
Codeofoursystemwillbeopen-sourceduponpublication.
ParSELconvertslanguage-basededitrequestsintoeditingpro-
gramswithamodulethatintegrateslarge-languagemodels(LLMs)
2 RELATEDWORK
withthealgebraicreasoningcapabilitiesofcomputeralgebrasys-
tems(CAS).Wefoundthatthiscoupledneurosymbolicapproach Inthissection,wereviewpriorworksin3Dshapeediting,focusing
isnecessitatedascurrentstate-of-the-artLLMsstruggletodirectly onanalyze-and-edittechniquesandlanguage-basededitingmeth-
infereditingprogramsfrominputeditrequests.Duetotheirpoor ods.Wealsocompareourapproachtoexistingparameterizedediting
geometricreasoningcapabilities,LLMsoftenfailtoinfertheappro- methods,highlightingkeydifferences.Finally,wediscussrecent
priateadjustmentsrequiredformultipleinputshapeparts,resulting approacheswhichleveragelargelanguagemodels(LLMs)forvisual
ineditingprogramswhichproduceinconsistentoutputs(weexplore programsynthesis.
thisphenomenonfurtherinSection4.3). Analyse-and-edit approaches: Shape editing using space defor-
Toovercomethislimitation,wepresentanalgorithmthatextends mationhasalonghistoryincomputergraphics,traditionallyem-
partialeditingprogramswithadditionaloperatorsfromourDSLby ployingsimplercontrolobjectslikecagestomanipulateunderlying
consideringthegeometricrelationsbetweenobjectparts.Weterm meshes[11,39].Thismethodevolvedsignificantlywiththedevelop-
thistechniqueAnalyticalEditPropagation(AEP).Whilesimilar mentofanalyze-and-edittechniques[13,41,45,55],whichprovide
inspirittoprioredit-propagationmethods[55],previoustechniques bettercontrolbyaligningcontrolobjectsmorecloselywiththe
explicitlyoptimizepartmodificationsinresponsetoauseredit.In shape’sstructure.Consequently,part-decompositionandsymmetryParSEL:ParameterizedShapeEditingwithLanguage • 3
group-awarecontrolobjectsareconstructedtofacilitatestructure Theneedforhigh-levelparametriccontrolforshapeeditinghas
preservationduringediting[4,49]. alsobeenapproachedfromashape-abstractionperspective[22,23],
Variousapproacheshavebeenproposedwithinthisparadigm, aimingtodiscoverprogramabstractionsthatallowuserstoedit
tailoredfortaskssuchasresizingnon-homogeneousshapes[27], shapesmeaningfullywithafewparameters.Thesedata-drivenmeth-
editingarticulatedobjects[51],modifyingarchitecturalscenes[8, ods,althougheffectiveatmodelingshapevariationwithinadataset,
29],andmanipulating2DSVGpatterns[16].Pleasereferto[35]for maynotcaptureauser’sdesirededit.Furthermore,suchsystems
amorecompletereview.Typically,thesemethodsrequiretheuser oftenprovideunlabeledparameters,requiringuserstoexperiment
toperformaninitialedit,usuallythoughavisualuserinterface, tounderstandeachcontrol’seffect.Incontrast,oursystemoffers
likedraggingapoint,afterwhichthesystempropagatescorrective usercontrolsthataredirectlyinferredbasedontheuser’sspecified
adjustmentsthroughouttheshapeviacomputationallyintensive editintent,providingmoreintuitiveeditingcapabilities.
numericaloptimization.Thisoptimizationprocessmustberepeated Wealsofindaninterestingcontrastwithapproachessuchas[9,26,
evenforsimpleadjustmentsinthemagnitudeoftheintendededit. 33],whichproposetechniquestomakeeditingofparametricmodels
Incontrast,ourtechniqueprecomputesanalyticaleditingprograms easier,whereasourapproachmakesparameterizededitingofnon-
thatalignwiththeuser’sintent,enablingreal-timeadjustmentsto parametricmodelseasier.Oneofourapplicationsrelatestoinverse
theedit’smagnitude.Additionally,previousmethodsoftensupport parametricmodeling[2].However,unlikepriorapproaches[2,5],
onlyasubsetoftheeditsweoffer,necessitatemanualadjustments whichcreateinverseparametricmodelsstrictlyfromgeometricanal-
totheshape’sstructure(suchasdeletingsymmetryrelations),and ysis,ourapproachleveragesnaturallanguagetoexploredifferent
donotfacilitateeditingthroughnaturallanguage. proceduralmodelsforthesamegeometry.
Languagebasedshapeediting:Theadvancementintext-to-image UsingLLMsforVisualProgramSynthesis:TheuseofLLMsfor
modelingcapabilitieshasledtomanylanguage-basededitingsys- visualtaskshasproliferatedintherecentyears.Startingfromear-
tems[6,30].Workssuchas[25,47]haveintroducedtoolstoedit lierworksemployingLLMsforvisualQA[18,46],theyhavenow
imageswithnaturallanguage,althoughtheseeditsareoftenlimited beenemployedforimage-editing[12],scenegeneration[19,53],
tostylization.Duetotheweakspatialandgeometricunderstanding inversecomputergraphics[28],generatingimages[52]andmate-
oftext-to-imagemodels,suchapproachestypicallyfailatgeometric rialmodeling[21].Thoughinitialworkssuchas[18]triedtorely
editing. This trend extends to language-based 3D shape editing, purelyonLLMsfortheirtasks,thesubsequentlywinningmodel
wheretoolsforeditingassettextures[20],stylizingamesh,includ- hasbeencombiningLLMswithdomainspecificstructural-aware
ingitsgeometry[14,34]haveseensuccess.However,approaches processingmodules[21].Ourworkalsoappliesthisformulabutfor
usingtext-to-imagemodelsareyettodemonstrateimpressiveper- shapeediting.
formanceforgeometriceditingof3Dshapes.
Anotherlineofresearch[1,42]hasfocusedontrainingshape-
3 OVERVIEW
editingmodelsondatasetscomprising3Dshapespairedwithediting
requestsandthecorrespondingeditedshapes.Whiletheseresults ParSELtakes3Dassetsandnaturallanguageeditrequestsasinput,
arepromising,theyhavenotscaledtothequalityrequiredforreal- exposingadjustableparameterstocontrolthemagnitudeofthe
world3Dassetediting,oftenmanipulatingonlylow-resolutionpoint edit.Specifically,itprocessesaninstance-levelsegmented3Dmesh
clouds[1]orimplicitfunctions[42].Additionally,theseapproaches pairedwithanaturallanguageeditingrequesttoinferanediting
strugglewiththeinherentchallengeofusingnaturallanguageto programparameterizedbyuser-controlledparameters.Userscan
specifyanedit’smagnitude.Furthermore,whileend-to-endmod- theninteractivelyadjusttheparameterstoexploreawidearrayof
elingallowsthesemodelstohandleawidevarietyofedits,this shapevariationsreflectingdifferenteditingmagnitudes.
flexibilityoftenresultsinentanglededits,wherepartsthatshould Figure2providesaschematicoverviewofoursystem.InSec-
remainunchangedareinadvertentlymodified.Incontrast,ourwork tion 4, we detail our approach for parameterized shape editing,
avoidsthesedrawbacksbyinferringanalyticaleditingprograms outliningtheshaperepresentationandourcustomDomainSpecific
alignedwiththeuser’sintent,enablingpreciseanddisentangled Language(DSL)thatfacilitatesparameterizedshapeediting.Our
geometric edits in real-time, while eliding the requirement of a goalistotranslatenaturallanguageeditrequestsintoeditingpro-
trainingdataset.Weshownanexamplecontrastingourapproach gramswithinourDSLthataccuratelyreflecttheuser’sintent.While
toShapeTalk[1]inFigure8,highlightingthediscusseddrawbacks. LargeLanguageModels(LLMs)offerapromisingsolutionforthis
ParameterizededitingofShapes:Lilicon[3]introducedanSVG translation,theystrugglewiththecomplexityofcomposingediting
icon editing system that allows users to perform parameterized programs,astheseofteninvolvemultipleinterdependentediting
editsonSVGiconsindependentlyofthedrawing’sconstruction. operations. Consequently,althoughLLMs cancorrectlyidentify
Oureditingsystemaimstooffersimilarfunctionalityfor3Dshapes theinitialoperation,knownastheseed-edit,theyoftenfailtoinfer
byinferringparameterizededitingprogramsbasedontheuser’s completeeditingprograms.
request.However,whileLiliconusesdifferentialmanipulationto Toaddressthislimitation,inSection5,weintroduceAnalytical
maintaininter-partrelationships,weinsteadsearchandutilizeana- EditPropagation(AEP),whichtakestheseed-edit inferredby
lyticaleditsthatmaintaintheserelationships.Recently,coupling anLLMandintroducesadditionaleditingoperationstocomplete
ofparametriccontrolwithnaturallanguagehasalsobeenexplored theeditingprogram.ThisapproachsimplifiesthetaskfortheLLM,
forimageediting[10,17],thoughtheeditsareclosertostylization requiringittoinferonlytheinitialseededit.Additionally,byem-
thangeometricediting. ployingcomputeralgebrasystemsforgeometricreasoning,AEP4 • GaneshanandHuang,etal.
ParSEL
Shape Abstraction (Section 4.1) Program Inference Editing Program (Section 4.2)
LLM Augmented 1. Scale1D("seat", amt=X,
Trans(back bars) Inference 2 3. . T r a n s l a tedi (r "l= e( g1 _, f r0 o, n t0 _) l, e f. t. ". ,) amt=0.3 * X,
(Section 6)
4. dir=(-1, 0, 0), ...)
5. Scale1D("bar_center", amt=0.98 * X,
Ref(leg bars) 6. dir=(1, 0, 0), ...)
7. ChangeCount(TransRel("back_bars"),
Analytical 8. amt=floor(6.1 * \
"widen the chair" Ref(legs front) Edit Propagation 9. sqrt(Abs(0.1 *X - ...))),
10. ...)
(Section 5)
11. ...
Fig.2. Overview:Givenasegmented3Dchairandaneditrequestto"widenthechair,"wefirstconverttheshapeintoastructuredrepresentation:hexahedrons
andinter-partrelations.Thisabstractionisillustratedontheleft,withsymmetryrelationsannotatedontheleftandattachmentrelationsdepictedwith
redpointsontheshape.Ourneuro-symbolicapproach(center)usesanLLM,tointerpretthenaturallanguageinput,andAnalyticalEditPropagation,to
performgeometricreasoning,inordertoinferaparameterizededitingprogram(right)thatalignswiththeeditrequest.
ensuresthattheresultingeditingprogramshavehighgeometric hexahedron,initializedwiththepart’sorientedboundingbox,acts
fidelityandrespectessentialshapefeaturessuchasconnectivityand asthecontrolcagefortheunderlyingpart-mesh.Editsmadetothe
symmetry.IntegratingLLMswithAEPsignificantlyenhancesour hexahedronsarethenpropagatedtodeformtheverticesofthepart
system’scapabilitytomeetuserexpectationsbyeffectivelybridg- meshusingharmoniccoordinates[24].
ingthegapbetweeninterpretingtheprimaryeditandperforming Oursystemsupporttwotypesofinter-partrelations,namely
comprehensiveshapeadjustments. SymmetryRelation,whichmodelsinter-partsymmetrygroupscom-
Finally,Section6discussesourLLMAugmentedInferenceap- monlyfoundinman-madeobjectsandAttachmentRelationwhich
proach.Akeylimitationofalleditpropagationmethods[13,55]is constraintherelativemovementbetweenparts,ensuringthatedits
theneedformanualadjustmentstotheshape’sstructuretosupport donotviolatethephysicalconnectionsoftheobject.Additionally,
differenteditingintents.Thissectionintroducesoursolutionto weautomaticallyextendeachpart’slabelwithverbaldirectional
thischallenge:leveragingLLMstodynamicallymodifytheshape’s phrasessuchas"front"and"back"tocaptureitsrelativeposition-
structurebasedontheeditrequests.Weendthissectionbybriefly ingamongotherinstanceswiththesamelabel.Figure2illustrates
discussingourpromptingworkflowandthetechniquesweemploy theconversionofachairmodelintothisstructuredshapeabstrac-
toboosttherobustnessandaccuracyofLLMresponses,ensuring tion.Weprovideamoredetailedoverviewinthesupplementary
reliableeditsacrossdiverseinputs. materials.
4 PARAMETERIZEDSHAPEEDITING 4.2 ALanguageforparameterizedshapeediting
Inthissection,wepresentourframeworkforenablingparameter- Intheprecedingsection,weintroducedourstructuredshaperep-
izededitingof3Dshapes.First,wedetailtheshaperepresentation resentation,whichiscomprisedofindividualparts(abstractedas
employedinoursysteminSection4.1.Next,wedescribeourDo- hexahedrons)andinter-partgeometricrelations.Buildinguponthis,
mainSpecificLanguage(DSL)forcreatingprogramsthatfacilitate wenowpresentaDomainSpecificLanguage(DSL)craftedtofacili-
parameterizedshapeeditinginSection4.2.Finally,inSection4.3, tateparametriceditingofthesecomponentsusinguser-controlled
wediscussthelimitationsofdirectlyinferringcompleteediting parameters.
programsinthisDSLusingLLMs,highlightingtheneedforAna- OurDSL,enablescommontransformationsonindividualparts,
lyticalEditPropagation(AEP). includingtranslation,rotation,scaling,andshearing.Thesecanalso
betargetedatspecificpartfeaturessuchasaface,edge,orcorner.
4.1 StructuredShapeAbstraction Additionally,theDSLsupportsmodificationstosymmetrygroup
parameters,likethenumberofelementsandtheirspacing.Akey
Oursystemprocesses3Dmeshesthatareannotatedattheinstance
featureofourDSListheparameterizationofeditingoperations
level.Wefirsttransformthesemeshesintoastructuredrepresenta-
viauser-controlledparameters.Thisfunctionalityisencapsulated
tiontofacilitateparametricediting.Thisrepresentationisinspired
withmultipleatomiceditingoperators,collectivelyreferredtoas
by shape representations such as 3D part graphs [36] and Sym-
EditOp,anddefinedasfollows:
Hierarchy[49].
Specifically,wemodeltheinputshape𝑆asanundirectedgraph EditOp Operand,Amount,**params ,
( )
𝐺 𝑁,𝐸 ,whereeachnode𝑛𝑖 𝑁 correspondstoasemantically whereEditOpsignifiestheoperation,Operandthetarget(part,
( ) ∈
labeledmeshsub-part,andedges𝑒𝑖 𝐸denoteinter-partgeometric feature,orsymmetryrelation),andparamsadditionalnumerical
relationssuchasconnectivityorsym∈ metry.Topreservethedetailed parameters specific to each operation (e.g., a R3 vector for scal-
geometricfeaturesoftheinputmeshwhilesimplifyingthecomplex- ingoperation’sorigin).CentraltotheseoperatorsisAmount,the
ityofedits,eachpart𝑃𝑖 isabstractedintoahexahedron𝐻𝑖.This parameter dictating the magnitude of the edit. Unlike the otherParSEL:ParameterizedShapeEditingwithLanguage • 5
Bar Bar Bar Bar Bar Bar Bar Bar Bar
Leg Leg Leg Leg Leg Leg
Leg Seat Leg Leg Seat Leg Leg Seat Leg
Bar Bar Bar Bar
Back Back Back
Bar Bar Bar Bar Bar Bar
Fig.3. EditPropagation:Startingwithaseed-edit,scalingtheseat,neweditsareincrementallyintroducedtorectifythebrokenrelations.(left)Initiallythe
seat-legandseat-backattachmentsarebroken.(middle)Newedits,shiftingthelegsandscalingtheback,areintroducedtorestorethesebrokenrelations.
Consequently,theleg-barandback-barattachmentsarebroken.Thisprocesscontinuesuntilnorelationremainsbroken,orallpartsareedited.
staticparameters,Amountisspecifiedasasymbolicmathemati- forthesesecondaryadjustments,theystruggletoaccuratelyinfer
calexpressionsoftheuser-controlledparameters,anddynamically theappropriateedittypesandtheirmagnitudes.Asillustratedin
evaluatedastheuseralterstheseparameters.Asaresult,adjust- Figure2(right),editingprogramscancontainmanyoperationsthat
ingtheuser-controlledparameteralterstheeditmagnitude,and requirecarefuladjustmentofparameterstoedittheshapecohesively.
subsequentlyhelpsexploreshapevariations.Wedenoteasequence Consequently,theAmountparameterofdifferenteditoperations
oftheseoperationsasaparameterizededitingprogram.InFigure2 ofteninvolvescomplexmathematicalexpressions,makingaccurate
(c),wedisplayaprogramdesignedtoincreasethewidthofachair inferencechallenging.Asaresult,wefindthattypicallyonlythe
whileproportionallyadjustingotherpartsofthechair. initialseed-editoperationinferredbytheLLMisreliable.
WedesignourDSLtoachieveourgoalofenablingcontrollable ThislimitationisovercomebyAnalyticalEditPropagation
shapeediting.WehighlightafewpivotalaspectsofourDSL:(i)Un- (AEP),whichperformsthegeometricanalysisthatLLMscannot.
likeprioreditingsystems,ourDSLhandlesacomprehensiverange Since the geometric relations driving these secondary edits are
ofoperations.Forexample,[5]onlysupportscouplingoftranslation compatiblewithalgebraicreasoning,AEPemploysComputerAl-
symmetrieswithpartdeformations,[55]doesnoteditsymmetry gebraSystem(CAS)solverstoidentifythenecessarysecondary
hierarchies,and[49]onlysupportseditingofsymmetryhierarchies. edits,therebyextendingtheeditingprogramtobetteralignwith
(ii)TheAmountexpressionsupportsarbitrarilycomplexmathe- theuser’soverallintent.
maticalexpressions,asdemonstratedinthetranslationsymmetry
groupeditinFigure2(c).(iii)Theabilitytoapplythetransformson
5 ANALYTICALEDITPROPAGATION
partfeaturesfacilitatesnon-affinetransformations,suchastapering,
whichisusefulinmanyedits(seeFigure5(c)),(iv)Eachpart’sedits Wenowpresentourapproachtoextendingaseed-editinferredby
areindependentofthestateofotherparts.Consequently,theseedits theLLMusingCASsolversforgeometricreasoning.InSection5.1,
canbeexecutedinparallelacrossallparts,enablingreal-timepara- weexplainhoweditpropagationworksandwhyparameterized
metricshapeeditingevenonconsumer-gradelaptops.(v)Theedits editingoperationsrequireadifferentstrategy.Section5.2details
arecomposable;partsmodifiedbyoneoperationcanseamlessly our representation of edits, parts, and relations using algebraic
serveasinputstosubsequentoperations.Thiscapabilityisexplored expressions,resultinginparameterizedconstraintsthattheshape
furtherinSection8.1,wherewedemonstrateanexcitingapplica- mustsatisfy.Finally,Section5.3describeshowanalyticalsolvers
tionofoursystem.Foracomprehensivediscussiononthedesign are employed to solve these parameterized constraints, thereby
andexecutionmodelofourDSL,pleaserefertooursupplementary discoveringappropriatenewparameterizededitstoextendtheseed
materials. editingprogram.
4.3 LimitationsofDirectLLMInference 5.1 EditPropagation
As we briefly discussed in Section 3, inferring complete editing Whendesigningshapevariations,maintainingtheshape’sfunc-
programs directly with LLMs often fails to produce results that tionalandstructuralattributesisparamount.Wedelineatethese
alignwiththeintendededits.LLMstypicallysucceedatinterpreting attributesthroughinter-partrelations,asintroducedinSection4.1.
primary edits explicitly requested—for example, when asked to Thus,anadepteditingprogramstrivestopreservetheserelations.
‘widenthechair’sseat,’theycorrectlyinfertheeditoperatorsto Isolatedpartmodification,atendencyofthenaivestrategydiscussed
scaletheseat.However,theyoftenneglectnecessarysecondaryedits inSection4.3,generallyresultinthedisruptionoftheseinter-part
crucialformaintaininggeometriccoherence,suchasmodifying relations.Wenowintroduceaeditpropagationalgorithmwhich,
relatedcomponentslikethechair’slegsandbacktoaccommodate startingwithoneormoreseededits,introducesadditionaleditsto
thescaledseat.Additionally,evenwhenLLMsidentifytheneed rectifythecompromisedrelations.6 • GaneshanandHuang,etal.
AsdetailedinSection4.1,wemodeltheinputshapeasanundi- underwhichthesymmetryisheld,eachsymmetryrelationcanbe
rectedgraph𝐺 𝑁,𝐸 ,whereeachnode𝑛 𝑁 representsasubpart, expressedasaconstraint 𝐻𝑖 𝑇 𝐻𝑗 <𝛿.Similarly,attachment
andeachedge𝑒( 𝐸) denotesaninter-part∈
relation.Editinganode,
relationsareexpressedas||
𝑎
−
𝑏
( <)| 𝛿|∞
,where𝑎and𝑏arepointsin
∈ || − ||∞
suchaswideningachair’sseat,canbreaktheedgesconnectedtothis 𝐻𝑖 and𝐻𝑗 respectivelywhichformtheattachment.Bymodeling𝑎
node-forexample,itmightbreaktheattachmentrelationbetween and𝑏withharmoniccoordinates,wecanrewritethisconstraintin
theseatandthelegs.Editpropagationistheninitiatedtorestore termsofthehexahedron: 𝑀𝑎𝐻𝑖 𝑀 𝑏𝐻𝑗 <𝛿where𝑀𝑎and𝑀
𝑏
|| − ||∞
thebrokenedgesbyapplyingcorrectiveeditstoother,previously aretheharmoniccoordinatesofpoints𝑎and𝑏respectively.Since
unaltered,nodeswithinthegraph.Importantly,thesecorrective thehexahedrons𝐻𝑖 areparameterizedby𝑥,theseconstraintsare
editsarederivedbyconsideringbrokenrelationswitheditedparts alsoparameterizedby𝑥 ascanbeexpressedas𝐶𝑖 𝑥 .Now,wecan
( )
only.Consequently,newlyintroducededitsmaysubsequentlybreak identifyifarelationwillbebrokenundertheparameterizededits
additionaledges,necessitatingfurtheredits.Thisiterativeprocess bycheckingifthecorrespondingconstraintsaremaintainedacross
continues,introducingnecessaryeditsuntilnoedgesremainbroken theinputrange.Moreformally,wedenotethataconstraintisheld
oruntilallnodeshavebeenedited.InFigure3,wedemonstrateedit by𝑆𝐴𝑇 𝐶 ,and
( )
propagationinaction,incrementallyintroducingneweditswhich 𝑆𝐴𝑇 𝐶 = 𝐶𝑖 𝑥 <𝛿 𝑥 0,𝜏 , (1)
eventuallyresultinacohesiveeditoftheinputshape. ( ) ⇒ || ( )||∞ ∀ ∈ [ ]
where 0,𝜏 istheinputrange.Ideally,𝑆𝐴𝑇 𝐶 shouldbechecked
Asourseededitsareparameterizedwithuser-controlledparame- [ ] ( )
analytically,consideringthefunctionalformof𝐶 𝑥 .However,this
ters,theymodelarangeofpotentialinstantiatedseededits.While ( )
canbecomputationallyexpensive.Therefore,weinsteadnumer-
traditionaleditpropagationtechniques[55]canbeappliedtothe
icallycheckifaconstraintisheld,byevaluatingitoverrandom
dynamicallyevaluatedinstancesoftheseseededits,suchapplica-
valuesof𝑥 sampleduniformlyacrosstheinputrange.
tionresultsinalaggyuserexperience.Thislagarisesbecausethese
techniquesinvolvemultiplecomputationallyintensivenumerical
optimizationiterations,dependentonthegraph’ssize.Instead,we 5.3 AnalyticalEditSolver
proposetosearchfornewparameterizededitsthatrestoreandpre- Now,givenasetofbrokenrelations,wearetaskedwithintroducing
serveinter-partrelationsacrosstherangeofcontrolparameters. newparameterizededitswhichrestoresandpreservestheserela-
Althoughthisapproachrequiresacomputationallyintensivesearch tionsacrosstheinputrange.Forasinglepart𝑃𝑖,thisproblemcan
initially,itensuresasmooth,real-timeuserexperiencewhenthe bewrittenasfindinganedit𝐸 ∗for𝑃𝑖 suchthatalltheconstraints
controlparametersarelateradjusted. onthepartareheld:
To search for parameterized edits, we employ a sophisticated
Find𝐸∗s.t.𝑆𝐴𝑇 𝐸,C (2)
ComputerAlgebraSystems(CAS)[32].Byrepresentingparts,re- ( )
lations,andeditsasalgebraicexpressions,weenabletheuseof 𝑆𝐴𝑇 𝐸,C = 𝐶𝑖 𝑥 <𝛿 𝐶𝑖 C, 𝑥 0,𝜏 , (3)
( ) ⇒ {|| ( )||∞ |∀ ∈ ∀ ∈ ( )}
CASsolverstoefficientlydiscoveranalyticalsolutionstothealge- whereCisthesetofallconstraintsderivedfromthebrokenrelations
braicconstraintsdictatedbytheinter-partrelations.Aswewillsee ofthepart.
later,thisplaysacriticalroleinfindingeditparameterizationsthat Restoringsymmetrygrouprelationsisquitesimple,asithasa
preserverelationsacrossthecontrolparameter’srange. welldefinedanalyticalsolution.Given𝐻𝑖 and𝐻𝑗 underasymmetry
group𝐺 𝑇 ,where𝐻𝑖 hasanedit𝐸,wecanintroduceanewedit
( )
𝐸 ∗=𝑇 𝐸 ,on𝐻𝑗 suchthatthesymmetrygroupispreserved.For
5.2 ExpressingtheShapeAlgebraically ( )
example,torestorereflectionsymmetrybetweentwopartswith
Forsimplicity,weassumethatthereisasinglecontrolparameter oneofthemunderaparameterizedtranslation,wecanintroducea
𝑥 andrefertoitsrangeastheinputrange.First,wepresentthe similarlyparameterizedtranslationontheotherpartwithitstrans-
algebraicformoftheparthexahedrons𝐻𝑖.Then,wepresenthow lationdirectionreflectedaboutthereflectionplane.Following[55],
allinter-partrelationsareexpressedasalgebraicconstraintsonthe weprioritizesymmetryrelationovertheattachmentrelations,and
thehexahedrons. restorethembeforesearchingforattachmentpreservingedits.
Eachparthexahedronconsistsof83Dpoints,andisrepresented Incontrast,restoringattachmentrelationsisuniquelychalleng-
asamatrixofsize 8,3 .Ahexahedronundernoeditisexpressed ing.Thesetofconstraintsderivedfromattachmentrelationscanbe
( )
asaconstantfunction𝐻𝑖 (𝑥
)
= 𝐻 𝑖0
∈
R {8,3 },where𝐻 𝑖0 contains ofarbitrarysize(dependingonthenumberofattachmentsrelation
real-valuedentries.Whenaparameterizededitisappliedon𝐻𝑖,its ofthepart),withoutwelldefinedanalyticalsolutions.Therefore,
functionalformcanbederivedbasedonthetypeofedit.Forinstance, weneedtosearchforeditsthatcansatisfyalltheconstraints.This
underaneditTranslate 𝐻𝑖,𝑥,𝑣ˆ ,𝐻𝑖 canbeexpressedas𝐻𝑖 𝑥 = entailssearchingfor(i)thecorrecttypeofedit,with(ii)thecorrect
𝐻0 𝑥 𝑣ˆ,where𝑣ˆrepres( entsthe) directionoftranslation.Sim( i) lar edit-specificparametersparamswhicharedefinedoverR𝑛,and
𝑖 + ·
algebraicexpressionscanbeprescribedforalltheatomicediting (iii)thecorrectparameterizationAmountwhichcanbeanarbi-
operatorsinourDSL,allowingustoexpressallthehexahedrons traryalgebraicexpressionofthethecontrolparameter𝑥.Naively
asalgebraicfunctionsofthecontrolparameter𝑥.Forreference,we performingthissearchisinfeasible.Wethereforeemploytwotech-
tabulatethealgebraicformofalltheoperatorsinthesupplementary. niquestoaddressthischallenge.Aswedetailahead,oursolution
Formodelingtherelationsalgebraically,weseparatelyhandle reliesonsmartlysamplingassignmentsof params,andusingCAS
thesymmetryandattachmentrelations.Givenhexahedrons𝐻𝑖 and solverstoinferfeasibleAmountexpressions.Toaidexposition,
𝐻𝑗 underasymmetrygroup𝐺 𝑇 ,where𝑇 isthetransformation wecontinuewiththeexampleofwideningachairseat,withan
( )ParSEL:ParameterizedShapeEditingwithLanguage • 7
Withtheanalyticalsolutions,weformasetofEcontainingedits
whichrestorealltheconstraintsE = 𝑆𝐴𝑇 𝐸,C 𝐸 𝐸𝑅 .This
{ ( )| ∈ }
setisdepictedinFigure4(c).ThoughalltheeditcandidatesinE
MoveFace(X, X) restorethecurrentlybrokenrelations,eachmaycauseadifferent
MoveFace(Y, -Y) amount = 1.2 x setofrelationstobebroken.Therefore,wemustcarefullyselectthe
editcandidate.Takinginspirationfrompriorwork[13],wedesigna
simpleselectioncriterionforselectingthemostsuitableeditfromE,
amount = 0.64 x
whichconsiderstheARAPdeformationenergy[44](lowerisbetter)
Rotate(-Z, …) MoveFace(Y, X)
andthenumberofintrinsicsymmetryplanesoftheedit(higheris
Y better).Weprovideadditionaldetailsinthesupplementary.
X amount = 0.56 x
5.3.1 ImprovingSolverRobustness. Thoughthetechniquepresented
Z Move(Z)
abovesucceedsinamajorityofanalyticaleditpropagationsteps,
C Move(X) amount = 0.6 x
E R E wefoundthatitcansometimesfailstofindgoodedits.Wenow
(a) Gather detailtwofeatureswhichimprovethequalityofsolutionsfoundby
Constraints (b) Candidate Proposal (c) Solve Analytically theSolver.AsweexperimentallyverifylaterinSection7.3,these
featuresnoticeablyimprovetheprogramquality.
Fig.4. Searchingforedits:Whicheditoperationscouldweuseforthe ExtendingtheCandidateSetThesetE Rofeditcandidatescan
chairlegpart?(a)First,brokenconstraintsC(highlightedwitharedline) sometimesfailtocontainparamassignmentswhichcansuccessfully
aredetected,denotingtherelationstobefixed.(b)Wethensampleparame- satisfyalltheconstraints.WhennoneoftheeditsinE 𝑅satisfyallthe
terizationsoftheeditoperatorsinourDSLtocreatecandidateeditsE 𝑅.(c) constraints,weintroduceadditionaleditswithparamassignments
UsingCASsolvers,wesearchforAmountexpressionforeacheditcandidate basedonthefeaturesofotheredited hexahedrons.Forexample,
thatsatisfiestheconstraintsC,resultinginthesetofvalideditsE.
ifacabinetdoorisrotatedaboutitshinge,itshandlemustalso
berotatedaboutthesameaxis.Byintroducingeditswithparam
accompanyingillustrationinFigure4.AsshowninFigure4(a),as assignmentsbasedonthedoor’sfeatures,wecandiscoversuchan
theseatiswidened,theattachmentrelationbetweenthelegsand edit.Forsimplicity,sucheditsarelaterreferredtoinourexperiments
theseatisbroken.Wearenowtaskedwithfindingasuitableedit asnhbd-edits.
forthelegtorestorethisattachmentrelation. Handing UNSAT Despite the extensive search, sometimes the
Eachedithasnumericparametersparamswhichcantakearbi- constraintsinCmaynotbemutuallysatisfiable.Undersuchcir-
traryvaluesinR𝑛.Insteadofsearchingacrossallpossibleparams,
cumstances,weselecttheminimallyconstraintbreaking edit,i.e.
wesearchoverasmallersubsetoffeasibleparamsassignments. theeditwhichbreakstheleastamountofconstraints.Thisisdone
Thefeasibleparamsassigmentsarecreatedusingthehexahedron byrecordingforeachsolutionin𝐹,thenumberofconstraintsit
featuressuchasitsface-center,vertices,andlocalaxisdirections. breaksandselectingtheonewhichbreaksthefewestconstraints.
Weenumerateoverthe(applicable)DSLeditoperators,andexhaus- Wesimplyrefertoeditsintroducedinthiswayasbreaking-edits
tivelysamplefeasibleassignmentsofparamtocreateE 𝑅 asetof
feasibleeditcandidates.InFigure4(b),wedepictthecandidateedits 6 LLMAUGMENTEDINFERENCE
fromE 𝑅.Ourgoalistonowenumeratethroughtheeditcandidates,
Intheprevioussection,weintroducedAnalyticalEditPropa-
andascertainifitcansatisfytheconstraints.
gation(AEP),whichutilizesaseed-edit inferredbytheLLMto
Tocheckifaeditcandidatecansatisfytheconstraints,wemust
discovernecessarysecondaryedits.Wenowexplorehowwedeploy
specifyitsAmount.NotethatAmountisaalgebraicexpression
LLMsintandemwithAEPtoinferparameterizededitingprograms.
andneedstobesets.t.itsatisfiestheconstraintsforallvaluesof
First, we address a limitation of naive edit propagation, present
𝑥 intheinputrange.Therefore,wesetAmounttobeanarbitrary
alsointraditionaltechniques[13,55],andproposeoursolutionto
function𝑓 𝑥 andstatethistaskmoreformallyas:
( ) overcomeit.
Find𝑓 (𝑥 )s.t.𝑆𝐴𝑇 𝐸 Amount=𝑓 (𝑥 ),C ,𝐸 ∈E 𝑅 (4) 6.1 ALimitationofNaiveEditPropagation
Here,weleveragetheCASsol(cid:0)verstosearchfor(cid:1)analyticalsolutions Editpropagationreliesontwokeyassumptionsabouttheuser’s
for 𝑓 𝑥 .Notethatsincewecanhavemultipleconstraintsona intent:(i)Theuserwishestopreserveinter-partrelationshipsas
( )
givenpart,theconstraintsetCcanbeamixedsetofequations muchaspossible,and(ii)Theuserprefersthesimplestpossible
-whichCASsolversmayfailtofindsolutionsfor.Therefore,we secondarymodification.However,theseassumptionsdonotalways
insteadcreateasetoffeasibleanalyticalsolutionsFbysolvingeach hold.
constraint independently (i.e. by solving 𝑓 𝑥 s.t. 𝐶𝑖 𝑥 = 0). Duringeditpropagation,weattempttorestoreallinter-partgeo-
( ) || ( )||
AnalyticalsolutionsinFwhichsatisfyallconstraints(bynumerical metricrelationships.However,achievingcertaineditsmayrequire
check)arethenacceptedassolutionstoequation4.Weadditionally allowingsomerelationshipstoremainbroken.Forexample,evenif
notethatsolvingequation4foragivenedit𝐸is“embarrasingly” thefrontlegsofachairaresymmetrictothebacklegs,theusermay
parallel,allowingustosearchsolutionsfordifferentedits𝐸 E 𝑅 desiretoeditonlythebacklegsinasymmetry-breakingfashion.
∈
inparallel. Similarly,usingthesimplestpossiblesecondarymodifications,from8 • GaneshanandHuang,etal.
anARAP[44]perspective,mightnotalwaysmatchuserintent.For 7 EXPERIMENTS
instance,whenwideningachair’sseat,thesimplestmodificationto Wenowpresentexperimentswhichevaluatetheeditingprograms
thelegsistoshiftthem.However,theusermightinsteadpreferto inferredbyoursystem.Weadditionallyperformablationexperi-
tiltthelegs(cf.Figure7). mentsonthedifferentcomponentsofoursystemtoprovidemore
Performingtheseeditswithtraditionalmethodsrequiressignifi- insights.NotethatweutilizeOpenAI’s(text-only)GPT-4[15]asthe
cantmanualeffort.Usersmustremovethereflectionrelationship LLMforallofourexperiments.
betweenthefrontandbacklegstosupportthefirsteditandadd
anattachmentrelationshipbetweenthelegsandthefloorforthe
7.1 Datasets
secondedit.Thisunderscoresakeylimitationoftraditionaledit
propagation:thestructureinvokedintheshapemustbemodified Weevaluateourmethodover3Dmodelssourcedfrom2datasets.
tosupportdifferentedits.Consequently,withpriormethods,users Adev-setiscuratedusing3DmeshmodelsfromthePartNet[37]
havetomanuallyadjusttheshape’sstructuretoensuretheedits dataset,whilethetest-setiscomposedof3DmodelsfromtheCoM-
generatedalignwiththeirintent. PaT3D++dataset[43].Thedev-setincludes51part-segmentedmeshes
sampledfromfivecategoriesofman-madeobjects:Chair,Table,
Couch,StorageFurniture,andBed.Weusedthedev-setasabench-
6.2 DynamicStructureModificationUsingLLMs
markwhiledevelopingthesystem,andmodelsinthissetcontain
Whilemanuallyperformingtheseactionsislaborious,verballyspec- from5to81parts(median17),andfrom4to318(median40)rela-
ifyingtheminaneditrequestisstraightforward.Asoursystem tions,coveringsimpletocomplexgeometries.Thetest-setcontains
supportsunstructurednaturallanguageinput,weuseLLMstoin- 50modelssourcedfrom21differentcategorieswithintheCoM-
terprettheserequirementsfromtheeditrequestandautomatically PaT3D++dataset.Thissetisusedtoverifytheefficacyofoursystem
updatetheshape’sstructuretofacilitatetheedit.Thisapproachelim- beyondtheobjectcategoriespresentinthedev-set.Thus,thetest-set
inatestheneedforuserstomanuallyadjusttheshape’sstructure, alsoincludesobjectsfromuncommoncategoriessuchasGazebos,
leveragingLLMstoperformthesetasksinstead.Basedontheedit BirdHouses,andFans.
request,theLLMinfers(i)theseed-edit,(ii)therelation-validityfor Allmodelsarepairedwithmanuallywrittennaturallanguage
eachsymmetryrelationshipintheshape,and(iii)theedittype-hints editrequeststocreate(shape,editrequest)pairsusedasinputtoour
forthedifferentparts. system.Asweshowinthequalitativeexamples,theeditrequestsen-
Whenarelationisdeemedinvalid,wedeletethecorresponding compassawidevarietyofmodifications.Additionally,weannotate
constraints. When a part has a specified type-hint, we use it to eachpairinthedev-setwitha‘ground-truth’(GT)editingprogram
filter the edit candidates generated during edit propagation (i.e. derivedthroughaHuman-Solverinferenceprocess,wheretheLLM
wefilterthemoutfromE 𝑅).Thisenablesustodirectlytargetthe isreplacedbyanexpertuser.NotethatboththeGTprogramsand
specificeditstheuserdesires,unlikepriorapproachesthatrequire theprogramsinferredbyeachvariantweconsiderarewrittenin
additionalconstraintstoachievesuchcomplexmodifications.With theDSLintroducedinSection4.2.
thisapproach,wecanaccommodateeditrequeststhatconflictwith
symmetry relationships in the shape or require specific editing
7.2 Language-basedParameterizedEditingof3DAssets
operationsforsecondaryparts.
First,weevaluateoursystem’sefficacyinenablingnatural-language-
6.2.1 Prompting Workflows. We infer the three quantities with basedparametriceditingof3Dassets.Asdescribedearlier,oursys-
three separate prompting workflows. For each task, the LLM is temachievesthisbyinferringparameterizededitingprogramsthat
providedwithaverbaldescriptionofthepartsintheshape,the alignwithnaturallanguageeditrequests.Notably,priorworksare
user’seditrequest,andasetoftask-specificinstructions.TheLLM notwell-suitedforthistask.Neuralapproaches[1,42],although
returnsanexecutablePythonsnippet,whichisparsedandexecuted powerful,donotsupporthigh-resolution3Dassets,andprioredit-
toreceivetheLLM’sresponse.Fortheseed-editinference,theLLM propagationapproaches[13,55]cannotbecontrolledvianatural
isalsogivenanAPItocreatetheeditoperators.Toavoidconfusion language.Beyondthis,neitheroftheseparadigmssupportparamet-
between different relations, relation-validity is inferred for each ricediting.Sincenopriorworkadequatelyaddressesthisproblem,
symmetryrelationindependentlywithaseparateprompt.Forinfer- weintroducealternativerealizationsofoursystemforcomparison:
ringexplicittype-hints,wefoundtheLLMtobemostreliablewhen (1) One Shot LLM: As detailed in Section 4.3, this approach
limitedtothreeabstracttypes:‘translate’,‘rotate’,and‘scale’. involvesprovidingtheLLMwithallnecessaryinformation
WeimprovethequalityoftheLLMresponsebyusingprompting toinfertheentireeditingprograminasinglestep.
techniquessuchasChainofThought(CoT)[50],in-contextexam- (2) OursSeedOnly:ThisbaselineusesanLLMtoinfertheseed-
ples[7],andreminders[31].Additionally,weperformmajority- editandemploysAnalyticalEditPropagation(AEP)togen-
voting[48]byaggregatingresultsfrommultipleindependentLLM eratetheentireeditingprogram.
callsandusingthemodalresponse.Votingimprovesoursystem (3) Ours: Our full system, which utilizes the LLM to specify
significantly,evenwithonlyfivesamples(refertoTable3).Since the seed-edit, relation-validity, and edit type-hints. These
thereisnointerdependencebetweentheprompts,wepromptthe componentsarethenusedduringAEPtoproduceeditsthat
LLMforalltasksinparallel,maintainingresponsetimescomparable closelyalignwiththeuser’sintent.
toasingleAPIcall.ParSEL:ParameterizedShapeEditingwithLanguage • 9
One Shot LLM Ours Seed Only Ours One Shot LLM Ours Seed Only Ours
(a) (c)
"Shorten the cabinet by "Raise the top-front of seat support
bringing the top panel down" without changing the armrests."
(b) (d)
"Radially expand the boom shelf "Move front frame forward
while keeping the top as it is." while keeping the back panel fixed.
Fig.5. Wecompareparametriceditingof3Dassetsacrossthreesystemvariants.TheOneShotLLMproducesunrealisticpartintersections(b,c)andfailsto
propagatecorrectiveedits(a,d).TheOursSeedOnlyvariantwithAnalyticalEditPropagation(AEP)producesconsistentvariations,butcanfailtoalignwith
theinputeditintent.Ourfullsystem(Ours),whichincludesedittype-hintsandrelation-validity,produceseditsthatcloselymatchuserrequests.
PreferenceRate 𝑃𝑟𝑜𝑔 𝐺𝑒𝑜 %Rel
J( )(↑) D( )(↓) (↑)
Oursvs.OneShotLLM 81.06% OneShotLLM 0.31 8.30 61.71%
Oursvs.OursSeedOnly 75.59% OursSeedOnly 0.53 8.62 83.47%
Table1. Oursystemispreferred:Resultsofatwo-alternativeforced- Ours 0.70 4.01 91.57%
choiceperceptualstudycomparingoursystemagainsttwoalternaterealiza- Table2. OurmethodisclosertoGT:Wecomparethedifferentsystem
tions.Oursystem(denotedOurs)ispreferredinanoverwhelmingmajority realizationsagainst‘GT’annotations.Oursystem(Ours)obtainsthebest
ofthejudgements. performanceovermetricsthatmeasuretheproximitytothe‘GT’annota-
tionsacrossProgrammatic,GeometricandStructuralaspects.
7.2.1 Analysis of Human Preference. Using the test-set, we con-
ductedatwo-alternativeforced-choiceperceptualstudytocompare
thesemethodvariants.Werecruited32participantsforthetask. Onlyrepresentsapurelyanalyticalvariantoftheprioreditprop-
Eachparticipantwasshownaseriesofcomparisons,resultingin agationmethod[55].Thisindicatesthatwhileeditingwithprior
atotalof1295judgements.Eachcomparisonincludedanatural analyse-and-editmethods,usersoftenneedtomanuallyadjustmul-
languageeditrequestandtwovideosshowinga3Dshapebeing tiplesettings,suchasenabling/disablingrelations,toperformtheir
editedwiththeinferrededitingprograms,withthecontrolparame- desirededits.Incontrast,oursystemallowsuserstosimplystate
tersmoothlyvaryingacrossitsrange(from0toanautomatically theireditintentinnaturallanguage,andwetasktheLLMwithau-
setupperbound,𝜏).Participantsweretaskedwithselectingtheir tomaticallyadjustingthesesettings.Weadditionallyprovideallthe
preferredmethod,basedontheinstructionto:“Selectthemethod videosfromtheperceptualstudyinoursupplementarymaterials,
whichbettersatisfiestheinputeditingpromptandresultsinabetter allowingforindependentverificationofourresults.
editedshape”.Notethatweelidecomparisonswheretheprograms
inferredbythecomparedmethodsmatch(18%ofthecomparisons 7.2.2 Analysis of Inferred Programs. Next, we compare the pro-
intotal). gramsgeneratedbythesemethodsagainstthemanuallyannotated
Table1presentstheresultsofourexperiment.Ourmethodis ground-truth(GT)editingprogramsonthedev-set.Weevaluatethe
preferredoverOne-shotLLMin81.1%ofthejudgements.One-shot qualityoftheeditingprogramsusingthreecriteria:1)Programmatic
LLMoftenfailstoconstructmeaningfuleditingprograms,demon- ( 𝑝𝑟𝑜𝑔 ):Thismetricassesseshowcloselytheinferredprograms
J( )
stratingthefailurecasesdiscussedinSection4.3.Incontrast,by matchtheGTprograms.2)Geometric( 𝑔𝑒𝑜 ):Thismetricmea-
D( )
leveragingAEP,ourmethodproducescohesiveeditingprograms suresthegeometricdistancebetweentheshapeeditedwiththe
thatrespecttheinter-partrelationships.ComparedtoOursSeed inferredprogramsandtheshapeeditedwiththeGTprograms.3)
Only,ourmethodispreferredin75.6%ofcomparisons.Withoutthe Structural(%𝑅𝑒𝑙):Thismetricquantifiesthepercentageofinter-part
abilitytoprovidetypehintsordisablesymmetryrelations,Ours relationswhosestate(brokenvs.maintained)matchestherelation’s
SeedOnly ofteninfersprogramsthatrespectinter-partrelations stateunderthegroundtruth(GT)program.Furtherdetailsarepro-
but fail to align with the user’s edit intent. Note that Ours Seed videdinthesupplementarymaterial.10 • GaneshanandHuang,etal.
"Extend the middle shelf to the le while
"Contract the top side panels from the top"
keeping the top and side panels fixed"
"expand the desk top while "Make the boom vertical panels
keeping the parts above fixed" thicker in the le-right direction"
"Extend the boom panel towards
"Shi the top panel downwards"
the front while keeping the rest fixed"
"make the legs radially thicker "Stretch the drawer handles in the le-right
while keeping the rest fixed" direction"
"extend the horizontal "widen the cabinet by expanding
panel towards to front" the horizontal panel"
"lengthen the legs from the top while
"Shorten the top doors from the top"
keeping the top panel fixed"
Fig.6. ProxyduralModeling:Leveragingtheopen-worldknowledgeofLLMs,wesynthesizeeditrequestsforagivenshapetoenableautomaticprocedural
models,termedProxyduralduetotheuseofboundingproxydeformations.Oursystemallowsmultipleproxyduralmodelsforthesameshape,acapabilitynot
possiblewithpriorapproaches[5].
𝐴𝑐𝑐 𝑆𝐸 𝐴𝑐𝑐 𝑅 𝑇 𝑀𝑎𝑡𝑐ℎ 𝑃𝑟𝑜𝑔 𝐺𝑒𝑜 %Rel
( )(↑) ( )(↑) J( )(↑) (↑) J( )(↑) D( )(↓) (↑)
Ours 76.47 88.91 73.92 35.29 Ours 0.70 4.01 91.57%
-Voting 68.62 88.91 68.02 25.49 -nhbd 0.70 4.21 91.35%
-CoT 72.54 88.17 71.69 27.45 -breaking 0.68 3.46 86.41%
-InContext 66.66 87.68 65.75 23.52 Naive 0.67 4.31 85.4%
Naive 68.62 86.99 65.36 19.60 Table4. QualityofprogramsinferredbytheSolver:Removingnhbd-
Table3. PromptingAblation:wereporttheLLM’saccuracyatinfer- edits results in higher geometric distance ( D(𝐺𝑒𝑜 )), while removing
ringtheseed-edit(𝐴𝑐𝑐 𝑆𝐸 ),relation-validity(𝐴𝑐𝑐 𝑅 ),andedittype-hints breaking-editsleadstomorestructuraldistance(%Rel).Thenaiveapproach
( 𝑇 ),alongwiththe( frac) tionofinputswhereth( eL) LMinferseverything thatremovesbothoftheseoptionsistheleasteffective.
J( )
correctly(𝑀𝑎𝑡𝑐ℎ).Votingandin-contextexamplessignificantlyenhance
accuracy,whilethenaiveapproachshowsamarkeddecrease.
7.3.1 AnalysisofthePromptingWorkflow. Oursystememploys
separatepromptstoinfertheseededit,relationvalidity,andedit
typehints.WemeasuretheLLM’saccuracyatinferringthesethree
WepresenttheresultsofthisexperimentinTable2.First,we
termsbycomparingitsoutputtothatofahumanannotator.Addi-
notethattheOne-shotLLM approachfailsdrasticallyacrossthe
tionally,weperformasubtractiveablationbyindividuallyremoving
threecriterion,whichalignswiththepreferenceratesobserved
majorityvoting[48],Chain-of-Thought(CoT)[50],andin-context
inthehumanstudy.Secondly,weobservethatomittingthetype-
examples[7]tomeasuretheirimpactontheLLM’saccuracy.We
hintsandrelation-validitystepsadverselyaffectstheOurSeedOnly reportfourmetrics:1)𝐴𝑐𝑐 𝑆𝐸 ,forseededitaccuracy;2)𝐴𝑐𝑐 𝑅 ,
approachaswell.Specifically,OurSeedOnlyresultsinaveryhigh forrelationvalidityaccurac( y;3) ) 𝑇 ,fortypehintaccuracy;a( nd)
𝑔𝑒𝑜 measure,indicatingthatalthoughAEPrestorestheinter- 4)𝑀𝑎𝑡𝑐ℎ,forthefractionofinpJ ut( p)
airswhereallLLM-inferred
D( )
partrelations,theeditsinferredwithouttype-hintscausetheedited
quantitiesmatchhumanannotations.
shapetogeometricallydeviatefromtheintendedshape.Finally,we
TheresultsarepresentedinTable3.Asdemonstrated,thereisa
highlightthatoursystemoutperformstheothersacrossallthree
significantgapinaccuracybetweenourpromptingworkflowand
metrics.
theNaiveapproach,whichdoesnotincludevoting,chain-of-thought
Wealsopresentqualitativeexamplesofeditingprogramsinferred
(CoT)reasoning,orin-contextexamples.Amongthesetechniques,
fromdifferentbaselinesinFigure5.Theimprovementinthequanti-
votingandin-contextexampleshaveamorepronouncedeffecton
tativemetricsisevidentinthesequalitativeexamples.Thebaselines
performance,whereastheabsenceofCoTresultsinarelatively
producevisibleartifacts,suchasintersectionsbetweenparts,and
smallerdeclineinaccuracy.Althoughnotdirectlycomparable,we
oftenviolatetheintentoftherequestededits.
findthatallmodelsstrugglemostwithcorrectlysettingtheseed
editandthetypehints.Thisdifficultylikelyarisesfromtheneed
7.3 AnalysingtheSystemDesign
toconstructtheseededitusingacomplexAPIandthenecessity
Inthissection,wepresentanablativeanalysisoftheLLMprompting ofinferringtypehintsformanypartsoftheshape.Finally,this
workflowandtheAEPsolvertoelucidatetheimpactofvarious experimentunderscoresthetaskanddatasetcomplexity,aseven
designdecisions. ourbestapproachfullymatchesthehumanannotationforonlyParSEL:ParameterizedShapeEditingwithLanguage • 11
programtoserveastheinputforanother.Thiscapabilityenablesthe
creationof(approximately)proceduralmodelsofanygivenshape
"… while tilting the legs"
throughthefollowingsteps:(i)gathermultipleindependentediting
requests,(ii)inferaneditingprogramforeachrequest,eachwith
asingleindependentcontrolparameter,and(iii)stacktheseedits
usingfunctioncomposition.Thisapproachallowsuserstoexplore
shapevariationsthroughasetofsliders,akintointeractingwith
proceduralmodels.Sincetheshapesareeditedusingtheirbounding
proxies,wetermthisapproachProxyduralModeling.
"Contract the seat…"
Incaseswhereuserswishtoautomaticallyexplorevariationsof
agivenshape,oursystemcanstillbeeffectivelyutilized.Thekeyis
toidentifyinterestingmodesofvariationandautomaticallycraft
"… without changing the back."
corresponding editing requests. Once these editing requests are
defined,oursystemcanusethemtogeneratetheProxyduralModel.
Toachievethis,weleveragetheimpressiveworldknowledgeand
Fig.7. ShapeVariationFamily:Givena3Dassetandanunder-specified naturallanguagecapabilitiesofLLMs.Givenasegmentedshape,
editrequest,weleverageLLMstosynthesizepotentialextensionsofthe weprompttheLLMtogenerateeditrequeststhatcaptureinterest-
request.Byinferringprogramsforboththeextendedandoriginalrequests,
ingvariations.Byprovidingin-contextexamplesandtask-specific
wecreateasetofrelatedbutdistinctparametricmodels,eachadheringto
instructions,weensurethattheLLMproducesrequestscompatible
theinitialeditrequestwhilesupportingdifferentshapevariations.
with our system. These requests are then used to automatically
approximately35%oftheinputpairs.Notethatduetoredundancies createtheProxyduralModel.InFigure6,wepresentmultiple
intheshapestructureandthepresenceofmultiplewaystosatisfyan ProxyduralModelsautomaticallycraftedbytheLLM.Unlikeprior
editrequest,effectiveeditingprogramscanbeinferredevenwhen inverseproceduralmodelingapproaches[5],oursystemenablesthe
notallinferredquantitiesmatchthegroundtruth.Consequently, creationofmultipleProxyduralModelsforasingleinputgeometry,
annotatorevaluationsindicatethatprogramsproducedwithour eachfacilitatingtheexplorationofdifferentshapevariations.
method(Ours)matchedtheintendededitsin72.5%oftheinputs.
7.3.2 AnalysisoftheAEPSolver. Next,weperformanablativeanal-
ysisofourAEPsolver,focusingonthefeaturesintroducedinSec-
tion5.3.1:(i)nhbd-edits,whichcreateseditcandidateswithparame- 8.2 CreatingaShapeVariationFamily
tersspecifiedwithfeaturesofothereditedparts,and(ii)breaking-
Naturallanguageeditrequestscanoftenbeunder-specific,partic-
edits,whichusetheminimallyconstraint-breaking editwhenno
ularlywhenitcomestodetailingsecondaryedits.Consequently,
editsatisfiesallconstraints.Wecomparetheinferredprogramsto
editrequeststypicallysupportmultiplepossiblerealizations.The
thegroundtruth(GT)programsusingthemetricsfromSection7.2,
minimal-deformation,maximally-relation-preservingeditsproduced
andprovideresultsinTable4.Removingnhbd-editsincreasesgeo-
byeditpropagationapproachesrepresentonlyasingleinterpreta-
metricdistance,whileremovingbreaking-editsincreasesstructural
tionoftherequest.However,differentusersmaypreferdifferent
distance.Thisalignswithourintuition:nhbd-editsimproveparame-
secondaryedits.Therefore,producingeditingprogramsthateach
terization,affectinggeometricdistance,whilebreaking-editsreduce
modeladifferentinterpretationoftherequestisdesirable.Were-
thenumberofbrokenrelations,affectingstructuraldistancewhen
fertothesesetsofrelatedbutdistincteditingprogramsasShape
elided.
VariationFamilies.
Toenablethisexploration,wecreatemultiplevariationsofthe
8 APPLICATIONS
initial editing request, retaining the user-specified primary edit
Oureditingsystemactsasatranslator,convertingnaturallanguage whileexploringdifferentsecondaryeffects.Thesevariedrequests
promptsintoeditingprograms.Withthissysteminhand,wecan arethenusedtogeneratedistincteditingprograms,eachresulting
furtherexplorehowtoemploythecreativecapabilitiesofLLMs inauniqueshapevariation.Weleveragethegeneralworldknowl-
toenabletantalizingnewapplications.Wedemonstratetwosuch edgeaboutobjectcategoriescontainedinLLMstoaccomplishthis
applications:AutomaticProxyduralModelingandGeneratingShape task.Giventheuser’sprimaryeditrequest,weprompttheLLMto
VariationFamilies.NotethatweutilizetheOpenAI’s(Vision)GPT- generatevariationsoftherequest,specificallytargetingdifferent
4[38]astheLLMfortheseapplications,andprovidetheprompts secondary effects. As with the previous application, we provide
utilizedforallapplicationsinthesupplementarymatarials. in-contextexamplesandtask-specificinstructionstoensurethat
theLLMproducesrequestscompatiblewithoursystem.Oncethe
8.1 AutomaticProxyduralModeling
editingprogramsaregeneratedforallthevariedprompts,theyare
Our editing programs incorporate analytical edits, representing presentedtotheuser.Theusercanthenexploredifferentinterpreta-
modifiedpartsasparameterizedfunctionsofcontrolparameters tionsoftheeditrequest,andselecttheonemostalignedwiththeir
exposed to the user. By leveraging function composition, these intent.InFigure7weshowanexampleofaShapeVariationFamily
programscanbeautomaticallystacked,allowingaparteditedbyone generatedwiththisapproach.12 • GaneshanandHuang,etal.
9 CONCLUSIONS
WehaveintroducedParSEL:ParameterizedShapeEditingwith
Language,anovelshapeeditingsystemthatcombinestheintuitive-
nessofnaturallanguagewiththeprecisionofparametriccontrolto
performgeometriceditson3Dassets.Givensemanticallylabeled
3Dmeshesandanaturallanguageeditrequest,oursystemprovides
"Shorten the legs …"
adjustableparameterstocontrolhowtheshapeisedited.Thiscapa-
bilityisachievedthroughparameterizededitingprograms,inferred Input Prior Neural Approaches Ours
byaneuro-symbolicmodulethatcombinesLLMpromptingwith
CASsolvers.CentraltothismoduleisAnalyticalEditPropaga- Fig.8. Whilepriorlanguage-based3Dshapeeditingmethods[1]support
tion(AEP),anoveltechniquethatextendseditingprogramsby abroaderrangeofoperationsonunsegmentedshapes,ParSELdelivers
controllable,disentanglededitingofhigh-qualitytextured3Dassets.Each
consideringinter-partgeometricrelationships.Ourexperiments
approachistailoredtosuitdifferentneeds.
demonstratedthatoursysteminferseditingprogramsthataremore
closelyalignedwithuserintentcomparedtootherbaselines.We thatweidentifyare(i)partsformedbyjoiningpointsontwodiffer-
alsoshowcasedexcitingapplicationsmadepossiblebyoursystem, entcurves,oftenseeninthedesignofbacksupportsinchairsand
suchasautomaticconversionofahigh-quality3Dassetintoan beds,and(ii)wallpapersymmetrygroups,whichinvolvetransla-
approximatelyproceduralmodel. tionsymmetryalongtwoaxes,commonlyseeninbuildingfacades.
Extendingoursystemtosupporttheseadditionalstructureswould
greatlyenhanceitsapplicability.
9.1 Limitationsandfuturework
Webelievethatoursystemmakes3Dasseteditingmorecontrol-
WhileParSEListhefirstsystemcapableofsupportingcontrollable lableandintuitiveforartists.Withtheriseoftext-to-3Dapproaches,
shapeeditsfromnaturallanguage,itdoeshaveafewlimitations: creatingnewmodelshasbecomeeasier,yeteditingthemremainsa
(i)SearchEfficiency:Adownsideofourapproachisthecomputa- challenge.Byintegratingoursystemwithauto-segmentationtech-
tionalexpenseoftheanalyticaleditsearch.Whilethemediantimeit niquestools[56],wecanenableintuitiveandpreciseeditingof
takestosearchforeditingprogramsisapproximately30seconds,in modelsgeneratedfromtext-to-3Dapproaches.Finallyweempha-
certainconditionsitcantakebeyond500secondsforverycomplex sizethatoursystemwasmosteffectivewithcarefulanddirected
shapes.Thisisduetooursimpleandgenerouseditsamplingpro- LLMintegration;wetasktheLLMwithperformingonlyhigh-level
cess,wherethesolvermayevaluateanextensivearrayofpotential translationtasks,andrelyonsymbolicsolverstoperformtheneces-
editcandidatesundercertainconditions.Thiscouldlikelybemiti- sarygeometricanalysis.Lookingahead,wehopethisworkprovides
gatedtoalargeextentwiththeadditionofa‘smarter’editsampling apotentframeworkforareliableintegrationofLLMswithsymbolic
strategy.Forinstance,analyzingtheparametricformofattachment reasoningtosupportshapeanalysis.
pointscanhelpidentifysuitableeditingoperationsandprunethe
searchspace.Alternatively,employinganearlyexitmodel,where
searchstopsonceasatisfyingeditisfound,mayalsoimprovethe
run-timeofthesystem(thoughintegrationwithparallelizationmay
benon-trivial).
(ii)LimitedEdits:Oursystemcurrentlysupportsalimitedrange
ofpartdeformations-onlythoseexpressibleasaffinetransformsof
theboundingproxyoritsfeatures.Wecontrastthiswiththeprior
neuralapproaches[1]inFigure8,whichdespiteotherdrawbacks,
supportawiderrangeofshapeedits.Toaccommodateawiderrange
ofeditrequests,oursystemneedstosupportadditionaldeformation
functions,suchasmakingpartssphericalorcylindrical.Akeychal-
lengeinsupportingnoveldeformationsistheabilitytoanalytically
specifythestateofinter-partrelationsunderthesedeformation
functions. This makes iterative non-analytic deformations func-
tions,suchasARAPenergybaseddeformation[44],incompatible
withoursystem.
(iii)LimitedShapeStructures:Whileourshaperepresentation
iseffectiveformanyman-made3Dobjects,ithasitslimitations.
Boundingboxesmaynotbethebestcontrolcageforallpartsand
othercontrolcagesmayberequired.Althoughoursystemcansup-
portarbitrarycontrolcages,asweuseharmoniccoordinatesto
parameterizetheattachmentrelations,theireffectonthesolver’s
successisunclear.Additionally,wecurrentlymodelalimitedset
ofsymmetryrelations.Twocommonformsobservedin3DassetsParSEL:ParameterizedShapeEditingwithLanguage • 13
REFERENCES [22] R.KennyJones,DavidCharatan,PaulGuerrero,NiloyJ.Mitra,andDanielRitchie.
[1] PanosAchlioptas,IanHuang,MinhyukSung,SergeyTulyakov,andLeonidas 2021. ShapeMOD:MacroOperationDiscoveryfor3DShapePrograms. ACM
Guibas.2023.ShapeTalk:ALanguageDatasetandFrameworkfor3DShapeEdits TransactionsonGraphics(TOG),Siggraph2021(2021).
andDeformations.InProceedingsoftheIEEE/CVFConferenceonComputerVision [23] R. Kenny Jones, Paul Guerrero, Niloy J. Mitra, and Daniel Ritchie. 2023.
andPatternRecognition(CVPR).12685–12694. ShapeCoder:DiscoveringAbstractionsforVisualProgramsfromUnstructured
[2] DanielGAliaga,PaulARosen,andDanielRBekins.2007.Stylegrammarsfor Primitives.ACMTransactionsonGraphics(TOG),Siggraph202342,4,Article49
interactivevisualizationofarchitecture.IEEEtransactionsonvisualizationand (2023).
computergraphics13,4(2007),786–797. https://doi.org/10.1109/TVCG.2007.1024 [24] PushkarJoshi,MarkMeyer,TonyDeRose,BrianGreen,andTomSanocki.2007.
[3] GilbertLouisBernsteinandWilmotLi.2015.Lillicon:usingtransientwidgetsto Harmoniccoordinatesforcharacterarticulation.ACMTrans.Graph.26,3(jul
createscalevariationsoficons.ACMTrans.Graph.34,4,Article144(jul2015), 2007),71–es. https://doi.org/10.1145/1276377.1276466
11pages. https://doi.org/10.1145/2766980 [25] GwanghyunKim,TaesungKwon,andJongChulYe.2022.DiffusionCLIP:Text-
[4] MartinBokeloh,MichaelWand,VladlenKoltun,andHans-PeterSeidel.2011. GuidedDiffusionModelsforRobustImageManipulation.InProceedingsofthe
Pattern-awareshapedeformationusingslidingdockers.ACMTrans.Graph.30,6 IEEE/CVFConferenceonComputerVisionandPatternRecognition(CVPR).2426–
(dec2011),1–10. https://doi.org/10.1145/2070781.2024157 2435.
[5] MartinBokeloh,MichaelWand,Hans-PeterSeidel,andVladlenKoltun.2012. [26] MilinKodnongbua,BenjaminJones,MaazBinSafeerAhmad,VladimirKim,
Analgebraicmodelforparameterizedshapeediting.31,4,Article78(jul2012), andAdrianaSchulz.2023.ReparamCAD:Zero-shotCADRe-Parameterization
10pages. https://doi.org/10.1145/2185520.2185574 forInteractiveManipulation.InSIGGRAPHAsia2023ConferencePapers(<conf-
[6] TimBrooks,AleksanderHolynski,andAlexeiAEfros.2022. InstructPix2Pix: loc>,<city>Sydney</city>,<state>NSW</state>,<country>Australia</country>,
LearningtoFollowImageEditingInstructions.arXivpreprintarXiv:2211.09800 </conf-loc>)(SA’23).AssociationforComputingMachinery,NewYork,NY,USA,
(2022). Article69,12pages. https://doi.org/10.1145/3610548.3618219
[7] TomBrown,BenjaminMann,NickRyder,MelanieSubbiah,JaredDKaplan, [27] VladislavKraevoy,AllaSheffer,ArielShamir,andDanielCohen-Or.2008.Non-
PrafullaDhariwal,ArvindNeelakantan,PranavShyam,GirishSastry,Amanda homogeneousresizingofcomplexmodels.ACMTrans.Graph.27,5,Article111
Askell,SandhiniAgarwal,ArielHerbert-Voss,GretchenKrueger,TomHenighan, (dec2008),9pages. https://doi.org/10.1145/1409060.1409064
RewonChild,AdityaRamesh,DanielZiegler,JeffreyWu,ClemensWinter, [28] PeterKulits,HaiwenFeng,WeiyangLiu,VictoriaAbrevaya,andMichaelJ.
ChrisHesse,MarkChen,EricSigler,MateuszLitwin,ScottGray,Benjamin Black. 2024. Re-Thinking Inverse Graphics With Large Language Models.
Chess,JackClark,ChristopherBerner,SamMcCandlish,AlecRadford,Ilya arXiv:2404.xxxxx[cs.CL]
Sutskever,andDarioAmodei.2020. LanguageModelsareFew-ShotLearners. [29] JinjieLin,DanielCohen-Or,HaoZhang,ChengLiang,AndreiSharf,Oliver
InAdvancesinNeuralInformationProcessingSystems,H.Larochelle,M.Ran- Deussen,andBaoquanChen.2011.Structure-preservingretargetingofirregular
zato,R.Hadsell,M.F.Balcan,andH.Lin(Eds.),Vol.33.CurranAssociates, 3Darchitecture.ACMTrans.Graph.30,6(dec2011),1–10. https://doi.org/10.
Inc.,1877–1901. https://proceedings.neurips.cc/paper_files/paper/2020/file/ 1145/2070781.2024217
1457c0d6bfcb4967418bfb8ac142f64a-Paper.pdf [30] YuanzeLin,Yi-WenChen,Yi-HsuanTsai,LuJiang,andMing-HsuanYang.2023.
[8] MarcioCabral,SylvainLefebvre,CarstenDachsbacher,andGeorgeDrettakis. Text-DrivenImageEditingviaLearnableRegions.arXivpreprintarXiv:2311.16432
2009.StructurePreservingReshapeforTexturedArchitecturalScenes.Computer (2023).
GraphicsForum(ProceedingsoftheEurographicsconference)(2009). http://www- [31] LianeMakatura,MichaelFoshey,BohanWang,FelixHähnLein,PingchuanMa,
sop.inria.fr/reves/Basilic/2009/CLDD09 BoleiDeng,MeganTjandrasuwita,AndrewSpielberg,CrystalElaineOwens,
[9] D. Cascaval, M. Shalah, P. Quinn, R. Bodik, M. Agrawala, and A. Schulz. PeterYichenChen,AllanZhao,AmyZhu,WilJNorton,EdwardGu,JoshuaJacob,
2022. Differentiable 3D CAD Programs for Bidirectional Editing. Com- YifeiLi,AdrianaSchulz,andWojciechMatusik.2023.HowCanLargeLanguage
puterGraphicsForum41,2(2022),309–323. https://doi.org/10.1111/cgf.14476 ModelsHelpHumansinDesignandManufacturing? arXiv:2307.14377[cs.CL]
arXiv:https://onlinelibrary.wiley.com/doi/pdf/10.1111/cgf.14476 [32] AaronMeurer,ChristopherP.Smith,MateuszPaprocki,OndřejČertík,SergeyB.
[10] Ta-YingCheng,MatheusGadelha,ThibaultGroueix,MatthewFisher,Radomir Kirpichev,MatthewRocklin,AMiTKumar,SergiuIvanov,JasonK.Moore,Sar-
Mech,AndrewMarkham,andNikiTrigoni.2024.LearningContinuous3DWords tajSingh,ThilinaRathnayake,SeanVig,BrianE.Granger,RichardP.Muller,
forText-to-ImageGeneration.arXivpreprintarXiv:2402.08654(2024). FrancescoBonazzi,HarshGupta,ShivamVats,FredrikJohansson,FabianPe-
[11] SabineCoquillart.1990.Extendedfree-formdeformation:asculpturingtoolfor dregosa,MatthewJ.Curry,AndyR.Terrel,ŠtěpánRoučka,AshutoshSaboo,
3Dgeometricmodeling. SIGGRAPHComput.Graph.24,4(sep1990),187–196. IsuruFernando,SumithKulal,RobertCimrman,andAnthonyScopatz.2017.
https://doi.org/10.1145/97880.97900 SymPy:symboliccomputinginPython. PeerJComputerScience3(Jan.2017),
[12] WeixiFeng,WanrongZhu,Tsu-JuiFu,VarunJampani,ArjunReddyAkula, e103. https://doi.org/10.7717/peerj-cs.103
XuehaiHe,SBasu,XinEricWang,andWilliamYangWang.2023. Layout- [33] ÉlieMichelandTamyBoubekeur.2021. DAGamendmentforinversecontrol
GPT:CompositionalVisualPlanningandGenerationwithLargeLanguage ofparametricshapes.ACMTrans.Graph.40,4,Article173(jul2021),14pages.
Models.InThirty-seventhConferenceonNeuralInformationProcessingSystems. https://doi.org/10.1145/3450626.3459823
https://openreview.net/forum?id=Xu8aG5Q8M3 [34] Oscar Michel, Roi Bar-On, Richard Liu, Sagie Benaim, and Rana Hanocka.
[13] RanGal,OlgaSorkine,NiloyJ.Mitra,andDanielCohen-Or.2009.iWIRES:an 2021. Text2Mesh:Text-DrivenNeuralStylizationforMeshes. arXivpreprint
analyze-and-editapproachtoshapemanipulation(SIGGRAPH’09).Association arXiv:2112.03221(2021).
forComputingMachinery,NewYork,NY,USA,Article33,10pages. https: [35] NiloyMitra,MichaelWand,Hao(Richard)Zhang,DanielCohen-Or,Vladimir
//doi.org/10.1145/1576246.1531339 Kim,andQi-XingHuang.2013.Structure-awareshapeprocessing.InSIGGRAPH
[14] William Gao, Noam Aigerman, Groueix Thibault, Vladimir Kim, and Rana Asia2013Courses(HongKong,HongKong)(SA’13).AssociationforComputing
Hanocka.2023.TextDeformer:GeometryManipulationusingTextGuidance.In Machinery,NewYork,NY,USA,Article1,20pages. https://doi.org/10.1145/
ACMTransactionsonGraphics(SIGGRAPH). 2542266.2542267
[15] OpenAIGPT-4.2023.GPT-4TechnicalReport. arXiv:2303.08774[cs.CL] [36] KaichunMo,PaulGuerrero,LiYi,HaoSu,PeterWonka,NiloyMitra,and
[16] PaulGuerrero,GilbertBernstein,WilmotLi,andNiloyJ.Mitra.2016.PATEX: LeonidasJGuibas.2019. StructEdit:LearningStructuralShapeVariations.
ExploringPatternVariations.ACMTrans.Graph.35,4(2016),48:1–48:13. https: Arxiv1911.11098(2019).
//doi.org/10.1145/2897824.2925950 [37] KaichunMo,ShilinZhu,AngelX.Chang,LiYi,SubarnaTripathi,LeonidasJ.
[17] JuliaGuerrero-Viu,MilosHasan,ArthurRoullier,MidhunHarikumar,Yiwei Guibas,andHaoSu.2019.PartNet:ALarge-ScaleBenchmarkforFine-Grained
Hu,PaulGuerrero,DiegoGutierrez,BelenMasia,andValentinDeschaintre. andHierarchicalPart-Level3DObjectUnderstanding.InCVPR.
2024.TexSliders:Diffusion-BasedTextureEditinginCLIPSpace.arXivpreprint [38] OpenAI.2024.GPT-4TechnicalReport. arXiv:2303.08774[cs.CL]
arXiv:2405.00672(2024). [39] ThomasW.SederbergandScottR.Parry.1986.Free-formdeformationofsolid
[18] TanmayGuptaandAniruddhaKembhavi.2023. VisualProgramming:Com- geometricmodels.InProceedingsofthe13thAnnualConferenceonComputer
positionalVisualReasoningWithoutTraining.InProceedingsoftheIEEE/CVF GraphicsandInteractiveTechniques(SIGGRAPH’86).AssociationforComputing
ConferenceonComputerVisionandPatternRecognition(CVPR).14953–14962. Machinery,NewYork,NY,USA,151–160. https://doi.org/10.1145/15922.15903
[19] ZiniuHu,AhmetIscen,AashiJain,ThomasKipf,YisongYue,DavidA.Ross, [40] AlexShtof,AlexanderAgathos,YotamGingold,ArielShamir,andDanielCohen-
CordeliaSchmid,andAlirezaFathi.2024.SceneCraft:AnLLMAgentforSynthe- Or.2013.GeosemanticSnappingforSketch-BasedModeling.ComputerGraphics
sizing3DSceneasBlenderCode. arXiv:2403.01248[cs.CV] Forum32,2(2013),245–253. https://doi.org/10.1111/cgf.12044Proceedingsof
[20] IanHuang,VrishabKrishna,OmoruyiAtekha,andLeonidasGuibas.2023.Al- Eurographics2013.
addin:Zero-ShotHallucinationofStylized3DAssetsfromAbstractSceneDe- [41] KaranSinghandEugeneFiume.1998.Wires:ageometricdeformationtechnique.
scriptions.arXivpreprintarXiv:2306.06212(2023). InProceedingsofthe25thAnnualConferenceonComputerGraphicsandInteractive
[21] IanHuang,GuandaoYang,andLeonidasGuibas.2024.BlenderAlchemy:Editing Techniques(SIGGRAPH’98).AssociationforComputingMachinery,NewYork,
3DGraphicswithVision-LanguageModels. arXiv:2404.17672[cs.CV] NY,USA,405–414. https://doi.org/10.1145/280814.28094614 • GaneshanandHuang,etal.
[42] HabibSlimandMohamedElhoseiny.2024. ShapeWalk:CompositionalShape [50] JasonWei,XuezhiWang,DaleSchuurmans,MaartenBosma,BrianIchter,FeiXia,
EditingthroughLanguage-GuidedChains.InConferenceonComputerVisionand EdChi,QuocLe,andDennyZhou.2023.Chain-of-ThoughtPromptingElicits
PatternRecognition(CVPR). ReasoninginLargeLanguageModels.InNeurIPS.
[43] HabibSlim,XiangLi,YuchenLi,MahmoudAhmed,MohamedAyman,Ujjwal [51] WeiweiXu,JunWang,KangKangYin,KunZhou,MichielvandePanne,Falai
Upadhyay,AhmedAbdelreheem,ArpitPrajapati,SuhailPothigara,PeterWonka, Chen,andBainingGuo.2009.Joint-awaremanipulationofdeformablemodels.
andMohamedElhoseiny.2023. 3DCoMPaT++:AnimprovedLarge-scale3D ACMTrans.Graph.28,3,Article35(jul2009),9pages. https://doi.org/10.1145/
VisionDatasetforCompositionalRecognition.(2023). 1531326.1531341
[44] OlgaSorkineandMarcAlexa.2007. As-Rigid-As-PossibleSurfaceModeling. [52] YutaroYamada,KhyathiChandu,YuchenLin,JackHessel,IlkerYildirim,andYejin
InProceedingsofEUROGRAPHICS/ACMSIGGRAPHSymposiumonGeometry Choi.2024.L3GO:LanguageAgentswithChain-of-3D-ThoughtsforGenerating
Processing.109–116. UnconventionalObjects. arXiv:2402.09052[cs.AI]
[45] RobertW.Sumner,JohannesSchmid,andMarkPauly.2007. Embeddedde- [53] YueYang,Fan-YunSun,LucaWeihs,EliVanderBilt,AlvaroHerrasti,Winson
formationforshapemanipulation. ACMTrans.Graph.26,3(jul2007),80–es. Han,JiajunWu,NickHaber,RanjayKrishna,LingjieLiu,ChrisCallison-Burch,
https://doi.org/10.1145/1276377.1276478 MarkYatskar,AniruddhaKembhavi,andChristopherClark.2023. Holodeck:
[46] DídacSurís,SachitMenon,andCarlVondrick.2023.ViperGPT:VisualInference LanguageGuidedGenerationof3DEmbodiedAIEnvironments.arXivpreprint
viaPythonExecutionforReasoning.ProceedingsofIEEEInternationalConference arXiv:2312.09067(2023).
onComputerVision(ICCV)(2023). [54] MehmetErsinYumer,SiddharthaChaudhuri,JessicaK.Hodgins,andLeventBurak
[47] QianWang,BiaoZhang,MichaelBirsak,andPeterWonka.2023.MDP:AGener- Kara.2015.Semanticshapeeditingusingdeformationhandles.ACMTrans.Graph.
alizedFrameworkforText-GuidedImageEditingbyManipulatingtheDiffusion 34,4,Article86(jul2015),12pages. https://doi.org/10.1145/2766908
Path. arXiv:2303.16765[cs.CV] [55] Youyi Zheng, Hongbo Fu, Daniel Cohen-Or, Oscar Kin-Chung Au,
[48] XuezhiWang,JasonWei,DaleSchuurmans,QuocVLe,EdH.Chi,Sharan and Chiew-Lan Tai. 2011. Component-wise Controllers for Structure-
Narang,AakankshaChowdhery,andDennyZhou.2023.Self-ConsistencyIm- Preserving Shape Manipulation. Computer Graphics Forum 30, 2
provesChainofThoughtReasoninginLanguageModels.InTheEleventhInter- (2011), 563–572. https://doi.org/10.1111/j.1467-8659.2011.01880.x
nationalConferenceonLearningRepresentations. https://openreview.net/forum? arXiv:https://onlinelibrary.wiley.com/doi/pdf/10.1111/j.1467-8659.2011.01880.x
id=1PL1NIMMrw [56] Yuchen Zhou, Jiayuan Gu, Xuanlin Li, Minghua Liu, Yunhao Fang, and
[49] YanzhenWang,KaiXu,JunLi,HaoZhang,ArielShamir,LigangLiu,Zhiquan Hao Su. 2023. PartSLIP++: Enhancing Low-Shot 3D Part Segmentation
Cheng,andYueshanXiong.2011.SymmetryHierarchyofMan-MadeObjects. viaMulti-ViewInstanceSegmentationandMaximumLikelihoodEstimation.
Comput.Graph.Forum(2011). arXiv:2312.03015[cs.CV]Supplementary Document for
ParSEL: Parameterized Shape Editing with Language
ADITYAGANESHAN,BrownUniversity,USA
RYANYHUANG,BrownUniversity,USA
XIANGHAOXU,BrownUniversity,USA
R.KENNYJONES,BrownUniversity,USA
DANIELRITCHIE,BrownUniversity,USA
CCSConcepts:•Computingmethodologies Computergraphics; theparametersoftherelation,allowingustodetectwhenarelation
→
Neuralnetworks;Naturallanguagegeneration. isbroken.
Secondly,wemodel4typesofinter-partAttachmentrelations,
AdditionalKeyWordsandPhrases:shapeediting,parametricediting,large
namelyPointAttachment,LineAttachment,FaceAttachment
languagemodels,computeralgebrasystems,neuro-symbolic,programsyn-
thesis andVolumeAttachment.Theseattachmentsconstrainstherel-
ativemovementbetweenparts,withtheconstraintsbeingmore
1 INTRODUCTION restrictiveaswemovefromPointtoVolume.LineAttachments
aretypicallyusefulformodellingattachmentbetweenpartswhich
Inthisdocument,wepresentadditionaldetailsregardingoursys-
‘widen’together,suchasachair’sseatanditsback.FaceAttach-
tem.First,weprovideabriefoverviewofthevideosincludedinthe
mentsareusefulformodellingattachmentbetweenpartswhich
supplementalmaterial.Next,wedescribeoureditingsystemParSEL
radiallyscaletogether,suchasaTV’sdisplayanditsFrame.Finally,
inSection3,includingthepre-processingandpost-processingsteps.
VolumeAttachmentsissuitabletomodeltheattachmentbetween
Section4providesadditionaldetailsregardingAnalyticalEdit
partswhichmustalwaysbeeditedinthesamefashion(i.e.theonly
Propagation.Finally,Section5presentsdetailsregardingtheex-
waytosatisfyVolumeAttachmentsisbyhavingthesameediton
perimentspresentedinthepaper.
boththeparts.Whiletheseattachmentrelationsbehaveindifferent
ways,theyareallmodelledusingonlypointattachments,withline
2 QUALITATIVEVIDEOS
attachmentinpracticeconvertingintotwoattachments,faceinto4
Weprovidethefollowingvideosinthesupplementalmaterials:
co-planarpointsattachmentsandvolumeinto8attachmentpoints.
(1) Thesetofvideosusedinourperceptualstudy,locatedin Notethattechnicallyfaceattachmentsandvolumeattachments
./videos/perceptual_study.
couldbemodelledwithjust3and4pointsattachmentsrespectively.
(2) Avideotitledreal_time_shape_variations.mp4,which Themostimportantdetailisthatalltheserelations,thesymme-
demonstrateswhichdemonstrateshowouranalyticaledit- tryrelationsaswellastheattachmentrelations,areautomatically
ingprogramsenablereal-timeexplorationof shapevari- derived,andthisprocessisdescribedinsection3.3.
ations.Thisiscontrastedwithapriorapproachthatuses
online-editpropagation,resultinginalaggyuserexperience.
3.1.2 VirtualPartHierarchy. Thepartsweconsideroftenarehier-
(3) Avideotitledlive_proxydural_modeling.mp4,whichshows
archicalinnature-partssuchas‘back‘canoftenbecomposedof
oursystembeingusedtocreateahigh-qualityprocedural
multiplesub-partssuchas‘back-support-bars‘‘back-top-bar‘etc.
modelof3Dassets.
However,performingeditpropagationwhileconsideringsuchhier-
Werequestthatreviewerswatchthesevideostofullyunderstand archybecomesincreasingcomplicatedandleadtoundesirableedits
thecapabilitiesandlimitationsofoursystem. (suchasscalingasetofpartswhentranslatingafewandscalinga
fewispreferable).Priormethods[?]dooffersomesolutionshow-
3 PARAMETERIZEDSHAPEEDITINGDETAILS
ever,weavoidmodelinghierarchysothatwecanavertintroducing
3.1 ShapeAbstraction additionalcomplexityintheanalyticaleditpropagationtechnique.
Thiscanhoweverbeexploredinthefuture.
3.1.1 Inter-partRelations. Asdiscussedinthemainpaper,oursys-
Therefore,allourpartsareonlyataleaf-levelwithnohierarchy.
temconsiderstwotypesofinter-partrelations,namelyAttach-
Weonlyallowhierarchyinonecases,namelyinthepresenceofRo-
mentrelationsandSymmetryrelations.Weconsidermultiplesub-
tationSymmetryorTranslationSymmetryrelations.Whensuch
typesforeachoftheserelations,whicharepresentedinTable1.
First,weusethreetypesofSymmetryrelations:ReflectionSym-
relationsarepresent,weinstantiateavirtualparentpartcontaining
alltheinstances.Thisallowsusetoeditsymmetryrelationswith
metry,RotationSymmetry,andTranslationSymmetry.Eachof
editoperationssuchasChangeCountandChangeDelta.When
theserelationsintroducesconstraintsbetweenthepartsbasedon
wecreatesuchvirtualparts,wealsocreateAttachmentrelations
Authors’addresses:AdityaGaneshan,adityaganeshan@gmail.com,BrownUniversity, betweenthevirtualpartandtheotherparts.
USA;RyanYHuang,ryan_y_huang@brown.edu,BrownUniversity,USA;Xianghao Specifically,whenconsideringvirtualpart,weeitherallowedits
Xu,xianghao_xu@brown.edu,BrownUniversity,USA;R.KennyJones,russell_jones@
onthevirtualpart-thisallowsmodellingeditsonalltheinstancesto-
brown.edu,BrownUniversity,USA;DanielRitchie,daniel_ritchie@brown.edu,Brown
University,USA. getheraswelltherelationedits(ChangeCountandChangeDelta).
4202
yaM
03
]VC.sc[
1v91302.5042:viXra2 • GaneshanandHuang,etal.
Relation Instantiation Constraint
ReflectionSymmetry ref_sym(H, origin=o, normal=n) H𝑗 H𝑖 2 H𝑖 o n n <𝛿 H𝑖,H𝑗 H
|| − − (( − )· ) ||∞ ∀ ∈
RotationSymmetry rot_sym(H, point=o, rot_mat=R) H𝑗 o R𝑛 H𝑖 o <𝛿 H𝑖,H𝑗 H,𝑛=𝑖 𝑗
|| − + ( − )||∞ ∀ ∈ −
TranslationSymmetry trans_sym(H, delta=d) H𝑗 H𝑖 d <𝛿 H𝑖,H𝑗 H,𝑛=𝑖 𝑗
|| −( + )||∞ ∀ ∈ −
PointAttachment point_attach(A, B) 𝑀𝑎H𝑖 𝑀 𝑏H𝑗 <𝛿 𝑎𝑛 A,𝑏𝑛 B
|| − ||∞ ∀ ∈ ∈
LineAttachment line_attach(A, B) ||𝑀𝑎𝑛H𝑖 −𝑀 𝑏𝑛H𝑗
||∞
<𝛿 ∀𝑎𝑛 ∈A,𝑏𝑛 ∈B, {𝑛 ∈Z |1 ≤𝑛 ≤2
}
FaceAttachment face_attach(A, B) ||𝑀𝑎𝑛H𝑖 −𝑀 𝑏𝑛H𝑗
||∞
<𝛿 ∀𝑎𝑛 ∈A,𝑏𝑛 ∈B, {𝑛 ∈Z |1 ≤𝑛 ≤4
}
VolumeAttachment vol_attach(A, B) ||𝑀𝑎𝑛H𝑖 −𝑀 𝑏𝑛H𝑗
||∞
<𝛿 ∀𝑎𝑛 ∈A,𝑏𝑛 ∈B, {𝑛 ∈Z |1 ≤𝑛 ≤8
}
Table1. Inter-PartRelations:Weenlistthedifferentinter-partrelationssupportedinourstructuredshaperepresentation.Inthefirstcolumn,weannotate
thetypeofeachrelation.Thesecondcolumndepictsthepseudo-codeusedtoinitializetheserelations,providingreferencefortherelationparameters.Finally,
thelastcolumndepictstheconstraintsthatareenforcedasaconsequenceofeachrelation.NotethatfortheAttachmentrelations,𝑀𝑖denotestheharmonic
coordinates[?]forthecorrespondingpoint𝑖.
Toeditpartswithinasymmetryrelation,suchaswhenscalingonly 3.3 Pre-ProcessingInput3DAssets
thecentralbackslat,weautomaticallyturnoffthevirtualpart(and Givena3Dmeshasinput,weutilizeapriorwork[?]toinferthe
itsattachment)reducingtheshapebacktoahierarchy-lessgraph. reflection,translationandrotationsymmetriesintheshape.This
approachperformsICPbetweenmeshpartswiththesamelabel
todetecttheserelations.Wealterthealgorithmslightlytofitour
3.2 ParameterizedShapeEditingDSL
needs.Specifically,weonlyallowtranslationandrotationwhen
Asdescribedinthemainpaper,ourDSLprovidesatomiceditoper- therearemorethan2parts,andonlyconsideraxisalignedreflection
atorsforperformingparameterizededitsonthethepartsaswell symmetryrelations.Wealsoavoidconsideringhierarchiesofsuch
asrelationsintheinput3Dasset.Weenumeratetheseoperatorsin symmetrygroups(forinstance,translationsymmetryofrotation
Table2.Furthermore,wealsopresentthealgebraicformconferred symmetries)assuchhierarchiestendtooccurlessfrequentlyinthe
totheoperandbytheseoperators. man-madeobjectsweconsidered.
As shown in the table, our DSL includes two relation editing Tocreatetheattachmentrelationsweutlilzetheoverlapsbetween
operation,namelyChangeCountandChangeDelta.Theseed- parts.First,weascertainiftwopartshaveanattachmentrelation
itsaffectthenumberofinstances,orthespacingbetweenthem bycheckingifpointssampledononepartiscontainedintheother
inTranslationSymmetryandRotationSymmetryrelations.We part’sboundingbox(andviceversa).Onceanattachmentisdetected,
applytheseoperatorsintwomodes,(i)aTop-Downmode,where we must now decide the type of attachment between the parts.
therelationconfigurations(suchascountandspacing)arederived AttachmentsareclassifiedasPointAttachments,LineAttachment,
fromtheparentpart(i.e.theavirtualpartcontainingallthein- FaceAttachment or VolumeAttachment based on the number of
stancesinthesymmetrygroup).Thisallowseditswherethescaling shared planesof intrinsic symmetry betweenthe part andtheir
oftheparentvirtualpartaffectsthecountorspacingbetweenthe intersectionregion.
instances.and(ii)aBottom-Upmode,wheretheparentvirtualpart’s Thisiscomputedbythefollowingprocess:
shapeisderivedfromtherelationconfiguration.Toachievethis (1) First,wegenerateapointcloudoftheintersectionregion
functionality,wefirstover-parameterizetherelations,forinstance, bysamplingpointsononepart’ssurfaceandrejectingthose
TranslationSymmetryisrepresentedby5variablesitsstart-point, whichareoutsidetheotherpart’sboundingbox.Thispro-
mid-point,end-point,countanddelta-vector.Thisallowsustoflexibly cessisrepeatedforboththeparts.
exploreeditsonanyofthesefeatures(suchaschangingthecount (2) Next,foreachpartascalculatedtheintersection-sharedsym-
beintroducingneweditsnexttotheedit-point).Secondly,werepli- metryplanecount.Weconsiderthenumberofintrinsicsym-
catethesepoints,markingthemaspointsofthevirtualparent,and metryplanesofitsboundingboxaboutwhichtheintersec-
createvirtualAttachmentrelationbetweenthepointsandtheir tionpointcloudissymmetricaswell.
virtualparentcounterparts.Forinstance,wecreateanAttachment
(3) Thesymmetryorderoftheattachmentisassignedasthe
relationbetweenthestart-pointoftherelationandthestart-point
minimumoftheintersection-sharedsymmetryplanecount
inthevirtualparentpart.Thisallowsustoanalyticallyconsider
ofboththeparts.
howtheparentshouldbeupdatedastherelationisupdated,or
vice-versa.Similarly,RotationSymmetryrelationsarealsoover Wepermitoneexception-wedirectlymarkattachmentbetweena
parameterizedbysymbolicexpressionforitsarch-length,radius, partcontainedinsideanotherpartstohavethehighestsymmetryor-
count,anglewhicharethenusedtocommunicateeditsbetweenthe der(i.e.3).Theattachmentrelationsaredirectlythenderivedbased
parentvirtualpart,andtherelation.Notethatwecurrentlyonly onthesymmetryorder,withorder0mappingtoPointAttachment
supporteditingofclosedloopRotationSymmetrygroups. and3mappingtoVolumeAttachment.SupplementaryDocumentfor
ParSEL:ParameterizedShapeEditingwithLanguage • 3
EditOperators Instantiation AlgebraicForm
Translate translate(H𝑖, dir=n, amt=𝑥) H𝑖 (𝑥 )=H 𝑖0 +𝑥 ·n
R 𝑥 =cos 𝑥 I sin 𝑥 n 1 cos 𝑥 nn𝑇
Rotate rotate(H𝑖, orig=o, axis=n, amt=𝑥)
H𝑖
((
𝑥
))
=o
+(
R
()
𝑥
)+
(H
𝑖0( −o)[
)
]×+( − ( ))
Scale1D scale_1D(H𝑖, orig=o, dir=n, amt=𝑥) H𝑖 (𝑥 )=o +𝑥 (n ·(H 𝑖0 −o ))n +(H 𝑖0 −o
)
H𝑐 =H0 o
𝑖 𝑖 −
Scale2D scale_2D(H𝑖, orig=o, normal=n, amt=𝑥) H 𝑖𝑝 =H𝑐
𝑖
−(H𝑐
𝑖
·n )n
H𝑖 (𝑥 )=o +(1 +𝑥 )H 𝑖𝑝 +(H𝑐
𝑖
·n )n
Scale3D scale_3D(H𝑖, orig=o, amt=𝑥) H𝑖 (𝑥 )=o +(1 +𝑥 )(H 𝑖0 −o
)
H𝑐 =H0 o
𝑖 𝑖 −
Shear shear(H𝑖, orig=o, normal=n, dir=d, amt=𝑥) S=I 𝑥d n
+ ⊗
H𝑖 (𝑥 )=o +S𝑇H𝑐
𝑖
ChangeCount change_count(𝑆𝑦𝑚𝑅𝑖, amt=𝑥) -
ChangeDelta change_delta(𝑆𝑦𝑚𝑅𝑖, amt=𝑥) -
KeepFixed keep_fixed(H𝑖) H𝑖 (𝑥 )=H 𝑖0
Table2. DSLcommands:WeenlisttheparameterizededitingoperatorsprovidedinourDSL.Eachcommandisparameterizedbyavariable𝑥,whichcontrols
theeditmagnitude.WeomitthealgebraicformoftheChangeCountandChangeDelta,thetwooperatorswhichareappliedonsymmetryrelationsdueto
theircomplexity.Notethattheinitial6operatorscanalsobeappliedonlyonpartfeaturessuchasaface,edgeoravertex,enablingnon-affinetransforms.
3.3.1 Extending Part Labels. Additionally, we automatically en- thisframeworktobereplacedwithmethodswhichleveragefoun-
hance each part’s label with verbal directional phrases such as dationmodelstoconsiderinter-grouppart-arrangementssimilarto
"front"and"back"tocaptureitsrelativepositioningamongother PartSLIP[?].
instanceswiththesamelabel.ThesephraseshelptheLLMdiscern
whichinstancetoeditwhentheeditintentitselfcontainsdirectional
specifications(forinstance,in‘scalethefrontlegs.’). 3.4 Post-ProcessingEdited3DAssets
Toperformthistask,wefirstcomputetherelativeplacement 3DassetsareeditedinParSELwithpart-leveldeformations,and
vectorsforeachpartwithinasharedlabelgroup(suchasallparts symmetrygroupmodifications.Bothoftheseoperationscanleadto
containingthelabel’leg’).Therelativeplacementvectoriscomputed thecreationofholesinthe3Dasset’smesh,particularlywhenthe
w.r.t.thecenterofalltheparts.Thenbasedonthealignmentof usersetsahigheditmagnitude.InFigure1(c)weshowthisineffect,
thesevectorswiththecardinaldirectionweallotthemtermssuch wheredeformingthelegsofachairresultsingapsbetweenthechair
as‘front’,’back-right’etc.whicharethenusedtoextendthelabels. legsandtheseat.Therefore,aftereditingwiththeparametricediting
Whenagrouphasmorethe2parts,wealsoseparatelyidentifyif programs,certain3Dassetsrequireadditionalpost-processingto
theyareapproximatearrangedinarotationalpattern,orastraight improveeditedassetsquality.
line.Thisisdonebycalculatingtheanglecreatedbetweentheparts Notethatthisartifactisalsopresentinprioreditpropagation
andthecenter.Basedonthisdifferentsetofdirectionalphrasesare methods.Priorapproach[?]employanintricateapproach,where
used.Forinstance,4legsalongalinegoinglefttorightareassigned surface-baseddeformationapproach[?]isusedwithvirtualedges
thelabels‘left’,‘left-center’,‘right-center’,‘right’,whereasifthey constructedbetweenthepointsandthesurfacefeaturecurvesex-
areapproximatelyrotationallyarranged,theyaregiventhelabels tractedusing[?].However,itdoesn’tresolveallmesh-relatedissues.
‘left-back’,‘left-front’,’right-back’,’right-front’.Groupswithmore WeinsteaduseaSurfaceReconstructionbasedmethodtocorrect
than5labels(suchasrungsinabed’sladder)aresimplyprovided suchartifacts.Givenanedited3Dasset,weperformthefollowing
numericindicesasthedirectionalphrase. steps:
Wefoundthisapproachprovidedcorrectlabelsforthemajority (1) Firstadensepointcloudissampledonthedeformedmesh
ofshapesconsidered,requiringminimalmanualadjustmenttothe (with200000points)usingPoissondisksampling.
labels,particularlywhenpartsarearrangedinanon-trivialpattern. (2) WethenemployscreenedPoissonsurfacereconstruction[?
WeemphasizethatthisisonlyimplementedtohelptheLLMsand ]toreconstructa3Dmeshfromthepointclouds.
hasnoaffectonoureditpropagationalgorithm.Infuture,weexpect
(3) Thismeshcanoftenbedense,henceweperformmeshdeci-
mationusingQuadricerrorbasededgecollapse.4 • GaneshanandHuang,etal.
(a) Input 3D Asset (b) Edited 3D Asset (c) Mesh holes due to edits (d) Mesh Clean-up with SPR (c) Post-processed 3D Asset
Fig.1. PerceptualStudyInterface:Extremedeformationunderoursystemcancausegapstoappearinthe3Dmesh.Withthepost-processingwedescribe
inSection3.4,whichemploysscreenedPoissonsurfacereconstruction(SPR)[?],thesegapscanbefixedalthoughwithadetrimentaleffectontheshape’s
material.
(4) Next,wepartitionthismeshintopart-levelmeshfragments.To Finally,Algo.3providesthepseudocodefortheAnalyticaledit
performthis,firstweextractalltheverticesoftheoriginal solver.Here,thefunctioncas_solvedeploysaComputerAlgebra
deformedmesh,andsimplytransferthelabelfromthese SystemSolver[?]toinfersfunctionassignmentstothesymbolic
verticestothereconstructedmeshverticesusinganearest variableYthatsatisfytheconstraintequationeq.
neighborlookup.Thepart-labelsarethenusedtopartition
thereconstructedmeshintofragments.
4.2 AnalyticalEditSolver
(5) Finally,wetransferthematerialfromtheoriginalparttothe
Inthis step,wearetasked withintroducingnew parameterized
reconstructedpartmesh.WetransferthevertexUVcoordi-
editswhichrestoreandpreservethebrokenrelationsacrossthe
natesfromtheoriginal(deformed)meshtothereconstructed
inputrange.Asdiscussedinthepaper,ourstrategyinvolvessearch-
meshusingnearestneighborlookupaswell.
ingonlyoverasubsetoffeasibleparamassignments.Thefeasible
TheresultsofthisprocessareshowninFigure1(d).Wefound params assignments are created using the hexahedron features
thisapproachtobeeffectiveatfillingsmall-mediumgapsbetween suchasitsface-center,vertices,andlocalaxisdirections.Tocreate
thedeformedpartswhileconsiderablymaintainingthe3Dassets theseoperators,wefirstcollectasetof‘feasible’points(thecen-
quality. ter,face-center,corners,edge-centers),asetof273Dpoints,anda
However,similartopriorapproaches[?],weemphasizethatthis setof‘feasible’directions(theglobalcardinaldirectionsaswellas
approachisonlyastop-gap,andonlyservesasanadditionalutility localcardinaldirections).Thesefeasiblepointsanddirectionsare
functiontodemonstratetheeffectivenessoftheeditpropagation thenusedtocreatetheeditcandidates.Theseeditcandidatesare
mechanism.Fixingholesineditedmeshesisaninterestingresearch thenmergedbasedontheequivalencebetweentheeditexpressions
directioninitself,withmanyworks[?]specificallytargetinghole theycreate.Wenotethatthissimplesamplingprocesscreatesan
correction.Infuture,wehopetoleveragesuchapproachestoim- abundantquantityofeditoperatorstoconsider.However,sinceour
provetheoutputfromourmethodtomaintainthequalityofthe3D AnalyticalSolvingprocessisembarrassinglyparallel,wearestill
assetafterdeformation. abletosearcheditsinareasonableduration.
4.2.1 nhbd-editsParameterization. nhbd-editsaddressthefactthat
4 ANALYTICALEDITPROPAGATIONDETAILS
oftentheparamrequiretoeditapartmaynotbederivedbyone
4.1 Pseudo-codeforAnalyticalEditPropagation ofitsfeatures.Therefore,whenallthecandidatesinE 𝑅 fails,we
Wepresentthepseudo-codeforoursysteminAlgo.1,Algo.2and introduceadditionalcandidateswhichcontainparamassignments
Algo.3. whicharebasedonthefeaturesofothereditedhexahedrons.We
Algo.1providesthepseudocodefortheoveralleditingprocess. alsointroduceeditcandidateswithparamassignmentsbasedon
First,theLLMispromptedtoreturntherelation-validityseed-edit, therelativearrangementofthetwoparts,suchaswhenonepartis
type-hints.ThenourAnalyticalEditPropagationtechniqueis beingscaled,movingtheotherpartalongthedirectionconnecting
appliedontheseed-editwiththetype-hints. thetwopartsisapotentialtranslationeditcandidate.
Algo.2providesthepseudocodefortheeditpropagationframe-
work used in our system. Note that broken relations are gath- 4.2.2 EditSelection. Foreachcandidatefromtheeditcandidateset
eredbasedonthebrokenconstraints(C,listedin1).Thefunction E 𝑅,ouranalyticaleditsolverinfersplausiblefunctionalassignments
get_part_to_editreturnsapartthatshouldbeeditedbasedon totheAmountparameterthatcreatevalidparameterizededits,i.e.
thebrokenrelations.FollowingCSPliterature,weusetheMinimum editswhichrestoreandpreserveallthebrokenrelations(forthepart
EntropyHeuristic(MinE)andselectthepartwiththemostrelations beingedited).Thisresultsinasetoffeasibleedits,fromwhichwe
(sinceitislikelytohavetheleastnumberofconstraintsatisfying mustselectthemostsuitableedit.Wenowintroducethecriterion
edits). employedforthistask.SupplementaryDocumentfor
ParSEL:ParameterizedShapeEditingwithLanguage • 5
Algorithm1:ParSELOverview Algorithm3:AnalyticalEditSolver
generate_program(shape, edit_request): solve(broken, part, edit_hints):
shape = set_sym_relations(shape, edit_request) Y = new_var()
init_edit = get_init_edit(shape, edit_request) solution_set, scored_solutions = {}, {}
edit_hints = get_edit_hints(shape, edit_request) candidates = get_candidates(part, edit_hints)
constraints = get_constraints(part, broken)
program = propagate(shape, init_edit, edit_hints)
foredit in candidates:
return program
propagate(edit, amount=Y)
foreq in constraints:
solutions = cas_solve(eq, Y)
solution_set.add(solutions)
Algorithm2:AnalyticalEditPropagation forsol in solutions:
score = count_satisfying(sol, constraints)
propagate(shape, init_edit): unfixed = get_broken(sol, constraints)
all_edits, finish = init_edit, false scored_solutions.add((score, unfixed))
while!finish: iflen(solution_set) > 0:
propagate(all_edits) edit, unfixed = get_best(scored_solutions)
broken = gather_broken_relations(shape) else:
iflen(broken) > 0: edit, unfixed = None, broken
part = get_part_to_edit(broken) return edit, unfixed
edit, unfixed = solve(broken, part)
reject_relations(unfixed)
all_edits.add(edit)
else:
5.1 Dataset
finish = true
clean_up() WeconstructourdatasetbysourcingshapesfromPartNet[?]and
return all_edits CoMPaT3D++[?]dataset.Weprovidemoredetailsofthedataset
here.
First, we present the statistics of the parsed structured shape
representationderivedfromthemeshmodels.Table3reportsthese
statistics.Wenotethatourdev-setcontainingshapesfromPartNet
Atahighlevel,weselecttheeditwhichminimizesARAPdefor- contains a wider array of shapes sizes than the test-set created
mationenergy[?],whilemaximallypreservingtheeditedpart’s withCoMPaT3D++.Furthermore,sinceshapesinPartNetareoften
intrinsicsymmetryplanes.First,weremovealltheeditcandidates labeledatafinerlevel,moresymmetryrelationssuchastranslation
which result in a high ARAP energy. Next, each edit, based on androtationcanbedetectedwiththem.Incontrast,CoMPaT3D++
itstypeandparam,isassignedthenumberofintrinsicsymmetry presentsawiderarrayofshapecategories.Finally,weobservethat
planesofthehexahedronitretains.Forinstance,editssuchastrans- CoMPaT3D++modelsareclosertoreal-world3Dassets,andasa
lation,rotation,isotropicscalingdonotaffectanysymmetryplanes resultthey(1)OftenhavemoreintricateAttachmentrelations,
-thehexahedronissymmetricaboutaxiallyalignedplanespassing and(2)TendtouseClosedSurfaceparts,whichconsequentlyhelps
throughitscenterevenafterbeingedited.Ontheotherhand,edits usavoidthepost-processingpipelinediscussedin3.4.
suchasFaceScalingdisruptthissymmetry,andhenceretainalower Wehaveincludedalltheeditrequestusedfortheboththedatasets
numberofintrinsicsymmetryplanes.Fromtheseeditsweselectthe inthesupplementarymaterials.Furthermore,theprovidedpercep-
setwiththehighestnumberofretainedsymmetryplanes.Within tualstudyvideosalsoshowsshapeswiththeircorrespondingedit
thisset,wesimplyselecttheeditwhichresultsintheleastamount requests.Ascanbeseenintheeditrequests,theuseofLLMsalso
ofARAPenergy. allowsustosupportbroader,moreintricatelynuancedandlonger
WenotethatselectingdirectlybasedonARAPenergyworksin editrequestsaswell.
mostcases,howeverconsideringsymmetryplaneshelpsinafew
cases.Thisismainlybecausewheneditingshapes,theuser-desired 5.2 LLMPrompts
editmaynotnecessarilymatchtheminarapenergycandidate-
Weprovidethepromptsweutilizeforoursysteminthesupplemen-
forexample,mosteditscontainstretchingwhichdespitehigher
talmaterial.Intotal,oursystememploy4prompts,oneeachfor
arap-energycostcanactuallybethepreferrededitinmanycases.
inferringtheseed-editandtype-hints,andtwoforrelationvalidity,
TheconsiderationofbothARAPenergyandintrinsicsymmetry
onecustomizedforReflectionSymmetryandtheotherforRota-
planeshoweverresultsinacriterionclosertohumanpreference.
tionSymmetryandTranslationSymmetry.Wefoundthathaving
athesetwoseparatepromptsimprovedtheLLM’sabilitytocor-
5 EXPERIMENTALDETAILS rectlyinfertherelation-validity.Further,weemploytwoadditional
promptsoneeachforourextensions.6 • GaneshanandHuang,etal.
N.Parts N.AttachmentRelations N.SymmetryRelations
Dataset N.Shapes
Min Mean Max Min Mean Max Min Mean Max
PartNetLamp 7 5 11.57 30 4 7.00 12 0 1.71 4
PartNetChair 15 7 16.40 31 2 18.93 42 1 5.60 11
PartNetTable 9 5 12.89 20 3 14.44 41 1 6.22 16
PartNetStorageFurniture 13 12 21.67 48 17 51.83 117 3 8.50 18
PartNetBed 7 17 44.25 81 31 77.25 110 7 24.88 53
PartNet(dev-set) 51 5 19.5 81 2 31.82 117 0 7.96 42
CoMPaT3D++(test-set) 50 3 12.5 23 1 19.54 72 0 4.8 14
Table3. DatasetStatistics:Weprovidestatisticsofthetwodatasetsweuse.Wenotethatourdev-set,exploresawiderrangeofstructuralcomplexity,
whereasourtest-setexploresawiderrangeofsemanticvariations(asitcontainsshapefrom21differentcategories).
Wefollowacommonpatternforalltheprompts,providingthe
followingsequenceoninstructions:(i)thetaskoverview,(ii)the
outputspecification,(iii)examples,(iv)verbalshapedescriptionand
editrequest(v)stepsforperformingthetaskand(vi)guidelines.
ThatlasttwodetailsplayacrucialroleinimprovingtheLLM’s
abilitytoperformthetasks.
5.3 ProgramQualityMetrics
Weintroducemultiplemetricsinthepapertoanalysethedifferent
methodsfromvariousperspectives.First,wepresentthedetailofthe
metricsusedformeasuringthequalityofinferredprograms.These
metricscomparetheinferredprogramsagainstthe‘GT’program
annotatedbyaHuman-Solverinferenceprocess.Thesemetricsare
usedtomeasurequalityacrossthreecriterion,namely:
5.3.1 Programmatic( 𝑝𝑟𝑜𝑔 ). Thismetricassesseshowclosely
J( )
theinferredprogramsmatchtheGTprograms.First,weconvert
eachprogramstatement(oreditoperator)intoastringsignature
consistingofonlythetypeofeditoperation,anditsoperand.Then,
thismetriciscomputedbymeasuringtheJaccardsimilaritybetween
thesetofeditsignaturesderivedfromtheinferredprogramandthe
GTprogram.
Fig.2. PerceptualStudyInterface:Weprovideascreenshotoftheques-
5.3.2 Geometric( 𝑔𝑒𝑜 ). Themetricmeasuresthegeometricdis- tionnaireprovidedtotheparticipantsinourtwo-alternativesforced-choice
D( )
tancebetweentheshapeeditedwiththeinferredprogramsandthe perceptualstudy.Notethatthevideosusedforthisstudyareprovidedin
shapeeditedwiththeGTprogram.First,forboththeprograms,we thesupplementalmaterial.
settheuser-controlledparameter𝑥 toafixedvalue(0.35).Then,
foreachpart,wecomputethe𝐿2distancebetweenthehexahedron
verticesdeformedbytheinferredprogram,andthecorresponding 5.4 LLMAccuracyMetrics
ones deformed by the GT program. This metric is computed by
Next,weelaborateonthemetricsintroducedforjudgingthequality
summingupthese𝐿2distancesacrosstheprogram.
oftheLLM’soutput.
5.3.3 Structural(%𝑅𝑒𝑙). Thismetricquantifiesthepercentageof
5.4.1 𝐴𝑐𝑐 𝑆𝐸 . Thismetricmeasurestheseededitaccuracy.Simi-
inter-partrelationswhosestate(brokenvs.maintained)matches ( )
lartotheprocessconductedformeasuring 𝑝𝑟𝑜𝑔 ,wederivethe
therelation’sstateunderthegroundtruth(GT)program.Asallour J( )
stringeditsignatureoftheseededitinferredbytheLLM.Ifthis
relationscanberepresentedasparameterizedconstraintsaswell,
seed-editsignatureispresentintheGTprogram’seditsignature
wesimplycheckandannotateeachrelation’sstateundertheGT
set,thenweaccepttheseededittobeanaccuratelypredictedseed
program,andtheinferredprogram.Thismetricisthencomputed
edit(i.e.𝐴𝑐𝑐 𝑆𝐸 =1).
bymeasuringthefractionofrelationsforwhichtheannotations ( )
match.Notethatweonlyconsiderrelationswhichinvolveatleast 5.4.2 𝐴𝑐𝑐 𝑅 . Thismetricmeasuresrelationvalidityaccuracy.Dur-
( )
oneeditedpart. ingtheHuman-Solverinferenceprocess,werecordtherelationsSupplementaryDocumentfor
ParSEL:ParameterizedShapeEditingwithLanguage • 7
𝑃𝑟𝑜𝑔 𝐺𝑒𝑜 %Rel Input Shape Ours One Shot LLM
J( )(↑) D( )(↓) (↑)
1.0 0.0 100%
-nhbd 0.85 0.12 95.02%
-breaking 0.77 1.44 89.48%
Naive 0.76 4.32 87.9%
Table4. QualityofprogramsinferredbytheSolver:Removingnhbd-edits
resultsinhighergeometricdistance( 𝐺𝑒𝑜 ),whileremovingbreaking-
D( )
editsleadstomorestructuraldistance(%Rel).Thenaiveapproachthat "I want to extend the pedestal in the le-right direction
removesbothoftheseoptionsistheleasteffective. while keeping the back panel as it is.
thatthehumanuserdisablestoenabletheedit.𝐴𝑐𝑐 𝑅 isthencom-
( )
putedbycomparingtheLLM’sinferenceforeachrelationtothe
statesetbythehumanuser.
5.4.3 𝑇 . Thismetricmeasuresthetypehintaccuracy.This
J( )
metriciscomputedbycomputingtheJaccardsimilaritybetween
"I want to make the pedestal wider radially"
the type hints set by the expert user during the Human-Solver
inferenceprocessandthetypehintssetbytheLLM.Wefindthat
expertuseroftensetonlyaminimalsetofrequiredtype-hints,i.e. Fig.3. PerceptualStudyAnalysis:Inafewcases,asshownabove,users
preferredOneShotLLMoverOurs.Wenotethatthispreferenceisnot
theexpertuserelidestype-hintsforpartswherethesolverinferred
causedbyaOurs’sfailuretoinferavalidprogram,butamisalignment
edit(withouttype-hints)willmatchtheedittypespecifiedbythe
betweenthesysteminterpretation(performsecondaryadjustments)and
editrequest.Incontrast,theLLMoftentendstoprovidemoretype
theparticipant’sinterpretation(donotperformanysecondaryadjustments).
hints.WethereforediscounttheentriesintheLLMinferredtype
hintswhich,thoughnotpresentintheexpertuser’sannotation,are
notwrong,i.e.settingthesetype-hintsdoesnotchangethesolver’s 5.5.1 AdditionalAnalysis. :Weanalysethe(shape,edit-request)
output. inputpairsforwhichamajorityofparticipantspreferredtheOne
ShotLLM overOurs.Thisoccurredin5ofthe50inputpairs.We
5.4.4 𝑀𝑎𝑡𝑐ℎ. This metric measures the fraction of input pairs presenttwooftheminFigure3.Wenotethatthispreferenceisnot
whereallLLM-inferredquantitiesmatchhumanannotations.𝑀𝑎𝑡𝑐ℎ causedbyanyfailureofOursmethodtoinferavalidprogram,but
issetas1ifandonlyifalltheothermetrics𝐴𝑐𝑐 𝑆𝐸 ,𝐴𝑐𝑐 𝑅 and ratherduetoamisalignmentbetweenthesysteminterpretation
( ) ( )
𝑇 aremeasuredtobe1. (alwaysperformsecondaryadjustmentsunlessspecificallyasked
J( )
notto)andtheparticipant’sinterpretation(donotperformany
5.5 PerceptualStudyDetails secondaryadjustmentsunlessreallyrequired).
Thetwo-alternativesforced-choiceperceptualstudypresentedin
5.6 AEPSolverAnalysiswith‘GT’Annotation
themainpaperisconductedwith𝑒𝑤 participants,collecting1295
totaljudgements.Thesecomparisonsareconductedbetweenthe OurmaindraftreportsAEPsolverablationwherethetwofeatures
programsinferredbythedifferentmethods(OneShotLLM,Ours (useofnhbd-editsandbreaking-edits)areremovedtomeasuretheir
SeedOnly andOurs)onthe50(shape,editrequest)pairsinour effectonthesolver’sperformance.Toemphasizetheimportance
test-set.WenoticethattheprograminferredbyOursmatchesthose ofthesetwofeatures,wealsopresentthisanalysiswiththeexpert-
inferredbytheOneShotLLMin4ofthe50pairs,andmatchesthe user’s‘GT’annotationsasinput.Werecordtheseed-edit,type-hints
programinferredbytheOursSeedOnlyin14ofthethe50pairs. andrelation-validitysetbytheexpert-user,andinferthecorrespond-
Notethatthisisnotadrawbackofourmethod.Certaineditrequest ingeditingprogramswiththedifferentvariantsofthesolver.This
onlyrequireasingleseed-edit(forinstance’Iwanttoincreasethe resultispresentedintable4.Themetricsshowthatthesefeatures
numberoflegsofthisroundtable’)makingtheprograminferred indeedplayacrucialroleinthesuccessofthesolver,andnaively
bythethreemethodsmatch.Similarly,certaineditsrequirenotype- employthesolvercanresultinalotoffailurecases.
hintsorrelationvalidity settings(forinstance"widenthechair")
makingtheprograminferredbyOursandOursSeedOnlymatch.
Weremovethesecasesfromourperceptualstudytoremovethe
noisethatcouldpotentiallyarisefromincludingthesecomparisons.
Figure2showsascreenshotofthevisualinterfacetheparticipants
isprovidedwith.Wefurtheremphasizethatallthecomparison
videos,andtheanonymizedparticipantpreferencesarealsoincluded
inthesupplementalmaterials.