LL-GABR: Energy Efficient Live Video Streaming using
Reinforcement Learning
AdithyaRaman BekirTurkkan TevfikKosar
araman5@buffalo.edu b.turkkan@ibm.com tkosar@buffalo.edu
UniversityatBuffalo IBMResearch UniversityatBuffalo
Buffalo,NewYork,UnitedStates Yorktown,NewYork,UnitedStates Buffalo,NewYork,UnitedStates
Abstract morepronouncedasmorevideoprovidersstartofferingHD
Overtherecentyears,researchanddevelopmentinadaptive andUHD(2Kand4K)streaming[4].
bitrate(ABR)algorithmsforlivevideostreaminghavebeen VideoStreamingoverHTTPhasgrowntremendouslyover
successfulinimprovingusers’qualityofexperience(QoE) recentyearswiththeadventofDynamicAdaptiveStream-
byreducinglatencytonearreal-timelevelswhiledelivering ingoverHTTP(DASH)[1].InDASH,thevideoisencoded
higherbitratevideoswithminimalrebufferingtime.How- atmultiplebitrates,andtheDASHclientcanuseAdaptive
ever,theQoEmodelsusedbytheseABRalgorithmsdonot Bitrate(ABR)algorithmstoselecttheappropriatebitratefor
takeintoaccountthatalargeportionoflivevideostreaming thenextchunkbasedonnetworkandplayerbuffercondi-
clientsusemobiledeviceswhereahigherbitratedoesnot tions.VideostreamingcanbeeitherintheformofVideo-
necessarilytranslateintohigherperceivedquality.Ignoring on-Demand(VoD)orLiveStreaming.InVideo-On-Demand
perceivedqualityresultsinplayingvideosathigherbitrates (VoD), where the content is pre-recorded and stored on a
withoutasignificantincreaseinperceptualvideoqualityand server,theABRalgorithmaimstomaximizebitratewhile
becomes a burden for battery-constrained mobile devices minimizingrebufferingevents.InLiveStreaming,whichis
duetohigherenergyconsumption.Inthispaper,wepropose thefocusofthispaper,thecontentisplayedontheclient’s
LL-GABR(LowLatency),adeepreinforcementlearningap- deviceasitisbeingcaptured,leadingtoanadditionalcon-
proachthatmodelstheQoEusingperceivedvideoquality straint on minimizing end-to-end latency to improve the
insteadofbitrateandusesenergyconsumptionalongwith user’sQualityofExperience(QoE).
othermetricslikelatency,rebufferingevents,andsmooth- Livevideostreaming,inparticular,hasseentremendous
ness.LL-GABRmakesnoassumptionsabouttheunderlying growthinthisperiodduetothe(i)pervasiverolloutof5G
video, environment, or network settings and can operate networks,(ii)thenextgenerationofsmartphonesbeingable
flexiblyondifferentvideotitles,eachhavingadifferentbi- to produce full HD and 4K UHD videos [4], and (iii) the
trateencodingladderwithoutadditionalre-training,unlike increase in popularity of live streaming applications like
existing learning-based ABRs. Trace-driven experimental Twitchwhichamassedaround24.3billionhours[6]in2021.
resultsshowthatLL-GABRoutperformsthestate-of-the-art AnincreaseinteleconferencinglikeZoomandFaceTimehas
approachesbyupto44%intermsofperceptualQoEanda alsobeensignificantinthepushtodeliverbetterqualitylow
73%increaseinenergyefficiencyasaresultofreducingnet latencylivestreamingsolutions.
energyconsumptionby11%. Havingshortersegmentsizesintherangeof1-2seconds,
usingCommonMediaApplicationFormat(CMAF)[25]and
CCSConcepts: •Informationsystems→Multimedia HTTP/1.1ChunkedTransfer-Encoding(CTE),Low-Latency
streaming;•Computingmethodologies→Reinforce- Live(LLL)streaminghasundergonerapiddevelopmentover
mentlearning;•Hardware→Platformpowerissues. recentyears.TherecentTwitchLiveStreamingchallenge
alsobroughtforthseveralABRalgorithms[15,21,24]that
Keywords: video streaming, energy efficiency, deep rein-
candeliverhighQoEandlowlatencystreamingunderdif-
forcementlearning,livestreaming
ferentandvaryingnetworkconditions.
ThecurrentresearchinABRalgorithmsforlivestreaming,
however,doesnotconsiderthatasignificantportionofclient
1 Introduction
devicesaremobilephoneswithsmallerscreens,andtheQoE
AccordingtotherecentEricssonMobilityReport[5],there modelsdesignedfortheABRobjectivesdonotconsiderthe
hasbeenasurgeinmobiledatatraffic,withcurrenttrends perceptualvideoqualitywhereanincreaseinbitratedoesnot
in2023showing71%oftheglobalmobiletrafficattributedto necessarilytranslatetoahigherqualityvideo.Thisfurther
mobilevideostreamingwithforecastspredictinganincrease increasesenergyconsumptionduringstreaming,draining
to80%by2028.Thiscombinedwitha3.5xincreaseinoverall themobiledevice’sbatterylife.
mobiledatatrafficresultsinthetrafficforvideostreamingto
bearound85Exabytesin2023andincreasingto263Exabytes
permonthby2028.Theeffectofvideoonglobaltrafficis
1
4202
beF
41
]MM.sc[
1v29390.2042:viXraFebruary14,2024, 15.00 Raman.A
In this paper, we address these issues faced by LLL by learning models to maximize the user’s QoE. Specifically,
proposingamorerealisticQoEevaluationmetricandtrain- Pensieveusesanactor-criticmodelwhileComycoadoptsim-
ingaReinforcementLearning(RL)agentthatjointlyselects itationlearningwithacompute-intensivedynamicprogram-
boththedesiredbitrateandspeedtomaximizetherewards mingcomponent,andGreenABRproposesanenergy-aware
basedonthesamemetric.Tothisend,weproposeLL-GABR approachwithaDQNmodel.Despitetheircompetitiveper-
wherewemakethefollowingcontributions: formance,alltheabovealgorithmsaredesignedforvideo-
• WebuildanRL-basedsolutionthatcanlearntoadapt on-demand(VoD)streamingandsufferfromlargelatency
andfrequentfreezingeventsforlivestreamingscenarios.
boththeplaybackbitrateandplaybackspeedunder
varyingnetworkconditionstomaintainhighlevels
ofQoEwhilealsosimultaneouslybeingmoreenergy-
2.2 LiveABRStreaming
efficientwhencomparedtootherSOTAsolutions.
• We propose a generalized ABR that learns to make WhileABRalgorithmsforVoDandlivestreamingsharethe
common goal of providing a high-quality viewing experi-
intelligentdecisionsacrossdifferentbitrateencodings
encetousers,out-of-the-boxVoDstreamingalgorithmsfall
andrepresentationsetswithoutadditionaltraining.
• We design a modified QoE calculation by replacing shortinachievingnearreal-timelatencyrequirementsof
livestreamingapplications.VoDserviceshavemoreflexibil-
bitratewithVMAFvaluestoprovideamoreaccurate
ityinmanaginglatencyandbufferingsincealargebuffer
evaluationofperceptualvideoquality.Thisresultsin
sizeisavailabletodownloadpre-recordedvideochunksin
anABRalgorithmthatmakesbitrateselectionsbased
advance.Incontrast,thenearreal-timelatencyconstraintof
onVMAFscores,whereahigherbitratedoesnotnec-
livestreamingdemandsABRalgorithmstouseaverysmall
essarilyleadtohigherperceptualquality.Thisalsodi-
clientbufferandtoquicklyadapttonetworkfluctuations
rectlytranslatestolesserrebuffertimeandasmoother
withoutcausingsignificantdelaysorstallingevents.
streamingexperience.
• Weconductextensiveexperimentsusingreal-world WhilesignificantresearchhasbeenconductedonABRal-
gorithmsforVoDstreaming[18,26,31,32,36],theprogress
LTEand4G/5Gtraceswithrealisticbitrateencodings
ofABRforlow-latencystreaming(LLL)hasonlyrecently
andcompareourresultsagainstthestate-of-the-art
gained momentum with the first work titled ACTE [10],
ABRalgorithmsinlivestreaming.
where Bentaleb et al. leveraged a sliding window to mea-
Section2givesanoverviewofpastworkinthefieldof
sureavailablebandwidth,alinearadaptivefiltertopredict
HTTPlowlatencystreamingandABRalgorithmsthathave
futurebandwidthandanABRtoselectbitratebasedonthe
beendevelopedforLLL.Wealsogooversomeoftheexisting
predictedbandwidthandplayerbufferlevels.
solutionsforenergy-efficientHTTPstreaming.InSection
SimilartoACTE,Guttermanetal.proposedSTALLION
3,weintroducetheLL-GABRmodel,andSection4presents
[15],whichusedaslidingwindowmeasuretothemeanand
the evaluation details and results where we compare our
standard deviation of bandwidth and latency, and built a
ABRalgorithmwiththestate-of-the-artapproaches.Section
heuristicrulefortheABRcontrollertoselecttheappropri-
5concludesthepaperwithadiscussionoffuturework.
atebitrateforplayback.Limetal.designedLoL[24],which
adoptedthethroughputpredictionmodulein[10]andbuilt
2 BackgroundandRelatedWork
alearning-basedABRalgorithmwithSelfOrganizingMaps
2.1 AdaptiveBitrate(ABR)StreamingoverHTTP
(SOM)toturnbitrateselectionasanunsupervisedclassifica-
VideostreamingoverHTTPhasbecomethestandardtech- tionproblem.Karagkioulesetal.proposedLearn2Adapt-Low
nologytosupplytheincreasingdemandofdiverseclients. Latency(L2A-LL)[21],wheretheABRwaspresentedasan
Industryleadersandresearchershaveproposedseveralalgo- optimizationframework.TheauthorsusedOnlineConvex
rithmscustomizedfordifferentstreamingneedswiththede- Optimization(OCO)tomodelalearningagentwhoseobjec-
velopmentofDASHstandards[1].Mostoftheexistingstud- tiveistominimizelatencywithaconvexconstraintonbuffer
iessuchasBOLA[32],Festive[19],MPC[20],BOLAE[31], limit.Unlike[15,24],inthisworkbitratedecisionsarebased
andDynamicABR[31]employheuristicrulesusingclient onhistoricalvaluesanddonotrelyonanythroughputesti-
bufferlevel,measuredthroughput,orbothtomakebitrate mations.ToaddresssomeoftheshortcomingsofLoL[24],
selectionsforvideochunks.Despitethepracticalityofheuris- BentalebetalbuiltLoL+[9].Insteadofastaticsetofweights
ticmodels,theyassumemoresteadynetworkconditionsand fortheSOM,LoL+utilizedaheuristic-baseddynamicweight
commonlyfailtoadapttofrequentchanges. assignmentalgorithmthatadjustedfeatureweightsatthe
Severalmodelsusemachinelearningtechniquestofind segmentdownloadboundary.Thepaperalsousedthediffer-
optimaldecisionsunderchallengingconditions.CS2P[35] entmetricsofthelinearQoEfunctionasindividualfeatures
andFugu[39]buildsupervisedlearningmodelswithhistor- fortheSOMmodel.
icaldataandfindoptimalbitratedecisions.Pensieve[26], Sunetal.[34],consideredvideorateandplaybackspeed
Comyco [18], and GreenABR [36] develop reinforcement asajointadaptationstrategyanddevelopedaReinforcement
2LL-GABR:EnergyEfficientLiveVideoStreamingusingReinforcementLearning February14,2024, 15.00
LearningbasedABRsolutionusingBranchingDuelingQ- learning-basedmodelstogeneralizeoverdifferentrep-
Networks(BDQ).TheBDQABRagentwasusedtoselect resentationsets.Theycommonlyrequireadditional
bothbitrateandplaybackspeedateverysegmentboundary trainingtobeusedfordifferentbitrateencodinglad-
tomaximizetheuser’sQoE.TheBDQagenthadanexpanded ders[18,26,34,36],whichcausemorecomputingcosts
playbackcontrolsetandalsohadtheabilitytoskip/repeat andunstableperformance.
segmentsthatwereabsentin[15,21,24].
Inthiswork,weaddresstheabovelimitationsandpropose
Green-LL,whichoptimizesbitrateselectionsforbothenergy
2.3 EnergyAwareABRStreaming
efficiencyandQoE.Itsupportsalargeencodingbitraterange
Existingvideostreamingstudiesconsiderenergyefficiency withoutrequiringadditionaltrainingortuningparameters
andQoEasconflictinggoalsandsimplytargetmakingop- foreachrepresentationset.
timal decisions for one of them. They commonly target
maximizing QoE and ignore the energy consumption im- 3 LL-GABRDesign
pact [19, 20, 26, 31, 32]. Early energy-efficient streaming
Inthissection,wewillintroducethedesignmethodology
efforts focused on hardware-related solutions such as al-
forLL-GABR.Wetalkaboutourdesigngoals(Section3.1)
teringscreenbrightnessdynamically[38]orswitchingoff
anddifferencesinlivestreamingvsVoDstreaming.Wealso
networkconnectionsforidletime[22].Similarly,Chenet
brieflytouchupontheenergymodel(Section3.3)usedto
al.[13]proposeadjustingvideoqualitydependingonthe
estimateenergyconsumptionforstreaminglivevideoand
videostreamingcontext.However,theyareeithertailored
thebandwidthprediction(Section3.2)moduleforprediction
forspecificusecasesorrequirehardwaresupport.Recently,
ofthebandwidthofthenextvideochunk.Finally,weend
GreenABR[36]hasproposedoptimizingQoEandenergy
this section by discussing the Soft-Actor-Critic algorithm
efficiencytogetherbyexploitingperceptualqualitymetric,
(Section3.4)indetail,wherewealsocoverwhyanRL-based
VMAF[8].ItisdesignedforVoDstreamingscenariosand
algorithmisbeneficialandwhyweuseacontinuousaction
doesnotconsiderlow-latencyrequirements.
space-basedalgorithm.
2.4 LimitationsofExistingSolutions
3.1 DesignGoals
TheLLLABRalgorithmscoveredinprevioussectionsshare
LL-GABR’sfundamentalgoalistoensureenergy-efficient
somecommonlimitationsregardingperceptualqualitycon-
live video streaming on mobile devices. This includes re-
siderations,energyefficiency,evaluations,andgeneralizabil-
ducing the total energy consumption of streaming while
ity.
maintainingahighQoE.WedefinetheQoEinSection4.3to
• PerceptualQuality:TheQoEmodelusedinmostof includevariousplayermetricslikeperceptualvideoquality,
theexistingstudies[9,15,21,24,26,31,34]fallshortin latency,freezing,smoothness,andplaybackrate.Wedesign
reflectingusers’perceivedQoE.Theyassumealinear LL-GABRtoconsidertheVMAFvaluesofeveryvideochunk
relationbetweenvideoqualityandencodingbitrate, to evaluate the quality of the video segment and also the
which is not necessarily true, especially for mobile energyconsumptionofeachchunk.Thisisdonebyincorpo-
users[11,36]. ratingboththesemetricsintherewardfunctionfortheRL
• EnergyEfficiency:Asaresultofnotconsideringthe agent,whichisdetailedinSection3.4.6.
perceptualqualityandusingasmallerandunrealistic WealsoaddressthelimitationsofexistingABRswhich
bitrateencoding,theABRalgorithmendsuptargeting were designed with only a single constant bitrate ladder
higherbitratesevenifitdoesnotleadtoahigherQoE. inmind.LL-GABRisbuilttobemoreofaone-size-fits-all
This adds up to significant energy consumption on modelwhereanRLagenttrainedoncecanadapttodifferent
battery-constrainedmobiledevices[36]. videotitles,eachhavingtheirownbitrateladders.Thisis
• Evaluations:Improvementsinmobiledevices,net- particularlyadvantageousasstreamingprovidersbeginto
working,andbroadbandtechnologiesenabledhigh- adopt per-title encoding for live video workflows, where
qualitylivestreaming.Forinstance,Twitchplayersup- video content determines the encoding settings for each
ports6000Kbpsencodingbitratefor1080presolution videotitle.
with60FPS[3],andNetflixrecommendsabove4000 IndesigningLL-GABR,wemustnoteamajordifferencebe-
Kbpsfor1080pvideos[2].However,severalexisting tweentraditionalVoDandlivestreaming,whichistheaddi-
studies,includingLoL[24],L2A-LL[21],andLoL+[9] tionalconstraintonlatencyandbufferlevels.InLiveStream-
useanarrowerbitraterange,1000Kbpsfor720preso- ing,wemeasuretheglass-to-glasslatency,thetimediffer-
lution,fortheirevaluations. encebetweenwhenthecontentwascaptured/generatedat
• Lackofgeneralizability:Modernstreamingappli- thesourceandviewedattheclient’sdevice.InVoD,since
cationsuselargerepresentationsetsfortheirvideos thecontenthasalreadybeencreatedandstoredonaserver
duetoclientdiversity.Itisespeciallyimportantfor fortheviewertofetch,measuringtheglass-to-glasslatency
3February14,2024, 15.00 Raman.A
islessimportant.Asaresult,insteadofhavingonlybitrate Creferstothenumberofchunkspersegment,𝑡ℎ 𝑐𝑖 and𝑓𝑠 𝑐𝑖
intheactionspace,inlivestreaming,wealsohavetocontrol arethepredictedbandwidth[10]andchunksizeofthe𝑖-th
theplaybackrate(speed)withwhichthecontentisplayed.A chunkrespectively
higherplaybackrateleadstoalowerlatency,whilealower Thelocalplaybackenergyandthedataacquisitionenergy
playbackrateleadstomorebufferlevelsandhigherlatency. aresummeduptoobtainthetotalenergyforvideoplayback
foreverysegment.Wereferthereadertotheenergymodelin
3.2 BandwidthPrediction [36]formoredetailsontheexperimentalanalysisinvolving
Accuratebandwidthpredictioniscriticallyimportantinlow howtheenergyconsumptionforbothofthesecomponents
latencyABRasithelpsinselectingtheappropriatebitrate iscalculated.
forstreaming.Ifbandwidthisoverestimated,thechosenbi-
3.4 ReinforcementLearningforLiveStreaming
tratemaybetoohigh,leadingtorebuffering.Conversely,
underestimatingthebandwidthmightresultinalowervideo 3.4.1 WhyRL?: ReinforcementLearning(RL)hasshown
qualitybeingselected.Somelearning-basedABRs[34]used considerablesuccessincontroltasksforoptimizationprob-
anLSTMnetworktopredictfuturebandwidthvalues.How- lems[14]asitoffersadynamicandadaptiveapproachoften
ever,thisincreasesthecomplexityoftheRLmodelleading superiortotraditionalheuristicmethods.SinceRLmakes
tohighertrainingcostsandtime. noassumptionsabouttheunderlyingenvironmentandcan
InLL-GABR,weusetheapproachproposedbyA.Bentaleb learnfromdirectinteractionwiththeenvironment,itcan
etal.[10],ACTE,whichusesachunk-basedslidingwindow learnnovelstrategiesthatcanadaptovertime.Thisispar-
movingaverageforbandwidthmeasurementandanonline ticularlyadvantageousinhigh-dimensionalcomplexenvi-
adaptive filter based on a recursive least square (RLS) ap- ronments. Using a customizable reward function, the RL
proachforbandwidthprediction.Thisapproachispreferred agentcandiscovercertaingoal-orientedbehaviorswithout
overtheLSTMmethodasitiscomputationallylighterand explicitprogramming,allowingsuchalgorithmstooutper-
canberunonmobiledeviceswithoutanyadditionalcosts. formheuristicmethods.Thisholdsespeciallytrueinalive-
streamingenvironmentwheretheoptimaldecision-making
3.3 EnergyModel policyisdifficulttoformulateorwhentheenvironmentis
subjecttounpredictablenetworkchanges.
Inourexperiments,weuseanenergymodelverysimilarto
RL can be effectively used for Adaptive Bitrate (ABR)
theoneproposedbyTurkkanetal.[36].Thismodelcomputes
streaminginlivevideotooptimizethequalityofthestream-
the local playback and data acquisition energy for every
ingexperience.ABRalgorithmsaimtoadaptthevideoqual-
downloadedsegment.Thelocalplaybackenergycorresponds
itybasedontheviewer’snetworkconditions,suchasband-
totheprocessinganddisplayingofthevideofilecomponents,
width,latency,andpacketloss.RLcanbeutilizedtocreate
while the data acquisition component corresponds to the
anintelligentABRalgorithmthatlearnstomakebetterdeci-
download of the video files via the wireless network. By
sionsaboutthevideobitrate,providingsmoothplaybackand
discountingthedevice’sbaseenergyconsumption,themodel
optimalquality.Theagentcancontinuouslylearnandadapt
alsoremainsdeviceagnostic.
the streaming strategy based on environmental feedback.
3.3.1 LocalPlaybackEnergy: Thisincludestheenergy Thisiscrucialinnetworkconditionsthatareinherentlyvari-
consumptioninvolvedinthedecoding,processing,render- ableandunpredictable.RLcanalsotakeintoaccountthe
ing,anddisplayingofthedownloadedchunk.Thefactorsin- long-termQoEbyconsideringtheconsequencesofcurrent
fluencingthisarevideoresolution,bitrate,framerate,chunk actions andthe state of theenvironment. Thismeans the
size,chunkfrequency,videocomplexity,motionrate,and agentcanavoidactionsthatleadtorebufferingorquality
codec. We build a linear regression model trained on col- switches.Assuch,theRLagentcanlearnanoptimalpolicy
lecteddatatoaccuratelypredictthemeasuredplaybacken- throughinteractionwiththeenvironment,regardlessofthe
ergy.Duringstreaming,thismodelisusedtocalculatethe underlyingcomplexity.Thiscanbeextendedfurtherbyus-
energyconsumptionofeachvideochunk. ingadistributedRLwhereseveralagentscanlearnbyacting
onsimilarenvironmentswithdifferentnetworkconditions
3.3.2 Data Acquisition Energy: This refers to energy
toimprovethelearningtimeandefficiency.
consumption for downloading the video segments over a
In the context of ABR, the RL problem can be framed
wirelessnetwork,whichisrelatedtothroughputandfilesize
as a Markov Decision Process (MDP). The MDP consists
andiscomputedusingaformuladerivedfromanexisting
of states, actions, rewards, and a transition function. For
throughput-basedmodel[33].
ABR,thestatescanincludenetworkconditions(e.g.,avail-
ablebandwidth,latency,bufferoccupancy),videoencoding
C parameters (e.g., resolution, bitrate, frame rate), and user
𝐸 𝑑𝑎𝑡𝑎 :=∑︁(cid:2)𝛼 ∗𝑡ℎ 𝑐− 𝑖1+𝛽∗𝑓𝑠 𝑐𝑖(cid:3) (1) experiencemetrics(e.g.,averagequality,rebufferingevents).
𝑖=0 Actionscorrespondtothechoiceofthevideobitrate,and
4LL-GABR:EnergyEfficientLiveVideoStreamingusingReinforcementLearning February14,2024, 15.00
Figure1.OverviewofLL-GABR’sdistributedSACtraining.
rewardscanbedesignedtoencouragehighvideoquality, 3.4.2 StateSpace: Ateveryvideosegmentboundary,𝑡,
lowrebuffering,andminimalbitrateswitches. theLL-GABR agentreadstheplayermetrics,networkdy-
Additionally,TheRLagentcanleverageplaybackspeed namics,andplayerenergyconsumptionastheinputstate
andbitratetooptimizeQoEbyminimizingbuffering,main- space,𝑠 𝑡,fortheRLmodel.Theplayermetricsconsistofcur-
tainingvideoquality,andsynchronizingthestreamtoreal- rentbuffersize,latency,rebufferingduration,playbackrate
timeevents.Maintainingabalancebetweenplaybackspeed (speed),bitrate,VMAF,andVMAFsmoothnessofthecurrent
andbufferoccupancyiscrucial.TheRLagentcanobserve segment. Network dynamics includes the predicted band-
thecurrentbufferlevelandadjusttheplaybackspeedtopre- widthvalue[10].Theplayer’senergyconsumptioncomprises
ventbufferunderflow(rebuffering)oroverflow(increased thenetworkandplayback-decodingenergyconsumption,as
latency).Theagentcanincreaseplaybackspeedwhenthe detailedinSection3.3.Theentirestatespaceisalsopassed
bufferisfullorapproachingoverflow,anddecreaseitwhen throughaMinMaxnormalizertobringthevaluestoanequal
thebufferisloworapproachingunderflow.Thisadjustment distributionof(0,1).
helps maintain low latency while minimizing rebuffering
events,thusimprovingQoE.
As a high-level overview, we present the design of LL-
3.4.3 ActionSpace: LL-GABR’spolicynetworkprocesses
GABR’strainingphaseinFigure1.WeuseaPython-based
the input state to yield a two-dimensional continuous ac-
OpenAIGymcompatiblelivestreamingsimulatortohelp
tionvector,whereeachelementrangesfrom0to1.Thefirst
trainouragent.Thesimulatorloadsthenetworkandcon-
dimensioncontrolsthebitratewhichismodeledforaflexi-
tenttracesfilesasinputsandrunsa300-secondstreaming
blerepresentationsetcompatiblewithaper-titleencoding
session for every episode. Since we use a segment size of
schema.Thisenablesthemodeltoadaptitsbitratedecisions
1secondandachunksizeof200ms,wehave300stepsfor
tovariousdifferentcontentwithdistinctbitrateladders.This
everyepisode.Ineachstep,theenvironmenttakesanaction
isachievedthroughacontinuous-to-discretemappingthat
submittedbytheRLagentandoutputsastatevectorconsist-
alignsthefloating-pointoutputwiththenearestavailable
ingofvariousplayerandnetworkmetrics.Thebandwidth
discreteoption.
prediction(Section3.2)andenergymodel(Section3.3)are
Fortheseconddimension,theplaybackrate,theaction
included as part of the environment and help in generat-
correspondstospeedsvaryingfrom0.90xto1.1x,withthe
ingpredictedbandwidthandconsumedenergy,respectively,
defaultspeedsetat1.0x.Thisallowsthemodeltoadjustplay-
which are appended to the state vector. During the train-
ingphase,everyexperiencetuple(𝑠 𝑡,𝑎 𝑡,𝑟 𝑡,𝑠 𝑡+1)isaddedto backspeedinresponsetolatencyconditions;accelerating
playbackabovethedefaulttoreducelatencyanddecelerat-
thebuffer,whichisusedtomakeupdatestothePolicyand
ingtopreventbufferdepletionandpotentialstreamfreezing.
CriticnetworksoftheRLagent.Wealsousemultipleparallel
If there are sufficient buffer levels, a maximum speed set-
workers,tospeedupthetrainingphase.
tingof1.1xenablesthevideoplayertocompensateforone
secondoflatencyintenseconds.
5February14,2024, 15.00 Raman.A
3.4.4 PriorityExperienceReplay: WealsouseaPriority Therewardiscalculatedpersegmentofstreamingoncethe
ExperienceReplay(PER)buffer[30]forcollectingandsam- lastchunkinthesegmentisdownloaded.
plingexperienceslearnedduringtraining.Inthetraditional Thefirstcomponentgivesusapositivecontributionto
replaybufferusedinRL,experiencesareusuallysampled the overall video quality per unit consumption of energy.
uniformlyatrandom.However,notallexperiencesareof Apenalizationforthenumberoffreezingoccurrencesand
equalimportanceintermsofwhattheagentcanlearn.Some totalfreezingdurationisaddedinthesecondandthirdcom-
experiencesmightberarerthanotherswhileothersmight ponentsoftheequation.Thesubsequenttwotermscapture
bemorefrequentbutlessinformative.Forinstance,inABR thepenaltyappliedforhighlatencyandun-normalspeed
foraparticularstreamingsession,adropinestimatedband- whilethelasttermappliesthepenaltyforfluctuatingvideo
widthwhichwouldresultinarebufferingsession,couldbe quality. This model suggests a system where the highest
consideredmoreimportantasalearningexperiencethan rewards are given for high video quality per unit energy
onewherethebandwidthremainsthesameforalongperiod consumption,minimalfreezingandlatency,stableplayback
oftime.PERprioritizesthereplayofexperiencesfromwhich speed,andconsistentvideoqualityovertime.Therewards
the agent can learn the most by assigning a priority pro- arefurthernormalizedtostabilizethelearningprocess.
portionaltotheestimatedtemporaldifference(TD)errorof
eachexperienceinthebuffer.Thisencouragesmoreefficient Algorithm1:DistributedSACwithPriorityExperi-
learningbyreplayingsurprisingexperiencesmoreoften. enceReplayBuffer
3.4.5 DistributedLearningFramework: Ontopofthe 1 Input:Initializepolicyparameters𝜃,𝑄-functionparameters𝜙 1,𝜙 2,
emptyPERbufferD
SAC with PER buffer, we speed up training time and effi-
2 Settargetparametersequaltomainparameters
ciency by using multiple parallel actors collecting experi- 𝜙𝑡𝑎𝑟𝑔,1←𝜙 1,𝜙𝑡𝑎𝑟𝑔,2←𝜙
2
encesfromdifferentenvironments,eachrunningondiffer- 3 forEachTrainingStepdo
entcoresinthecomputingcluster.TheAPE-Xframework 4 forEachDistributedWorkerin𝑗-thenvironmentdo
[17]implementedinRL-Libusesmultipleactorsdistributed 5
Observestate𝑠𝑗 andselectionaction𝑎𝑗 ∼𝜋 𝜃(·|𝑠𝑗);
acrossworkerstoscaletrainingfromasinglecoretomulti- 6
Execute𝑎𝑗 intheenvironment𝑗;
plecores.Wealsoenableeachworkertorunalivestreaming
7 Observenextstate𝑠′ 𝑗,reward𝑟𝑗,anddonesignal𝑑𝑗 to
environmentwithdifferentlevelsofnetworktracestosimu- indicatewhether𝑠′ 𝑗 isterminal;
lateexperienceswithdifferingcharacteristics.Forinstance,
8
Store(𝑠𝑗,𝑎𝑗,𝑟𝑗,𝑠′ 𝑗,𝑑𝑗)inthePERbufferD;
oneworkerwouldrunalivestreamingsessionwithanav- 9 if𝑠′ 𝑗 isterminal,resettheenvironmentstate;
10 end
eragebandwidthof0.5MBpswhileasecondworkerwould
11 ifit’stimetoupdatethen
runasimilarsessionbutwithanaveragebandwidthof5.8 12 for 𝑗inrangenumberofupdatesdo
MBps.Thisframeworkofacentralizedlearnerwithacritic
13
Randomlysamplebatch,𝐵=(𝑠,𝑎,𝑟,𝑠′,𝑑)fromD;
networkandmultipleworkerswithactornetworksvastly 14 ComputetargetsforQfunctions;
improvestrainingtimeandalsodistributionofexperiences 𝑦(𝑟,𝑠′,𝑑)=𝑟+𝛾(1−𝑑)(𝑚 𝑖=𝑖 1𝑛 ,2𝑄 𝜙𝑡𝑎𝑟𝑔,𝑖(𝑠′,𝑎′)−
collectedbyeachworker. 15 𝛼log𝜋 𝜃(𝑎|𝑠′))
16 ComputeTD-Errorsforsampledbatch:
𝑟𝑒𝑤𝑎𝑟𝑑 𝑡 = 1+𝑘 2𝑘 ·1 𝑔· 2𝑔 (𝑡1 𝑜( 𝑡𝑣 𝑎𝑚 𝑙_𝑎 𝑒𝑓 𝑛𝑡) 𝑒𝑟𝑔𝑦 𝑡) 17 U Pp Eda R𝑡 t𝑑 e b_ up𝑒 ffr𝑟 i e𝑟 o r𝑜 ri𝑟 Dty= wv| a i𝑦 tlu h(𝑟 e 𝑡, s 𝑑𝑠 o _′ f, 𝑒𝑑 t 𝑟h) 𝑟e 𝑜− 𝑟saQ m𝜙 p𝑖 l( e𝑠 d,𝑎 b) a| tchinthe
−𝑘 ·𝑔 (𝑖𝑠_𝑓𝑟𝑒𝑒𝑧𝑖𝑛𝑔)
3 3 18 UpdateQ-functionsbyonestepofgradientdescent
−𝑘 4·𝑔 4(𝑓𝑟𝑒𝑒𝑧𝑖𝑛𝑔_𝑑𝑢𝑟𝑎𝑡𝑖𝑜𝑛) (2) ∇𝜙𝑖 |𝐵1
|
∑︁ (Q𝜙𝑖(𝑠,𝑎)−𝑦(𝑟,𝑠′,𝑑))2
−𝑘 ·𝑔 (𝑙𝑎𝑡𝑒𝑛𝑐𝑦) (𝑠,𝑎,𝑟,𝑠′,𝑑)∈𝐵
5 5 for𝑖=1,2
−𝑘 6·𝑔 6(𝑠𝑝𝑒𝑒𝑑 𝑡)
19 Updatethepolicybyonestepofgradientascent
−𝑘 7·𝑔 7(𝑣𝑚𝑎𝑓 𝑡,𝑣𝑚𝑎𝑓 𝑡−1) ∇𝜃 |𝐵1
|
𝑠∑︁ ∈𝐵((𝑚 𝑖=𝑖 1𝑛 ,2𝑄 𝜙𝑖(𝑠′,𝑎 𝜃′(𝑠))
3.4.6 RewardModel: Therewardmodeliscentraltotrain- −𝛼log𝜋 𝜃(𝑎 𝜃(𝑠)|𝑠))
inganagenttolearnanoptimalpolicyoflowlatency,high
20
where𝑎 𝜃(𝑠)isasamplefrom𝜋 𝜃(·|𝑠)whichis
perceptual quality, minimal rebuffering, and smoothness. differentiablew.r.t𝜃;
Sinceinthiswork,wearealsoexploringtheenergyefficiency 21 Updatetargetnetworkswith
ofvideostreaming,weincludeapenaltyfortheenergycon-
𝜙𝑡𝑎𝑟𝑔,𝑖 ←𝜌𝜙𝑡𝑎𝑟𝑔,𝑖+(1−𝜌)𝜙𝑖 for𝑖=1,2
sumptionpersegment.Theseconflictinggoalsinthereward 22 end
modelcanbecapturedbyalinearweightedsumofindividual 23 end
componentsasshowninEquation2where𝑘 𝑖 isaconstant 24 end
thatbeadjusteddependingontheQoEgoalsforstreaming.
6LL-GABR:EnergyEfficientLiveVideoStreamingusingReinforcementLearning February14,2024, 15.00
3.4.7 Soft-Actor-Critic. For the LL-GABR architecture, Avgb/w
Trace #>12Mbps Dist%
weuseaSoft-Actor-Critic(SAC)[16]basedRLalgorithm (Mbps)
withaPriority-ExperienceReplay(PER)buffer[30].SACis 3G/HSDPA 0.82 0% 20%
an off-policy algorithm that optimizes a stochastic policy NYULTE 3.86 0% 20%
similartoDeepDeterministicPolicyGradient(DDPG)[23]. 4GLTE 30.21 90% 10%
However,onekeydifferenceisthatSACusesanentropy- 5GLumous 520.66 100% 30%
regularizedframework,whichencouragesthepolicytoex- Synthetic 3.07 0% 20%
ploremorewhileexploitingwhatithaslearnedwithhigh Table1.DistributionofNetworkTraces
rewards.Thispreventsthepolicyfromconvergingprema-
turelytoabadlocaloptimum,whichisamajordrawbackof 4.2 VideoContentTraces
DDPGwhenappliedtoaproblemwithlargeactionspace.
TotrainourRLagentandevaluateitsperformance,weuti-
SACincorporatesentropyinEquation4intothereward
lizethreedistinctvideodatasets[7]fromdifferentgenres,
function,𝑅(𝑠 𝑡,𝑎 𝑡,𝑠 𝑡+1),updatingtheRLproblemasshown
eachvaryingintermsofscenecomplexityandmotionrate
inEquation3where𝜋∗referstothebestoptimalpolicyfor
andhenceencodedwithdifferentbitrateladders.AnAni-
theagent.
mation(Big-Buck-Bunny)haslessscenevariabilityinterms
of texture and motion rate and hence has a ladder that is
(cid:34) ∞ (cid:35) adequatelyrepresentedatlowerbitrates.WeuseTears-Of-
𝜋∗ =𝑎𝑟𝑔𝑚
𝜋
𝑎𝑥 𝜏𝐸
∼𝜋
∑︁ 𝑡−0𝛾𝑡 (𝑅(𝑠 𝑡,𝑎 𝑡,𝑠 𝑡+1)+𝛼𝐻(𝜋(·|𝑠 𝑡) (3) S ht ie ge hl ef ro cr ot mhe pl li ev xe i- ta yc tt hio an nm BBov Bie ang den hr ae sa as nit ec nh ca or da ic nt ger si cz hed emby
e
toaccommodatehigherbitrates.Finally,wehaveaSports
(Football)videowhichismorecomplexintermsofmotion
Ahigherentropyduringtrainingencouragesmoreran-
ratethantheothertwowithfasterandunpredictablescene
domness in training. The entropy 𝐻 of a policy 𝜋(·|𝑠 𝑡) is
movement.Suchavideowouldrequireamuchhigherset
computedusingthelogprobabilitydistribution,asdefined
ofbitraterepresentations.Thedetailsofresolution-bitrate
inEquation4.
mappingsforeachofthesevideosarepresentedinTable2.
AllvideoswereencodedusingH.264.
𝐻(𝜋(·|𝑠 𝑡)) = 𝐸 [−log𝜋(·|𝑠 𝑡)] (4)
𝑥 ∼𝑃
Bitrate(Kbps)
Resolution
Animation Movie Sports
The𝑄-functioninEquation5estimatestheexpectedre-
turnoftakingaparticularactioninastate.InSAC,weuse 144p 300 375 450
twoseparate𝑄-functionstoreducepositivebiasinthelearn- 360p 450 560 670
ingstepduetotheoverestimationof𝑄-values.SACconcur- 360p 600 750 900
rentlylearnsthepolicy𝜋 𝜃 andtwo𝑄-functions𝑄 𝜙 ,𝑄 𝜙 . 480p 800 1050 1250
1 2
480p 1400 1750 2100
720p 1900 2350 2800
(cid:34) ∞ ∞ (cid:35)
𝑄𝜋(𝑠,𝑎) =𝐸 𝜏∼𝜋 ∑︁ 𝛾𝑡𝑅(𝑠 𝑡,𝑎 𝑡,𝑠 𝑡+1)+𝛼∑︁ 𝛾𝑡𝐻(𝜋(·|𝑠 𝑡)) 17 02 80 0p p 2 34 50 00 0 3 40 30 00 0 3 56 20 00 0
𝑡=0 𝑡=1
1080p 4700 5800 7000
(5)
2K 5000 8000 9000
2K 8000 10000 12000
4 Evaluation
Table2.VideoContent-EncodingScheme
4.1 NetworkTraces
4.3 QualityofExperience
In the proposed system, each segment encompasses one
secondofvideo,whileeachchunkspans200milliseconds. The QoE of video streaming is an objective metric of the
Simulatedlivesessionshaveadurationof300seconds.We user’sstreamingsatisfactionrating.Thiscanbesufficiently
useacollectionof3G,LTE,4Gand5Gtraces[12,27–29,37] quantifiedusingEquation6.Whiletherewardfunctionin
fortrainingandtesting.Although3Gnetworksarenotas Equation2providesanumericalsignalateachstepindicating
commonas4GandLTE,theyareusefulintrainingtohelp how benificial or detrimental an action taken by agent is
theagentunderstandlow-bandwidthbehaviorsandhence towardsachievingitsgoal,theQoEisameasureoftheuser’s
usedonlyintrainingbutnottestingsimulations.Wealso overallsatisfactionwiththestreamingfortheentireviewing
buildacollectionofsynthetictracesthathavehighdegrees experience. However it should be noted that the reward
offluctuationforuseduringtesting. function is typically aligned with improving QoE where
7February14,2024, 15.00 Raman.A
action’sthatleadtohighervideoqualityandlowerlatency 4.4.1 Testing Simulation Results. We present Table 3
wouldberewardedmorepositivelyastheymorelikelyto whichdetailstheperformancemetricsforeachABRalgo-
enhancetheQoE.WedivideVMAFvalueby20togetthe rithm across all three video contents, providing insights
videoqualitylevel(0-5).ThisQoEformulaissimilartothe intohoweachalgorithm’seffectivenessvarieswithdifferent
LinearQoE[36]withtheaddedlatencyandspeedpenalties. typesofvideos.Whenwelookatthevideoqualitylevel,QoE,
Forourexperiments,weuse𝛼 =0.077,𝛽 =1.249,𝛾 =2.897, andenergyefficiency,thehigherthebetterwhileforbitrate,
𝜎 =1.249,𝜇 =0.771and𝜔 =1.436 datadownload,latency,freezing,andenergyconsumption
wepreferlowervalues.Forspeed,thecloserthevalueisto
default(1.0x),thebetterthescore.
𝑄𝑜𝐸 =𝛼
·∑︁𝑇 (cid:18)𝑣𝑚𝑎𝑓 𝑡(cid:19)
−𝛽
·∑︁𝑇
𝑟𝑡
𝑡
−𝛾 ·𝑟
𝑐
Quality,Bitrate&Smoothness:Wemeasurevideoqual-
20 ityasafunctionofVMAF.InTable3,wenotethatLL-GABR
𝑡=0 𝑡=0
(cid:205)𝑇 𝑙 hassufficientlyhighlevelsofvideoqualitycomparableto
−𝜎 · 𝑡 𝑇=0 𝑡 −𝜇·|1−𝑠 𝑡| (6) theotherbaselines,only1%−2%lessthanthehighestin
theAnimation andSports.IntheMovie video,thedropin
−𝜔 ·∑︁ 𝑇 (cid:18)|𝑣𝑚𝑎𝑓 𝑡 −𝑣𝑚𝑎𝑓 𝑡−1|(cid:19) qualityisaround8%whencomparedtoBDQandL2A,but
20
𝑡=2 we see that BDQ suffers from higher latency due to poor
speedcontrolandL2Ahas50%higherrebufferingduration
Additionally,tocalculatetheenergyefficiencyofvideo
amongalltheABRs.WealsonotethatLL-GABRisableto
streaming,weincorporateenergyconsumptionintoourQoE
achievethesecomparable(ifnothigh)levelsofperceptual
metrictoderiveameasureofQoEperunitofenergy,denoted
qualityeventhoughithasthelowestaveragebitrate(↓48%).
asQoE/Energy.Thismetriciscalculatedbydividingthetotal
Thisisduetotheagentselectingbitratedecisionsbasedthe
QoE by the total energy consumed during the streaming
VMAFvaluesinordertoachieveahighperceptualquality.
session.Thisenergyefficiencymetricenablesustobalance
It is also observed that LL-GABR has the lowest (best)
the trade-off between providing a high-quality streaming
qualitysmoothnessintheAnimationvideo,whileithasthe
experienceandmaintainingenergyconservation,whichis
secondlowestvaluesintheMovieandSportsvideoswhere
particularlyimportantformobiledevices.
Stallionhasthebestscores.
DataUsage:Wealsonotethatouralgorithmmanages
4.4 EvaluationResults to have the lowest data usage (↓ 35%) while maintaining
InFigure2,wepresentthenormalizedvaluesformetrics these high VMAF values. This can again be attributed to
suchasQoE,totalenergyconsumption,energyefficiency,data the LL-GABR’s strategy of selecting bitrate actions based
download volume, video quality, average latency, and total onVMAFandqualitylevels,resultinginhigh-qualityvideo
rebufferingduration.Tofacilitatecomparativeanalysis,we comparabletootherbenchmarkswithouthighdatausage.
scalethehighestvalueineachcategorytoascoreofone, Freezing&Latency:Whenwelookatfreezingandla-
providingaviewoftherelativeperformanceofLL-GABR tency,weseethatLL-GABRperformanceiscomparableto
againstotherABRalgorithms.Theseresultsarecompiled otherABRs.Thereisalessthanone-seconddifferencein
throughsimulationsthatapplythetestingtracesdetailedin latency when compared with LoL+, which is the current
Table1andthevideoencodingsspecifiedinTable2.Notably, state-of-the-art for low latency live streaming ABR. BDQ
LL-GABRundergoestrainingexclusivelywiththeAnimation hasthelowestfreezingvaluesforToSandSportsvideos,but
videobutistestedacrossallthreevideodatasets.Incontrast, this is the result of the agent always selecting the lowest
theBDQmodelrequiresindividualtrainingsessionsforeach playbackrate(0.90x),resultinginhighbufferlevelsandcon-
video. All tests are conducted within a Python 3-enabled sequentlyleadingtoa184%increaseinlatency.LL-GABRis
trace-drivenlive-streamingsimulator. abletobalancebufferlevelsbetteracrossallvideodatasets,
InSection4.4.1wegooverthedifferentmetricsweare maintainingbothlowfreezingandlatencyrates.
interestedinandcomparetheperformanceofLL-GABRwith EnergyConsumption:ByintegratingVMAFvalues(in-
theotherbaselineABRs.WeshallalsolookathowLL-GABR steadofbitrate)andenergyconsumptionintothereward
managesfluctuatingthroughputconditionsinSection4.4.2. functionofLL-GABR,weseethattheagenthaslearnedbe-
InSection4.4.3andSection4.4.4,weshallcoverthetraining haviorwhereitmakesbitratedecisionsbasedonthequality
performanceevaluationandhowadistributedSoft-Actor- levels, i.e., it does not select the highest bitrate if it does
Criticnetworkspeedsupthetrainingtimeandefficiency notsignificantlyimproveperceptualquality.Asaresultof
whichwecomparewiththeotherRL-basedABRi.e.BDQ.We usinglowerbitratesandconsequentlylowerdatadownload,
alsobrieflytalkaboutthecostintermsofCPUpercentage LL-GABRhasthelowestenergyconsumption(↓11%)among
for the training process and the energy cost of the ABR alltheABRs.Thisisduetodecreaseddataacquisitionand
modelitself.BothLL-GABR andBDQ arerunthreetimes localplaybackenergy.
withdifferentseedsettingsandtheaverageresultistaken.
8LL-GABR:EnergyEfficientLiveVideoStreamingusingReinforcementLearning February14,2024, 15.00
Quality Quality Data Bitrate Latency Freezing Energy Energy
ABR Speed QoE↑
level(0-5)↑ Smooth↓ dl(inMb)↓ (inMbps)↓ (sec)↓ (sec)↓ (kj)↓ Efficiency↑
LL-GABR 4.5±0.18 10.6±12.2 75.6±19.7 3.02±0.81 2.75±2.6 1.01±0.01 3.36±7.3 0.90±0.08 69.7±35.5 45.4±22.8
BDQ 4.60±0.18 16.67±15.7 165.04±40.99 6.05±1.44 5.47±2.1 1.00±0.01 3.77±5.14 1.18±0.10 54.71±42.75 28.99±22.41
LoL+ 4.20±0.63 12.52±9.92 95.51±65.0 3.37±2.36 1.98±1.8 1.01±0.02 4.19±7.93 0.96±0.21 51.19±46.19 30.36±28.85
Stallion 3.97±0.68 14.26±11.3 92.96±56.24 3.33±2.08 2.14±1.5 1.02±0.02 5.01±8.15 0.96±0.18 44.05±53.66 25.23±34.29
L2A 4.58±0.14 11.67±8.32 141.85±54.24 5.12±1.93 2.78±2.7 1.01±0.02 5.50±10.74 1.12±0.14 67.22±47.31 38.37±26.83
LL-GABR 3.61±0.20 4.74±8.03 74.49±29.99 2.36±0.30 2.72±2.14 1.01±0.02 3.52±7.68 0.82±0.04 55.34±43.79 43.67±26.07
BDQ 4.10±0.34 40.66±37.05 215.25±84.02 5.83±2.28 5.90±3.22 0.96±0.01 3.05±4.21 1.10±0.12 9.25±71.81 0.99±44.39
LoL+ 3.50±0.92 5.18±6.04 135.77±107.00 3.69±2.90 2.07±2.15 1.02±0.02 4.95±8.39 0.94±0.18 39.46±48.54 23.45±30.88
Stallion 3.26±0.93 3.96±5.58 135.56±96.59 3.67±2.61 2.27±1.71 1.02±0.02 5.69±8.74 0.94±0.16 39.23±48.35 22.68±30.44
L2A 4.10±0.32 14.20±11.67 208.93±96.99 5.70±2.62 4.09±5.97 1.02±0.03 9.00±18.53 1.07±0.15 40.31±74.49 23.31±42.66
LL-GABR 3.99±0.12 5.47±7.88 104.90±13.89 3.40±0.43 3.15±2.58 1.01±0.02 4.06±8.38 0.89±0.02 65.19±38.42 41.78±24.46
BDQ 3.77±0.55 38.27±35.83 136.82±28.82 4.19±0.89 18.97±1.13 0.90±0.00 0.51±1.51 0.98±0.06 4.33±64.28 1.24±39.36
LoL+ 3.53±0.86 6.65±7.64 128.67±109.90 3.96±3.40 2.00±2.02 1.01±0.02 4.14±8.43 0.92±0.18 48.51±53.90 29.31±35.24
Stallion 3.37±0.85 5.39±8.10 130.56±101.76 4.02±3.15 2.26±1.72 1.02±0.02 5.06±9.17 0.92±0.16 49.94±54.14 29.94±35.15
L2A 4.15±0.29 9.69±10.46 205.03±103.68 6.35±3.21 3.78±5.21 1.02±0.03 8.12±16.40 1.05±0.16 51.15±68.21 30.20±39.63
Table3.AverageResultsofallmetricsacrosstestingtracesfordifferentvideodatasets
Figure2.Testingresultsaveragesonalltracesacrossallvideos.
QoE&EnergyEfficiency:InSection4.3,wedefineQoE morethan20Mbpswhichismorethansufficienttostream
asalinearweightedcombinationofvideoquality,rebuffer- avideoatan8Mbpsbitrate,theABRendsupselectingthe
ing, freezing, smoothness, and speed. We also divide the highestbitrate.LL-GABR ontheotherhandtakesintoac-
QoEwiththenormalizedvalueoftotalenergyconsumption countboththeVMAFvaluesandenergyconsumptionwhen
toobtaintheQoEperunitenergyconsumption(orEnergy makingbitratedecisions.We,therefore,seethatLL-GABR
Efficiency).ForboththesemetricsweseethatLL-GABR,out- goesonlyupto5Mbpsandisstillabletoachievesimilar
performsalltheotherABRswithanaverageof44%increase VMAF values to LoL+. This also results in a considerably
inQoEand73%increaseinenergyefficiency. smallerenergyconsumptioninLL-GABRwhencomparedto
BDQinparticularsuffersfromaverylowQoEespecially LoL+.WealsoseemorefreezingeventsinLoL+asaconse-
fortheMovieandSportsvideoswhileitperformedcompara- quenceofselectinghigherbitrateswhileLL-GABRhasclose
tivelybetteronAnimation.Thisisbecausethesametraining tozerorebufferingevents.
hyperparametersusedinAnimationareusedfortheMovie
andSportsvideos.Individualhyperparametertuningand 4.4.3 TrainingPerformance: Wetrainadistributedvari-
trainingforeachtitlemightimprovetheoverallscoresand antoftheSoft-Actor-Criticnetworkwhichsignificantlyre-
performanceofBDQbutthisisnotapracticalsolutionfor ducestrainingtimeandnumberofiterationstoreachoptimal
anyvideoserviceproviderwhichhasseveralhundredsof rewardvalues.InTable4,weseehowtrainingtimedecreases
videotitles. whenweincreasethenumberofparallelworkersandwealso
compareitagainstBDQ.BDQtakescloseto8hourstocon-
4.4.2 Simulationonindividualtraces: InFigure3,we vergerewardstoanoptimalvaluewhileSACwith5parallel
haveanetworktracewithahighdegreeofbandwidthfluc- workerstakeslessthananhourandreachesconvergencein
tuation where we compare the performance of LoL+ and just1500episodes.Thismeansittakes5independentagents
LL-GABR.WenotethatbothABRsarequicktoadapttothe eachgoingthrough1500episodesworkingparalleltoeach
fluctuatingnetwork,droppingbitratetomanageablelevels othertocollectexperiences.
wheneverthereisadropinbandwidth.However,itshould
benotedthatLoL+selectsthehighestbitratewhenpossible. 4.4.4 Energy&ResourcecostofLL-GABR. Wenotethe
SinceLoL+doesnotconsiderperceptualvideoqualitywhen costofbothtraininganddeployingthemodelintermsof
makingbitratedecisionsandsincethebandwidthgoesupto energyconsumption,CPU,andmemoryusageinTable4
9
noitaminA
eivoM
stropSFebruary14,2024, 15.00 Raman.A
Training #Episodes MemoryUse Energy
ABR CPU% #Processes #Cores
Time(hrs) (forconvergence) (inGb) (inKj)
SAC-1 1.80 5000 88% 1 2 3.23 105
SAC-3 1.25 1666 240% 3 4 3.23 128
SAC-5 0.80 1000 300% 5 6 3.23 156
BDQ 7.80 50000 122% 1 2 3.98 900
Table4.TrainingCostMetrics
streamingenergyconsumption.Givenitsminimalimpact,
thisenergycostisnegligiblecomparedtothetotalenergy
requiredforstreaming,renderingitinconsequentialinthe
broadercontextofstreamingenergyexpenditures.
5 Conclusion
Inthispaper,wepresentLL-GABR,anRL-basedABRalgo-
rithmforlow-latencyvideostreamingonbattery-constrained
devicesthatmaximizestheperceptualvideoqualitywhile
simultaneouslyminimizingtotalenergyconsumption.We
utilizeaDistributedSoft-Actor-CriticmodeltotrainourRL
agenttomaximizetheuser’sQoE.Ourexperimentsusing
Figure3.Tracesimulationforafluctuatingnetwork.
real-worldandsyntheticnetworktracesshowthatLL-GABR
isabletooutperformtheSOTAbenchmarkswitha35%(↓)
TrainingCost:WeuseIntel’sRAPLinterfacetodirectly
decreaseindatausage,44%(↑)increaseinQoE,11%(↓)sav-
readtheCPUenergyconsumptionofthesystemwhilethe ings energy consumption and 73%(↑) increase in energy
modelistraining.Wereadtheenergy_ujfileateveryepisode efficiency.LL-GABRisabletoachievethesegainsbymain-
intervaltofindtheenergyinJoulesperepisode.Wealsoread taininghighlevelsofvideoqualitywhichismeasuredby
thevaluefortheCPUpercentageandmemorybeingused VMAFandlowlevelsoflatency&freezingvalueswhichare
whiletrainingusingthepythonpsutillibrary.Wecompare similartocurrentstate-of-the-artmodels.
these values for different iterations of SAC and BDQ. We Forfuturework,wewilllooktoapplytheLL-GABRon
notethatcostintermsofCPU%andenergyincreasesasthe theserversidetoandbuildamulti-agentABRtomanage
numberofcoresorparallelworkersincreases.BDQonthe energyconsumptionacrossmultipledevicesoperatingon
otherduetoitsmuchlargertrainingtimeusesabout6times thesamewirelessnetwork.Wealsohopetoinvestigatethe
as much energy as the SAC model. The CPU% for SAC-5 impactofdifferentvideocodeslikeH.265andAV1onmobile
andSAC-3isdividedamongthecoresthatareusedforeach energyconsumption.
worker,whichtranslatestoanaverageofaround50%/core
and60%/coreforSAC-5&SAC-3respectively. References
Itshouldbenotedthattrainingisperformedonlyonce [1] 2020.DASHIndustryForum. RetrievedOctober1,2022fromhttps:
andthetrainedmodelcanbeusedindefinitelyondifferent //dashif.org/
videos.Table3showsusthatLL-GABRsavesusaround0.1Kj [2] 2020. Per-Title Encode Optimization. Retrieved August 19,
2020fromhttps://netflixtechblog.com/per-title-encode-optimization-
ofenergyfora5-minutestreamingsession.Ifweconsideran
7e99442b62a2
averageviewingsessionas120minutesforafootballmatch,
[3] 2022.TwitchEncodingGuidelines. RetrievedNovember,2022from
thisresultsin2.4Kjofenergysavedanditwouldtakejust https://stream.twitch.tv/encoding/
65streamingsessionstooffsetthecostoftrainingLL-GABR [4] 2023. CiscoAnnualInternetReport(2018-2023). RetrievedOctober
usingSAC-5(156Kj). 8, 2021 from https://www.cisco.com/c/en/us/solutions/collateral/
executive-perspectives/annual-internet-report/white-paper-c11-
InferenceCost:Theenergyexpenditureforexecuting
741490.pdf
ourRLmodelonamobiledevicewasassessedbyconducting
[5] 2023. Ericsson Mobility Report, 2023. Retrieved August,
modelinferencesinisolationfromvideostreaming,withen- 2022 from https://www.ericsson.com/49dd9d/assets/local/reports-
ergyconsumptionmonitoredviaAndroid’sBatteryManager. papers/mobility-report/documents/2023/ericsson-mobility-report-
WeuseSamsungGalaxyA10andMotoroloOnedevicesfor june-2023.pdf
[6] 2023.TwitchTracker. https://twitchtracker.com/statistics
these experiments. Over a duration of five minutes, with
[7] 2023.XiphTestMedia. https://media.xiph.org/
inferences invoked every second, the model’s energy us-
[8] ChristosG.Bampis,ZhiLi,IoannisKatsavounidis,Te-YuanHuang,
age wasaround 0.2 Joules which isless than0.01% of the Chaitanya Ekanadham, and Alan C. Bovik. 2018. Towards
10LL-GABR:EnergyEfficientLiveVideoStreamingusingReinforcementLearning February14,2024, 15.00
Perceptually Optimized End-to-end Adaptive Video Streaming. [23] Timothy P. Lillicrap, Jonathan J. Hunt, Alexander Pritzel, Nico-
arXiv:1808.03898[eess.IV] las Heess, Tom Erez, Yuval Tassa, David Silver, and Daan Wier-
[9] AbdelhakBentaleb,MehmetN.Akcay,MayLim,AliC.Begen,and stra.2019. Continuouscontrolwithdeepreinforcementlearning.
RogerZimmermann.2022.CatchingtheMomentWithLoL+inTwitch- arXiv:1509.02971[cs.LG]
LikeLow-LatencyLiveStreamingPlatforms. IEEETransactionson [24] MayLim,MehmetN.Akcay,AbdelhakBentaleb,AliC.Begen,and
Multimedia24,2300–2314. https://doi.org/10.1109/TMM.2021.3079288 RogerZimmermann.2020. WhenTheyGoHigh,WeGoLow:Low-
[10] AbdelhakBentaleb,ChristianTimmerer,AliC.Begen,andRogerZim- LatencyLiveStreaminginDash.JswithLoL.InProceedingsofthe11th
mermann.2019. BandwidthPredictioninLow-LatencyChunked ACMMultimediaSystemsConference(Istanbul,Turkey)(MMSys’20).
Streaming.InProceedingsofthe29thACMWorkshoponNetworkand AssociationforComputingMachinery,NewYork,NY,USA,321–326.
OperatingSystemsSupportforDigitalAudioandVideo(Amherst,Mas- https://doi.org/10.1145/3339825.3397043
sachusetts)(NOSSDAV’19).AssociationforComputingMachinery, [25] TomaszLyko,MatthewBroadbent,NicholasRace,MikeNilsson,Paul
NewYork,NY,USA,7–13. https://doi.org/10.1145/3304112.3325611 Farrow,andSteveAppleby.2020.EvaluationofCMAFinLiveStream-
[11] NetflixTechnologyBlog.2020. VMAF:TheJourneyContinues. Re- ingScenarios.InProceedingsofthe30thACMWorkshoponNetwork
trievedSeptember15,2020fromhttps://netflixtechblog.com/vmaf- andOperatingSystemsSupportforDigitalAudioandVideo(Istanbul,
the-journey-continues-44b51ee9ed12 Turkey)(NOSSDAV’20).AssociationforComputingMachinery,New
[12] AyubBokani,MahbubHassan,SalilS.Kanhere,JunYao,andGarson York,NY,USA,21–26. https://doi.org/10.1145/3386290.3396932
Zhong.2016.ComprehensiveMobileBandwidthTracesfromVehic- [26] HongziMao,RaviNetravali,andMohammadAlizadeh.2017. Neu-
ularNetworks.InProceedingsofthe7thInternationalConferenceon ralAdaptiveVideoStreamingwithPensieve.InProceedingsofthe
MultimediaSystems(Klagenfurt,Austria)(MMSys’16).Association ConferenceoftheACMSpecialInterestGrouponDataCommunication
forComputingMachinery,NewYork,NY,USA,Article44,6pages. (LosAngeles,CA,USA)(SIGCOMM’17).AssociationforComputing
https://doi.org/10.1145/2910017.2910618 Machinery,NewYork,NY,USA,197–210. https://doi.org/10.1145/
[13] X.Chen,T.Tan,andG.Cao.2019.Energy-AwareandContext-Aware 3098822.3098843
VideoStreamingonSmartphones.In2019IEEE39thInternational [27] LifanMei,RunchenHu,HouweiCao,YongLiu,ZifanHan,FengLi,
ConferenceonDistributedComputingSystems(ICDCS).861–870. andJinLi.2020.RealtimemobilebandwidthpredictionusingLSTM
[14] GoogleDeepMind.[n.d.].Safety-firstAIforautonomousdatacentre neuralnetworkandBayesianfusion.ComputerNetworks182(2020),
coolingandindustrialcontrol. https://deepmind.google/discover/blog/ 107515. https://doi.org/10.1016/j.comnet.2020.107515
safety-first-ai-for-autonomous-data-centre-cooling-and-industrial- [28] Arvind Narayanan, Eman Ramadan, Rishabh Mehta, Xinyue Hu,
control/ QingxuLiu,RostandA.K.Fezeu,UdhayaKumarDayalan,Saurabh
[15] CraigGutterman,BraynFridman,TreyGilliland,YushengHu,andGil Verma,PeiqiJi,TaoLi,FengQian,andZhi-LiZhang.2021.Lumos5G
Zussman.2020.Stallion:VideoAdaptationAlgorithmforLow-Latency Dataset. https://doi.org/10.1145/3419394.3423629
VideoStreaming.InProceedingsofthe11thACMMultimediaSystems [29] HaakonRiiser,PaulVigmostad,CarstenGriwodz,andPålHalvorsen.
Conference(Istanbul,Turkey)(MMSys’20).AssociationforComputing 2013.CommutePathBandwidthTracesfrom3GNetworks:Analysis
Machinery,NewYork,NY,USA,327–332. https://doi.org/10.1145/ andApplications(MMSys’13).AssociationforComputingMachinery,
3339825.3397044 NewYork,NY,USA,114–118. https://doi.org/10.1145/2483977.2483991
[16] TuomasHaarnoja,AurickZhou,PieterAbbeel,andSergeyLevine.2018. [30] TomSchaul,JohnQuan,IoannisAntonoglou,andDavidSilver.2016.
SoftActor-Critic:Off-PolicyMaximumEntropyDeepReinforcement PrioritizedExperienceReplay. arXiv:1511.05952[cs.LG]
LearningwithaStochasticActor. arXiv:1801.01290[cs.LG] [31] KevinSpiteri,RameshSitaraman,andDanielSparacio.2018.FromThe-
[17] DanHorgan,JohnQuan,DavidBudden,GabrielBarth-Maron,Mat- orytoPractice:ImprovingBitrateAdaptationintheDASHReference
teoHessel,HadovanHasselt,andDavidSilver.2018. Distributed Player.InProceedingsofthe9thACMMultimediaSystemsConference
PrioritizedExperienceReplay. arXiv:1803.00933[cs.LG] (Amsterdam,Netherlands)(MMSys’18).AssociationforComputing
[18] Tianchi Huang, Chao Zhou, Rui-Xiao Zhang, Chenglei Wu, Xin Machinery,NewYork,NY,USA,123–137. https://doi.org/10.1145/
Yao,andLifengSun.2019.Comyco:Quality-AwareAdaptiveVideo 3204949.3204953
Streaming via Imitation Learning. CoRR abs/1908.02270 (2019). [32] K.Spiteri,R.Urgaonkar,andR.K.Sitaraman.2016. BOLA:Near-
arXiv:1908.02270 http://arxiv.org/abs/1908.02270 optimalbitrateadaptationforonlinevideos.InIEEEINFOCOM2016-
[19] JunchenJiang,VyasSekar,andHuiZhang.2012.ImprovingFairness, The35thAnnualIEEEInternationalConferenceonComputerCommuni-
Efficiency,andStabilityinHTTP-BasedAdaptiveVideoStreaming cations.1–9.
withFESTIVE(CoNEXT’12).AssociationforComputingMachinery, [33] LiSun,RamanujanK.Sheshadri,WeiZheng,andDimitriosKout-
NewYork,NY,USA,97–108. https://doi.org/10.1145/2413176.2413189 sonikolas.2014.ModelingWiFiActivePower/EnergyConsumptionin
[20] NuowenKan,ChenglinLi,CaiyiYang,WenruiDai,JunniZou,and Smartphones.In2014IEEE34thInternationalConferenceonDistributed
HongkaiXiong.2021. Uncertainty-AwareRobustAdaptiveVideo ComputingSystems.41–51. https://doi.org/10.1109/ICDCS.2014.13
StreamingwithBayesianNeuralNetworkandModelPredictiveCon- [34] LiyangSun,TongyuZong,SiquanWang,YongLiu,andYaoWang.
trol.InProceedingsofthe31stACMWorkshoponNetworkandOperating 2021. TightropeWalkinginLow-LatencyLiveStreaming:Optimal
SystemsSupportforDigitalAudioandVideo(Istanbul,Turkey)(NOSS- JointAdaptationofVideoRateandPlaybackSpeed.InProceedings
DAV’21).AssociationforComputingMachinery,NewYork,NY,USA, ofthe12thACMMultimediaSystemsConference(Istanbul,Turkey)
17–24. https://doi.org/10.1145/3458306.3458872 (MMSys’21).AssociationforComputingMachinery,NewYork,NY,
[21] TheoKaragkioules,RufaelMekuria,DirkGriffioen,andArjenWage- USA,200–213. https://doi.org/10.1145/3458305.3463382
naar.2020.OnlineLearningforLow-LatencyAdaptiveStreaming.In [35] YiSun,XiaoqiYin,JunchenJiang,VyasSekar,FuyuanLin,Nanshu
Proceedingsofthe11thACMMultimediaSystemsConference(Istanbul, Wang,TaoLiu,andBrunoSinopoli.2016. CS2P:ImprovingVideo
Turkey)(MMSys’20).AssociationforComputingMachinery,New BitrateSelectionandAdaptationwithData-DrivenThroughputPre-
York,NY,USA,315–320. https://doi.org/10.1145/3339825.3397042 diction.InProceedingsofthe2016ACMSIGCOMMConference(Floria-
[22] S.Kim,H.Oh,andC.Kim.2018.eff-HAS:Achievehigherefficiency nopolis,Brazil)(SIGCOMM’16).AssociationforComputingMachinery,
indataandenergyusageondynamicadaptivestreaming.Journalof NewYork,NY,USA,272–285. https://doi.org/10.1145/2934872.2934898
CommunicationsandNetworks20,3(2018),325–342. [36] Bekir Oguzhan Turkkan, Ting Dai, Adithya Raman, Tevfik Kosar,
ChangyouChen,MuhammedFatihBulut,JaroslawZola,andDaby
11February14,2024, 15.00 Raman.A
Sow.2022. GreenABR:Energy-AwareAdaptiveBitrateStreaming InternationalSymposiumonAWorldofWireless,MobileandMultimedia
withDeepReinforcementLearning.InProceedingsofthe13thACM Networks(WoWMoM).1–9.
MultimediaSystemsConference(Athlone,Ireland)(MMSys’22).As- [39] FrancisY.Yan,HudsonAyers,ChenzhiZhu,SadjadFouladi,James
sociationforComputingMachinery,NewYork,NY,USA,150–163. Hong,KeyiZhang,PhilipLevis,andKeithWinstein.2020.Learning
https://doi.org/10.1145/3524273.3528188 insitu:arandomizedexperimentinvideostreaming.In17thUSENIX
[37] J.vanderHooft,S.Petrangeli,T.Wauters,R.Huysegems,P.R.Alface, SymposiumonNetworkedSystemsDesignandImplementation(NSDI
T.Bostoen,andF.DeTurck.2016.HTTP/2-BasedAdaptiveStreaming 20).USENIXAssociation,SantaClara,CA,495–511. https://www.
ofHEVCVideoOver4G/LTENetworks.IEEECommunicationsLetters usenix.org/conference/nsdi20/presentation/yan"https://www.usenix.
20,11(2016),2177–2180. org/system/files/nsdi20-paper-yan.pdf".
[38] B.Varghese,G.Jourjon,K.Thilakarathne,andA.Seneviratne.2017.
e-DASH:Modellinganenergy-awareDASHplayer.In2017IEEE18th
12